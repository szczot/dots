(window.webpackChunk=window.webpackChunk||[]).push([[721,806],{51897:(e,t,i)=>{var a=i(25682),s="chrome-extension://__MSG_@@extension_id__/",n="moz-extension://__MSG_@@extension_id__/",r=window.GR_RESOURCE_ROOT||s,o=window.GR_RESOURCE_ROOT||n;e.exports={__css:a.toString().replace(new RegExp(s,"g"),r).replace(new RegExp(n,"g"),o),...a.locals}},16037:(e,t,i)=>{"use strict";i.d(t,{t:()=>R});var a=i(40327),s=i(32952),n=i(95300),r=i(24209),o=i(80900),l=i(77176),c=i(85985),d=i(77150),p=i(50628),m=i(40273),h=i(90361),u=i(36991);var g=i(34311),v=i(62337),f=i(95384),w=i(93508),_=i(63919),b=i(30067),y=i(74850);class E{constructor(){this._mapByHighlightId=new Map,this._mapByAlertId=new Map,this._highlightDataChanged=new s.xQ}_getVisualization(e){const t=this._mapByHighlightId.get(e);return null==t?void 0:t.visualization}getByAlertId(e){const t=this._mapByAlertId.get(e)||new Set;return Array.from(t).map((e=>this._mapByHighlightId.get(e))).filter((e=>!!e))}get(e){return this._mapByHighlightId.get(e)}has(e){return this._mapByHighlightId.has(e)}set(e,t){this._mapByHighlightId.set(e,t);const i=this._mapByAlertId.get(t.alertId)||new Set;i.add(e),this._mapByAlertId.set(t.alertId,i),this._highlightDataChanged.next(e)}delete(e){const t=this._mapByHighlightId.get(e);if(t){const i=this._mapByAlertId.get(t.alertId);void 0!==i&&(i.delete(e),0===i.size&&this._mapByAlertId.delete(t.alertId)),this._mapByHighlightId.delete(e)}this._highlightDataChanged.next(e)}forEach(e){this._mapByHighlightId.forEach(e)}getHighlightVisualization(e){return this._highlightDataChanged.pipe((0,c.h)((t=>t===e)),(0,l.U)((()=>this._getVisualization(e))),(0,w.O)(this._getVisualization(e)))}}class k{constructor(e,t,i,a,s=(()=>_.E9.zero),n=y.Y.create(k.name)){this._denaliHighlights=e,this._getFluidHighlights=t,this._getTextMap=i,this._getParentRect=a,this._getParentScroll=s,this._log=n}register(e,t,i,a){if(null!==e){if(this._denaliHighlights.has(e))return this.update(e,t,i,a);{const s=new f.Fd(e,t,this._getFluidHighlights(),this._getParentRect,this._getParentScroll),n={id:e,alertId:a.alertId,mark:s,visualization:i};this._denaliHighlights.set(e,n);const r=this._getTextMap().getPlainText();return this._getFluidHighlights().addHighlight(e,(0,b.rX)((0,b.mp)(s.range),r),a),n}}return null}remove(e){this._denaliHighlights.has(e)?(this._getFluidHighlights().removeHighlights([e]),this._denaliHighlights.delete(e)):this._log.warn(`can't remove mark #${e}, doesn't exist`)}update(e,t,i,a){const s=this._denaliHighlights.get(e);if(s){this._denaliHighlights.set(e,{...s,visualization:i});const n=this._getTextMap().getPlainText();return this._getFluidHighlights().updateHighlight(e,(0,b.rX)(t.meta.range(),n),a),s}return this._log.warn("cannot update not existing highlight",e),null}clearAll(){this._denaliHighlights.forEach((e=>{this._getFluidHighlights().removeHighlights([e.id])}))}}var C=i(55073),S=i(5817),A=i(25938),I=i(64450),M=i(59443),x=i(24645),L=i(45586),T=i(22232),F=i(95574),V=i(5114),P=i(95195);class R{constructor(e,t,i,a,o,d,p=y.Y.create(R.name),m,h){this._highlights=e,this._textObserver=t,this._replacementService=i,this._layout=a,this._scroller=o,this._selectedHighlightsTracker=d,this._log=p,this._requestAwaitService=m,this._formattingService=h,this._subs=new L.w.Keeper,this._disposed=!1,this._alertsData=new E,this._highlightUpdater=new k(this._alertsData,(()=>this._highlights),(()=>this._textObserver.getTextSource()),(()=>{const e=this._layout.textField.rect.getApproximate();return v.Pf.create({...e.client,...e.size})}),(()=>this._layout.textField.scroll.getApproximate())),this.highlightHoverProvider={getHoveredStateBehavior:e=>this._alertsData.getHighlightVisualization(e).pipe((0,l.U)((e=>e&&e.type===f.sO.Change.VisualState.Type.highlighted?{[f.sO.Change.VisualState.Source.sidebar]:g.pc.hovered_needs_attention,[f.sO.Change.VisualState.Source.text]:g.pc.hovered,[f.sO.Change.VisualState.Source.api]:g.pc.none}[e.source]:g.pc.none)))},this._updateContentsBuffer=new s.xQ,this._flushUpdater=new s.xQ,this._echoChanges=new s.xQ,this.changes=r.T(this._echoChanges,this._textObserver.contentChanges.async.pipe((0,c.h)((e=>e.changes.length>0)),(0,l.U)((({deltaChange:e})=>e)))),this.getContents=(e,t)=>{if(this._log.trace(`getContents, ${e}, ${t}`),this._formattingService){const i=this._textObserver.getTextSource().getRichText();return A.RI.unsafeRes(void 0!==e?i.slice(e,void 0!==t?e+t:void 0):i)}{const i=void 0!==e?this.getText().slice(e,void 0!==t?e+t:void 0):this.getText();return A.RI.resFromText(i)}},this.activeMarks=new n.X(V.none),this.contentUpdated=new s.xQ,this.hoveredMarks=new n.X(V.none),this.textChangedAfterPaste=new s.xQ,this.activeWord=new n.X(V.none),this.clickedWord=new n.X(V.none),this.ongoingSelection=new n.X(!1),this._log.info(`${R.name} created`),this._subs.push(this._subscribeToContentUpdates(),this._subscribeToSelectedHighlight())}pushChanges(e,t){this._log.trace("pushChanges",{change:e,source:t}),A.RI.isFlush(e)?this._flushUpdater.next():A.RI.isReset(e)?u.s.deltaEq.equals(e.delta,this.getContents().delta)?this._echoChanges.next(e):this._log.warn("Got unknown reset"):this._updateContents(e.delta,t)}getText(){return this._log.trace("getText"),this._formattingService?(0,C.l)(this._textObserver.getTextSource().getRichText(),""):this._textObserver.getTextSource().getPlainText()}getTextLength(){return this._log.trace("getTextLength"),this.getText().length}flushChanges(){this._log.trace("flushChanges")}getCursor(){return this._log.trace("getCursor"),M.Y1.empty}setCursor(e,t,i){return this._log.trace("setCursor",{_index:e,_length:t,_source:i}),P.F2(void 0)}getLastPossibleCursorPosition(){return this._log.trace("getLastPossibleCursorPosition"),0}_doMarkAction(e){const t=g.y$.Id.create(e.id),i=e.meta.capiAlertId;switch(e.action){case x.v.Change.ActionType.create:const a=this._highlightUpdater.register(t,e,e.meta.visualState,{alertId:i,highlightId:t,alertDisplayType:e.meta.extensionDisplayType});return(null==a?void 0:a.mark)||null;case x.v.Change.ActionType.update:const s=this._highlightUpdater.update(t,e,e.meta.visualState,{alertId:i,highlightId:t,alertDisplayType:e.meta.extensionDisplayType});return(null==s?void 0:s.mark)||null;case x.v.Change.ActionType.remove:return this._highlightUpdater.remove(t),null;default:(0,T.vE)(e)}}changeMarks(e){return this._disposed?(this._log.debug("changeMarks called after disposed, returning empty result"),x.v.Change.Result.getEmpty()):(this._log.trace("changeMarks",{rawMarks:e}),e.reduce(((e,t)=>{switch(t.action){case x.v.Change.ActionType.create:e.created.set(t.id,P.ij(new Error("Cannot create mark"))(this._doMarkAction(t)));break;case x.v.Change.ActionType.update:e.updated.set(t.id,P.ij(new Error("Cannot update mark"))(this._doMarkAction(t)));break;case x.v.Change.ActionType.remove:this._doMarkAction(t),e.removed.set(t.id,P.F2(void 0))}return e}),x.v.Change.Result.getEmpty()))}scrollToMark(e,t){return this._log.trace("scrollToMark",{mark:e,opts:t}),this._scroller.scrollToMark(e,t)}_subscribeToContentUpdates(){return this._updateContentsBuffer.pipe((0,d.R)((()=>(0,r.T)((0,o.H)((0,S.Xd)(20)),this._flushUpdater).pipe((0,p.P)()))),(0,c.h)((e=>e.length>0)),(0,l.U)((e=>e.reduce(((e,t)=>e.compose(t)),new I.i)))).subscribe((e=>{const t=this._replacementService.performBatchReplacements((i=e,i.reduce((({actions:e,index:t},i)=>{const a=e[0];return u.s.isInsertString(i)?(e.unshift({pos:{start:t,end:t},value:i.insert}),{actions:e,index:t}):u.s.isInsertEmbed(i)?{actions:e,index:t+1}:u.s.isRetain(i)?{actions:e,index:t+i.retain}:u.s.isDelete(i)?(a&&a.pos.start===a.pos.end&&a.pos.end===t?a.pos={...a.pos,end:a.pos.end+i.delete}:e.unshift({pos:{start:t,end:t+i.delete},value:""}),{actions:e,index:t+i.delete}):void(0,h.vE)(i)}),{actions:[],index:0}).actions.reduce(((e,t)=>(e.length&&e[e.length-1].value&&e[e.length-1].pos.start===t.pos.start?e[e.length-1].value=`${t.value}${e[e.length-1].value}`:e.push(t),e)),[]))).then((()=>{const t=(e=>e.reduce((({formattings:e,index:t},i)=>m.m.hasFormatting(i)?u.s.isInsertString(i)?(e.push({range:{start:t,end:"\n"===i.insert?t:t+i.insert.length},formatting:i.attributes}),{formattings:e,index:t+i.insert.length}):u.s.isInsertEmbed(i)?{formattings:e,index:t+1}:u.s.isRetain(i)?(e.push({range:{start:t,end:t+i.retain},formatting:i.attributes}),{formattings:e,index:t+i.retain}):{formattings:e,index:t}:u.s.isInsertString(i)?{formattings:e,index:t+i.insert.length}:u.s.isInsertEmbed(i)?{formattings:e,index:t+1}:u.s.isRetain(i)?{formattings:e,index:t+i.retain}:u.s.isDelete(i)?{formattings:e,index:t}:void(0,h.vE)(i)),{formattings:[],index:0}).formattings)(e);this._formattingService&&t.length&&(this._log.trace("Have formattings, applying",t),t.forEach((e=>{this._formattingService&&this._formattingService.apply(e.range,e.formatting)})))}),(()=>{this._log.warn("Failed to apply batch replacements")}));var i;this._requestAwaitService&&this._requestAwaitService.addRequest(t)}))}_subscribeToSelectedHighlight(){return this._selectedHighlightsTracker.pipe((0,l.U)((e=>(0,a.pipe)(V.some(e),V.map((e=>e.map((e=>{var t;return null===(t=this._alertsData.get(e))||void 0===t?void 0:t.mark})).filter((e=>Boolean(e))))))))).subscribe((e=>{this.activeMarks.next(e)}))}_updateContents(e,t){this._updateContentsBuffer.next((0,C.AQ)(e))}getSelectionRect(){throw this._log.trace("getSelectionRect"),Error("not implemented")}setContents(e){this._log.trace("setContents",{_value:e})}getHTML(){return this._log.trace("getHTML"),""}getPossibleCursorPosition(e,t){return this._log.trace("getPossibleCursorPosition",{_x:e,_y:t}),F.vM((()=>{throw new Error("Not implemented")}))}dispose(){this._highlightUpdater.clearAll(),this._subs.dispose(),this._log.info(`${R.name} disposed`),this._disposed=!0}}},18126:(e,t,i)=>{"use strict";i.d(t,{f:()=>o});var a=i(95300),s=i(2844),n=i(66310),r=i(34311);class o{constructor(e){this._originalHoverProvider=e,this._assistantHoverProviderSbj=new a.X(null)}setAssistantHover(e){this._assistantHoverProviderSbj.next(e)}removeAssistantHover(){this._assistantHoverProviderSbj.next(null)}getHoveredStateBehavior(e){const t=this._originalHoverProvider.getHoveredStateBehavior(e);return this._assistantHoverProviderSbj.pipe((0,n.w)((i=>null==i?t:(0,s.aj)(t,i.getHoveredStateBehavior(e),((e,t)=>t!==r.pc.none?t:e)))))}}},8467:(e,t,i)=>{"use strict";i.d(t,{t:()=>c});var a=i(40327),s=i(44586),n=i(30067),r=i(95384),o=i(95574),l=i(95195);function c({scrollToMarkRect:e,scrollToRange:t}){return{scrollToMark:(i,c)=>new s.y((s=>(0,a.pipe)(r.Fd.getMarkRect(i),o.L9((()=>(t((0,n.mp)(i.range)),r.Fd.getMarkRect(i)))),l.g_((()=>{s.error(new Error(`Cannot get mark's rect: ${i.id}`))}),(t=>{s.next(void 0),e(t,c)})))))}}},68600:(e,t,i)=>{"use strict";i.r(t),i.d(t,{AssistantController:()=>wn,AssistantControllerInjectedParams:()=>a.AssistantControllerInjectedParams,AssistantService:()=>xn,AssistantServiceInjectedParams:()=>s.AssistantServiceInjectedParams,LocalAssistantHighlightCollection:()=>n.c});var a={};i.r(a),i.d(a,{e:()=>wn});var s={};i.r(s),i.d(s,{e:()=>xn});var n=i(45662),r=i(40327),o=i(27378),l=i(74850),c=i(2706),d=i(41398),p=i(77176),m=i(93508),h=i(46861),u=i(17771),g=i(57050),v=i(26328),f=i(75003),w=i(40018),_=i(4390),b=i(19751),y=i(16118),E=i(85985),k=i(92843),C=i(83078),S=i(5114);var A,I=i(90361),M=i(66896),x=i(14601),L=i(76974),T=i(28043),F=i(2844),V=i(34383),P=i(15215),R=i(79471),O=i(71249),N=i(73975);function D(e){return f.a.isReadersAttention(e)||f.a.isReadersAttentionHelp(e)}function U(e){return D(e)||f.a.isReadersAttentionOnboarding(e)}!function(e){e.ok="ok",e.warning="warning",e.feedback="feedback"}(A||(A={}));class B{constructor(e,t,i,a,s,n,o){this._readersAttentionFeature=e,this._checklistItemsCollection=t,this._assistantLayoutVM=i,this._alertsCollection=a,this._alertsReader=s,this._assistantLensState=n,this._takeawayAlertChanges=o,this._subs=new x.w,this._viewCaller=S.none,this.predictionCardState=(0,r.pipe)(this._readersAttentionFeature,S.fold((()=>L.of(S.none)),(e=>e.useDeprecatedChecklist?function(e){return F.aj([e.messages,e.checklistDeprecated,e.heatmapReceived]).pipe(E.h((([e,t,i])=>S.some(e)&&S.some(t)&&i)),p.U((([e,t])=>(0,r.pipe)(u.g(S.option)(e,t),S.map((([e,t])=>({message:e.predictionMessage,icon:t.every((e=>e.checked))?A.ok:A.warning,alertsCount:S.none})))))),m.O(S.none))}(e):function(e,t,i){return F.aj([e.messages,e.heatmapReceived,t]).pipe(E.h((([e,t,i])=>S.some(e)&&t&&i.size>0)),p.U((([e,t,a])=>(0,r.pipe)(e,S.map((e=>({message:e.predictionMessage,icon:Array.from(a.values()).every(j)?A.ok:Array.from(a.values()).every((e=>(0,r.pipe)(e.suggestionsView,S.map(function(e){return t=>(0,r.pipe)(t.alertIds,(0,v.UI)((0,g.ls)(e.getById,S.filter((e=>w.bZ.isTakeaway(e)&&e.takeawayIsLikelyToBeRead&&S.isNone(e.takeawayFeedback))))),O.yW(S.isSome))}(i)),S.getOrElse((()=>S.isSome(e.successView)||e.emptyView.checked)))))?A.feedback:A.warning,alertsCount:S.some(G(a))})))))),m.O(S.none))}(e,this._checklistItemsCollection,this._alertsReader)))),this._subs.add(this._handleHeatmapVisibilityAndNavigationTracking()),this._subs.add(this._trackChecklistItemExpand()),(0,r.pipe)(this._readersAttentionFeature,C.bw((e=>{this._subs.add(function(e,t){const i=l.Y.create("TakeawaysFeedbackTracking");return e.subscribe((e=>{Array.from(e.changed.values()).forEach((e=>{(0,r.pipe)(u.Y(S.option)({rawId:(0,r.pipe)(e,w.bZ.getRawId),feedback:e.takeawayFeedback}),C.bw((({rawId:a,feedback:s})=>{i.debug(`Feedback "${s}" stored for alert #${e.id} [rawId: ${a}]`),t.registerFeedback(a,s)})))})),Array.from(e.removed.values()).forEach((e=>{(0,r.pipe)(e,w.bZ.getRawId,C.bw((a=>{i.debug(`Removed feedback for alert #${e.id} [rawId: ${a}]`),t.deleteFeedback(a)})))}))}))}(this._takeawayAlertChanges,e.takeawaysFeedbackStore))})))}open(e){(0,r.pipe)(this._readersAttentionFeature,C.bw((t=>{this._viewCaller=S.some(e),t.seenReadersAttentionOnboarding?this._assistantLayoutVM.pushActiveView({type:f.a.Type.readersAttention,caller:e}):(this._assistantLayoutVM.pushActiveView({type:f.a.Type.readersAttentionOnboarding,caller:e}),this._trackOnOnboardingShow(e))})))}getStarted(){(0,r.pipe)(this._readersAttentionFeature,C.bw((e=>{e.markReadersAttentionOnboardingAsSeen()})));const e=(0,r.pipe)(this._viewCaller,S.getOrElse((()=>({type:f.a.ReadersAttention.Caller.Type.navigation}))));this._assistantLayoutVM.replaceActiveView({type:f.a.Type.readersAttention,caller:e}),this._trackOnGetStarted(e)}get useDeprecatedChecklist(){return(0,r.pipe)(this._readersAttentionFeature,S.fold(g.W8,(e=>e.useDeprecatedChecklist)))}showHelp(e){this._assistantLayoutVM.pushActiveView({type:f.a.Type.readersAttentionHelp,caller:e}),this._trackOnShowHelp(e)}dispose(){U(this._assistantLayoutVM.activeView.get())&&(0,r.pipe)(this._readersAttentionFeature,C.bw((e=>e.heatmapVisible.set(!1)))),D(this._assistantLayoutVM.activeView.get())&&this._trackOnReadersAttentionHide(),this._subs.unsubscribe()}_handleHeatmapVisibilityAndNavigationTracking(){return this._assistantLayoutVM.activeView.pipe(T.x(((e,t)=>e.type===t.type)),m.O(null),y.G()).subscribe((([e,t])=>{(0,r.pipe)(this._readersAttentionFeature,C.bw((e=>{U(t)&&!e.heatmapVisible.get()?e.heatmapVisible.set(!0):!U(t)&&e.heatmapVisible.get()&&e.heatmapVisible.set(!1)}))),!f.a.isReadersAttention(t)||e&&f.a.isReadersAttentionHelp(e)?!D(t)&&e&&D(e)&&this._trackOnReadersAttentionHide():this._trackOnReadersAttentionShow(t.caller)}))}_trackChecklistItemExpand(){return this._assistantLensState.pipe(p.U((e=>(0,r.pipe)(S.fromPredicate(R.nL.hasItems)(e),S.map(R.nL.Prism.getLens().get),S.filter((e=>e.id===M.R.SpecialId.PredictionTakeaways)),S.chain(R.In.getActiveItemOfType(P.d.isChecklistItem)),S.map((e=>{return{id:(t=e.id,i=M.R.SpecialId.PredictionTakeaways,V.T.Id.create(t.substr(i.length+1)||t)),title:(0,r.pipe)(e.itemMeta.miniTitle,S.getOrElse((()=>e.itemMeta.title))),checked:H(e),numAlerts:P.d.isChecklistItemWithAlerts(e)?e.alerts.length:0};var t,i}))))),T.x(S.getEq(N.Uz((e=>e.id))(N.yv)).equals),p.U(S.getOrElse(g.gn)),E.h(I.fQ)).subscribe((e=>(0,r.pipe)(this._readersAttentionFeature,S.filter((e=>!e.useDeprecatedChecklist)),C.bw((t=>t.tracking.onChecklistItemExpand(e))))))}_trackOnReadersAttentionShow(e){(0,r.pipe)(this._readersAttentionFeature,S.chain((e=>(0,r.pipe)(u.g(S.option)(e.messages.get(),this._getChecklistInfo()),S.map((t=>({feature:e,predictionMessage:t[0].predictionMessage,checklistInfo:t[1]})))))),C.bw((({feature:t,predictionMessage:i,checklistInfo:a})=>{t.tracking.onOpen(a,i,this._getNumAlerts(),e)})))}_trackOnReadersAttentionHide(){(0,r.pipe)(this._readersAttentionFeature,S.chain((e=>(0,r.pipe)(this._getChecklistInfo(),S.map((t=>({feature:e,checklistInfo:t})))))),C.bw((({feature:e,checklistInfo:t})=>{e.tracking.onClose(t,this._getNumAlerts())})))}_getChecklistInfo(){return(0,r.pipe)(this._readersAttentionFeature,S.chain((e=>e.useDeprecatedChecklist?e.checklistDeprecated.get():function(e){const t=Array.from(e.values()).sort(((e,t)=>e.rank-t.rank));return(0,r.pipe)(t.map((e=>({checked:j(e),message:(0,r.pipe)(e.suggestionsView,C.vx(e.successView),S.map((e=>(0,r.pipe)(e.miniTitle,S.getOrElse((()=>e.title))))),S.getOrElse((()=>(0,r.pipe)(e.emptyView.miniTitle,S.getOrElse((()=>e.emptyView.title))))))}))),v.nI)}(this._checklistItemsCollection.get()))))}_trackOnOnboardingShow(e){(0,r.pipe)(this._readersAttentionFeature,S.chain((e=>(0,r.pipe)(e.messages.get(),S.map((({predictionMessage:t})=>({feature:e,predictionMessage:t})))))),C.bw((({feature:t,predictionMessage:i})=>{t.tracking.onOnboardingShow(i,e)})))}_trackOnGetStarted(e){(0,r.pipe)(this._readersAttentionFeature,S.chain((e=>(0,r.pipe)(e.messages.get(),S.map((({predictionMessage:t})=>({feature:e,predictionMessage:t})))))),C.bw((({feature:t,predictionMessage:i})=>{t.tracking.onOnboardingGetStartedClick(i,e)})))}_trackOnShowHelp(e){(0,r.pipe)(this._readersAttentionFeature,C.bw((t=>{t.tracking.onHelpScreenShow(e)})))}_getNumAlerts(){return(0,r.pipe)(this._alertsCollection.get(),_.p.reduce({takeaway:0,nonTakeaway:0},((e,t)=>{const i=w.bZ.isTakeaway(t.alert),a=w.bZ.belongsToPredictionTakeaways(t.alert)&&!i;return{takeaway:e.takeaway+(i?1:0),nonTakeaway:e.nonTakeaway+(a?1:0)}})))}}function H(e){return P.d.isChecklistItemWithAlerts(e)&&"single"===e.viewKind||P.d.isChecklistItemEmpty(e)&&e.itemMeta.checked}function j(e){return S.isNone(e.suggestionsView)&&(S.isSome(e.successView)||e.emptyView.checked)}function G(e){return(0,r.pipe)(Array.from(e.values()),O.u4(0,((e,t)=>e+(0,r.pipe)(t.suggestionsView,S.map((e=>e.alertIds.length)),S.alt((()=>(0,r.pipe)(t.successView,S.map((()=>1))))),S.getOrElse((()=>0))))))}var Z=i(79921),W=i(19217);const q=({message:e,emoji:t,emojiId:i,icon:a,iconPartName:s})=>o.createElement("div",{className:W.insight},t&&i&&o.createElement("div",{className:W.insight__inline_icon},o.createElement(Z.dy,{unicodeHexArray:[i],unicodeLiteral:t})),a&&o.createElement("div",{className:W.insight__inline_icon,"data-grammarly-part":s},a),o.createElement("div",{className:W.insight__inline_text},e));var z=i(53112);const Y=()=>o.createElement("svg",{width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg"},o.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M8 16C12.4183 16 16 12.4183 16 8C16 3.58172 12.4183 0 8 0C3.58172 0 0 3.58172 0 8C0 12.4183 3.58172 16 8 16Z",fill:z.Z.red50}),o.createElement("path",{d:"M8.94827 4H7.05196L7.22242 10.1108H8.78208L8.94827 4ZM8.00225 12.8381C8.5477 12.8381 9.02071 12.3821 9.02498 11.8153C9.02071 11.2571 8.5477 10.8011 8.00225 10.8011C7.43975 10.8011 6.97526 11.2571 6.97952 11.8153C6.97526 12.3821 7.43975 12.8381 8.00225 12.8381Z",fill:z.Z.neutral0}));var K,$=i(46547),Q=i(88326),X=i(94793),J=i(3656),ee=i(4680),te=i(18208),ie=i(5739),ae=i(98029);!function(e){e.hidden="hidden",e.zero="zero",e.visible="visible"}(K||(K={}));const se=({predictionsVM:e})=>ee.UI.mount(de,e.previewFlow),ne=ee.UI.Grid.make((({slots:e})=>o.createElement("div",{className:ae.predictions},o.createElement("div",{className:ae.predictions__header},"Predictions"),e.children))),re=({children:e,count:t,dataPartName:i})=>o.createElement($.Z,{kind:"assistant-priority-lens",dataPartName:i,marginBottom:"12px"},o.createElement("div",{className:ae.predictions__card},e,t>0&&o.createElement("div",{className:ae.counterContainer},o.createElement(J.CL,null,t)))),oe=ee.UI.Node.make((({state:e,notify:t})=>o.createElement(Q.M,{clickHandler:t("select")},o.createElement(ie.F.Fragment,null,e.pipe(p.U((e=>o.createElement(re,{count:e.alertsCount,dataPartName:"emogenie-prediction-card"},o.createElement(q,{key:"tone",message:"off"===e.emotion.brandToneLabel?o.createElement(o.Fragment,null,"May sound ",o.createElement("span",{className:ae.predictions__off_brand},"off-brand")):`Sounds ${e.emotion.name}`,emoji:e.emotion.emoji,emojiId:e.emotion.emojiId}))))))))),le=ee.UI.Node.make((({state:e,notify:t})=>o.createElement(Q.M,{clickHandler:t("select")},o.createElement(ie.F.Fragment,null,e.pipe(p.U((e=>o.createElement(re,{count:e.alertsCount,dataPartName:"readers-attention-prediction-card"},o.createElement(q,{key:"readersAttention",message:te.kC(e.message),icon:e.icon===A.ok?o.createElement(X.JO.ValidationOk,{width:16}):e.icon===A.warning?o.createElement(Y,null):e.icon===A.feedback?o.createElement(X.JO.Megaphone,{width:16}):(0,I.vE)(e.icon),iconPartName:e.icon===A.ok?"icon-ok":e.icon===A.warning?"icon-warning":e.icon===A.feedback?"icon-feedback":(0,I.vE)(e.icon)}))))))))),ce=ee.UI.Group.make({tone:pe(oe),readersAttention:pe(le)}),de=ee.UI.Union.make("kind",{[K.hidden]:ee.UI.Node.empty,[K.zero]:ee.UI.Node.empty,[K.visible]:ee.UI.Composite.make(ne,ce)});function pe(e){return{tag:"_tag",members:{Some:(0,r.pipe)(e,ee.UI.contramapState((e=>e.value))),None:ee.UI.Node.empty}}}var me=i(10720);var he,ue=i(35214),ge=i(73582),ve=i(71936),fe=i(70023),we=i(61903),_e=i(45586),be=i(60797),ye=i(85089),Ee=i(95300),ke=i(2834),Ce=i(95093),Se=i(32952),Ae=i(16782),Ie=i(24209),Me=i(78674),xe=i(57091),Le=i(50628),Te=i(66310),Fe=i(93494),Ve=i(27125),Pe=i(8125),Re=i(38983);!function(e){let t;!function(e){e.clickOnEmpty="clickOnEmpty",e.clickOnFakeCard="clickOnFakeCard"}(t=e.Type||(e.Type={}))}(he||(he={}));class Oe{constructor(e,t,i,a,s){this._lensState=e,this._predictionsVM=t,this._upgradeViewModel=i,this._capabilities=a,this._gnar=s,this._subs=new _e.w.Keeper,this.successView=Re.h.combine(this._lensState,this._predictionsVM.previewState,((e,t)=>Fe.v.WithSuccess.State.isInSuccess(this._capabilities)(e)?S.some(t.kind===K.visible?Ve.g.SuccessType.applied:Ve.g.SuccessType.small):S.none)),this._premiumAlertsCount=this._upgradeViewModel.advancedAlerts.view((0,g.ls)(S.map((e=>e.count)),S.getOrElse((()=>0)))),this.havePremiumAlerts=this._premiumAlertsCount.view((e=>e>0)),this._upgradeHookExpanded=new Ee.X(!1),this.upgradeHookExpanded=(0,r.pipe)(this._upgradeHookExpanded,T.x()),this.upgradeHookFlow=(0,r.pipe)((0,fe.Q)(this._upgradeViewModel.advancedAlerts),ve.Z.extendActions(ke.b((e=>{e.key===we.n.State.expanded?"upgrade"===e.action.kind?(this._upgradeViewModel.openUpgradeUrl(ge.L.Place.assistantCardList),this._gnar.assistantExpandedUpgradeHookClick(this._premiumAlertsCount.get())):"onUpgradeButtonMount"===e.action.kind&&this._onUpgradeButtonMount.next(e.action.element):e.key===we.n.State.minimized&&"onClick"===e.action.action&&this._upgradeHookExpandReason.next("click")}))),ve.Z.patchState(Ce.T(this._autoOpenUpgradeHook())),ve.Z.patchState(ke.b((e=>this._onUpgradeHookShown.next(function(e){switch(e){case"hidden":return we.n.State.hidden;case"expanded":return we.n.State.expanded;case"minimized":return we.n.State.minimized;default:(0,I.vE)(e)}}(e.kind))))),ve.Z.patchState(ke.b((e=>this._upgradeHookExpanded.next("expanded"===e.kind))))),this.cardListContext=new Ee.X(S.none),this.assistantActions=new Se.xQ,this.autoFocusEnabled=Re.h.create(!0),this._onUpgradeButtonMount=new Ae.t,this._upgradeHookExpandReason=new Ae.t,this._onUpgradeHookShown=new Se.xQ,this._unselectActiveAlert=this.assistantActions.pipe(E.h((e=>e.type===he.Type.clickOnEmpty||e.type===he.Type.clickOnFakeCard)),ke.b((()=>this.autoFocusEnabled.set(!1))),p.U((()=>e=>e.patch({currentLens:(0,r.pipe)(R.In.getActiveItem(e.currentLens),S.fold((()=>e.currentLens),(t=>R.nL.hasItems(e)?this._capabilities.unselectItem()(e.currentLens):e.currentLens))),switchOrder:"lensOrder",alertSource:w.l$.sidebar})))),this.applicatorEffects={id:"assistantCardListViewModel.effects",when:M.R.isWithAlertsId,what:R.nL.Effect.Applicator.create(Ie.T(this._unselectActiveAlert))},this._subs.push(this._onUpgradeHookShown.pipe(Me.b(1),T.x(),E.h((e=>e===we.n.State.minimized))).subscribe((()=>this._gnar.assistantCollapsedUpgradeHookShow())),this._onUpgradeButtonMount.pipe(be.oA,xe.a(this.cardListContext.pipe(be.oA,Le.P())),Te.w((([e,t])=>ye.n(e,{root:t}).pipe(Le.P()))),E.h(Pe.Dw),p.U((e=>Math.trunc(100*e[0].intersectionRatio))),d.M(this._upgradeHookExpandReason,this._premiumAlertsCount)).subscribe((([e,t,i])=>this._gnar.assistantExpandedUpgradeHookShow(i,t,e))),this._lensState.pipe(E.h(R.nL.hasCards),p.U((e=>R.In.getActiveItem(e.currentLens))),y.G(),E.h((([e,t])=>S.isNone(e)&&S.isSome(t)))).subscribe((e=>{this.autoFocusEnabled.set(!0)})))}dispose(){this._subs.dispose()}_autoOpenUpgradeHook(){return this._lensState.pipe(E.h((e=>(0,r.pipe)(e.currentLens.id,(0,Pe.Kg)(M.R.isPriority,M.R.isAllAlerts)))),p.U(Fe.v.WithSuccess.State.isInSuccess(this._capabilities)),xe.a(this.havePremiumAlerts,((e,t)=>e&&t)),T.x(),ke.b((e=>{e&&this._upgradeHookExpandReason.next("alertsAddressed")})),d.M(this._upgradeViewModel.advancedAlerts),p.U((([e,t])=>(0,r.pipe)(t,S.fold((()=>({kind:we.n.State.hidden})),(t=>e?{kind:we.n.State.expanded,showCloseButton:!0,alertsState:{count:t.count,alerts:t.alerts()}}:{kind:we.n.State.minimized,alertsCount:t.count}))))))}}var Ne,De,Ue=i(13922),Be=i(5178),He=i(81301),je=i(87667),Ge=i(24713),Ze=i(22232);!function(e){e.equals=(e,t)=>"score"in e&&"score"in t?e.score===t.score:e.type===t.type}(Ne||(Ne={}));class We{constructor(e,t,i,a,s,n,o,l,c,d,m,h){this._sessionModel=e,this._layoutVM=t,this._predictionsVM=i,this._importanceSurveyVM=a,this._modalManager=s,this._lensPreviewVM=n,this._currentLensId=o,this._lensChanged=l,this._cardsListScrollManager=c,this._user=d,this._gnar=m,this._closeAssistant=h,this.showSetGoalsActionButton=Re.h.create(!0),this.showSettingsActionButton=Re.h.create(!0),this.close=()=>{const e=this._layoutVM.activeView.get();e.type===f.a.Type.popup&&e.popupType===f.a.PopupType.importanceSurvey?this._importanceSurveyVM.dismiss():this._closeAssistant()},this.score=(0,r.pipe)(this._sessionModel.score.view(S.map((e=>e.rank))),p.U((e=>(0,u.Y)(S.option)({capiScore:e}))),xe.a(this._sessionModel.checkingState,((e,t)=>(0,r.pipe)(e,S.map((e=>({...e,isLoading:"idle"!==t}))))))),this.summary=this._sessionModel.textInfo.view((0,g.ls)(S.chain((e=>e.messages)),S.map((e=>e.assistantHeader)),S.getOrElse((()=>"Looking good so far")),(e=>({content:e})))),this.logoScore=(0,F.aj)([this._cardsListScrollManager.scrollTop,this._layoutVM.activeView,this.score]).pipe(p.U((([e,t,i])=>(0,r.pipe)(i,S.fold((()=>({type:"logo"})),(i=>e<66||t.type!==f.a.Type.default?{type:"logo"}:{type:"score",score:i}))))),T.x(Ne.equals)),this.visibility=this._layoutVM.activeView.view((e=>e.type===f.a.Type.default?"visible":"hidden")),this.lensSwitchFlow=ve.Z.fromSideEffect((e=>{switch(e.action.action){case je.n.Actions.switchToAll:this._lensChanged.next({lensId:M.R.SpecialId.AllAlerts,focusFirstCard:!0}),this._gnar.assistantPriorityDropdownClick("all");break;case je.n.Actions.switchToPriority:this._lensChanged.next({lensId:M.R.SpecialId.Priority,focusFirstCard:!0}),this._gnar.assistantPriorityDropdownClick("priority");break;case je.n.Actions.openSetGoals:break;default:(0,Ze.vE)(e.action.action)}}),F.aj(this._currentLensId.pipe(E.h((e=>e!==M.R.SpecialId.Premium)),p.U((e=>e===M.R.SpecialId.Priority?"priority":"all")),T.x()),this._lensPreviewVM.getLens(M.R.SpecialId.AllAlerts).pipe(Ge.j("count"),T.x()),this._lensPreviewVM.getLens(M.R.SpecialId.Priority).pipe(Ge.j("count"),T.x()),this._predictionsVM.previewState,((e,t,i,a)=>(0,r.pipe)({allAlertsCount:t,priorityAlertsCount:i,selectedLens:e},S.fromPredicate((()=>a.kind!==K.hidden)))))),this._subs=new _e.w.Keeper,this._trackHeaderMessageChanges(),this._trackToShowActionButtons()}open(e){switch(e){case"setGoals":this._subs.push(this._modalManager.show(He.Iy.setGoals("user")).subscribe());break;default:(0,Ze.vE)(e)}}_trackHeaderMessageChanges(){const e=this.summary.pipe(y.G()).subscribe((([e,t])=>{var i,a;this._gnar.assistantHeaderMessageUpdate(e.content,t.content,null===(i=(0,r.pipe)(this._sessionModel.textInfo.get(),S.toUndefined))||void 0===i?void 0:i.wordsCount,null===(a=(0,r.pipe)(this._sessionModel.score.get(),C.Fc))||void 0===a?void 0:a.rank)}));this._subs.push(e)}_trackToShowActionButtons(){const e=(0,F.aj)([this._layoutVM.activeView,this._user]).subscribe((([e,t])=>{t.isAnonymous||e.type===f.a.Type.popup?(this.showSetGoalsActionButton.set(!1),this.showSettingsActionButton.set(!1)):(this.showSetGoalsActionButton.set(!0),this.showSettingsActionButton.set(!0))}));this._subs.push(e)}dispose(){this._subs.dispose()}}!function(e){e.importance="importance",e.kindOfFeedback="kindOfFeedback",e.thankYou="thankYou"}(De||(De={}));class qe{constructor(e,t,i){this._closeAssistant=e,this._gnar=t,this._bgActions=i,this.hideBackButton=Re.h.create(!0),this.step=Re.h.create(De.importance),this._onCompleteAllQuestions=()=>{this.step.set(De.thankYou),this._bgActions.hideImportanceSurvey()},this.done=()=>{this._closeAssistant()},this.dismiss=()=>{this._closeAssistant(),this._bgActions.dismissImportanceSurvey()},this.submit=e=>{const t=this.step.get();switch(this._gnar.importanceSurveySubmitButtonClick(e,t),t){case De.importance:"extremelyImportant"===e[0]||"somewhatImportant"===e[0]?this.step.set(De.kindOfFeedback):this._onCompleteAllQuestions();break;case De.kindOfFeedback:default:this._onCompleteAllQuestions()}}}}var ze=i(63919);const Ye=e=>{const t=e.initialPositionOffset.get();return{initialPositionOffset:t,onDrag:i=>{e.updateInitialPositionOffset(ze.E9.plus(t,function({x:e,y:t}){return ze.E9.create({top:t,left:e})}(i.translate)))}}};var Ke=i(98403);class $e{constructor(e,t,i,a,s,n,o){this._lensPreviewVM=e,this._layoutVM=t,this._readersAttentionVM=i,this._emogenieService=a,this._session=s,this._readersAttentionPredictionCardState=n,this._gnar=o,this._subs=new _e.w.Keeper,this.previewState=Re.h.create({kind:K.hidden}),this.previewFlow=ve.Z.fromSideEffect((e=>{switch(e.action.key){case"tone":const t=this._emogenieService.viewState.view("prevalentEmotion").get();return t&&this._gnar.emogeniePredictionButtonClick(t.name),this._layoutVM.pushActiveView({type:f.a.Type.emogenie});case"readersAttention":return this._readersAttentionVM.open({type:f.a.ReadersAttention.Caller.Type.predictionWidget});default:(0,Ze.vE)(e.action)}}),this.previewState),this._previewState=(0,r.pipe)(F.aj([this._emogenieService.viewState.view((e=>S.fromNullable(e.settings.hiddenReport?void 0:e.prevalentEmotion))),this._emogenieService.viewState.view("brandToneOffImageUrl"),this._readersAttentionPredictionCardState,this._session.documentLength,this._lensPreviewVM.getLens(M.R.SpecialId.PredictionEmogenie),this._lensPreviewVM.getLens(M.R.SpecialId.PredictionTakeaways)]),p.U((([e,t,i,a,s,n])=>(S.isSome(e)||S.isSome(i))&&a.trimmed>0?{kind:K.visible,tone:(0,r.pipe)(e,S.map((e=>({emotion:e,alertsCount:s.count,brandToneOffImageUrl:t})))),readersAttention:(0,r.pipe)(i,S.map((e=>({...e,alertsCount:(0,r.pipe)(i,S.chain((e=>e.alertsCount)),S.getOrElse((()=>n.count)))}))))}:a.trimmed>0?{kind:K.zero}:{kind:K.hidden}))),this._subs.push(this._previewState.subscribe(Ke.wW(this.previewState)))}dispose(){this._subs.dispose()}}var Qe=i(77843),Xe=i(2768),Je=i(10247);class et{constructor(e,t,i,a){this.feature=t,this._closeAssistant=i,this._gnar=a,this._subs=[],this._subs.push(this.feature.requestInfo.view("status").pipe((0,T.x)(),(0,y.G)(),(0,d.M)(e.activeView)).subscribe((([[t,i],a])=>{t===Je.eE.REVIEWING&&a.type===f.a.Type.proofitReview&&e.popActiveView()}))),this._subs.push(this.feature.layoutCreated.pipe((0,d.M)(e.activeView)).subscribe((([t,i])=>{i.type!==f.a.Type.proofitRequest&&i.type!==f.a.Type.proofitReview||t||e.popActiveView()})))}onSubmitRequest(e){this.feature.submitRequest(),this._gnar.proofitRequestFormSubmit();const t=this.feature.requestInfo.lens("status").pipe((0,E.h)((e=>e===Je.eE.ACCEPTED)));(0,Qe.F)(100).pipe((0,Xe.R)(t)).subscribe({complete:()=>this._closeAssistant(e)})}onCompleteRequest(e){this.feature.resetRequest(),this._gnar.proofitOrderDone(),this._closeAssistant(e)}dispose(){this._subs.forEach((e=>e.unsubscribe()))}}var tt=i(17889),it=i(17594),at=i(86718);class st{constructor(e,t,i,a,s,n=Ue.O.getActiveItemWithAlert){this._feature=e,this._alertsCollection=t,this._alertsService=i,this._assistantLensState=a,this._takeawayAlertChanges=s,this._getActiveItemWithAlert=n,this._log=l.Y.create(st.name),this._checklist=Re.h.create(V.D.empty()),this._subscription=new x.w,this.checklist=this._checklist.view(),(0,g.zG)(this._feature,C.bw((e=>this._subscription.add(this._handleChecklistUpdates(e))))),this._subscription.add(this._markTakeawaysAsDoneWhenChecklistItemCollapsed()),this._subscription.add(this._markTakeawayAsDoneWhenMarkedCorrectlyDetectedOutsideOfChecklist()),this._subscription.add(this._checklist.subscribe((e=>this._log.debug("State changed",e))))}_handleChecklistUpdates(e){return this._subscription.add((t=e,i=this._alertsCollection,Re.h.combine(t.rawChecklist,i,((e,t)=>{const i=_.p.reduce(new Map,((e,t)=>{return(0,g.zG)((i=t,(0,g.zG)(i.alert.extraProperties.takeawayBundleId,S.map(V.T.Id.create))),S.fold((()=>e),(i=>e.set(i,(e.get(i)||[]).concat([t])))));var i}))(t);return new Map(Array.from(e.items.values()).map((t=>[V.T.Id.create(t.id),rt(t,e.wordsCount,i)])))}))).subscribe(Ke.wW(this._checklist)));var t,i}_markTakeawaysAsDoneWhenChecklistItemCollapsed(){return this._assistantLensState.pipe(p.U((e=>R.nL.hasItems(e)?R.In.getActiveItem(e.currentLens):S.none)),y.G(),p.U((([e,t])=>(0,g.zG)(e,S.filter(P.d.isChecklistItemWithAlerts),S.map((e=>({item:e,alerts:e.alerts.filter(lt).map((e=>e.id))}))),S.filter((({item:e})=>(0,g.zG)(t,S.fold(g.W8,(t=>t.id!==e.id))))),S.fold((()=>[]),(e=>e.alerts)))))).subscribe((e=>{e.forEach((e=>{this._alertsService.changeTakeawayFeedback(e,w.TO.correctlyDetectedAndDone)}))}))}_markTakeawayAsDoneWhenMarkedCorrectlyDetectedOutsideOfChecklist(){return this._takeawayAlertChanges.pipe(p.U((e=>e.changed)),E.h((e=>e.size>0)),d.M(this._assistantLensState),p.U((([e,t])=>(0,g.zG)(R.nL.hasItems(t)?this._getActiveItemWithAlert(t.currentLens):S.none,S.filter((0,g.ff)(P.d.isChecklistItemWithAlerts)),S.fold((()=>[]),(()=>Array.from(e.values()).filter((0,g.ls)(it.$.fromModel,lt)).map((e=>e.id)))))))).subscribe((e=>{e.forEach((e=>{this._alertsService.changeTakeawayFeedback(e,w.TO.correctlyDetectedAndDone)}))}))}dispose(){this._subscription.unsubscribe()}}function nt(e){return w.bZ.isTakeaway(e)&&e.takeawayIsLikelyToBeRead&&(C.FX(w.TO.correctlyDetected)(e.takeawayFeedback)||C.FX(w.TO.correctlyDetectedAndDone)(e.takeawayFeedback))}function rt(e,t,i){const a=V.T.Id.create(e.id),s=(i.get(a)||[]).map((e=>e.alert)),n=(0,g.zG)(s.filter(nt),tt.nI),r=(0,g.zG)(s,O.hX((e=>!w.bZ.isTakeaway(e)||S.isNone(e.takeawayFeedback)||C.FX(w.TO.correctlyDetected)(e.takeawayFeedback))),(e=>e.every(nt)?[]:e),tt.nI);return{id:a,rank:e.rank,suggestionsView:(0,g.zG)(e.suggestionsCard,S.chain((e=>(0,g.zG)(r,S.map((t=>({title:e.title,miniTitle:e.miniTitle,miniLabel:S.none,alertIds:(0,g.zG)(t,(0,tt.UI)((e=>e.id)))}))))))),successView:(0,g.zG)(e.successCard,S.chain((e=>(0,g.zG)(n,S.map((t=>({title:e.title,miniTitle:e.miniTitle,miniLabel:S.none,alertIds:(0,g.zG)(t,(0,tt.UI)((e=>e.id)))}))))))),emptyView:{checked:e.defaultCard.checked,title:e.defaultCard.title,miniTitle:e.defaultCard.miniTitle,miniLabel:"textLength"===e.defaultCard.kind?S.some(`${t} words`):S.none,card:ot(e,t)}}}function ot(e,t){const i="simple"===e.defaultCard.kind?at.f.Kind.simple:"textLength"===e.defaultCard.kind?at.f.Kind.textLength:(0,I.vE)(e.defaultCard.kind);return i===at.f.Kind.simple?{kind:i,explanation:e.defaultCard.description,details:e.defaultCard.details}:{kind:i,explanation:e.defaultCard.description,details:e.defaultCard.details,wordCount:t}}function lt(e){return it.$.isTakeaway(e)&&e.takeawayIsLikelyToBeRead&&C.FX(w.TO.correctlyDetected)(e.takeawayFeedback)}function ct(e){return Array.from(e.values()).reduce(((e,t)=>function(e){return S.isNone(e.suggestionsView)&&(S.isSome(e.successView)||e.emptyView.checked)}(t)?e+1:e),0)}var dt,pt,mt=i(15646);class ht{constructor(e,t,i,a,s){this._feature=e,this._assistantLensState=t,this._assistantCardActions=i,this._getAlertById=a,this._getActiveAlert=s,this._subs=new x.w,(0,r.pipe)(this._feature,C.bw((e=>{this._subs.add(this._trackTakeawayUserActions(e.tracking)),this._subs.add(this._trackTakeawayCardShow(e.tracking))})))}_trackTakeawayUserActions(e){return this._assistantCardActions.pipe(E.h(mt.lY.isTakeawayFeedbackAction)).pipe(p.U((e=>(0,r.pipe)(this._getAlertById(e.alertId),S.chain((t=>u.Y(S.option)({id:S.some(t.id),rawId:w.bZ.getRawId(t),isLikelyToRead:(0,r.pipe)(t.extraProperties.takeaway,S.map((e=>e.isLikelyToBeRead))),score:(0,r.pipe)(t.extraProperties.takeaway,S.map((e=>e.score))),textRange:S.fromNullable(t.getHighlightRanges()[0]),action:S.some(e)}))),S.getOrElse(g.r5)))),E.h(I.fQ)).subscribe((t=>{e.onTakeawayUserAction(t.isLikelyToRead,t.score,t.action,t.textRange)}))}_trackTakeawayCardShow(e){return this._assistantLensState.pipe(p.U(R.nL.getActiveAlert(this._getActiveAlert)),p.U(S.map((e=>e.id)))).pipe(p.U(S.getOrElse(g.r5)),E.h(I.fQ),T.x(),p.U((0,g.ls)(this._getAlertById,S.chain((e=>(0,r.pipe)(e.extraProperties.takeaway,S.map((({score:t})=>({score:t,textRange:e.getHighlightRanges()[0]})))))),S.getOrElse(g.r5))),E.h(I.fQ)).subscribe((t=>{e.onKeyTakeawayCardShow(t.score,t.textRange)}))}dispose(){this._subs.unsubscribe()}}!function(e){let t;!function(e){e.eq=N.MW({message:N.yv,checked:N.vD})}(t=e.ChecklistItemDeprecated||(e.ChecklistItemDeprecated={}))}(dt||(dt={})),function(e){e.eq=N.MW({collapsed:N.vD,items:(0,O.Eh)(dt.ChecklistItemDeprecated.eq)})}(pt||(pt={}));class ut{constructor(e,t,i,a){this._readersAttentionFeature=e,this._assistantLayoutVM=t,this._onChecklistExpand=a,this._subs=new x.w,this._cardSelected=new Ee.X(!1),this._height=Re.h.create(S.none),this._items=(0,r.pipe)(this._readersAttentionFeature,S.map((e=>e.checklistDeprecated)),S.getOrElse((()=>Re.h.create(S.none)))).view(S.getOrElse((()=>[]))),this._state=Re.h.create({items:this._items.get(),collapsed:this._cardSelected.value}),this.state=this._state.pipe(T.x(((e,t)=>pt.eq.equals(e,t)))),this.height=this._height.view(),this._subs.add(i.view((e=>R.nL.hasItems(e)?R.In.getActiveItem(e.currentLens):S.none)).subscribe((e=>{this._cardSelected.next(S.isSome(e))}))),this._subs.add(this._cardSelected.subscribe((e=>this._state.lens("collapsed").set(e)))),this._subs.add(this._items.subscribe((e=>this._state.lens("items").set(e)))),this._subs.add(this._assistantLayoutVM.activeView.subscribe((e=>{e.type===f.a.Type.readersAttention&&this._height.set(S.none)})))}expand(){this._state.lens("collapsed").set(!1),this._onChecklistExpand()}changeHeight(e){this._height.set(S.some(e))}dispose(){this._subs.unsubscribe()}}class gt{constructor(e){this._readersAttentionFeature=e,this.message=(0,r.pipe)(this._readersAttentionFeature,S.map((e=>e.messages)),S.getOrElse((()=>Re.h.create(S.none)))).view((0,g.ls)(S.map((e=>e.headerMessage)),S.getOrElse((()=>""))))}}var vt=i(38040);class ft{constructor(e,t,i){this._contentScriptState=e,this._contentScriptActions=t,this.domain=i,this.state=this._contentScriptState.view((e=>({user:e.user,commonSettings:e.page}))),this.actions={toggleSite:(e,t)=>this._contentScriptActions.toggleSite(e,t,(0,vt.IJ)(this.state.view("user").get())),toggleDefs:this._contentScriptActions.toggleDefs,toggleAutocomplete:this._contentScriptActions.toggleAutocomplete,toggleAutocorrect:this._contentScriptActions.toggleAutocorrect,toggleHotkeys:this._contentScriptActions.toggleHotkeys,changeStrongDialect:this._contentScriptActions.changeStrongDialect,disableLlama:this._contentScriptActions.disableLlama}}}var wt=i(29909),_t=i(16868),bt=i(99116),yt=i(74364),Et=i(91402),kt=i(40151),Ct=i(598),St=i(83401),At=i(95195);function It(e,t,i,a,s){return{id:"changeAlertEffect",when:M.R.isWithAlertsId,what:R.nL.Effect.SwitchAlert.create(e.actionEvents.pipe(Te.w((e=>{const n=t.get();if(!R.nL.hasCards(n))return Et._(new Ze.ej("Cannot update state without cards"));switch(e.type){case mt.lY.Type.alertMinicardButtonClick:return(0,r.pipe)(i.getRegistered(e.alertHighlight.alert.id),S.fold((()=>(s.warn("somehow we got click on non registered alert",e.alertHighlight.alert),kt.E)),(()=>L.of(e.alertHighlight))));case mt.lY.Type.cardMatchesNavigationButtonClick:const t=e.transitionTo;switch(t.kind){case"anotherAlert":return(0,r.pipe)("right"===e.direction?a.nextAlert(t.card):(0,r.pipe)(a.prevAlert(t.card),C.vx(a.anyRegisteredAlert(t.card))),S.fold((()=>kt.E),(e=>L.of({alert:e,highlightIndex:0}))));case"sameAlert":return(0,r.pipe)(i.getRegistered(t.card.activeAlert.id),S.fold((()=>kt.E),(()=>L.of({alert:t.card.activeAlert,highlightIndex:t.highlightIndex}))));default:return(0,Ze.vE)(t)}default:return kt.E}})),p.U((e=>({alertHighlight:e,alertSource:w.l$.sidebar,options:{order:"lensOrder"}})))))}}function Mt(e,t,i){const a=e.pipe(E.h(R.nL.hasCards),Me.b(0),p.U((e=>e)),E.h((e=>e.currentLens.items.size>0&&S.isNone(R.In.getActiveItem(e.currentLens))&&i.get())),p.U((e=>(0,r.pipe)(e.currentLens.items.getAt(0),S.chain(Ue.O.checksFeedItemsMapper((e=>S.some(e.activeAlert)),(e=>S.some(e.activeAlert)),(()=>S.none),(()=>S.none),(()=>S.none))),C.bw((()=>t.set(S.some(_t.CV.skip))))))),be.oA,E.h((e=>e.state.type===w.bZ.State.Type.REGISTERED)),T.x());return{id:"focusFirstCardSideEffect",when:e=>e!==M.R.SpecialId.PredictionTakeaways&&e!==M.R.SpecialId.PredictionEmogenie,what:R.nL.Effect.SwitchLens.create(a.pipe(d.M(e),p.U((([e,t])=>({lensId:t.currentLens.id,alertSource:w.l$.text,options:{order:"lensOrder",toFocus:R.nL.Effect.FocusBehavior.focusAlert({alert:e,highlightIndex:0})}})))))}}function xt(e,t,i){const a=e.pipe(p.U((e=>a=>e.type===yt.tn.Type.AppliedAlertAnimationFinished&&a.currentLens.meta.filter(e.alert)&&R.nL.hasItems(a)?a.patch({currentLens:(0,r.pipe)(At.Y3((()=>w.bZ.isApplicableAlert(e.alert)?t.finishApplyAnimation([e.alert])(a.currentLens):a.currentLens),(e=>i.error("could not update lens state on applied animation finish",e))),At.fS((()=>a.currentLens))),alertSource:e.alert.state.source}):a)));return{id:"onAlertApply",when:g.W8,what:R.nL.Effect.Applicator.create(a)}}function Lt(e,t){return{id:"lensChangeEffect",when:g.W8,what:R.nL.Effect.SwitchLens.create(e.pipe(d.M(t),E.h((([e,t])=>e.lensId!==t)),p.U((([e])=>({lensId:e.lensId,alertSource:w.l$.sidebar,options:{order:"lensOrder",toFocus:e.focusFirstCard?R.nL.Effect.FocusBehavior.focusFirst:R.nL.Effect.FocusBehavior.noFocus}})))))}}const Tt=(e,t,i)=>{const a=(0,r.pipe)(e,p.U(R.nL.mapper((({currentLens:e,alertSource:t})=>S.some({currentLens:e,alertSource:t})))),Ft(i),Te.w(Ke.b2.rafScheduler),ke.b((e=>t.moveCardsBy(e,"freezeActiveCardOnCardsListUpdate"))));return{id:"freezeActiveCardOnCardsListUpdate",when:M.R.isWithAlertsId,what:R.nL.Effect.Applicator.create(Ie.T(Ie.T(a).pipe(Ct.c(St.C))))}},Ft=e=>t=>t.pipe((0,bt.Sd)(e),p.U(S.map((e=>e.currentLens))),y.G(),E.h((([e,t])=>(0,r.pipe)((0,g.bc)(e,t),(0,g.og)(C.vB(((e,t)=>e.id===t.id&&(0,r.pipe)((0,g.bc)(R.In.getActiveItem(e),e.cardIndex,R.In.getActiveItem(t),t.cardIndex),(0,g.og)((0,u.g)(S.option)),S.map((([e,t,i,a])=>e.id===i.id&&t!==a)),S.getOrElse((()=>!1)))))),S.getOrElse((()=>!1))))),p.U((0,g.ls)(wt.Pd(S.chain(R.In.getActiveItem),S.chain(R.In.getActiveItem)),(0,g.og)(C.vB(((e,t)=>t.positionState.absTop-e.positionState.absTop))),S.getOrElse((()=>0)))));var Vt=i(37179),Pt=i(63047),Rt=i(20544),Ot=i(5920),Nt=i(80900),Dt=i(55415);class Ut{constructor(e,t){this._intentDetectionFeature=e,this._checksFeedCapabilities=t,this._subs=new x.w,this._log=l.Y.create("IntentDetectionViewModelImpl"),this.intentDetectionActions=new Se.xQ,this._newIntentDetectionInfo=this._intentDetectionFeature.intentDetectionInfo.pipe(p.U((()=>g.yR))),this._focusIntentDetectionItem=this.intentDetectionActions.pipe(E.h(Pt.Z.Event.isIntentDetectionItemClickAction),p.U((e=>t=>t.patch({currentLens:(0,r.pipe)(t.currentLens.items.find((t=>t.id===e.id)),S.fold((()=>(this._log.error("Cannot focus non-existing IntentDetectionItem."),t.currentLens)),(()=>(0,g.MZ)((0,r.pipe)(t.currentLens,this._checksFeedCapabilities.selectItemById(e.id))))))})))),this._acceptIntentDetectionItem=this.intentDetectionActions.pipe(E.h(Pt.Z.Event.isIntentDetectionItemAcceptAction),p.U((e=>t=>(0,r.pipe)((0,r.pipe)(Ot.l.find(t.currentLens.items,Pt.Z.isIntentDetectionItem),S.map(Dt.ei("value"))),S.fold((()=>(this._log.error("Cannot accept non-existing IntentDetectionItem."),t)),(i=>{const a=new Map;a.set(e.id,this._checksFeedCapabilities.transitionTo({type:"success",clockwise:!0})(i));const s=t.currentLens.items.patchWith(a,((e,t)=>S.some(t)));return R.nL.Prism.getLens().compose(Fe.v.Prism.items).set(s,t)})))))),this._subs.add(this.intentDetectionActions.subscribe((e=>this._log.trace("Action received:",e)))),this._subs.add(this.intentDetectionActions.pipe(E.h(Pt.Z.Event.isIntentDetectionItemFeedbackInaccurateAction)).subscribe((e=>{this._intentDetectionFeature.onIntentDetectionFeedback(Rt.IntentDetection.IntentDetectionFeedback.INACCURATE,{predictionId:e.predictionId,label:e.label}),this._intentDetectionFeature.intentDetectionInfo.next(null)}))),this._subs.add(this.intentDetectionActions.pipe(E.h(Pt.Z.Event.isIntentDetectionItemFeedbackAccurateAction)).subscribe((e=>{this._intentDetectionFeature.onIntentDetectionFeedback(Rt.IntentDetection.IntentDetectionFeedback.ACCURATE,{predictionId:e.predictionId,label:e.label}),"rendered"===e.transitionType?(this.intentDetectionActions.next({kind:Pt.Z.Event.Kind.intentDetectionItemClick,id:e.id,predictionId:e.predictionId,label:e.label}),Nt.H(100).subscribe((()=>this.intentDetectionActions.next({kind:Pt.Z.Event.Kind.intentDetectionItemAccept,id:e.id})))):this.intentDetectionActions.next({kind:Pt.Z.Event.Kind.intentDetectionItemAccept,id:e.id}),Nt.H(3e3).subscribe((()=>this.intentDetectionActions.next({kind:Pt.Z.Event.Kind.intentDetectionItemClose,id:e.id})))}))),this._subs.add(this.intentDetectionActions.pipe(E.h(Pt.Z.Event.isIntentDetectionItemCloseAction)).subscribe((()=>this._intentDetectionFeature.intentDetectionInfo.next(null)))),this._subs.add(this.intentDetectionActions.pipe(E.h(Pt.Z.Event.isIntentDetectionItemShowAction)).subscribe((e=>this._intentDetectionFeature.onIntentDetectionItemShow({predictionId:e.predictionId,label:e.label})))),this._subs.add(this.intentDetectionActions.pipe(E.h(Pt.Z.Event.isIntentDetectionItemExpandAction)).subscribe((e=>this._intentDetectionFeature.onIntentDetectionItemExpand({predictionId:e.predictionId,label:e.label}))))}getApplicatorEffects(){return(0,r.pipe)([[this._newIntentDetectionInfo,"newIntentDetectionInfo"],[this._focusIntentDetectionItem,"focusIntentDetectionItem"],[this._acceptIntentDetectionItem,"acceptIntentDetectionItem"]],O.UI((([e,t])=>({id:`intentDetectionViewModel.effects.${t}`,when:M.R.isMainLens,what:R.nL.Effect.Applicator.create(e)}))))}dispose(){this._intentDetectionFeature.onIntentDetectionViewModelDisposed(),this._subs.unsubscribe()}}var Bt=i(77394),Ht=i(51540),jt=i(11755),Gt=i(62346),Zt=i(71962),Wt=i(44618),qt=i(13313),zt=i(21619),Yt=i(54216),Kt=i(17510),$t=i(48052),Qt=i(91549),Xt=i(83167),Jt=i(20594),ei=i(35607),ti=i(20291),ii=i(33806),ai=i(86775),si=i(11245),ni=i(4890),ri=i(73841),oi=i(89770),li=i(39920),ci=i(88772),di=i(95574),pi=i(81531);const mi=(e,t,i,a,s,n,o,l,c,d,h,u,v,A,x,F,P,O,N,D,U,H,j)=>{const G=pi.C8.Logging.getLogger("view_models"),Z=Re.h.create(qt.A.defaultState),W=Re.h.create(g.jv),q=(0,r.pipe)(s,S.fold(g.jv,(e=>!e.useDeprecatedChecklist))),z=q,Y=(0,Pe.Kg)(w.bZ.belongsToPriorityLens,z?w.bZ.isTakeaway:g.jv),K=Yt.t.create({...Yt.t.defaultLensFilters,[M.R.SpecialId.Priority]:Y},{...Yt.t.defaultTextFilters,[M.R.SpecialId.Closed]:g.jv,[M.R.SpecialId.Priority]:Y,[M.R.SpecialId.PredictionTakeaways]:e=>q?W.get()(e):Yt.t.defaultLensFilters[M.R.SpecialId.PredictionTakeaways](e)}),$=qt.A.get(e.alertsList.state,e.alertsList.lensesScores,K).subscribe(Ke.wW(Z)),Q=new jt.t(Z.view("lenses"),K),X=(0,$t.$)((0,Wt.a)(t).getContents),J={features:new Set([Jt.IG.Features.showCardLabelInOutcomes]),cardLayoutDensityMode:ni.j.Density.minimal,shouldAnimateAlertApply:Jt.IG.Default.shouldAnimateAlertApply},ee=(0,Jt.Ls)(X,e.alertsReader,J,(()=>L.of(S.none)),e.mutingAlertsReader),te=Qt.R.ItemFactory.create(X,e.mutingAlertsReader,J,(()=>L.of(S.none))),ie=(0,si.U)(X,e.alertsReader,J,V.T.ordAlert),ae=Re.h.create(V.D.empty()),se=Ue.O.getCapabilities(ee,te,ie,e.alertsReader,X,ae),ne=new li.gi(ee,K,Ue.O.equatable.structEq,Ue.O.defaultOrd),re=(0,li.is)(ee,se),oe=new oi.oq(e.alertsList.state,e.alertsReader,Z.view("lenses"),e.positionManager,Q,new li.ad(te,K,(e=>e.id===M.R.SpecialId.Priority),q?new ii.c(ie,ae,e.alertsReader,(e=>e.id===M.R.SpecialId.PredictionTakeaways),ne,Ue.O.equatable.structEq):ne,Ue.O.equatable.structEq,Ue.O.bundlesOrd),(0,li.kn)(te,J,(e=>e===M.R.SpecialId.Priority),q?(0,ii.E)(ie,ae,e.alertsReader,(e=>e===M.R.SpecialId.PredictionTakeaways),re,se):re,se),se,K),le=i.get(),ce=Re.h.create(oe.emptyState(le).patch({alertSource:w.l$.sidebar})),de=ce.view((e=>(0,r.pipe)(S.fromPredicate(R.nL.hasItems)(e),S.map(R.nL.Prism.getLens().get),S.filter((e=>e.id===M.R.SpecialId.PredictionTakeaways)),S.chain(R.In.getActiveItem)))).view(S.fold((()=>g.jv),(e=>t=>se.hasAlert(t.id)(e)))).subscribe(Ke.wW(W));d.next({kind:Bt.R.ChangeLens,selectedLens:le===M.R.SpecialId.Priority?"priority":"all"});const pe=(0,Xt.u0)((()=>t.getCursor().index),oe),me=new ge.x(e.alertsList,Q,3),ve=new He.EQ(new Zt.o(e.sessionModel,me,P.get().isPremium,S.none)),fe=new Kt.Xx({flush:()=>t.flushChanges()},new Se.xQ,ee,e.alertsService,(()=>Promise.resolve()),(()=>Promise.resolve()),e.mutedAlertsCategoriesModel,S.none,(()=>!1),Ue.O.getActiveItemWithAlert,se,ce),we=new ei.o((()=>At.F2(void 0))),_e=new Gt.o(e.alertsList,e.alertsReader,e.positionManager,e.alertsService,t,ce,K,Ue.O.getActiveItemWithAlert,h,!0),be=(0,_t.hp)(ce,_e,Re.h.create(16),we,t,G),ye=new f.D(A,x,N,D,H),Ee=new qe(O,x,A),ke=new Se.xQ,Ce=ce.pipe(p.U((e=>e.currentLens.id))),Ae=e.alertsList.state.pipe(m.O(_.p.empty),y.G(),p.U((([e,t])=>(0,r.pipe)(_.p.diff(e,t),_.p.Diff.filter((e=>w.bZ.isTakeaway(e.alert)))))),E.h((0,g.ff)(k.v.isEmpty)),p.U(k.v.reduce({changed:new Map,removed:new Map},((e,t)=>w.bZ.isTakeaway(t.alert)?(e.removed.set(t.alert.id,t.alert),e):e),((e,t,i)=>w.bZ.isTakeaway(i.alert)?(e.changed.set(i.alert.id,i.alert),e):e),((e,t)=>w.bZ.isTakeaway(t.alert)?(e.changed.set(t.alert.id,t.alert),e):e))),b.d({bufferSize:1,refCount:!0}));const Ie=new B(s,ae,ye,e.alertsList.state,e.alertsReader,ce,Ae),Me=new st(s,e.alertsList.state,e.alertsService,ce,Ae),xe=Me.checklist.subscribe(Ke.wW(ae)),Le=new $e(Q,ye,Ie,a,e.sessionModel,Ie.predictionCardState,x),Te=new We(e.sessionModel,ye,Le,Ee,ve,Q,Ce,ke,we,P,x,O),Ve=new Oe(ce,Le,me,se,x),Ne=new Be._(ye,F,x),De=(0,r.pipe)(c,S.map((e=>new et(ye,e,O,x))));(0,r.pipe)(n,C.bw((t=>t.initCardActionsProcessing(fe.actionEvents,e.alertsReader,j,Ne)))),(0,r.pipe)(l,C.bw((t=>t.initCardActionsProcessing(fe.actionEvents,e.alertsReader))));const je=(0,r.pipe)(o,S.map((e=>new Ut(e,se)))),Ge=new zt.m(t,ce,_e,e.alertsReader,Ue.O.getActiveItemWithAlert),Ze=Re.h.create((0,r.pipe)(u,S.fold((()=>_t.CV.skip),(()=>w.l$.text)),S.some)),ze=[(0,Ht.A7)(Ge,ce),(0,r.pipe)(yt.EQ.focusMarkByActiveAlert(ce,_e,e.alertsReader,Ue.O.getActiveFocusableItem,G.getLogger("MarksEffects.focusMarkByActiveAlert")),R.nL.Effect.Producer.delayed(h)),yt.EQ.highlightMarkByHighlightedCard(fe,ce,_e,e.alertsReader,se,G.getLogger("MarksEffects.highlightMarkByHighlightedCard")),xt(_e.events,se,G.getLogger("createOnAlertApplySideEffect")),It(fe,ce,e.alertsReader,ee,G),Mt(ce,Ze,Ve.autoFocusEnabled),...fe.getApplicatorEffects(),Ve.applicatorEffects,ti.R7(ce,we,se,(0,g.MZ)(fe.actionEvents),{cardsAroundActive:10,cardsBeyondViewport:10}),(0,r.pipe)((0,_t.k9)(ce,be,Ze,Ue.O.getActiveAlignableItem,se),R.nL.Effect.Producer.delayed(h)),Tt(ce,we,se),Lt(ke,Ce),Kt.dv.createSendActiveAlertFeedbacksEffect(ce,Ue.O.getActiveItemWithAlert,e.alertsService,e.alertsReader,G.getLogger("MarksEffects.highlightMarkByHighlightedCard")),...q?[ai.G.getChecklistHandlerSideEffect(ie,Me.checklist,e.alertsReader,Ue.O.getActiveItemWithAlert,(e=>e===M.R.SpecialId.PredictionTakeaways))]:[],...(0,r.pipe)(je,S.fold((()=>[]),(e=>e.getApplicatorEffects())))],Qe=Re.h.create(M.R.SpecialId.AllAlerts),Xe=ce.view((e=>e.currentLens.id)).pipe(E.h((e=>e===M.R.SpecialId.Priority||e===M.R.SpecialId.AllAlerts))).subscribe(Ke.wW(Qe)),Je=(0,Xt.VC)(oe,pe,Qe,Ue.O.getActiveItemWithAlert,se),tt=Re.h.create(u),it=(0,Xt.Dv)((e=>M.R.isPriority(e.currentLens.id)),Je,se),at=new Xt.vM(e.sessionModel.checkingState,ce),nt=(0,r.pipe)([(0,r.pipe)((e=>Xt.Py.whenShouldVerifyCurrentLens(Ue.O.getActiveItemWithAlert,se)(e)&&e.currentLens.id!==M.R.SpecialId.PredictionTakeaways),Xt.Py.behaviorToEffect((()=>S.some(R.nL.Effect.FocusBehavior.focusNext)))),(0,r.pipe)((0,Pe.W9)((()=>S.isSome(tt.get())),Xt.Py.whenNoActiveCard),Xt.Py.behaviorToEffect((e=>(0,r.pipe)((e=>{const t=(0,S.fromPredicate)((0,Pe.Kg)(Ue.O.isAlertCard,Ue.O.isAlertsBundle));return(0,r.pipe)(tt.get(),S.chain((i=>(tt.set(S.none),R.nL.hasCards(e)?(0,r.pipe)(e.currentLens.items.reduce(((e,a)=>(0,r.pipe)(e,S.alt((()=>(0,r.pipe)(a,t,S.chain((e=>S.fromNullable(e.alerts.find((e=>e.id.startsWith(i+"_"))))))))))),S.none),S.map((t=>({alert:t,highlightIndex:0,lensId:e.currentLens.id})))):S.none))))})(e),S.map((e=>R.nL.Effect.FocusBehavior.focusAlert(e))))))),(0,r.pipe)((0,Pe.W9)((()=>Ve.autoFocusEnabled.get()),(0,Pe.W9)(Xt.Py.whenFirstOpeningDocumentWithAlerts(at),Xt.Py.whenNoActiveCard)),Xt.Py.behaviorToEffect((()=>S.some(R.nL.Effect.FocusBehavior.focusFirst))))],(0,ue.fold)((0,ue.getFunctionMonoid)(S.getFirstMonoid())())),rt=Xt.Py.getStateTransformer(nt,it,e.alertsReader,se,Ve.autoFocusEnabled,g.Q1,Qe),ot=Fe.v.Items.getItemsPositionsUpdateTransformer(se),lt=(0,r.pipe)(o,S.fold((()=>ci.t.nothing),(e=>Pt.Z.getStateTransformer(e.intentDetectionInfo)))),ct=(0,g.ls)(rt,di.L9(ot),di.L9(lt)),dt=new ri.l(ce,oe,e.alertsReader,e.alertsService,ze,Ue.O.getActiveItemWithAlert,ct),pt=(0,Vt.u)(fe.actionEvents,x,e.alertsReader.getById,P.get()),mt=ke.pipe(p.U((({lensId:e})=>e)),E.h((e=>e===M.R.SpecialId.AllAlerts||e===M.R.SpecialId.Priority)),T.x()).subscribe((e=>{i.set(e),d.next({kind:Bt.R.ChangeLens,selectedLens:e===M.R.SpecialId.Priority?"priority":"all"})})),vt=ye.activeView.pipe(p.U((e=>{switch(e.type){case f.a.Type.default:return i.get();case f.a.Type.emogenie:return M.R.SpecialId.PredictionEmogenie;case f.a.Type.readersAttention:return M.R.SpecialId.PredictionTakeaways;case f.a.Type.readersAttentionOnboarding:case f.a.Type.readersAttentionHelp:return M.R.SpecialId.Closed;case f.a.Type.proofitReview:return M.R.SpecialId.RealTimeProofit;default:return null}})),E.h(I.fQ),T.x(),p.U((e=>[e,e===M.R.SpecialId.AllAlerts||e===M.R.SpecialId.Priority]))).subscribe((([e,t])=>ke.next({lensId:e,focusFirstCard:t}))),wt=new ft(v,A,F),bt=new ht(s,ce,fe.actionEvents,(t=>e.alertsReader.getById(t)),Ue.O.getActiveItemWithAlert),Et=new ut(s,ye,ce,(()=>Ve.assistantActions.next({type:he.Type.clickOnFakeCard}))),kt=new gt(s),Ct=Ye(U);return{lensState:ce,cardsViewModel:fe,lensPreviewViewModel:Q,cardsListScrollManager:we,upgradeViewModel:me,assistantHeaderViewModel:Te,assistantLayoutViewModel:ye,assistantCardListViewModel:Ve,lensChanged:ke,predictionsPreviewViewModel:Le,assistantFeedbackViewModel:Ne,assistantSettingsViewModel:wt,assistantProofitViewModel:De,readersAttentionViewModel:Ie,readersAttentionDeprecatedChecklistViewModel:Et,readersAttentionChecklistViewModel:Me,readersAttentionHeaderViewModel:kt,importanceSurveyViewModel:Ee,assistantModalManager:ve,marksViewModel:_e,gnar:x,positionViewModel:Ct,user:P,capabilities:se,intentDetectionViewModel:je,dispose:()=>{bt.dispose(),de.unsubscribe(),xe.unsubscribe(),Me.dispose(),fe.dispose(),dt.dispose(),_e.dispose(),Le.dispose(),mt.unsubscribe(),$.unsubscribe(),vt.unsubscribe(),Te.dispose(),Ve.dispose(),ve.hideAll(),Ie.dispose(),Et.dispose(),Xe.unsubscribe(),pt.unsubscribe(),(0,r.pipe)(De,C.bw((e=>e.dispose()))),(0,r.pipe)(je,C.bw((e=>e.dispose())))}}};var hi,ui=i(30763),gi=i(88056),vi=i(35407),fi=i(19429);!function(e){e.Context=o.createContext(gi.Y.invariantContent("AssistantTextResources")),e.holder=fi.VF((()=>({setGoalsTooltip:"Set goals to get tailored writing suggestions",proofitTooltip:"Expert writing help"})))}(hi||(hi={}));const wi=vi.Pj(vi.GG({denali:ui.m.holder,assistant:hi.holder}))((()=>({denali:{}})));var _i=i(18756),bi=i(20855),yi=i(79073),Ei=i(12187),ki=i(57398);const Ci=o.memo((({width:e,strokeWidth:t,generalScore:i,componentStyle:a,fontSize:s=9,isLoading:n})=>{const r=e/2,l=r-t/2,c=2*l*Math.PI,d=(n?75:i)/100*c,p=c-d,m=(e=>{const{red40:t,yellow50:i,green50:a}=z.Z;return e<65?t:e<95?i:a})(i);return o.createElement("div",Object.assign({},(0,Ei.Sh)(ki.scoreRing,n&&ki.loading),{style:a}),o.createElement("svg",{width:e,height:e,viewBox:`0 0 ${e} ${e}`},o.createElement("circle",{fill:"white",r:l,cx:r,cy:r}),o.createElement("circle",{stroke:z.Z.neutral20,fill:"transparent",strokeWidth:t,style:{strokeDashoffset:d},r:l,cx:r,cy:r}),o.createElement("circle",{stroke:m,fill:"transparent",strokeWidth:t,strokeDasharray:`${c} ${c}`,style:{strokeDashoffset:p},r:l,cx:r,cy:r}),o.createElement("text",{className:ki.scoreText,x:"50%",y:"-35%",fontSize:s,fill:"black",textAnchor:"middle",transform:"rotate(90)"},i>0&&!n?i:"")))}));var Si=i(75039),Ai=i(93756),Ii=i(35327);const Mi=e=>o.createElement("div",Object.assign({},(0,Ei.Sh)(Ii.summary_wrapper,e.className)),ee.UI.mount(Fi,ve.Z.animatingFlow((()=>e.summaryVM.summary),xi))),xi=(e,t)=>(0,r.pipe)(e,S.filter((e=>e.content!==t.content)),S.map((()=>Ai.Hk("fadeout","fadein")))),Li=ee.UI.Node.make((({view:e})=>o.createElement(ie.F.div,{className:Ii.summary_heading},e("content")))),Ti=ee.UI.Transition.make({fadein:Ii.summary_fadein},{fadeout:Ii.summary_fadeout}),Fi=ee.UI.Animated.make(Ti,Li),Vi=({headerVM:e})=>o.createElement(ie.F.div,{style:{visibility:e.visibility}},o.createElement("div",{className:Si.panel},o.createElement(Mi,{summaryVM:e}),o.createElement(ie.F.div,{className:Si.score_container,"data-grammarly-part":"assistant-score"},(0,r.pipe)(e.score,p.U(S.map((({capiScore:e,isLoading:t})=>o.createElement(o.Fragment,null,o.createElement(Ci,{generalScore:e,strokeWidth:3,width:38,fontSize:e<100?16:14,isLoading:t,componentStyle:{margin:"-3px -3px 0 0",cursor:"default"}}),o.createElement(bi.u,{message:`Text score: ${e} out of 100. This score represents the quality of writing.`},o.createElement("div",{className:Si.info_icon},o.createElement(yi.s,{color:z.Z.neutral40,size:9}))))))),p.U(C.QP)))),o.createElement("div",{className:Si.lens_switch,"data-grammarly-part":"assistant-lens-switch"},ee.UI.mount(Pi,e.lensSwitchFlow))),Pi=ee.UI.Union.asOption(je.n.Switch);var Ri=i(68340),Oi=i(19962),Ni=i(33751),Di=i(28378),Ui=i(89379),Bi=i(62513);const Hi=o.forwardRef((({successView:e},t)=>o.createElement("div",{className:Bi.compactSuccessLens,ref:t},o.createElement("div",{className:Bi.compactSuccessLensContainer},ee.UI.mount(Di.q,(0,Ui.hM)((0,Ui.JT)((0,r.pipe)(e,be.oA)))))))),ji=o.forwardRef((({viewModels:e},t)=>o.createElement("div",{className:Ni.mainView},o.createElement(Zi,{ref:t,state:e.lensState,cardsViewModel:e.cardsViewModel,upgradeViewModel:e.upgradeViewModel,cardsListScrollManager:e.cardsListScrollManager,assistantCardListViewModel:e.assistantCardListViewModel,predictionsPreviewViewModel:e.predictionsPreviewViewModel,assistantFeedbackViewModel:e.assistantFeedbackViewModel,headerViewModel:e.assistantHeaderViewModel,layoutViewModel:e.assistantLayoutViewModel,capabilities:e.capabilities,intentDetectionViewModel:e.intentDetectionViewModel})))),Gi=({position:e,isSuccess:t,children:i})=>o.createElement(ie.F.Fragment,null,e.pipe(T.x(((e,t)=>e.offset===t.offset&&e.visible===t.visible)),p.U((e=>e.visible?o.createElement(ie.F.div,Object.assign({},(0,Ei.Sh)(Ni.cardListFooterStatic,e.animationInProgress?Ni.cardListFooterAnimate:void 0,t?void 0:Ni.cardListFooterDynamic),{style:t?{}:{transform:Oi.ux.translateY(e.offset)}}),i):null)))),Zi=o.forwardRef((({state:e,assistantCardListViewModel:t,cardsViewModel:i,upgradeViewModel:a,cardsListScrollManager:s,capabilities:n,intentDetectionViewModel:l,...c},h)=>{const u=Ke.jw((e=>{let t=7;return t=31*t+(0,_i.AC)(e.currentLens.id),t=31*t+(Fe.v.WithSuccess.State.isInSuccess(n)(e)?1231:1237),t}),e),g=(0,r.pipe)(u,p.U((e=>{const t=e.get();return Fe.v.WithSuccess.State.isInSuccess(n)(t)}))),v=(0,r.pipe)((0,me.u)(e,s,n),d.M(e),p.U((([e,t])=>({visible:!R.nL.hasCards(t)||S.isNone(t.currentLens.items.find((e=>!e.positionState.isHeightValid))),offset:e+6,animationInProgress:!0}))),m.O({visible:!1,offset:0,animationInProgress:!0}));return o.createElement(Ri.C,{className:Ni.cardList,onClick:e=>{e.target.getAttribute("class")===Ni.cardList&&t.assistantActions.next({type:he.Type.clickOnEmpty})},footer:o.createElement(ie.F.Fragment,null,(0,r.pipe)(g,p.U((e=>o.createElement(Gi,{position:v,isSuccess:e},o.createElement(se,{predictionsVM:c.predictionsPreviewViewModel}))))))},(a=>o.createElement(ie.F.Fragment,null,(0,r.pipe)(F.aj(g,t.havePremiumAlerts),p.U((([r,d])=>r&&!d?o.createElement(o.Fragment,null,o.createElement(Vi,{headerVM:c.headerViewModel}),o.createElement(Hi,{successView:t.successView,ref:h})):o.createElement(me.h,{state:e,cardsViewModel:i,cardsListScrollManager:s,connectorElements:a,ref:h,header:o.createElement(o.Fragment,null,o.createElement(Vi,{headerVM:c.headerViewModel}),d?o.createElement("div",{className:Ni.upgradeHookWrapper,role:"uphook-wrapper"},ee.UI.mount(we.n.ToggablePanel,t.upgradeHookFlow)):null),comparator:Ue.O.listItemOrd,capabilities:n,intentDetectionViewModel:l})))))))})),Wi=o.forwardRef((({viewModels:e,header:t,footer:i,className:a},s)=>o.createElement(Ri.C,{ref:s,className:a},(a=>o.createElement(me.h,{state:e.lensState,cardsViewModel:e.cardsViewModel,cardsListScrollManager:e.cardsListScrollManager,connectorElements:a,header:t,footer:i,comparator:Ue.O.listItemOrd,capabilities:e.capabilities,intentDetectionViewModel:S.none})))));var qi=i(73008);const zi=({children:e,layoutVM:t,panelClassName:i,contentClassName:a,footer:s,onClickBack:n,hideBackButton:r=Re.h.create(!1),dataPartName:l})=>o.createElement("div",{className:qi.viewOverlay,"data-grammarly-part":"assistant-view-overlay"},o.createElement(ie.F.Fragment,null,r.view((e=>!e&&o.createElement(Q.M,{className:qi.viewOverlayGoBack,clickHandler:()=>n?n():t.popActiveView(),dataGrammarlyPart:"assistant-go-back"},"<- Back")))),o.createElement("div",{className:i||qi.defaultViewOverlayPanel},o.createElement("div",{className:a||qi.content,"data-grammarly-part":l},e),s&&o.createElement("div",{className:qi.footer},s)));var Yi=i(28288),Ki=i(42373),$i=i(92783),Qi=i(40145);const Xi=o.forwardRef((({emogenieService:e,viewModels:t},i)=>o.createElement(zi,{dataPartName:"emogenie-view-overlay",layoutVM:t.assistantLayoutViewModel,panelClassName:qi.gradientViewOverlayPanel,hideBackButton:t.user.view((e=>e.isAnonymous))},o.createElement(ie.F.Fragment,null,t.lensPreviewViewModel.getLens(M.R.SpecialId.PredictionEmogenie).pipe(p.U((e=>e.count>0)),T.x(),p.U((a=>a?o.createElement(Wi,{key:"emogeniePredictionCardList",viewModels:t,ref:i,header:o.createElement(o.Fragment,null,o.createElement(Ji,{emogenieService:e}),o.createElement("div",{className:Qi.relatedSuggestionsTitle},"RELATED SUGGESTIONS"))}):o.createElement("div",{className:qi.gradientViewOverlayContent},o.createElement(Ji,{emogenieService:e}))))))))),Ji=({emogenieService:e})=>{var t;const i=e.viewState.get(),a=null===(t=i.report)||void 0===t?void 0:t.institutionLogo,s=i.isBrandTonesEnabled?o.createElement("div",null,a?o.createElement("img",{className:qi.logo,src:a}):null,i.institutionName," Tone detector"):"Tone detector";return o.createElement(o.Fragment,null,o.createElement("div",{className:qi.defaultViewOverlayHeader},s,(0,$i.G6)()?null:o.createElement(Yi.m,{secondary:!0})),o.createElement(ie.F.Fragment,null,e.viewState.view((({report:t,emotionsPoll:i,settings:a,isBrandTonesEnabled:s})=>t&&Array.isArray(t.emotions)&&o.createElement(Ki.G,{key:"emogenieReportPopup",showBanner:!1,report:t,actions:e.actions,emotionsPoll:i,settings:a,isBrandTonesEnabled:s})))))};var ea=i(53844);const ta=({feedbackVM:e,layoutVM:t})=>{const i=e.entryPoint===Be.Q.smartPhrases;return o.createElement(zi,{dataPartName:"feedback-view-overlay",layoutVM:t,panelClassName:qi.gradientViewOverlayPanel},o.createElement("div",{className:qi.gradientViewOverlayContent},o.createElement("div",{className:qi.defaultViewOverlayHeader},"Product Feedback"),o.createElement(ea.q,{domain:e.getDomain(),onClose:()=>t.popActiveView(),align:"left",style:{height:"calc(100% - 48px)"},title:i?o.createElement("span",null,"How do you like ",o.createElement("br",null)," this feature?"):void 0,onSubmit:t=>e.submitFeedback(t),withScore:!0,fixSubmitButtonOverflowBottomPadding:!0,hideLogo:!0})))};var ia=i(22667),aa=i(78846);const sa=e=>o.createElement("div",{className:aa.logo_score},ee.UI.mount(da,ve.Z.animatingFlow((()=>e.headerVM.logoScore),na))),na=(e,t)=>(0,r.pipe)(e,S.filter((e=>e.type!==t.type)),S.map((()=>Ai.Hk("fadeout","fadein")))),ra=ee.UI.Node.make((()=>o.createElement(ia.K,{className:aa.grammarly_logo,size:22}))),oa=ee.UI.Node.make((({view:e})=>o.createElement(ie.F.div,{className:aa.score_container,"data-grammarly-part":"assistant-score"},(0,r.pipe)(e("score"),(0,p.U)((({capiScore:e,isLoading:t})=>o.createElement(o.Fragment,null,o.createElement(Ci,{generalScore:e,strokeWidth:2,width:22,fontSize:e<100?11:9,isLoading:t,componentStyle:{transform:"translate(2px, -2px) rotate(-90deg)",cursor:"default"}})))))))),la=ee.UI.Union.make("type",{logo:ra,score:oa}),ca=ee.UI.Transition.make({fadein:aa.logoscore_fadein},{fadeout:aa.logoscore_fadeout}),da=ee.UI.Animated.make(ca,la);var pa=i(22679),ma=i(2027),ha=i(3860),ua=i(1620);const ga=({color:e=z.Z.neutral50})=>o.createElement("svg",{width:"32",height:"32",viewBox:"0 0 32 32",fill:"none",xmlns:"http://www.w3.org/2000/svg"},o.createElement("path",{d:"M15.8256 15.75L21.5 10M21.5 10V7.375M21.5 10H24.1047M23.5 5.5V8.125H26.1047M11.3605 24L12.8462 21.375M12.8462 21.375C13.734 21.8536 14.7483 22.125 15.8256 22.125C16.9028 22.125 17.9172 21.8536 18.805 21.375M12.8462 21.375C10.8548 20.3014 9.5 18.1852 9.5 15.75C9.5 12.2292 12.3321 9.375 15.8256 9.375C16.8052 9.375 17.7327 9.59941 18.5605 10M20.2907 24L18.805 21.375M18.805 21.375C20.7964 20.3014 22.1512 18.1852 22.1512 15.75C22.1512 14.7652 21.9296 13.8326 21.534 13M16.5 12.4435C16.2822 12.3986 16.0566 12.375 15.8256 12.375C13.9761 12.375 12.4767 13.886 12.4767 15.75C12.4767 17.614 13.9761 19.125 15.8256 19.125C17.6751 19.125 19.1744 17.614 19.1744 15.75C19.1744 15.5171 19.151 15.2897 19.1064 15.07",stroke:e,strokeLinecap:"round"})),va=({color:e=z.Z.neutral50})=>o.createElement("svg",{width:"32",height:"32",viewBox:"0 0 32 32",fill:"none",xmlns:"http://www.w3.org/2000/svg"},o.createElement("path",{d:"M15.5 9.5V9C15.2239 9 15 9.22386 15 9.5H15.5ZM17.5 9.5H18C18 9.22386 17.7761 9 17.5 9V9.5ZM20.8333 10.8333L21.1869 10.4798C21.0931 10.386 20.9659 10.3333 20.8333 10.3333C20.7007 10.3333 20.5735 10.386 20.4798 10.4798L20.8333 10.8333ZM22.1667 12.1667L22.5202 12.5202C22.7155 12.325 22.7155 12.0084 22.5202 11.8131L22.1667 12.1667ZM23.5 15.5H24C24 15.2239 23.7761 15 23.5 15V15.5ZM23.5 17.5V18C23.7761 18 24 17.7761 24 17.5H23.5ZM22.1667 20.8333L22.5202 21.1869C22.7155 20.9916 22.7155 20.675 22.5202 20.4798L22.1667 20.8333ZM20.8333 22.1667L20.4798 22.5202C20.675 22.7155 20.9916 22.7155 21.1869 22.5202L20.8333 22.1667ZM17.5 23.5V24C17.7761 24 18 23.7761 18 23.5H17.5ZM15.5 23.5H15C15 23.7761 15.2239 24 15.5 24V23.5ZM12.1667 22.1667L11.8131 22.5202C12.0084 22.7155 12.325 22.7155 12.5202 22.5202L12.1667 22.1667ZM10.8333 20.8333L10.4798 20.4798C10.386 20.5735 10.3333 20.7007 10.3333 20.8333C10.3333 20.9659 10.386 21.0931 10.4798 21.1869L10.8333 20.8333ZM9.5 17.5H9C9 17.7761 9.22386 18 9.5 18V17.5ZM9.5 15.5V15C9.22386 15 9 15.2239 9 15.5H9.5ZM10.8333 12.1667L10.4798 11.8131C10.386 11.9069 10.3333 12.0341 10.3333 12.1667C10.3333 12.2993 10.386 12.4265 10.4798 12.5202L10.8333 12.1667ZM12.1667 10.8333L12.5202 10.4798C12.4265 10.386 12.2993 10.3333 12.1667 10.3333C12.0341 10.3333 11.9069 10.386 11.8131 10.4798L12.1667 10.8333ZM12.7686 11.4353L12.4151 11.7888L12.7686 11.4353ZM11.4353 12.7686L11.0817 13.1222L11.4353 12.7686ZM21.5647 20.2314L21.2112 20.5849L21.5647 20.2314ZM21.5647 12.7686L21.2112 12.4151L21.5647 12.7686ZM15.5 10H17.5V9H15.5V10ZM17 9.5V10.3039H18V9.5H17ZM20.5849 11.7888L21.1869 11.1869L20.4798 10.4798L19.8778 11.0817L20.5849 11.7888ZM20.4798 11.1869L21.8131 12.5202L22.5202 11.8131L21.1869 10.4798L20.4798 11.1869ZM21.8131 11.8131L21.2112 12.4151L21.9183 13.1222L22.5202 12.5202L21.8131 11.8131ZM22.6961 16H23.5V15H22.6961V16ZM23 15.5V17.5H24V15.5H23ZM23.5 17H22.6961V18H23.5V17ZM21.2112 20.5849L21.8131 21.1869L22.5202 20.4798L21.9183 19.8778L21.2112 20.5849ZM21.8131 20.4798L20.4798 21.8131L21.1869 22.5202L22.5202 21.1869L21.8131 20.4798ZM21.1869 21.8131L20.5849 21.2112L19.8778 21.9183L20.4798 22.5202L21.1869 21.8131ZM17 22.6961V23.5H18V22.6961H17ZM17.5 23H15.5V24H17.5V23ZM16 23.5V22.6961H15V23.5H16ZM12.4151 21.2112L11.8131 21.8131L12.5202 22.5202L13.1222 21.9183L12.4151 21.2112ZM12.5202 21.8131L11.1869 20.4798L10.4798 21.1869L11.8131 22.5202L12.5202 21.8131ZM11.1869 21.1869L11.7888 20.5849L11.0817 19.8778L10.4798 20.4798L11.1869 21.1869ZM10.3039 17H9.5V18H10.3039V17ZM10 17.5V15.5H9V17.5H10ZM9.5 16H10.3039V15H9.5V16ZM11.7888 12.4151L11.1869 11.8131L10.4798 12.5202L11.0817 13.1222L11.7888 12.4151ZM11.1869 12.5202L12.5202 11.1869L11.8131 10.4798L10.4798 11.8131L11.1869 12.5202ZM11.8131 11.1869L12.4151 11.7888L13.1222 11.0817L12.5202 10.4798L11.8131 11.1869ZM16 10.3039V9.5H15V10.3039H16ZM19.6667 16.5C19.6667 14.7511 18.2489 13.3333 16.5 13.3333V14.3333C17.6966 14.3333 18.6667 15.3034 18.6667 16.5H19.6667ZM16.5 19.6667C18.2489 19.6667 19.6667 18.2489 19.6667 16.5H18.6667C18.6667 17.6966 17.6966 18.6667 16.5 18.6667V19.6667ZM12.4151 11.7888C13.738 13.1118 16 12.1748 16 10.3039H15C15 11.2839 13.8151 11.7747 13.1222 11.0817L12.4151 11.7888ZM10.3039 16C12.1748 16 13.1118 13.738 11.7888 12.4151L11.0817 13.1222C11.7747 13.8151 11.2839 15 10.3039 15V16ZM11.7888 20.5849C13.1118 19.262 12.1748 17 10.3039 17V18C11.2839 18 11.7747 19.1849 11.0817 19.8778L11.7888 20.5849ZM17 10.3039C17 12.1748 19.262 13.1118 20.5849 11.7888L19.8778 11.0817C19.1849 11.7747 18 11.2839 18 10.3039H17ZM13.3333 16.5C13.3333 18.2489 14.7511 19.6667 16.5 19.6667V18.6667C15.3034 18.6667 14.3333 17.6966 14.3333 16.5H13.3333ZM16 22.6961C16 20.8252 13.738 19.8882 12.4151 21.2112L13.1222 21.9183C13.8151 21.2253 15 21.7161 15 22.6961H16ZM20.5849 21.2112C19.262 19.8882 17 20.8252 17 22.6961H18C18 21.7161 19.1849 21.2253 19.8778 21.9183L20.5849 21.2112ZM22.6961 17C20.8252 17 19.8882 19.262 21.2112 20.5849L21.9183 19.8778C21.2253 19.1849 21.7161 18 22.6961 18V17ZM21.2112 12.4151C19.8882 13.738 20.8252 16 22.6961 16V15C21.7161 15 21.2253 13.8151 21.9183 13.1222L21.2112 12.4151ZM14.3333 16.5C14.3333 15.3034 15.3034 14.3333 16.5 14.3333V13.3333C14.7511 13.3333 13.3333 14.7511 13.3333 16.5H14.3333Z",fill:e})),fa=e=>{const t=(0,ma.e8)(),[i,a]=o.useState(!1),[s,n]=o.useState(!1),l=e.viewModels.assistantLayoutViewModel,c=e.viewModels.assistantHeaderViewModel,d=o.useContext(hi.Context),m=(0,r.pipe)(e.viewModels.assistantProofitViewModel,S.map((e=>e.feature)),S.map((e=>o.createElement(ie.F.Fragment,null,F.aj([e.layoutCreated,l.activeView.view((t=>t.type===e.assistantViewType()))]).pipe(p.U((([t,i])=>t?o.createElement(bi.u,{message:d.proofitTooltip,showDelay:pa.gk,disabled:i},o.createElement("div",{"data-grammarly-part":"assistant-header-action-btn-proofit",className:aa.headerActionBtn},o.createElement(ha.h,{onClick:()=>i?l.popActiveView():l.pushActiveView({type:e.assistantViewType()})},o.createElement("div",{className:aa.headerActionBtnProofitIcon})))):null)))))),S.toNullable),h=o.createElement(bi.u,{message:"Close panel",showDelay:pa.gk},o.createElement("div",{"data-grammarly-part":"assistant-header-action-btn-close",className:aa.headerActionBtn},o.createElement(ua.P,{onClick:c.close})));return o.createElement(bi.u,{message:"Grab and drag to move panel",showDelay:pa.gk,disabled:i},o.createElement("div",Object.assign({},(0,Ei.Sh)(aa.header,s&&aa.actions_hovered),{ref:t,onMouseDown:()=>a(!0),onMouseOut:()=>a(!1)}),o.createElement(sa,{headerVM:c}),o.createElement(wa,null),o.createElement(ie.F.div,{className:aa.headerActions,onMouseOver:()=>n(!0),onMouseOut:()=>n(!1)},l.isHeaderNavigationEnabled.view((e=>e?o.createElement(o.Fragment,null,m,o.createElement(ie.F.Fragment,null,c.showSetGoalsActionButton.view((e=>e&&o.createElement(bi.u,{message:d.setGoalsTooltip,showDelay:pa.gk},o.createElement("div",{"data-grammarly-part":"assistant-header-action-btn-set-goals",className:aa.headerActionBtn},o.createElement(ha.h,{onClick:()=>c.open("setGoals")},o.createElement(ga,null))))))),o.createElement(ie.F.Fragment,null,Re.h.combine(c.showSettingsActionButton,l.activeView,((e,t)=>{const i=t.type===f.a.Type.settings;return e&&o.createElement(bi.u,{message:"Settings",showDelay:pa.gk,disabled:i},o.createElement("div",{"data-grammarly-part":"assistant-header-action-btn-settings",className:aa.headerActionBtn},o.createElement(ha.h,{onClick:()=>i?l.popActiveView():l.pushActiveView({type:f.a.Type.settings})},o.createElement(va,null))))}))),h):h)))))},wa=()=>o.createElement("div",{className:aa.draggableWrapper},o.createElement("div",{className:aa.draggable}));var _a=i(24606),ba=i(95888),ya=i(2249),Ea=i(41794),ka=i.n(Ea);const Ca=[{question:"How important do you consider this piece of writing?",helperText:"Make a selection below",multiSelect:!1,options:[{value:"extremelyImportant",label:"Extremely important"},{value:"somewhatImportant",label:"Somewhat important"},{value:"neutral",label:"Neutral"},{value:"somewhatUnimportant",label:"Somewhat unimportant"},{value:"extremelyUnimportant",label:"Extremely unimportant"}]},{question:"What kind of feedback would be helpful when writing something like this?",helperText:"Select all that apply",multiSelect:!0,options:[{value:"clearCommunication",label:"Clear communication"},{value:"soundingFluent",label:"Sounding fluent"},{value:"toneAndDelivery",label:"Tone and delivery"},{value:"synonyms",label:"Synonyms"},{value:"conciseness",label:"Conciseness"}]}],Sa=e=>{const[t,i]=(0,o.useState)(void 0);return o.createElement("form",{className:ka().contentContainer},o.createElement("div",{className:ka().main},o.createElement("div",{className:ka().question},e.question),o.createElement("div",{className:ka().helperText},e.helperText),o.createElement("div",{className:ka().optionsContainer},e.options.map(((e,a)=>o.createElement("div",{key:a,className:ka().radioOption},o.createElement("input",{type:"radio",id:e.value,name:"contact",value:e.value,checked:t===e.value,onChange:e=>i(e.target.value)}),o.createElement("label",{htmlFor:e.value},e.label)))))),o.createElement("div",{className:ka().buttonsContainer},o.createElement(_a.z,{style:{color:"#4A6EE0"},kind:"transparent-hoverable",onClick:e.dismissPopup},"Dismiss"),o.createElement(_a.z,{disabled:!t,onClick:()=>t&&e.submitAnswers([t])},"extremelyImportant"===t||"somewhatImportant"===t?"Next":"Submit")))},Aa=e=>{const[t,i]=(0,o.useState)([]);return o.createElement("form",{className:ka().contentContainer},o.createElement("div",{className:ka().main},o.createElement("div",{className:ka().question},e.question),o.createElement("div",{className:ka().helperText},e.helperText),o.createElement("div",{className:ka().optionsContainer},e.options.map(((e,a)=>o.createElement(ba.J,{key:a,className:ka().checkboxOption,labelId:`importance-survey-${e.value}-checkbox`,onChange:a=>{i(a?[...t,e.value]:t.filter((t=>t!==e.value)))}},e.label))))),o.createElement("div",{className:ka().buttonsContainer},o.createElement(_a.z,{style:{color:"#4A6EE0"},kind:"transparent-hoverable",onClick:e.dismissPopup},"Dismiss"),o.createElement(_a.z,{disabled:0===t.length,onClick:()=>e.submitAnswers(t)},"Submit")))},Ia=e=>o.createElement("div",{className:ka().thankYouContentContainer},o.createElement("div",{className:ka().thankYouMain},o.createElement(ya.R,{size:44}),o.createElement("div",{className:ka().thankYou},"Thank you!"),o.createElement("div",{className:ka().thankYouSubtext},"Your feedback helps us develop features tailored to your writing needs.")),o.createElement("div",{className:ka().buttonsContainer},o.createElement(_a.z,{onClick:e.closePopup},"Done"))),Ma=({importanceSurveyVM:e,layoutVM:t})=>o.createElement(zi,{dataPartName:"importance-survey-view-overlay",layoutVM:t,hideBackButton:e.hideBackButton},o.createElement("div",{className:ka().container},o.createElement("div",{className:qi.defaultViewOverlayHeader},"Help Grammarly get smarter!"),o.createElement(ie.F.Fragment,null,e.step.view((t=>t===De.importance?o.createElement(Sa,Object.assign({},Ca[0],{dismissPopup:e.dismiss,submitAnswers:e.submit})):t===De.kindOfFeedback?o.createElement(Aa,Object.assign({},Ca[1],{dismissPopup:e.dismiss,submitAnswers:e.submit})):t===De.thankYou?o.createElement(Ia,{closePopup:e.done}):null))))),xa=({viewModels:e})=>o.createElement(ie.F.Fragment,null,e.assistantLayoutViewModel.activeView.view((t=>{if(t.type!==f.a.Type.popup)return null;const{popupType:i}=t;return i===f.a.PopupType.importanceSurvey?o.createElement(Ma,{layoutVM:e.assistantLayoutViewModel,importanceSurveyVM:e.importanceSurveyViewModel}):null})));var La=i(55364),Ta=i(86705);const Fa=({layoutVM:e,onClickBack:t,children:i})=>{const[a,s]=o.useState(!1);return o.createElement(zi,{dataPartName:"proofit-view-overlay",layoutVM:e,panelClassName:La.proofitViewOverlayPanel,onClickBack:t},o.createElement("div",{className:La.proofitViewOverlayContent,tabIndex:-1,ref:e=>{null===e||a||(e.focus(),s(!0))}},o.createElement("div",{className:qi.defaultViewOverlayHeader},o.createElement("div",{className:La.proofitViewOverlayHeader},"Expert Writing Help",o.createElement(Ta.v,{browser:e.browser,className:La.proofitViewOverlayHeaderBetaBadge}))),i))};var Va=i(81108),Pa=i(59e3),Ra=i(17487);const Oa=({turnaroundTime:e,freeTrialQuota:t,onSubmit:i,disabledInfo:a,isLoading:s,style:n,onTogglePrivacyInfo:r,showPrivacyInfo:l})=>{const[c,d]=o.useState(null!=l&&l),p=t>0?t:0;return o.useEffect((()=>{null==r||r(c)}),[c]),o.useEffect((()=>{d(null!=l&&l)}),[l]),o.createElement("div",{"data-grammarly-part":"proofit-request-form",style:{width:"100%",height:"100%",...n}},o.createElement("div",{className:Ra.proofitRequestForm},c?o.createElement(o.Fragment,null,o.createElement("div",{className:Ra.proofitRequestFormPrivacyInfoTitle},"How we protect you"),o.createElement("div",{className:Ra.proofitRequestFormPrivacyInfoDescription},o.createElement("div",{className:Ra.proofitRequestFormPrivacyInfoDescriptionItem},o.createElement("div",{className:Ra.proofitRequestFormPrivacyInfoDescriptionItemBulletPoint}),o.createElement("div",{className:Ra.proofitRequestFormPrivacyInfoDescriptionItemText},"Our writing experts will see only your current email draft—no prior messages or contact details.")),o.createElement("div",{className:Ra.proofitRequestFormPrivacyInfoDescriptionItem},o.createElement("div",{className:Ra.proofitRequestFormPrivacyInfoDescriptionItemBulletPoint}),o.createElement("div",{className:Ra.proofitRequestFormPrivacyInfoDescriptionItemText},"We will not sell, rent, or make public any of your personal data."))),o.createElement(_a.z,{kind:"neutral",onClick:()=>d(!1)},"Continue")):o.createElement(o.Fragment,null,o.createElement("div",{className:Ra.proofitRequestFormImg}),o.createElement("div",{className:Ra.proofitRequestFormTitle},"Get instant writing help"),o.createElement("div",{className:Ra.proofitRequestFormDescription},"Our writing experts are standing by to review your email."),o.createElement("div",{className:Ra.proofitRequestFormCostAndTime},o.createElement("div",{className:Ra.proofitRequestFormCost},o.createElement("div",{className:Ra.proofitRequestFormCostAndTimeTitle},p," free ",te._6(p,"review","reviews")),o.createElement("div",{className:Ra.proofitRequestFormCostAndTimeSubtitle},"left this month",o.createElement("sup",null,"*"))),o.createElement("div",{className:Ra.proofitRequestFormTime},o.createElement("div",{className:Ra.proofitRequestFormCostAndTimeTitle},e," seconds"),o.createElement("div",{className:Ra.proofitRequestFormCostAndTimeSubtitle},"average turnaround"))),o.createElement(_a.z,{kind:Boolean(a)?"neutral":"primary",containerClassName:Ra.proofitRequestFormRequestBtn,disabled:Boolean(a||s),onClick:i},s?o.createElement("div",{className:Pa.proofitRequestFormBtnLoadingSpinner}):"Request now"),a||s?a?o.createElement("div",{className:Ra.proofitRequestFormUnavailableMsg},o.createElement(Va.Q,{info:a})):null:o.createElement(_a.z,{kind:"link",onClick:()=>d(!0)},"Learn how we protect your privacy"),o.createElement("div",{className:Ra.proofitRequestFormFreeTrialFootnote},o.createElement("span",null,o.createElement("sup",null,"*")," included with your Premium subscription")))))};Oa.defaultProps={disabledInfo:null,isLoading:!1};const Na=({layoutVM:e,proofitVM:t})=>{const i=(0,ma.fW)(),[a,s]=o.useState(!1);return o.createElement(Fa,{layoutVM:e,onClickBack:()=>{a?s(!1):e.popActiveView()}},o.createElement(ie.F.Fragment,null,(0,F.aj)([t.feature.layoutCreated,t.feature.requestInfo,t.feature.turnaroundTime,t.feature.quotaRemaining,t.feature.requestDisabledInfo]).pipe((0,p.U)((([e,n,r,l,c])=>e&&n.status!==Je.eE.REVIEWING?o.createElement(Oa,{turnaroundTime:r,freeTrialQuota:l,onSubmit:()=>t.onSubmitRequest(i),style:{height:"calc(100% - 48px)"},disabledInfo:c,isLoading:n.status===Je.eE.PREPARING||n.status===Je.eE.PRE_SUBMIT,showPrivacyInfo:a,onTogglePrivacyInfo:s}):null)))))};var Da=i(8400);const Ua=({suggestionsMade:e,onAccept:t})=>o.createElement("div",{className:Da.proofitReviewForm,"data-grammarly-part":"proofit-review-form"},o.createElement("div",{className:Da.proofitReviewFormImg}),o.createElement("div",{className:Da.proofitReviewFormTitle},"Our experts made ",e," ",te._6(e,"suggestion","suggestions")),o.createElement("div",{className:Da.proofitReviewFormDescription},"Their changes are highlighted in your email."),o.createElement(_a.z,{onClick:t},"Done")),Ba=({layoutVM:e,proofitVM:t})=>{const i=(0,ma.fW)();return o.createElement(Fa,{layoutVM:e},o.createElement(ie.F.Fragment,null,(0,F.aj)([t.feature.layoutCreated,t.feature.requestInfo]).pipe((0,p.U)((([e,a])=>e&&a.status===Je.eE.REVIEWING?o.createElement(Ua,{suggestionsMade:a.suggestionsMade,onAccept:()=>t.onCompleteRequest(i)}):null)))))};class Ha extends o.Component{render(){return this._idSuffix=this._idSuffix||"readersAttentionOnboardingBanner_"+Ha._nextIdSuffix++,o.createElement("svg",{className:this.props.className,viewBox:"0 2 296 144",fill:"none",xmlns:"http://www.w3.org/2000/svg"},o.createElement("g",{clipPath:`url(#clip0_${this._idSuffix})`},o.createElement("rect",{width:"296",height:"144",fill:"#4A6EE0"}),o.createElement("path",{d:"M-5.5 -3.5H261.5V47.5H-5.5V-3.5Z",fill:"#6E66DE",stroke:"#1F243C"}),o.createElement("path",{d:"M-2.79293 -197.5L429.5 234.793V-197.5H-2.79293Z",fill:"#15C39A",stroke:"#1F243C"}),o.createElement("path",{d:"M219.057 33C222.992 33 226.182 29.8101 226.182 25.875C226.182 21.94 222.992 18.7501 219.057 18.7501C215.122 18.7501 211.932 21.94 211.932 25.875C211.932 29.8101 215.122 33 219.057 33Z",fill:"#1F243C",stroke:"#1F243C",strokeMiterlimit:"10"}),o.createElement("path",{d:"M221.477 31.0899C225.92 31.0899 229.522 27.4881 229.522 23.045C229.522 18.6018 225.92 15 221.477 15C217.033 15 213.432 18.6018 213.432 23.045C213.432 27.4881 217.033 31.0899 221.477 31.0899Z",fill:"#41D9B5",stroke:"#1F243C",strokeMiterlimit:"10"}),o.createElement("path",{d:"M220.188 27.045C220.009 27.045 219.841 26.9778 219.717 26.8434L216.927 24.0646C216.67 23.8069 216.67 23.3811 216.927 23.1122C217.185 22.8545 217.611 22.8545 217.88 23.1122L220.188 25.4204L225.353 20.2662C225.611 20.0085 226.037 20.0085 226.306 20.2662C226.563 20.5239 226.563 20.9497 226.306 21.2186L220.67 26.8546C220.535 26.9778 220.367 27.045 220.188 27.045Z",fill:"white"}),o.createElement("path",{d:"M68.125 57C72.06 57 75.25 53.8101 75.25 49.875C75.25 45.94 72.06 42.7501 68.125 42.7501C64.19 42.7501 61 45.94 61 49.875C61 53.8101 64.19 57 68.125 57Z",fill:"#1F243C",stroke:"#1F243C",strokeMiterlimit:"10"}),o.createElement("path",{d:"M70.545 55.0899C74.9881 55.0899 78.5899 51.4881 78.5899 47.045C78.5899 42.6018 74.9881 39 70.545 39C66.1018 39 62.5 42.6018 62.5 47.045C62.5 51.4881 66.1018 55.0899 70.545 55.0899Z",fill:"#41D9B5",stroke:"#1F243C",strokeMiterlimit:"10"}),o.createElement("path",{d:"M69.2564 51.045C69.0771 51.045 68.909 50.9778 68.7858 50.8434L65.9958 48.0646C65.7381 47.8069 65.7381 47.3811 65.9958 47.1122C66.2535 46.8545 66.6793 46.8545 66.9482 47.1122L69.2564 49.4204L74.4217 44.2662C74.6794 44.0085 75.1052 44.0085 75.3741 44.2662C75.6318 44.5239 75.6318 44.9497 75.3741 45.2186L69.7382 50.8546C69.6037 50.9778 69.4357 51.045 69.2564 51.045Z",fill:"white"}),o.createElement("rect",{x:"132",y:"38",width:"39",height:"24",rx:"2",fill:"#1F243C",stroke:"#1F243C"}),o.createElement("rect",{x:"135",y:"35",width:"39",height:"24",rx:"2",fill:"#F8C6DA",stroke:"#1F243C"}),o.createElement("path",{d:"M135 58.3296L149.303 47.4857L153.298 44.4591C154.007 43.923 154.993 43.923 155.702 44.4591L159.697 47.4857L174 58.3296",stroke:"#1F243C",strokeMiterlimit:"10"}),o.createElement("path",{d:"M173.914 35.5L159.698 47.6583L155.806 50.9962C155.063 51.6361 153.956 51.6361 153.212 50.9962L149.303 47.6583L135.087 35.5",fill:"#F8C6DA"}),o.createElement("path",{d:"M173.914 35.5L159.698 47.6583L155.806 50.9962C155.063 51.6361 153.956 51.6361 153.212 50.9962L149.303 47.6583L135.087 35.5",stroke:"#1F243C",strokeMiterlimit:"10"}),o.createElement("rect",{x:"135",y:"35",width:"39",height:"24",rx:"2",stroke:"#1F243C"}),o.createElement("rect",{y:"32",width:"296",height:"112",fill:`url(#paint0_linear_${this._idSuffix})`}),o.createElement("path",{d:"M185.5 22C185.5 18.961 183.039 16.5 180 16.5C183.039 16.5 185.5 14.039 185.5 11C185.5 14.039 187.961 16.5 191 16.5C187.965 16.5 185.5 18.9651 185.5 22Z",fill:"#F9EA9E",stroke:"#1F243C",strokeLinecap:"round",strokeLinejoin:"round"}),o.createElement("path",{d:"M239.5 128C239.5 124.961 237.039 122.5 234 122.5C237.039 122.5 239.5 120.039 239.5 117C239.5 120.039 241.961 122.5 245 122.5C241.965 122.5 239.5 124.965 239.5 128Z",fill:"#F9EA9E",stroke:"#1F243C",strokeLinecap:"round",strokeLinejoin:"round"}),o.createElement("path",{d:"M24.5 63C24.5 59.961 22.039 57.5 19 57.5C22.039 57.5 24.5 55.039 24.5 52C24.5 55.039 26.961 57.5 30 57.5C26.9651 57.5 24.5 59.9651 24.5 63Z",fill:"#F9EA9E",stroke:"#1F243C",strokeLinecap:"round",strokeLinejoin:"round"}),o.createElement("rect",{x:"263",y:"76",width:"63",height:"77",rx:"2",fill:"#1F243C",stroke:"#1F243C"}),o.createElement("rect",{x:"267",y:"72",width:"63",height:"77",rx:"2",fill:"#F9FAFF",stroke:"#1F243C"}),o.createElement("path",{d:"M318.759 89.7112H278",stroke:"#1F243C",strokeMiterlimit:"10"}),o.createElement("path",{d:"M318.759 101.227H278",stroke:"#1F243C",strokeMiterlimit:"10"}),o.createElement("path",{d:"M318.759 112.743H278.095",stroke:"#1F243C",strokeMiterlimit:"10"}),o.createElement("path",{d:"M318.759 124.259H278",stroke:"#1F243C",strokeMiterlimit:"10"}),o.createElement("g",{style:{mixBlendMode:"multiply"},opacity:"0.4"},o.createElement("path",{d:"M318.759 101.227H278",stroke:"#41D9B5",strokeWidth:"10",strokeMiterlimit:"10"})),o.createElement("g",{style:{mixBlendMode:"multiply"},opacity:"0.4"},o.createElement("path",{d:"M305.43 112.743H278.095",stroke:"#41D9B5",strokeWidth:"10",strokeMiterlimit:"10"}))),o.createElement("defs",null,o.createElement("linearGradient",{id:`paint0_linear_${this._idSuffix}`,x1:"148",y1:"32",x2:"148",y2:"144",gradientUnits:"userSpaceOnUse"},o.createElement("stop",{stopColor:"#26307D",stopOpacity:"0"}),o.createElement("stop",{offset:"1",stopColor:"#26307D",stopOpacity:"0.5"})),o.createElement("clipPath",{id:`clip0_${this._idSuffix}`},o.createElement("rect",{width:"296",height:"144",fill:"white"}))))}}Ha._nextIdSuffix=0;var ja=i(80895),Ga=i(90295);const Za=({layoutVM:e,readersAttentionVM:t,showOnboardingButton:i})=>o.createElement(zi,{dataPartName:"readers-attention-onboarding-overlay",layoutVM:e,panelClassName:Ga.onboardingPanel,contentClassName:Ga.onboardingPanelContent},o.createElement("div",{className:Ga.onboardingBanner},o.createElement(Ha,{className:Ga.onboardingBannerImage}),o.createElement("div",{className:Ga.onboardingHeader},"Reader′s attention",o.createElement(ja.C,{title:"NEW",kind:"gold"})),o.createElement("div",{className:Ga.onboardingBannerMessage},"Get your important information across")),o.createElement("div",{className:Ga.onboardingContent},o.createElement("div",null,"Grammarly predicts which parts of your email will be read.",o.createElement("ul",null,o.createElement("li",null,o.createElement("span",{className:Ga.heatmap},o.createElement("b",null,"Highlighted text is most likely to be read."))),o.createElement("li",null,"The rest of the text may be skimmed or skipped.")),"Follow Grammarly’s suggestions to keep your reader’s attention."),i&&o.createElement(_a.z,{kind:"success",onClick:()=>t.getStarted(),containerClassName:Ga.gettingStartedButton,dataGrammarlyPart:"readers-attention-get-started-button"},"Get started")));var Wa=i(47960);const qa=({feedbackVM:e,className:t,entryPoint:i})=>o.createElement(bi.u,{showDelay:pa.gk,message:"Leave feedback"},o.createElement("div",Object.assign({},(0,Ei.Sh)(Ni.feedback_button,t),{onClick:()=>e.openFeedback(i),"data-grammarly-part":"assistant-feedback-btn"}),o.createElement(Wa.A,{color:z.Z.blue50}),"Anything we can improve?"));var za=i(36145);const Ya=()=>o.createElement("svg",{width:"5",height:"5",viewBox:"0 0 5 5",fill:"none",xmlns:"http://www.w3.org/2000/svg"},o.createElement("circle",{cx:"2.5",cy:"2.5",r:"2.5",fill:z.Z.neutral90}));class Ka extends o.Component{render(){return this._idSuffix=this._idSuffix||"clipboard_"+Ka._nextIdSuffix++,o.createElement("svg",{width:"16",height:"17",viewBox:"0 0 16 17",fill:"none",xmlns:"http://www.w3.org/2000/svg"},o.createElement("g",{clipPath:`url(#clip0_${this._idSuffix})`},o.createElement("path",{d:"M13.5 14.6001C13.5 15.1498 13.0677 15.6001 12.54 15.6001H3.46C2.93225 15.6001 2.5 15.1498 2.5 14.6001V2.85059C2.5 2.30084 2.93225 1.85059 3.46 1.85059H12.54C13.0677 1.85059 13.5 2.30084 13.5 2.85059V14.6001Z",fill:"#B47D56"}),o.createElement("path",{d:"M13.0661 15.35H3.43408V13.4585L12.6803 6.31396L13.0661 15.35Z",fill:`url(#paint0_linear_${this._idSuffix})`}),o.createElement("path",{d:"M3.32324 2.97559C3.32324 2.97559 3.40224 8.82509 3.25049 14.9751H12.75C12.664 8.82509 12.6772 2.97559 12.6772 2.97559H3.32324Z",fill:"white"}),o.createElement("path",{d:"M11.5 5.3501H6.5V5.6001H11.5V5.3501Z",fill:"#6E8189"}),o.createElement("path",{d:"M11.5 7.8501H6.5V8.1001H11.5V7.8501Z",fill:"#6E8189"}),o.createElement("path",{d:"M11.5 10.3501H6.5V10.6001H11.5V10.3501Z",fill:"#6E8189"}),o.createElement("path",{d:"M11.5 12.8501H6.5V13.1001H11.5V12.8501Z",fill:"#6E8189"}),o.createElement("path",{d:"M5.81201 2.87137C5.81201 2.87137 5.82276 2.39812 6.11126 2.29287C6.26901 2.23537 7.28751 1.91162 7.28751 1.91162C7.28751 1.91162 7.35926 2.85137 5.81201 2.87137Z",fill:"#B3C2C6"}),o.createElement("path",{d:"M10.1869 2.87137C10.1869 2.87137 10.1762 2.39812 9.88769 2.29287C9.73044 2.23537 8.71194 1.91162 8.71194 1.91162C8.71194 1.91162 8.64019 2.85137 10.1869 2.87137Z",fill:"#B3C2C6"}),o.createElement("path",{d:"M5.4936 2.46876C5.46235 2.38726 5.60835 2.36576 5.65435 2.40126C5.83685 2.54426 5.94085 2.61126 5.9746 2.61176C6.5781 2.62051 6.6231 2.53701 6.6646 2.63076C5.49885 3.06426 5.75285 3.13901 5.4936 2.46876Z",fill:"#6E8189"}),o.createElement("path",{d:"M10.506 2.46974C10.5372 2.38824 10.3912 2.36673 10.3457 2.40223C10.1632 2.54524 10.0592 2.61174 10.0249 2.61224C9.42145 2.62099 9.37645 2.53749 9.33545 2.63074C10.5012 3.06524 10.2472 3.13999 10.506 2.46974Z",fill:"#6E8189"}),o.createElement("path",{d:"M10.5055 2.8331C10.1408 2.7661 9.42651 2.6271 9.38551 2.6271C9.35476 2.6271 9.29901 2.57135 9.29901 2.5411C9.29901 2.34035 9.29901 1.92185 9.29901 1.75835C9.29901 1.65685 8.88501 1.48235 8.79376 1.3551C8.64926 1.15135 8.59401 0.600098 7.99951 0.600098C7.40526 0.600098 7.35001 1.15135 7.20501 1.3551C7.11426 1.48285 6.69976 1.65685 6.69976 1.75835C6.69976 1.92185 6.69976 2.34035 6.69976 2.5411C6.69976 2.57135 6.64401 2.6271 6.61376 2.6271C6.57226 2.6271 5.85851 2.76685 5.49326 2.8331C5.10801 2.90435 4.99951 3.6001 4.99951 3.6001H7.99951H10.9993C10.9993 3.6001 10.8908 2.90435 10.5055 2.8331ZM7.99951 1.5421C7.79251 1.5421 7.62451 1.3746 7.62451 1.1671C7.62451 0.959598 7.79251 0.792098 7.99951 0.792098C8.20701 0.792098 8.37451 0.959598 8.37451 1.1671C8.37451 1.3746 8.20701 1.5421 7.99951 1.5421Z",fill:`url(#paint1_linear_${this._idSuffix})`}),o.createElement("path",{d:"M7.99961 0.766602C7.77836 0.766602 7.59961 0.946352 7.59961 1.1671C7.59961 1.38785 7.77836 1.5676 7.99961 1.5676C8.22086 1.5676 8.39961 1.38785 8.39961 1.1671C8.39961 0.946352 8.22086 0.766602 7.99961 0.766602ZM7.99961 1.4531C7.84136 1.4531 7.71336 1.3251 7.71336 1.1666C7.71336 1.00885 7.84136 0.880352 7.99961 0.880352C8.15836 0.880352 8.28611 1.00885 8.28611 1.1666C8.28636 1.3251 8.15836 1.4531 7.99961 1.4531Z",fill:`url(#paint2_linear_${this._idSuffix})`}),o.createElement("path",{d:"M5.875 4.7251V5.9751H4.625V4.7251H5.875ZM6 4.6001H4.5V6.1001H6V4.6001Z",fill:"#6E8189"}),o.createElement("path",{d:"M5.875 7.2251V8.4751H4.625V7.2251H5.875ZM6 7.1001H4.5V8.6001H6V7.1001Z",fill:"#6E8189"}),o.createElement("path",{d:"M5.875 9.7251V10.9751H4.625V9.7251H5.875ZM6 9.6001H4.5V11.1001H6V9.6001Z",fill:"#6E8189"}),o.createElement("path",{d:"M5.875 12.2251V13.4751H4.625V12.2251H5.875ZM6 12.1001H4.5V13.6001H6V12.1001Z",fill:"#6E8189"}),o.createElement("path",{d:"M6.30128 4.66504C6.04928 4.74229 5.55128 4.98329 5.29353 5.55529C5.29353 5.55529 5.08803 5.28229 4.90578 5.20904C4.85403 5.20704 4.72278 5.21879 4.63428 5.31604C4.63428 5.31604 4.89353 5.39029 5.27978 5.97729C5.37303 5.91429 5.53128 5.81529 5.53128 5.81529C5.74378 5.14479 6.14403 4.83329 6.34328 4.70779C6.32953 4.69279 6.31603 4.67829 6.30128 4.66504Z",fill:"#E81C27"})),o.createElement("defs",null,o.createElement("linearGradient",{id:`paint0_linear_${this._idSuffix}`,x1:"8.25008",y1:"15.35",x2:"8.25008",y2:"6.31419",gradientUnits:"userSpaceOnUse"},o.createElement("stop",{stopColor:"#1A1626",stopOpacity:"0.05"}),o.createElement("stop",{offset:"0.0917",stopColor:"#1A1626",stopOpacity:"0.0706"}),o.createElement("stop",{offset:"0.6667",stopColor:"#1A1626",stopOpacity:"0.2"})),o.createElement("linearGradient",{id:`paint1_linear_${this._idSuffix}`,x1:"7.99939",y1:"3.6001",x2:"7.99939",y2:"0.600098",gradientUnits:"userSpaceOnUse"},o.createElement("stop",{stopColor:"#7E8A8F"}),o.createElement("stop",{offset:"0.0221",stopColor:"#9CA7AC"}),o.createElement("stop",{offset:"0.0502",stopColor:"#BBC6CB"}),o.createElement("stop",{offset:"0.0777",stopColor:"#D1DBE0"}),o.createElement("stop",{offset:"0.1038",stopColor:"#DEE9EE"}),o.createElement("stop",{offset:"0.1273",stopColor:"#E3EDF2"}),o.createElement("stop",{offset:"0.2545",stopColor:"#CFD8DD"}),o.createElement("stop",{offset:"0.4655",stopColor:"#CCD5DA"}),o.createElement("stop",{offset:"0.6185",stopColor:"#C3CCD1"}),o.createElement("stop",{offset:"0.7531",stopColor:"#B3BDC2"}),o.createElement("stop",{offset:"0.8766",stopColor:"#9DA8AD"}),o.createElement("stop",{offset:"0.9924",stopColor:"#808C91"}),o.createElement("stop",{offset:"1",stopColor:"#7E8A8F"})),o.createElement("linearGradient",{id:`paint2_linear_${this._idSuffix}`,x1:"7.99961",y1:"1.56738",x2:"7.99961",y2:"0.766602",gradientUnits:"userSpaceOnUse"},o.createElement("stop",{stopColor:"#D9E3E8"}),o.createElement("stop",{offset:"0.1606",stopColor:"#D5DFE3"}),o.createElement("stop",{offset:"0.3396",stopColor:"#C7D1D6"}),o.createElement("stop",{offset:"0.5274",stopColor:"#B2BBC0"}),o.createElement("stop",{offset:"0.7214",stopColor:"#939DA1"}),o.createElement("stop",{offset:"0.9182",stopColor:"#6C7679"}),o.createElement("stop",{offset:"1",stopColor:"#5A6366"})),o.createElement("clipPath",{id:`clip0_${this._idSuffix}`},o.createElement("rect",{width:"16",height:"16",fill:"white",transform:"translate(0 0.100098)"}))))}}Ka._nextIdSuffix=0;var $a=i(85255),Qa=i(91197);const Xa=({viewModel:e})=>{const t=e.height.pipe(p.U(S.fold(g.r5,(()=>Qa.animateChecklistHeightChanges))));return o.createElement(ie.F.div,Object.assign({},(0,Ei.Sh)(Qa.checklistAnimationWrapper,t),{style:{height:e.height.pipe(p.U(S.getOrElse(g.r5)))}}),ee.UI.mount(ss,function(e){return ve.Z.animatingFlow(e,((e,t)=>S.isNone(e)?S.none:e.value.kind===t.kind?S.some(Ai.Hk("fadeOutContentChange","fadeInContentChange")):"expanded"===t.kind?S.some(Ai.Hk("fadeOut","expand")):S.some(Ai.Hk("collapse","fadeIn"))))}((i=e,ve.Z.fromSideEffect((({action:e})=>{switch(e.kind){case"expand":i.expand();break;case"height":i.changeHeight(e.height);break;default:(0,I.vE)(e)}}),i.state.pipe(p.U((e=>({kind:e.collapsed?"collapsed":"expanded",items:e.items})))))))));var i},Ja=ee.UI.Node.make((({view:e,notify:t})=>{const i=e("items").pipe(p.U((e=>e.filter((e=>e.checked))))),a=e("items").pipe(p.U((e=>e.filter((e=>!e.checked))))),s=new Ae.t;return $a.P.useSubscriptionTo(s.pipe(Te.w((e=>ye.YC(e).pipe(p.U((()=>e.offsetHeight)),m.O(e.offsetHeight)))),ke.b((e=>t({kind:"height",height:e})())))),o.createElement("div",{className:Qa.checklistExpanded,ref:e=>{null!==e&&s.next(e)},"data-grammarly-part":"attention-checklist-expanded"},o.createElement(ie.F.Fragment,null,a.pipe(p.U((e=>o.createElement(o.Fragment,null,e.length>0&&o.createElement("div",{className:Qa.checklistGroupHeader},"Room for improvement"),e.map((({message:e},t)=>o.createElement(es,{checked:!1,key:t,message:e})))))))),o.createElement(ie.F.Fragment,null,i.pipe(p.U((e=>o.createElement(o.Fragment,null,e.length>0&&o.createElement("div",{className:Qa.checklistGroupHeader},"What's good"),e.map((({message:e},t)=>o.createElement(es,{checked:!0,key:t,message:e})))))))))})),es=({message:e,checked:t})=>o.createElement("div",{className:Qa.checklistItem},o.createElement("div",{className:Qa.itemBullet},t?o.createElement(za.x,{width:12,height:12}):o.createElement(Ya,null)),o.createElement("div",Object.assign({},(0,Ei.Sh)(Qa.itemText,t&&Qa.checked)),e)),ts=ee.UI.Node.make((({view:e,notify:t})=>{const i=e("items").pipe(p.U((0,g.ls)((e=>S.fromNullable(e.filter((e=>!e.checked)).concat(e.filter((e=>e.checked)))[0])),S.map((e=>e.message))))),a=new Ae.t;return $a.P.useSubscriptionTo(a.pipe(Te.w((e=>ye.YC(e).pipe(p.U((()=>e.offsetHeight)),m.O(e.offsetHeight)))),ke.b((e=>t({kind:"height",height:e})())))),o.createElement("div",{className:Qa.checklistCollapsed,ref:e=>{null!==e&&a.next(e)},"data-grammarly-part":"attention-checklist-collapsed"},o.createElement(Q.M,{clickHandler:t({kind:"expand"}),style:{display:"block"}},o.createElement("div",{className:Qa.checklistHeader},o.createElement(Ka,null),o.createElement(ie.F.div,{className:Qa.checklistTitle},e("items").pipe(p.U((e=>`Checklist: ${e.filter((e=>e.checked)).length} of ${e.length} completed`))))),o.createElement(ie.F.div,{className:Qa.checklistFirstItemPreview},i.pipe(p.U(S.getOrElse((()=>"")))))))})),is=ee.UI.Union.make("kind",{collapsed:ts,expanded:Ja}),as=ee.UI.Transition.make({fadeIn:Qa.fadeIn,fadeInContentChange:Qa.fadeInContentChange,expand:Qa.expand},{fadeOut:Qa.fadeOut,fadeOutContentChange:Qa.fadeOutContentChange,collapse:Qa.collapse}),ss=ee.UI.Animated.make(as,is);var ns=i(82318);const rs=o.forwardRef((({viewModels:e,readersAttentionVM:t,checklistVM:i,deprecatedChecklistVM:a,headerVM:s},n)=>o.createElement(zi,{dataPartName:"readers-attention-view-overlay",layoutVM:e.assistantLayoutViewModel,panelClassName:qi.gradientViewOverlayPanel},o.createElement(Wi,{key:"takeawaysPredictionCardList",ref:n,viewModels:e,className:ns.cardList,header:o.createElement(os,{readersAttentionVM:t,checklistVM:i,deprecatedChecklistVM:a,headerVM:s}),footer:o.createElement(qa,{feedbackVM:e.assistantFeedbackViewModel,entryPoint:Be.Q.readersAttention})})))),os=({readersAttentionVM:e,headerVM:t,checklistVM:i,deprecatedChecklistVM:a})=>{const s=t.message.view((e=>({content:e})));return o.createElement(o.Fragment,null,o.createElement("div",{className:qi.defaultViewOverlayHeader},o.createElement("div",{className:ns.headerGroup},"Reader′s attention",o.createElement("div",{onClick:()=>e.showHelp(f.a.ReadersAttentionHelp.Caller.headerButton),className:ns.questionMarkButton,"data-grammarly-part":"readers-attention-question-mark-button"},o.createElement(X.JO.QuestionMark,{width:12,className:ns.questionMarkIcon}))),o.createElement(ja.C,{title:"BETA",kind:"success"})),o.createElement(Mi,{summaryVM:{summary:s},className:ns.summaryWrapper}),o.createElement("div",{className:ns.message},"Grammarly"," ",o.createElement("div",{onClick:()=>e.showHelp(f.a.ReadersAttentionHelp.Caller.descriptionLink),className:ns.inlineButton,"data-grammarly-part":"readers-attention-help-link"},"highlights sentences")," ","that are likely to be read. If important sentences aren’t highlighted, state them earlier in the message or make them shorter."),o.createElement("div",Object.assign({},(0,Ei.Sh)(Qi.relatedSuggestionsTitle,ns.relatedSuggestionsTitle)),e.useDeprecatedChecklist?o.createElement(o.Fragment,null,"SUGGESTIONS"):o.createElement(ie.F.Fragment,null,i.checklist.view((e=>`${ct(e)} OF ${e.size} COMPLETED`)))),e.useDeprecatedChecklist&&o.createElement(Xa,{viewModel:a}))};var ls=i(19106),cs=i(26485),ds=i(17324);const ps=()=>o.createElement("svg",{width:"11",height:"12",viewBox:"0 0 11 12",fill:"none",xmlns:"http://www.w3.org/2000/svg"},o.createElement("path",{d:"M4 1H2.5C1.39543 1 0.5 1.89543 0.5 3V9C0.5 10.1046 1.39543 11 2.5 11H8.5C9.60457 11 10.5 10.1046 10.5 9V7.5M5.5 6L10.5 1M10.5 1H6.5M10.5 1V5",stroke:"#4A6EE0",strokeLinecap:"round"}));var ms=i(68089);const hs=({children:e,blocked:t,wrapperClassName:i})=>t?o.createElement(bi.u,{message:"Sign in to use this feature",position:"top"},o.createElement("div",{className:i},o.createElement("div",{className:ms.hover_blocker,onClick:I.EI,onDoubleClick:I.EI},e))):o.createElement(o.Fragment,null,e);class us extends o.Component{constructor(){super(...arguments),this.handleChange=e=>{(this.props.skipTrustedCheck||e.isTrusted)&&this.props.onChange(e)}}render(){return o.createElement("div",Object.assign({},(0,Ei.Sh)(this.props.extraClassName,cs.setting_item,this.props.disabled&&cs.disabled)),o.createElement("label",{className:cs.select_checkbox,"data-grammarly-part":this.props.dataGrammarlyPart},o.createElement("div",null,this.props.children,this.props.beta&&o.createElement("span",{className:(0,$i.G6)()?cs.new:cs.beta})),o.createElement(hs,{wrapperClassName:cs.checkbox_control_wrapper,blocked:this.props.disabled}),o.createElement("input",{className:cs.checkbox,onChange:this.props.disabled?I.EI:this.handleChange,checked:this.props.checked,type:"checkbox"}),o.createElement("div",Object.assign({},(0,Ei.Sh)(cs.checkbox_check,this.props.grayOut&&cs.grayOut,this.props.checked?cs.on:cs.off)),o.createElement("div",Object.assign({},(0,Ei.Sh)(cs.on_off)),this.props.checked?"ON":"OFF"),o.createElement("div",{className:cs.checkbox_check_round}))))}}var gs=i(62111),vs=i(47740);const fs=({showTitle:e,openGBLanding:t})=>o.createElement("div",{className:vs.container},o.createElement("div",{className:vs.contant},e&&o.createElement("div",{className:vs.title},"Grammarly for your team"),o.createElement("div",null,"Help your team make your business look great with top-notch writing."),o.createElement("div",{className:vs.spacer}),o.createElement(_a.z,{size:"medium",onClick:()=>{t((0,$i.Um)().businessEHomepage),(0,gs.T)().gGbUpHookClick()}},"Explore Grammarly Business")));var ws=i(1005);const _s=({heading:e,enabled:t,children:i})=>t?o.createElement(o.Fragment,null,o.createElement("div",{className:ws.heading},e),o.createElement("div",null,i)):o.createElement(o.Fragment,null,i);var bs=i(4120),ys=i(24372);class Es extends o.Component{constructor(){super(...arguments),this.onEnableDefsClick=e=>{const{toggleDefs:t}=this.props,i=e.target.checked;t(i),ys.J.definitionToggleClick(i?"on":"off"),(0,gs.T)().toggleExtensionDefs(i)}}render(){const{enabledDefs:e,disabled:t}=this.props;return o.createElement(us,{onChange:this.onEnableDefsClick,checked:e,extraClassName:ds.def_switcher,dataGrammarlyPart:"definitionAndSynonymsSwitcher",disabled:t,skipTrustedCheck:this.props.skipTrustedCheck},"Show definitions and synonyms ",o.createElement("br",null),"via double clicks (all sites)")}}var ks=i(6304),Cs=i(66402);const Ss=()=>o.createElement("svg",{width:"32",height:"32",viewBox:"0 0 32 32",fill:"none",xmlns:"http://www.w3.org/2000/svg"},o.createElement("path",{d:"M13.9207 15L15.5 17.2562L17.0793 15H13.9207Z",stroke:"#6D758D",strokeWidth:"2"}));var As=i(7046),Is=i(95286),Ms=i(71527);const xs={american:o.createElement((()=>o.createElement("div",{className:Cs.american,role:"presentation"})),null),australian:o.createElement((()=>o.createElement("div",{className:Cs.australian,role:"presentation"})),null),british:o.createElement((()=>o.createElement("div",{className:Cs.british,role:"presentation"})),null),canadian:o.createElement((()=>o.createElement("div",{className:Cs.canadian,role:"presentation"})),null)},Ls=["british","american","australian","canadian"],Ts=e=>{return o.createElement(o.Fragment,null,xs[e.dialect],o.createElement("span",{"data-test-attr":`dialect_${e.dialect}`,className:Ms.label},(t=e.dialect).charAt(0).toUpperCase()+t.slice(1)+" English"));var t};class Fs extends o.Component{render(){const e=this.props.dropdownOnTop?{customPosition:{top:"-100px",left:"0"},vAlign:"top"}:{customPosition:{top:"36px",left:"0"}};return o.createElement(Is.L,Object.assign({},e,{showDelay:0,closeDelay:150,appearanceBehavior:"mouseClick",name:"dialect",label:o.createElement(As.zx.White,{name:"dialect.box",style:{padding:"0"}},o.createElement("div",{className:Ms.selected},o.createElement(Ts,{dialect:this.props.dialect}),o.createElement(Ss,null)))}),Ls.filter((e=>e!==this.props.dialect)).map((e=>o.createElement(As.zx.Flat,{name:e,onClick:()=>this.props.onSetDialect(e),key:e},o.createElement("div",{className:Ms.option},o.createElement(Ts,{dialect:e}))))))}}class Vs extends o.Component{constructor(){super(...arguments),this.setDialect=e=>{const{changeStrongDialect:t,dialectWeak:i}=this.props;t(e);const a=e+"English";ys.J.languageSettingUpdate(a,"user",i&&e===i)}}render(){const e=this.props.dialectStrong||this.props.dialectWeak||"american";return o.createElement("div",Object.assign({},(0,Ei.Sh)(ks.line,this.props.disabled&&ks.disabled)),o.createElement("div",null,"I write in"),o.createElement(hs,{blocked:this.props.disabled},o.createElement("div",{className:ks.dialectPicker},o.createElement(Fs,{dialect:e,onSetDialect:this.setDialect,dropdownOnTop:!!this.props.dropdownOnTop}))))}}const Ps=({toggleHotkeys:e,enabledHotkeys:t})=>{const i=((0,$i.ED)()?"Alt":"Ctrl")+" + g";return o.createElement(us,{onChange:t=>{const i=t.target.checked;e(i),ys.J.hotkeyToggleClick(i?"on":"off")},checked:t,extraClassName:ds.hotkeys},o.createElement("span",{className:ds.shortcut_title},"Shortcut:")," Open Popup editor ",o.createElement("br",null),o.createElement("span",{className:ds.shortcut},i))},Rs=e=>{var t;const i="docs.google.com"===e.domain,a=i?"Google Docs":e.domain,s=i&&(null===(t=e.experiments)||void 0===t?void 0:t.anonUserGDocsSidebar),{enabledInConfig:n,siteSwitcherChecked:r,favicon:l}=e,c=r.checked&&n,d=n?"Check for writing suggestions":"Checking is not supported";return o.createElement(us,{grayOut:!n,onChange:e=>r.update(e.target.checked),checked:c,extraClassName:ds.site_switcher,dataGrammarlyPart:"siteSwitcher",skipTrustedCheck:e.skipTrustedCheck},o.createElement("div",{"data-test-attr":"siteControlsLabelText"},d,o.createElement("br",null)," ",o.createElement("span",{className:ds.domain},o.createElement("span",{className:ds.thin_text},"on")," ",l&&o.createElement("span",{className:ds.favicon},o.createElement("img",{width:"16px",height:"16px",src:l})),a,s&&o.createElement("span",{className:cs.beta}))))};var Os=i(56542),Ns=i(37896),Ds=i(23345);const Us=o.createContext({}),Bs=e=>{const t=o.useContext(Us),{registrationDate:i}=e.user,a=(0,Ns.p6)(i);return o.createElement("div",{className:Ds.line},o.createElement("div",{className:Ds.content},a&&o.createElement("div",{"data-test-attr":"checked_since"},"Grammarly has been correcting your text since ",a,"."),o.createElement("div",{className:Ds.upgrade,onClick:()=>{e.openSubscriptionDialog({utmSource:"upHook",utmCampaign:"extensionSettingsToolbar"}),ys.J.getPremiumButtonClick("settingsToolbar"),(0,gs.T)().userUpgradeClick("settingsToolbar")},style:{fontSize:t.ctaFontSize}},"Go Premium to Enable Advanced Fixes")))},Hs=e=>o.createElement(us,{onChange:t=>{e.toggle(t.target.checked)},checked:e.enabled,extraClassName:ds.def_switcher},"Correct spelling automatically"),js=e=>o.createElement("div",Object.assign({},(0,Ei.Sh)(cs.setting_item,ds.userPanel,ds.def_switcher)),o.createElement("span",Object.assign({},(0,Ei.Sh)(ds.link,ds.blue)),o.createElement(Q.M,{clickHandler:e.handleClick},"Turn extension back on in Chrome"))),Gs=e=>o.createElement(us,{onChange:t=>{e.toggle(t.target.checked)},beta:!0,checked:e.enabled,extraClassName:ds.def_switcher},"Show phrasal predictions"),Zs=e=>{var t;const{actions:i,activeTab:a,config:s,settings:n,user:r,siteCategory:l,openSubscriptionDialog:c,openGBLanding:d,showGBUpHook:p,placement:m,showAutocorrectToggle:h,enableRenderingHack:u=!1}=e;u&&o.useEffect((()=>{(0,$i.CB)()&&(window.screenLeft<0||window.screenTop<0||window.screenLeft>window.screen.width||window.screenTop>window.screen.height)&&chrome.runtime.getPlatformInfo((e=>{if("mac"===e.os){const e=new CSSStyleSheet;e.insertRule("\n            @keyframes redraw {\n              0% {\n                opacity: 1;\n              }\n              100% {\n                opacity: .99;\n              }\n            }\n          "),e.insertRule("\n            html {\n              animation: redraw 1s linear infinite;\n            }\n          "),document.adoptedStyleSheets=[...document.adoptedStyleSheets,e]}}))}),[]);const{premium:g,experiments:v,anonymous:f}=r,w=p&&g&&!bs.n5.doesUserBelongToInstitution(r),_=g||f,b=v&&v.hotkeysExperiment,y=e.siteSwitcherChecked||{checked:!!n.enabled,update:t=>{const{siteCategory:a}=e;i.toggleSite(t,s.domain),ys.J.checkingToggleClick("toolbar",a,t?"on":"off"),(0,gs.T)().toggleExtension(t,"toolbar")}},E=!1;return o.createElement("div",{className:Os.settingsContent},o.createElement("div",{className:Os.heading},o.createElement("div",null,"Quick Settings"),o.createElement(_a.z,{kind:"link",onClick:()=>window.open("https://account.grammarly.com/","_blank")},o.createElement("div",{className:Os.allSettings},o.createElement("span",null,"All Settings"),o.createElement(ps,null)))),o.createElement(_s,{heading:"SITE SETTINGS",enabled:E},n.isLlamaInstalled&&!n.isLlamaDisabled&&o.createElement(js,{handleClick:i.disableLlama}),o.createElement(Rs,{domain:s.domain,enabledInConfig:s.enabled,siteSwitcherChecked:y,favicon:null==a?void 0:a.favIconUrl,siteCategory:l,experiments:v}),o.createElement("div",{className:Os.separator})),o.createElement(_s,{heading:"FEATURES (ALL SITES)",enabled:E},o.createElement(Es,{disabled:f,enabledDefs:n.enabledDefs,toggleDefs:i.toggleDefs}),b&&o.createElement(o.Fragment,null,o.createElement("div",{className:Os.separator}),o.createElement(Ps,{enabledHotkeys:n.enabledHotkeys||!1,toggleHotkeys:i.toggleHotkeys})),h&&o.createElement(o.Fragment,null,o.createElement("div",{className:Os.separator}),o.createElement(Hs,{enabled:n.autocorrectEnabled||!1,toggle:e=>{i.toggleAutocorrect(e),ys.J.autocorrectToggleClick(e?"on":"off")}})),(null===(t=r.experiments)||void 0===t?void 0:t.autocompleteEnabled)&&o.createElement(o.Fragment,null,o.createElement("div",{className:Os.separator}),o.createElement(Gs,{enabled:n.autocompleteEnabled||!1,toggle:e=>{i.toggleAutocomplete(e),ys.J.autocompleteFeatureToggleClick("popup",e?"on":"off")}}))),o.createElement(_s,{heading:"CUSTOMIZE GRAMMARLY",enabled:E},o.createElement(Vs,{changeStrongDialect:i.changeStrongDialect,dialectStrong:n.dialectStrong,dialectWeak:n.dialectWeak,dropdownOnTop:_,disabled:f}),E),!_&&o.createElement(Bs,{user:r,openSubscriptionDialog:c}),w&&o.createElement(fs,{openGBLanding:d,showTitle:"popup"===m}))};var Ws=i(32138),qs=i(82785),zs=i(91574);const Ys=({viewModels:e})=>{const{domain:t,actions:i,state:a}=e.assistantSettingsViewModel,[s,n]=o.useState(!!a.view("commonSettings","enabled").get()),r={checked:s,update:n};return o.createElement(zi,{dataPartName:"settings-view-overlay",layoutVM:e.assistantLayoutViewModel,panelClassName:qi.gradientViewOverlayPanel,footer:o.createElement(_a.z,{containerClassName:zs.settingsDoneButton,kind:"success",type:"submit",onClick:()=>{i.toggleSite(s,t),ls.J.checkingToggleClick("assistant",qs.y.other,s?"on":"off"),(0,gs.T)().toggleExtension(s,"assistant"),e.assistantLayoutViewModel.popActiveView()},style:{height:"32px"}},"Done")},o.createElement("div",{className:qi.gradientViewOverlayContent},o.createElement(ie.F.Fragment,null,a.view((({user:s,commonSettings:n})=>{var l;return o.createElement(Us.Provider,{value:{ctaFontSize:13}},o.createElement(Zs,{actions:i,config:{enabled:!0,domain:t},settings:n,user:s,siteCategory:qs.y.other,openSubscriptionDialog:()=>e.upgradeViewModel.openUpgradeUrl(ge.L.Place.extensionSettingsAssistant),openGBLanding:e=>{const t=(0,Ws.Z4)(e,"gbExtensionSettingsAssistant");window.open(t)},showGBUpHook:(0,$i.i7)(),placement:"assistant",showAutocorrectToggle:(0,$i.i7)()||!!(null===(l=a.view("user","experiments").get())||void 0===l?void 0:l.autoCompleteCorrectAllBrowsers),siteSwitcherChecked:r}))}))),o.createElement(qa,{feedbackVM:e.assistantFeedbackViewModel,entryPoint:Be.Q.settings})))};var Ks=i(86620),$s=i(80550),Qs=i(92132),Xs=i(70091),Js=i(58858),en=i(17161),tn=i(67521),an=i(5817),sn=i(71284),nn=i(41046),rn=i(41488),on=i(97528),ln=i(53187),cn=i(91998),dn=i(8313);const pn=o.memo((({viewModels:e,emogenieService:t,height:i,ready:a,OuterElementsPortalSource:s})=>{const n=new Ks.C;(0,Pe.iR)("viewModels",e);const l=(0,ma.IQ)(),c=o.useContext(ma.Dg).state.pipe(E.h((e=>!e.dragging)),m.O(Js.zM)),d=o.useContext(en.Y),h=Re.h.create(Oi.UL.empty),{initialPositionOffset:u}=e.positionViewModel;(0,tn.A)((0,F.aj)([c,d]).pipe(p.U((([e,t])=>({height:t.height,width:t.width,top:t.top+e.translate.y+u.top,left:t.left+e.translate.x+u.left,bottom:t.top+t.height+e.translate.y,right:t.left+t.width+e.translate.x}))),ke.b(Ke.wW(h)))),(0,tn.A)(c.pipe(ke.b((t=>e.positionViewModel.onDrag(t))))),(0,tn.A)(e.assistantLayoutViewModel.activeView.pipe(y.G(),ke.b((([t,i])=>{t.type!==i.type&&i.type===f.a.Type.default&&e.cardsListScrollManager.paddingTop.set(0)}))));const g=o.useRef(null);return o.useEffect((()=>{e.assistantCardListViewModel.cardListContext.next(S.fromNullable(g.current));const t=g.current?ye.rl(g.current,{subtree:!0,childList:!0}):St.C,i=h.view((e=>({top:e.top,left:e.left}))),s=(0,r.pipe)(t,cn.V((0,an.m9)(1)),Me.b(10),Le.P()).subscribe((()=>a(i,l)),(()=>{a(i,l,!0)}));return()=>{s.unsubscribe()}}),[]),o.createElement(mn,{environment:n,viewport:d.pipe(p.U((e=>({height:e.height,width:e.width,top:e.top,left:e.left,bottom:e.top+e.height,right:e.left+e.width}))))},o.createElement(ie.F.div,Object.assign({"data-grammarly-part":"assistant-popup-content"},(0,Ei.Sh)(Ni.assistant,l.pipe(m.O(!1),p.U((e=>e&&Ni.dragging)))),{style:{height:i,maxHeight:"90vh"}}),o.createElement(fa,{viewModels:e}),e.assistantLayoutViewModel.activeView.view((i=>i.type===f.a.Type.default?o.createElement(ji,{viewModels:e,ref:g,key:"default-view"}):i.type===f.a.Type.emogenie?o.createElement(Xi,{emogenieService:t,viewModels:e,key:"emogenie-view",ref:g}):i.type===f.a.Type.readersAttention?o.createElement(rs,{viewModels:e,readersAttentionVM:e.readersAttentionViewModel,deprecatedChecklistVM:e.readersAttentionDeprecatedChecklistViewModel,checklistVM:e.readersAttentionChecklistViewModel,headerVM:e.readersAttentionHeaderViewModel,key:"readers-attention-view",ref:g}):i.type===f.a.Type.readersAttentionOnboarding?o.createElement(Za,{layoutVM:e.assistantLayoutViewModel,readersAttentionVM:e.readersAttentionViewModel,showOnboardingButton:!0,key:"readers-attention-onboarding"}):i.type===f.a.Type.readersAttentionHelp?o.createElement(Za,{layoutVM:e.assistantLayoutViewModel,readersAttentionVM:e.readersAttentionViewModel,showOnboardingButton:!1,key:"readers-attention-help"}):i.type===f.a.Type.feedback?o.createElement(ta,{feedbackVM:e.assistantFeedbackViewModel,layoutVM:e.assistantLayoutViewModel,key:"feedback-view"}):i.type===f.a.Type.settings?o.createElement(Ys,{viewModels:e,key:"settings-view"}):i.type===f.a.Type.proofitRequest&&S.isSome(e.assistantProofitViewModel)?o.createElement(Na,{layoutVM:e.assistantLayoutViewModel,proofitVM:e.assistantProofitViewModel.value,key:"proofit-request-view"}):i.type===f.a.Type.proofitReview&&S.isSome(e.assistantProofitViewModel)?o.createElement(Ba,{layoutVM:e.assistantLayoutViewModel,proofitVM:e.assistantProofitViewModel.value,key:"proofit-review-view"}):i.type===f.a.Type.popup?o.createElement(xa,{key:"popup-view",viewModels:e}):null))),o.createElement(s,null,o.createElement(Xs.jv,null,o.createElement($s.L,{modalManager:e.assistantModalManager}))),o.createElement(ln.X,null))})),mn=({environment:e,viewport:t,children:i})=>{const a=o.useRef(wi(ui.m.getConfig(e.has(Ks.U.Flag.isAppleSystem)?"mac":"windows")));return o.createElement(Qs.Q,{remSize:L.of(16),setter:e=>nn.u.setRootCssVar(document.documentElement,e)},o.createElement(Ks.U.Context.Provider,{value:e},o.createElement(sn.a.Context.Provider,{value:e},o.createElement(hi.Context.Provider,{value:a.current.assistant},o.createElement(ui.m.Context.Provider,{value:a.current.denali},o.createElement(dn.TG.ContextMock,null,o.createElement(rn.l.RootVirtualContainer,{viewport:t,name:"draggable"},o.createElement(on.G.DefaultProvider,null,o.createElement(Xs.jv,null,i)))))))))};var hn=i(53447);const un=e=>{const{assistantLayout:t,textFieldRect:i,viewModels:a,emogenieService:s,ready:n,height:r,OuterElementsPortalSource:l}=e,{initialPositionOffset:c}=a.positionViewModel,d={...i.client,...i.size},p=(0,hn.C7)();return o.createElement(ma._l,{bounds:p,hasDragHandle:!0},(({translate:e})=>o.createElement(en.s,{anchorRect:d,viewportRect:p,anchorOrigin:t.anchorOrigin,elementOrigin:t.assistantOrigin,anchorMargin:t.anchorMargin,repositioning:t.repositioningStrategy,stickToTarget:!1,viewportMargin:0,postRepositioningOffset:{horizontal:c.left+e.x,vertical:c.top+e.y}},(({top:t,left:i})=>o.createElement("div",{"data-grammarly-part":"assistant-popup",style:{position:"fixed",top:t-e.y,left:i-e.x,transform:`translate(${e.x}px, ${e.y}px)`,zIndex:pa.Eq}},o.createElement(pn,{viewModels:a,emogenieService:s,height:r,ready:n,OuterElementsPortalSource:l}))))))};var gn=i(39485),vn=i(84966),fn=i(49708);(0,gn.C)();class wn{constructor(e,t){this._params=e,this._felog=t,this._log=l.Y.create(wn.name),this._integration=null,this._viewModels=Re.h.create(null),this._assistantPopupIsReady=new Se.xQ,this._initPerformance=void 0,this._openMeasure=void 0,this._height=Re.h.create(0),this.openState=Re.h.create("closed"),this._subs=new _e.w.Keeper,this.open=async(e,t,i,a)=>{var s,n;const o=this._viewModels.get();if(null!==o)_n(!0,o,e,i,a);else{this._openMeasure=this._felog.openTime.startMeasure();const t=this._felog.initTime.startMeasure();this.openState.set("opening");const o=this._params.assistantService,l=o.createIntegration();if(!l)return this._log.warn("tried to open assistant with checking service not initialized"),t.cancelMeasure(),void this._openMeasure.cancelMeasure();null===(n=(s=this._params).onOpen)||void 0===n||n.call(s,l),this._integration=l;const c=this._params.contentScriptState.view("user").view((e=>({isPremium:e.premium,isAnonymous:e.anonymous,experiments:e.experiments,customFields:e.customFields}))),d=mi(l.engine,l.denaliViewAdapter,l.document.settings.lens("selectedLens"),this._params.emogenieService,S.fromNullable(this._params.readersAttentionFeature),S.fromNullable(this._params.smartPhrasesFeature),S.fromNullable(this._params.intentDetectionFeature),S.fromNullable(this._params.sentenceLevelBrandTonesFeature),S.fromNullable(this._params.proofitFeature),o.sidebarEvents,this._assistantPopupIsReady,(0,r.pipe)(S.fromNullable(e),S.map(vn.wQ.Id.create)),this._params.contentScriptState,this._params.contentScriptActions,this._params.gnar,this._params.domain,c,this.close,this._params.assistantService.selectedHighlightsTracker,this._params.assistantService.isTextFieldEmpty,this._params.assistantService.positionModel,this._params.browser,this.openState.view());_n(!1,d,e,i,a),this._initPerformance=t.endMeasure(),this._viewModels.set(d)}},this.close=()=>{var e,t,i,a;null!==this._viewModels.get()&&(this._trackAssistantClose(),null===(t=(e=this._params).onClose)||void 0===t||t.call(e),this.openState.set("closed"),null===(i=this._integration)||void 0===i||i.dispose(),this._integration=null,null===(a=this._viewModels.get())||void 0===a||a.dispose(),this._viewModels.set(null))},this._getReadyFn=()=>{const e=this._felog.renderTime.startMeasure();return(t,i,a)=>{const s=e.endMeasure();a&&this._openMeasure.cancelMeasure();const n=this._openMeasure.endMeasure();n&&n.duration>500&&this._log.warn("assistant popup took too long to open:",{init:this._initPerformance.duration,render:s.duration,total:n.duration}),setTimeout((()=>{this.openState.set("open"),this._assistantPopupIsReady.next(),this._trackAssistantOpen(t,null==n?void 0:n.duration),this._trackAssistantDrag(t,i)}),0)}},this._applyIframeOffset=e=>{var t,i;const a=null===(i=(t=this._params).getCustomOffset)||void 0===i?void 0:i.call(t);return a?{...e,size:{width:a.width,height:a.height},client:{...e.client,left:a.left+e.client.left,top:a.top+e.client.top},offset:{...e.offset,left:a.left+e.offset.left,top:a.top+e.offset.top},page:{...e.page,left:a.left+e.page.left,top:a.top+e.page.top}}:e}}get view(){return this._viewModels.pipe(Te.w((e=>null===e?L.of(null):fn.R(window,"resize").pipe(m.O(null),d.M(this._params.layout.textField.rect.behavior),p.U((([t,i])=>{const a=this._applyIframeOffset(i),s=((e,t,i)=>{const a=(0,me.u)(e.lensState,e.cardsListScrollManager,i),s=Math.max(600,t.size.height+h.O.headerHeight+h.O.panelHeight);return a.pipe((0,d.M)(e.predictionsPreviewViewModel.previewState),(0,p.U)((([e,t])=>{if(t.kind!==K.visible)return e;const i=[t.readersAttention,t.tone].filter(S.isSome).length;return i>0?e+h.O.predictionsPreviewHeaderHeight+h.O.predictionInsightHeight*i+h.O.predictionInsightBottomMargin:e})),(0,m.O)(0),(0,p.U)((e=>Math.max(e+h.O.headerHeight,s))),(0,p.U)((e=>Math.min(e,750))))})(e,a,e.capabilities).pipe(Xe.R(this._assistantPopupIsReady.asObservable()),ke.b(Ke.wW(this._height)));return o.createElement(un,{textFieldRect:a,assistantLayout:this._params.layout.assistant,height:s,viewModels:e,emogenieService:this._params.emogenieService,ready:this._getReadyFn(),OuterElementsPortalSource:this._params.OuterElementsPortalSource})}))))))}get activeView(){return this._viewModels.pipe(Te.w((e=>{var t;return null!==(t=null==e?void 0:e.assistantLayoutViewModel.activeView)&&void 0!==t?t:L.of(null)})))}dispose(){this.close(),this._subs.dispose()}_trackAssistantOpen(e,t){const i=this._viewModels.get();if(null!=i){const{initialPositionOffset:a}=i.positionViewModel,{statisticsService:s}=this._params,n=s.alertCounts.get(),r=0===a.top&&0===a.left?"default"===this._params.layout.assistant.name?"smart":"hardcoded":"sticky",o=i.assistantLayoutViewModel.activeView.get();this._params.gnar.assistantPopupShow(o.type,this._height.get(),e.get().left,e.get().top,n.expandedViewSupported,n.freeClarity,n.critical,n.filter((e=>"priority"===e.assistantView)).expandedViewSupported,s.wordsCount.get(),r,o.type===f.a.Type.popup?o.popupType:void 0,t,s.generalScore.get())}}_trackAssistantClose(){var e;const{statisticsService:t}=this._params,i=t.alertCounts.get(),a=(null===(e=this._viewModels.get())||void 0===e?void 0:e.assistantLayoutViewModel.activeView.get())||{type:f.a.Type.default};this._params.gnar.assistantPopupCloseButtonClick(a.type,i.expandedViewSupported,i.freeClarity,i.critical,i.filter((e=>"priority"===e.assistantView)).expandedViewSupported,a.type===f.a.Type.popup?a.popupType:void 0)}_trackAssistantDrag(e,t){const i=e.get();let a=i;this._subs.push(t.pipe(y.G(),E.h((([e,t])=>e&&!t))).subscribe((()=>{const t=e.get();ze.E9.l1Distance(t,a)<10||(this._params.gnar.assistantPopupDrag(t.left,t.top,this._height.get(),i.left,i.top),a=t)})))}}function _n(e,t,i,a,s){a===c.R.emogenie?t.assistantLayoutViewModel.pushActiveView({type:f.a.Type.emogenie}):a===c.R.proofitRequest?t.assistantLayoutViewModel.pushActiveView({type:f.a.Type.proofitRequest}):a===c.R.proofitReview?t.assistantLayoutViewModel.pushActiveView({type:f.a.Type.proofitReview}):a===c.R.takeawayCard&&i?t.readersAttentionViewModel.open({type:f.a.ReadersAttention.Caller.Type.inlineCard,alertId:i}):!e&&a===c.R.assistantPopupService&&s&&t.assistantLayoutViewModel.pushActiveView({type:f.a.Type.popup,popupType:s})}var bn=i(18126),yn=i(16037),En=i(64213),kn=i(14568),Cn=i(99015);class Sn{constructor(e,t,i,a,s,n,r,o,l,c,d){this.connectionState=e,this.pageState=t,this.actions=i,this.gnar=a,this.user=s,this._hoverProvider=n,this.document=r,this.formattingService=o,this.denaliViewAdapter=l,this.capiProxy=c,this.engine=d,n.setAssistantHover(l.highlightHoverProvider)}static create(e){var t;const i=new yn.t(e.highlights,e.textObserver,e.replacementService.get(),e.layout,e.scroller,e.selectedHighlightsTracker,void 0,e.requestAwaitService,null===(t=e.formattingService)||void 0===t?void 0:t.get()),a=kn.p.create(e.checkingService.get(),e.checkingServiceInitialState,e.alertsTransformer,e.alertProcessor,e.sidebarEvents),s=(0,Cn.r)(a,i,e.document.settings.lens("context"),(()=>{var t,i;return null!==(i=null===(t=e.getExistingAlerts)||void 0===t?void 0:t.call(e))&&void 0!==i?i:(0,En.q)(e.alertProcessor)}),e.textObserver,(()=>e.checkingServiceInitialState.value.lastStart),e.smartPhrasesFeature,e.readersAttentionFeature,e.sentenceLevelBrandTonesFeature);return new Sn(e.connectionState,e.pageState,e.actions,e.gnar,e.user,e.hoverProvider,e.document,e.formattingService,i,a,s)}dispose(){this.capiProxy.dispose(),this.denaliViewAdapter.dispose(),this.engine.shutdown(),this._hoverProvider.removeAssistantHover()}}var An=i(8467);class In{constructor({layout:e}){this._scroller=(0,An.t)({scrollToMarkRect(t,i){const a=e.textField.visibleRect.getApproximate();let s=(i&&i.paddingTop||0)-a.client.top;(s<=0||s>=a.size.height)&&(s=a.size.height/2);const n=t.top-s-a.client.top,r=t.right-t.left,o=Math.max(0,(a.size.width-r)/2);t.left,a.client.left;requestAnimationFrame((()=>e.textField.scroller.scrollBy({top:n,left:void 0})))},scrollToRange(){}})}scrollToMark(e,t){return this._scroller.scrollToMark(e,t)}}var Mn=i(53783);class xn{constructor(e){this._params=e,this.sidebarEvents=new Se.xQ,this.hoverProvider=new bn.f(this._params.hoverProvider),this.selectedHighlightsTracker=this._params.highlights.getSelectedHighlightsTracker({textField:this._params.originalTextField,selectionService:this._params.selectionService}),this.positionModel=(0,Mn.j)(this._params.originalTextField,this._params.state,this._params.actions),this.isTextFieldEmpty=this._params.textObserver.contentChanges.async.pipe(p.U((e=>""===e.newText.trim())),T.x()),this._checkingService=null}setCheckingService(e){this._checkingService=e}getCheckingServiceState(){var e;return null===(e=this._checkingService)||void 0===e?void 0:e.state.value}createIntegration(){const{layout:e,highlights:t,textObserver:i,replacementService:a,alertProcessor:s,state:n,gnar:r,alertsTransformer:o,document:l,requestAwaitService:c,formattingService:d,actions:p,getCheckingServicePreviousState:m,createAssistantScroller:h=(()=>new In({layout:e})),getExistingAlerts:u}=this._params;if(null==this._checkingService)return null;const g=null==m?void 0:m();g&&(this._checkingService.state.value=g);const v=h(),{user:f}=n.get();return Sn.create({layout:e,alertProcessor:s,connectionState:n.view((e=>e.connection)),pageState:n.view((e=>e.page)),actions:p,highlights:t,textObserver:i,replacementService:a,checkingService:this._checkingService.lazyCheckingService,checkingServiceInitialState:this._checkingService.state,gnar:r,user:{isPremium:f.premium,isAnonymous:f.anonymous,experiments:f.experiments,customFields:f.customFields},hoverProvider:this.hoverProvider,selectedHighlightsTracker:this.selectedHighlightsTracker,scroller:v,sidebarEvents:this.sidebarEvents,document:l,alertsTransformer:o,requestAwaitService:c,formattingService:d,getExistingAlerts:u,smartPhrasesFeature:this._params.smartPhrasesFeature,readersAttentionFeature:this._params.readersAttentionFeature,sentenceLevelBrandTonesFeature:this._params.sentenceLevelBrandTonesFeature})}dispose(){var e;null===(e=this._checkingService)||void 0===e||e.state.dispose()}}},99015:(e,t,i)=>{"use strict";i.d(t,{r:()=>R});var a=i(57050),s=i(35214),n=i(40327),r=i(32952),o=i(73353),l=i(21729),c=i(83078),d=i(51072),p=i(5114),m=i(38983);var h=i(92783),u=i(80358),g=i(84966),v=i(40018),f=i(6488),w=i(79227),_=i(20869),b=i(95362),y=i(5008),E=i(43320),k=i(70477),C=i(35301),S=i(85654),A=i(55360),I=i(45586),M=i(98403),x=i(2834),L=i(78674),T=i(77176),F=i(93508),V=i(8125),P=i(71249);const R=(e,t,i,r,F,V,R,N,D,U=O("permanentStorageSync",t.getContents()))=>{const B=new I.w.Keeper,H=function(e,t,i){const s=m.h.create(p.none),r=m.h.create(p.none);return{score:m.h.create(p.none),textInfo:m.h.create(p.none),checkingState:m.h.create(e.checkingState),asyncChecksState:m.h.create(e.asyncChecksState),context:i,contextCompleteness:i.view(l.j.calculateCompleteness),updateContext:e=>{const t=!o.R$.equals(i.get(),e);return i.set(e),t},defaultContext:s,updateDefaultContext:e=>{const t=!(0,n.pipe)((0,a.bc)([s.get(),e],c.vB(o.R$.equals)));return s.set(e),t},documentText:t.getText(),documentLength:m.h.create({full:t.getTextLength(),trimmed:t.getTextLength()}),counters:m.h.create(l.dM.group.empty),calculateStats:()=>d.Vi(e.requestDocStats).then((e=>(r.set(p.some(e)),e))),recentDocumentStats:r}}(e,t,i);B.push(e.events.pipe(x.b((t=>{var i;H.checkingState.set(e.checkingState),u.h.is("text_info")(t)?H.textInfo.set(p.some(t.data)):u.h.is("finish")(t)?H.score.set(t.score):u.h.is("feedback_ack")(t)?(0,n.pipe)(p.fromNullable(null===(i=t.outcomeScores)||void 0===i?void 0:i.GeneralScore),p.map((e=>Math.trunc(100*e))),p.map((e=>{H.score.modify((0,a.ls)(p.map((t=>({...t,rank:e})))))}))):u.h.is("session_started")(t)&&H.updateDefaultContext(t.defaultDocumentContext)}))).subscribe(),F.contentChanges.async.pipe(L.b(300),T.U((e=>e.newText)),T.U((e=>({full:e.length-1,trimmed:e.trim().length}))),x.b(M.wW(H.documentLength))).subscribe()),(0,n.pipe)(V(),p.map((e=>{H.updateDefaultContext(o.R$.parseDefault(e.defaultDocumentContext))})));const j=new A.Xr,G=new b.Ek,Z=(0,s.fold)((0,s.getEndomorphismMonoid)())(P.oA([p.fromNullable(null==R?void 0:R.addStateToRawAlertTransformer),p.fromNullable(null==N?void 0:N.addFeedbackToRawAlertTransformer),p.fromNullable(null==D?void 0:D.addFeedbackToRawAlertTransformer)])),W=new _.S(j,G,(()=>t.getContents().delta),e.events,e,H.counters,Z,((e,t)=>v.bZ.isDuplicatedBy(e,t)||!!(null==N?void 0:N.useDeprecatedChecklist)&&v.bZ.isTakeawayOverlap(e,t,.75))),q=f.e.create(W.state),z=new w.k(q,W._ops);B.push(E.R.init(k.$.connectAsPrimarySourceWithoutDuplex(t),e.events,U,y.n.ignoreTEResult(e),y.n.ignoreResult(j),G,y.A.merge([W])).subscribe()),e.loadAlerts(r()),W.flushAlerts();const Y="prod"!==(0,h.dU)(),K=Y?p.some(C.J.CategoriesModel.create(e.events,e,W.state,z,g.JW.ScopeType.GLOBAL)):p.none,$=Y?p.some(S.k.create(q)):p.none;return{alertsList:W,alertsReader:q,alertsService:z,positionManager:j,sessionModel:H,mutedAlertsCategoriesModel:K,mutingAlertsReader:$,shutdown:()=>{W.dispose(),B.dispose()}}},O=(e,t)=>({pushChanges:V.ZT,changes:(new r.xQ).pipe(F.O(t))})},13922:(e,t,i)=>{"use strict";i.d(t,{O:()=>C});var a=i(57050),s=i(35214),n=i(45701),r=i(40327),o=i(27378),l=i(63047),c=i(24394),d=i(46547),p=i(79921),m=i(1620),h=i(86705),u=i(12187),g=i(67489),v=i.n(g);const f=({emojiUnicode:e,title:t,expanded:i,accepted:a,onShow:s,onExpand:n,onClick:r,onClose:l,onVote:g,browser:f,lensIsPriority:w})=>(o.useEffect((()=>{null==s||s()}),[t]),o.useEffect((()=>{i&&(null==n||n())}),[i]),o.createElement(d.Z,{kind:w?"assistant-priority-lens":"assistant-all-lens",onClick:()=>{i||r()},dataPartName:"intent-detection-card"},o.createElement("div",Object.assign({},(0,u.Sh)(v().intentDetectionCardContent,i&&!a?v().intentDetectionCardContentExpanded:null,a?v().intentDetectionCardContentAccepted:null)),o.createElement("div",{className:v().intentDetectionCardEmojiAndTitle},o.createElement(p.dy,{className:v().intentDetectionCardEmoji,unicodeLiteral:null,unicodeHexArray:a?["1f64c"]:[e]}),a?o.createElement("div",null,"Thanks for helping us build new suggestions!"):o.createElement("div",null,o.createElement("div",null,t),o.createElement("div",{className:v().intentDetectionCardExpandedInfo},"Your input helps us develop more tailored suggestions for you."))),a?o.createElement("div",{className:v().intentDetectionCardBetaBadgeAndCloseButton},o.createElement(m.P,{onClick:e=>{e.stopPropagation(),l()},size:"small",containerClassName:v().intentDetectionCardCloseButton}),o.createElement(h.v,{browser:f,className:v().intentDetectionCardBetaBadge})):o.createElement("div",{className:v().intentDetectionCardVoteAndBetaBadge},o.createElement(c.A,{ariaLabel:t,voteYesAriaLabel:"Yes",voteNoAriaLabel:"No",voteYesTooltipMessage:"Yes",voteNoTooltipMessage:"No",onVote:g,voteYesMarginRight:8,irrevocable:!0}),o.createElement(h.v,{browser:f,className:v().intentDetectionCardExpandedInfo})))));f.defaultProps={expanded:!1,accepted:!1,lensIsPriority:!0};const w=({emojiUnicode:e,title:t,expanded:i,accepted:a,onShow:s,onExpand:n,onClick:r,onClose:l,onFeedbackAccurate:d,onFeedbackInaccurate:p,browser:m,lensIsPriority:h})=>o.createElement(f,{emojiUnicode:e,title:t,expanded:i,accepted:a,onShow:s,onExpand:n,onClick:r,onClose:l,onVote:e=>{e===c.x.YES?d():p()},browser:m,lensIsPriority:h});var _,b=i(4680),y=i(28043),E=i(77176),k=i(5739);!function(e){e.IntentDetection=b.UI.Node.make((({view:e,notify:t})=>{const i=e("view");return o.createElement(k.F.div,null,i.pipe(y.x(l.Z.eq.equals),E.U((e=>o.createElement(w,{emojiUnicode:e.emojiUnicode,title:e.title,expanded:"focused"===e.visualState.transition.type,accepted:"success"===e.visualState.transition.type,onShow:t({kind:l.Z.Event.Kind.intentDetectionItemShow,id:e.id,predictionId:e.predictionId,label:e.label}),onExpand:t({kind:l.Z.Event.Kind.intentDetectionItemExpand,id:e.id,predictionId:e.predictionId,label:e.label}),onClick:t({kind:l.Z.Event.Kind.intentDetectionItemClick,id:e.id,predictionId:e.predictionId,label:e.label}),onClose:t({kind:l.Z.Event.Kind.intentDetectionItemClose,id:e.id}),onFeedbackAccurate:t({kind:l.Z.Event.Kind.intentDetectionItemFeedbackAccurate,id:e.id,predictionId:e.predictionId,label:e.label,transitionType:e.visualState.transition.type}),onFeedbackInaccurate:t({kind:l.Z.Event.Kind.intentDetectionItemFeedbackInaccurate,id:e.id,predictionId:e.predictionId,label:e.label}),browser:e.browser,lensIsPriority:e.lensIsPriority})))))}))}(_||(_={}));var C,S=i(22373),A=i(7910),I=i(84246),M=i(84974),x=i(98752),L=i(17594),T=i(26027),F=i(91549),V=i(20594),P=i(86775),R=i(77610),O=i(16892),N=i(48521),D=i(15215),U=i(70100),B=i(47306),H=i(79471),j=i(93494),G=i(8125),Z=i(83078),W=i(5114),q=i(73975);!function(e){function t(e,t,i,a,s){return H.nL.Items.mapper((e=>e.kind),{[T.X.Kind]:e,[F.R.Kind]:t,[U.X.kind]:i,[B.J.kind]:a,[l.Z.Kind]:s})}function i(e){return e.kind===T.X.Kind}function o(e){return e.kind===F.R.Kind}function c(){return(0,A.Pv)(e.disposable,(e=>t((t=>({view:t,isLastCard:e,kind:"alertCard"})),(t=>({view:t,isLastCard:e,kind:"alertsBundle"})),(e=>({view:e,kind:"checklistItemEmpty"})),(t=>({view:t,kind:"checklistItemWithAlerts",isLastCard:e})),(e=>({view:e,kind:"intentDetection"})))))}e.isSelectableWithAlertItem=(0,G.Kg)(i,o,D.d.isChecklistItemWithAlerts),e.getActiveItemWithAlert=H.In.getActiveItemOfType(e.isSelectableWithAlertItem),e.getActiveAlignableItem=H.In.getActiveItemOfType(e.isSelectableWithAlertItem),e.getActiveFocusableItem=H.In.getActiveItemOfType(e.isSelectableWithAlertItem),e.checksFeedItemsMapper=t,e.isAlertCard=i,e.isAlertsBundle=o,e.defaultOrd=(0,s.fold)(n.getMonoid())([(0,r.pipe)(n.ordBoolean,n.contramap(i)),n.fromCompare(((e,t)=>i(e)&&i(t)&&!R.C.isSmartPhrasesItem(e)&&!R.C.isSmartPhrasesItem(t)?T.X.ord.compare(e,t):i(e)&&R.C.isSmartPhrasesItem(e)?-1:i(t)&&R.C.isSmartPhrasesItem(t)?1:0)),(0,r.pipe)(n.ordBoolean,n.contramap(l.Z.isIntentDetectionItem))]),e.bundlesOrd=(0,s.fold)(n.getMonoid())([(0,r.pipe)(n.ordBoolean,n.contramap(o)),n.fromCompare(((e,t)=>o(e)&&o(t)?F.R.ord.compare(e,t):0)),(0,r.pipe)(n.ordBoolean,n.contramap(l.Z.isIntentDetectionItem))]),e.item=e=>b.UI.Union.make("kind",{alertCard:S.p.Card(e),alertsBundle:I.Q.Card(e),checklistItemEmpty:M.z.Card(e),checklistItemWithAlerts:x.fw.Card(e),intentDetection:_.IntentDetection}),e.viewState=c,e.createCardListFlow=e=>(0,A.sJ)((t=>(0,r.pipe)(e,Z.bw((e=>{e.intentDetectionActions.next(t.action)}))))),e.listItemOrd=e=>(0,n.contramap)((e=>e.cell.item.view))(e).compare;const d={equals:(e,t)=>e.kind===t.kind&&O.s.eqById.equals(e,t)},p=(e,t,i,a,s)=>({equals:(n,r)=>{const o={[T.X.Kind]:e,[F.R.Kind]:t,[U.X.kind]:i,[B.J.kind]:a,[l.Z.Kind]:s};return d.equals(n,r)&&function(e,t){return(i,a)=>t[e(i)].equals(i,a)}((e=>e.kind),o)(n,r)}}),m=(0,s.fold)(q.uZ())([N.o.eq,O.s.verticalPositionEq,d]);function h(e,i){const a=T.X.Capabilities.getChangePosition(e);return{changePosition:e=>t(a.changePosition(e),F.R.changePosition(e),U.X.changePositionState(e),i.changePositionState(e),l.Z.Capabilities.changePosition(e))}}function u(e,i){const a=T.X.Capabilities.getTransitionTo(e);return{transitionTo:e=>t(a.transitionTo(e),F.R.transitionTo(e),U.X.transitionTo(e),i.transitionTo(e),l.Z.Capabilities.transitionTo(e))}}function g(e,i){const a=T.X.Capabilities.getCompleteTransition(e);return{completeTransition:e=>t(a.completeTransition(e),F.R.completeTransition(e),U.X.completeTransition(e),i.completeTransition(e),l.Z.Capabilities.completeTransition(e))}}function v(e,i,s,n,r){const o=F.R.getCardHydrator(r),c=F.R.getSelect(s,n,o),d=F.R.getSelectByAlert(s,n,o),p=T.X.Capabilities.getSelect(e);return{select:(e,s)=>t(p.select(e,s),c(e,s),U.X.select(e),i.selectFirstAlert((0,a.MZ)(e),s),l.Z.Capabilities.select(e)),selectByAlert:(e,s,n)=>t(p.selectByAlert(e,s,n),d(s,e,n),U.X.select(e),i.selectByAlert(s,(0,a.MZ)(e),n),a.yR),unselect:(e,s)=>t(p.unselect((0,a.MZ)(e),s),F.R.unselect((0,a.MZ)(e),s),U.X.unselect(e),i.unselect((0,a.MZ)(e),s),l.Z.Capabilities.unselect(e))}}function f(e,s,n,r,l,c){return{removeAlertFromItem:(d,p)=>t((t=>T.X.Capabilities.getRemoveAlerts(e,p.itemsOrd)(d,H.In.getActiveItemOfType(i)(p))(t)),(e=>F.R.getRemoveAlertsCapability(r,l,c,p.itemsOrd)(d,H.In.getActiveItemOfType(o)(p))(e)),a.yR,(e=>P.G.getRemoveAlert(s,n,r).removeAlertFromItem(d,p)(e)),a.yR)}}function w(e,i,s){const n=T.X.Capabilities.getRemove(e);return{remove:(e,r)=>t(n.remove(e,r),(t=>e(t)?F.R.getRemove(s)([t.activeAlert],r(t))(t):t),a.yR,(t=>e(t)?i.removeAlerts(t.alerts,r(t))(t):t),a.yR)}}function y(e,i,s){const n=T.X.Capabilities.getUpdateWithAlert(e),r=F.R.getUpdatableWithAlertsCapability(i);return{updateWithAlerts:e=>t(n.updateWithAlerts(e),r(e),a.yR,s.updateWith(e),a.yR)}}e.equatable={structEq:p(T.X.eq,F.R.eq,U.X.eq,B.J.eq,l.Z.eq),idEq:p(d,d,d,d,d),visualStateEq:p(m,m,m,m,m)},e.changePosition=h,e.disposable={isScheduledToDispose:t((e=>R.C.willBeDisposed(e,e.removedAlertsIds)),(e=>R.C.willBeDisposed(e,e.removedAlertsIds)),a.jv,(e=>R.C.willBeDisposed(e,e.removedAlertsIds)),a.jv)},e.hidable={isHidden:t(N.o.isHidden,N.o.isHidden,N.o.isHidden,N.o.isHidden,N.o.isHidden)},e.transitionTo=u,e.completeTransition=g,e.hasAlertsQueries={isSelectableByAlert:e=>t(R.C.hasAlert(e.alert.id),R.C.hasAlert(e.alert.id),a.jv,R.C.hasAlert(e.alert.id),a.jv),hasAlert:e=>t(R.C.hasAlert(e),R.C.hasAlert(e),a.jv,R.C.hasAlert(e),a.jv),hasActiveAlert:t((e=>W.some(e.activeAlert)),(e=>W.some(e.activeAlert)),(()=>W.none),(e=>W.some(e.activeAlert)),(()=>W.none))},e.changePositionStrategyQueries={useReferenceHeightOnRemove:t(a.jv,a.jv,a.jv,a.W8,a.jv)},e.select=v,e.removeAlert=f,e.remove=w,e.updateWithAlert=y,e.releaseAlert=(t,i,a,s,n,r)=>j.v.Capabilities.getAlertReleaser({...f(t,i,a,s,n,r),...e.disposable}),e.unselectable=(e,t,i,a,s)=>j.v.Capabilities.getUnselectable(H.In.getActiveItem,v(e,t,i,a,s)),e.selectableByAlert=(t,i,a,s,n)=>j.v.Capabilities.getSelectableByAlert(H.In.getActiveItem,{...e.hasAlertsQueries,...v(t,i,a,s,n)}),e.selectableById=(e,t,i,a,s)=>j.v.Capabilities.getSelectableById(H.In.getActiveItem,v(e,t,i,a,s)),e.updateMeta=()=>({updateMeta:j.v.Capabilities.getMetaUpdatable().updateMeta}),e.animatable=(t,i,a,s,n,r)=>j.v.Capabilities.getAnimatable(t,{...f(t,i,a,s,n,r),...e.hasAlertsQueries}),e.hasPriorityToggle=(t,i)=>j.v.WithPriority.getHasPriorityToggle({...u(t,i),...e.hasAlertsQueries,...e.disposable});const E=t=>["focused","expanded"].includes(t.visualState.transition.type)&&!e.disposable.isScheduledToDispose(t);function k(e,i){const a=V.Mq.getCardSelections(i);return{nextAlert:t(a.nextAlert,a.nextAlert,(()=>W.none),e.nextAlert,(()=>W.none)),prevAlert:t(a.prevAlert,a.prevAlert,(()=>W.none),e.prevAlert,(()=>W.none))}}function C(){return{updateUserInput:e=>t(T.X.updateUserInput(e),F.R.changeUserInput(e),a.yR,a.yR,a.yR)}}e.alignable={isValidToAlign:t(E,E,a.jv,E,a.jv)},e.alertIterator=k,e.itemReleaser=(e,t,i)=>{const{removeItemById:a}=P.G.getItemReleaser(e,t,i,j.v.Capabilities.getItemReleaser());return{removeItemById:a}},e.hasAlerts=j.v.Capabilities.getHasAlerts,e.getDefaultNextAlertItemFilter=t=>(0,G.W9)(e.isSelectableWithAlertItem,(i=>!e.disposable.isScheduledToDispose(i)&&(0,r.pipe)(i,e.hasAlertsQueries.hasActiveAlert,W.map((e=>t.isRegistered(e.id))),W.getOrElse(a.jv)))),e.hasUserInput=C,e.priorityTest=(0,G.W9)(i,(e=>L.$.isPriority(e.activeAlert))),e.verifiable=()=>j.v.Capabilities.getVerifiable(e.disposable),e.getCapabilities=function(t,i,a,s,n,r,o=V.IG.Default){return{...c(),...e.disposable,...e.hidable,...e.equatable,...C(),...h(t,a),...u(t,a),...g(t,a),...v(t,a,s,o,n),...w(t,a,o),...f(t,a,r,s,o,n),...y(t,i,a),...e.hasAlertsQueries,...e.changePositionStrategyQueries,...e.alignable,...e.releaseAlert(t,a,r,s,o,n),...e.unselectable(t,a,s,o,n),...e.selectableByAlert(t,a,s,o,n),...e.selectableById(t,a,s,o,n),...e.updateMeta(t),...e.animatable(t,a,r,s,o,n),...e.hasPriorityToggle(t,a),...e.itemReleaser(a,r,s),...e.verifiable(),...e.hasAlerts(k(a,s),e.hasAlertsQueries,(()=>e.getDefaultNextAlertItemFilter(s)))}}}(C||(C={}))},5178:(e,t,i)=>{"use strict";i.d(t,{Q:()=>a,_:()=>r});var a,s=i(75003),n=i(53844);!function(e){e.readersAttention="readers_attention",e.settings="settings",e.smartPhrases="smart_phrases"}(a||(a={}));class r{constructor(e,t,i){this._assistantLayoutViewModel=e,this._domain=t,this._gnar=i}getDomain(){return this._domain}openFeedback(e){this._entryPoint=e,this._gnar.assistantFeedbackButtonClick(this._entryPoint),this._assistantLayoutViewModel.pushActiveView({type:s.a.Type.feedback})}submitFeedback(e){this._gnar.assistantFeedbackSubmitButtonClick(this._entryPoint,e.domain,e.text,(0,n.d)(e)?e.score:void 0)}get entryPoint(){return this._entryPoint}}},28288:(e,t,i)=>{"use strict";i.d(t,{m:()=>o,_:()=>l});var a=i(27378),s=i(92783),n=i(12187),r=i(2112);const o=({className:e,text:t,secondary:i=!1})=>a.createElement("span",Object.assign({},(0,n.Sh)(e,r.labelBeta,i&&r.labelBetaSecondary)),t||"BETA"),l=({text:e})=>a.createElement("span",{className:r.label},"GRAMMARLY TONE Detector ",(0,s.G6)()?null:a.createElement(o,{className:r.labelBetaWrapper,text:e}))},42373:(e,t,i)=>{"use strict";i.d(t,{G:()=>S});var a=i(27378),s=i(80900),n=i(76974),r=i(16118),o=i(77176),l=i(93508),c=i(66310),d=i(17343),p=i(20855),m=i(24394),h=i(32275),u=i(53112);const g=({fill:e=u.Z.green50})=>a.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",height:"24",width:"24"},a.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M12 20a8 8 0 100-16 8 8 0 000 16z",fill:e}),a.createElement("path",{d:"M9.03 12.47a.75.75 0 10-1.06 1.06zM11 15.5l-.53.53.53.53.53-.53zm6.03-4.97a.75.75 0 10-1.06-1.06zm-9.06 3l2.5 2.5 1.06-1.06-2.5-2.5zm3.56 2.5l5.5-5.5-1.06-1.06-5.5 5.5z",fill:"#fff"}));var v=i(79921),f=i(12187),w=i(5739),_=i(79461),b=i(2112);const y=({emotion:e,isBrandTonesEnabled:t,actions:i,emotionValue:u,index:y})=>{const E=a.createElement(p.u,{message:`${e.prevalence} intensity`,showDelay:300},a.createElement("div",{className:b.emotionIntensity},Array.from(Array(5).keys()).map((t=>{const i=t/5<=e.confidence;return a.createElement("div",Object.assign({key:`${e.name}-${t}`},(0,f.Sh)(b.emotionIntensityItem,i&&b.emotionIntensityActive)))})))),k=e.brandToneLabel?a.createElement("div",{className:b.emotionBrandInfoWrapper},a.createElement("span",{className:b[`brand-badge-${e.brandToneLabel}`]},e.brandToneLabel,"-BRAND")):a.createElement("span",{className:b.emotionBrandIntensityWrapper}," ",E," "),C=t?t=>{const a=e.brandToneLabel||"neutral";t===m.x.YES?i.likeEmotion(e.name,a):i.dislikeEmotion(e.name,a)}:t=>{if(t===m.x.YES)i.likeEmotion(e.name);else if(t===m.x.OFFENSIVE)i.reportEmotion(e.name,"EMOTION_OFFENSIVE");else if(t===m.x.INCORRECT){const t=!0;i.reportEmotion(e.name,"EMOTION_INCORRECT",t)}else i.dislikeEmotion(e.name)},S=a.createElement(a.Fragment,null,k,a.createElement(m.A,{onDropdownPress:t?void 0:()=>{i.reportEmotionWithoutTracking(e.name,"EMOTION_DISLIKE")},voteNoWithDropdown:!t,ariaLabel:`Does the emotion "${e.name}" seem correct?`,voteYesAriaLabel:"This seems right",voteNoAriaLabel:"This seems wrong",voteYesTooltipMessage:"This seems right",voteNoTooltipMessage:"This seems wrong",onVote:C,irrevocable:!0,voteValue:u===_.b.dislike||u===_.b.offensive?m.x.NO:u===_.b.like?m.x.YES:void 0,useShadowDom:!1})),A=e=>t?e===_.b.dislike:e===_.b.incorrect||e===_.b.offensive,I=(0,h.K)(u).pipe((0,r.G)(),(0,o.U)((([e,t])=>e===_.b.none&&A(t))),(0,l.O)(!1),(0,c.w)((e=>e?(0,s.H)(3e3).pipe((0,d.h)(!1),(0,l.O)(!0)):(0,n.of)(!1)))),M=a.createElement("div",{className:b.feedbackContainer},a.createElement("div",{className:b.feedbackIcon},a.createElement(g,null)),a.createElement("div",{className:b.feedbackText},"Your feedback helps us improve our accuracy."));return a.createElement(w.F.div,null,I.pipe((0,o.U)((e=>e?M:null))),A(u)?null:a.createElement("div",{role:`emotion-${y}-${e.name}`},a.createElement("div",{className:b.emotion},a.createElement("div",{className:b.emotionEmojiAndName},a.createElement(v.dy,{size:"medium",unicodeHexArray:[e.emojiId],unicodeLiteral:e.emoji,className:b.emotionEmoji}),a.createElement("span",{className:b.emotionName},e.name)),S),t?a.createElement("div",{className:b.description},a.createElement("div",{className:b.descriptionText},e.brandToneDescription)):null))};var E=i(88326);const k=({value:e})=>a.createElement("div",Object.assign({},(0,f.Sh)(b.checkbox,e&&b.checkboxActive),{"data-grammarly-part":"showEmogenieCheckbox"}));var C=i(28288);const S=({report:e,actions:t,emotionsPoll:i,showBanner:s,settings:n,isBrandTonesEnabled:r})=>{let o,l;switch(a.useEffect((()=>{t.trackReportShow(r)}),[]),!0){case e.emotions.some((e=>e.brandToneLabel&&"off"===e.brandToneLabel&&e.confidence>.75)):o="Your tone sounds off";break;case e.emotions.some((e=>e.brandToneLabel&&"off"===e.brandToneLabel)):o="Something sounds slightly off...";break;case e.emotions.some((e=>e.brandToneLabel&&"on"===e.brandToneLabel)):o=r?"You're on-brand! Great job!":"Your writing sounds clear and aligned. Great job!";break;default:o="Here’s how your text may sound to readers"}switch(!0){case r&&e.emotions.some((e=>e.brandToneLabel&&"off"===e.brandToneLabel)):l=a.createElement("div",{className:b.brandOffSubtitle},"Consider revising your message to align with your brand.");break;case r&&e.emotions.some((e=>e.brandToneLabel&&"on"===e.brandToneLabel)):l="Read about the tones below to learn more.";break;case r:l="Check your writing to see if the tone is what you had in mind.";break;default:l=e.emotions.length>1?"Which tones did we get right? Help us improve by letting us know.":"Did we get it right?"}return a.createElement(a.Fragment,null,a.createElement("div",{className:b.reportHeader},s&&a.createElement(C._,null),a.createElement("span",{className:b.popupTitle},o),a.createElement("span",{className:b.popupSubTitle},l)),a.createElement("div",null,e.emotions.map(((e,s)=>a.createElement(y,{actions:t,key:s,index:s,emotion:e,emotionValue:i[e.name]||_.b.none,isBrandTonesEnabled:r})))),!!e.recommendation&&a.createElement("span",Object.assign({},(0,f.Sh)(b.popupText,b.popupRecommendation)),e.recommendation),!r&&a.createElement(E.M,{className:b.popupReportCheckbox,clickHandler:()=>t.setShowEmojiState(!n.showEmoji)},a.createElement("span",{className:b.checkboxWrapper},a.createElement(k,{value:n.showEmoji})),a.createElement("span",{className:b.popupText},"Always show emoji for detected tones")))}},37179:(e,t,i)=>{"use strict";i.d(t,{u:()=>o});var a=i(40327),s=i(85985),n=i(15646),r=i(83078);function o(e,t,i,o){return e.pipe(s.h(n.lY.isAlertApplyAction)).subscribe((e=>(0,a.pipe)(i(e.alertId),r.bw((e=>{var i;if("unlocked"===r.Fc(e.extraProperties.freePremium)){const e=null===(i=o.experiments)||void 0===i?void 0:i.clarityAIFree;"alert_only"===e?t.freePremiumClarityAISuggestionAcceptButtonClick():"alert_email"===e&&t.freePremiumClarityAISuggestionAcceptForEmailButtonClick()}})))))}},45662:(e,t,i)=>{"use strict";i.d(t,{c:()=>s});var a=i(41186);class s{constructor(e,t){this._textObserver=e,this._highlights=t}addHighlight(e,t,i){return this._highlights.addHighlight(e,t,i)}updateHighlight(e,t,i){return this._highlights.updateHighlight(e,t,i)}removeHighlights(e){return this._highlights.removeHighlights(e)}recalculateHighlight(e){return this._highlights.recalculateHighlight(e)}recalculateAllHighlights(){return this._highlights.recalculateAllHighlights()}maintainConsistency(e,t=(e=>e),i=!1){return this._highlights.maintainConsistency(e,t,i)}hasHighlight(e){return this._highlights.hasHighlight(e)}getSelectedHighlightsTracker(e){return(0,a.H)({...e,highlights:this._highlights,textObserver:this._textObserver})}getGeometryByHighlightId(e){return this._highlights.geometry.get().get(e)}}},20544:(e,t,i)=>{"use strict";i.r(t),i.d(t,{IntentDetection:()=>a,IntentDetectionFeature:()=>l});var a,s=i(74850),n=i(79961),r=i(14601),o=i(95300);!function(e){let t;!function(e){e.ACCURATE="ACCURATE",e.INACCURATE="INACCURATE"}(t=e.IntentDetectionFeedback||(e.IntentDetectionFeedback={}))}(a||(a={}));class l{constructor(e,t,i){this._browser=e,this._getCheckingService=t,this._gnar=i,this._subs=new r.w,this._log=s.Y.create("IntentDetectionFeature"),this._currentIntentDetectionInfo=null,this._currentlyVisibleIntentDetectionItemLabel=null,this._intentDetectionItemsAcknowledged=new Set,this.intentDetectionInfo=new o.X(null)}onIntentDetectionMessage(e){var t,i;let a=e.intent.aggregated.length>0?{predictionId:e.intent.aggregated[0].id,label:e.intent.aggregated[0].prediction.label,emojiUnicode:e.intent.aggregated[0].prediction.bundle.title_icon_id,title:e.intent.aggregated[0].prediction.bundle.title,browser:this._browser}:null;if(a&&this._intentDetectionItemsAcknowledged.has(null==a?void 0:a.label)&&(this._log.trace("New intent detection info was already ack'd by the user, considering it `null`:",a),a=null),(null===(t=this._currentIntentDetectionInfo)||void 0===t?void 0:t.label)!==(null==a?void 0:a.label)){if(this._log.trace("Updating current intent detection info:",a),this._currentIntentDetectionInfo=a,this.intentDetectionInfo.next(this._currentIntentDetectionInfo),this._currentIntentDetectionInfo||(this._currentlyVisibleIntentDetectionItemLabel=null),this._currentIntentDetectionInfo){const e=null===(i=this._getCheckingService())||void 0===i?void 0:i.sessionUuid;e&&this._gnar.intentInfoReceived(this._currentIntentDetectionInfo.predictionId,this._currentIntentDetectionInfo.label,e)}}else this._log.trace("New intent detection info is the same that we currently have, nothing to do:",a)}onIntentDetectionFeedback(e,t){const i=this._getCheckingService(),s=null==i?void 0:i.sessionUuid;e===a.IntentDetectionFeedback.ACCURATE?(this._log.trace("Sending INTENT_ACCEPTED feedback to CAPI:",t),null==i||i.onIntentFeedback(n.l.Intent.FeedbackType.INTENT_ACCEPTED,t.predictionId),s&&this._gnar.intentYesButtonClick(t.predictionId,t.label,s)):e===a.IntentDetectionFeedback.INACCURATE&&(this._log.trace("Sending INTENT_IGNORED feedback to CAPI:",t),null==i||i.onIntentFeedback(n.l.Intent.FeedbackType.INTENT_IGNORED,t.predictionId),s&&this._gnar.intentNoButtonClick(t.predictionId,t.label,s)),this._intentDetectionItemsAcknowledged.add(t.label)}onIntentDetectionItemShow(e){var t,i;if(this._currentlyVisibleIntentDetectionItemLabel!==e.label){this._log.trace("Sending INTENT_ALERT feedback to CAPI:",e),this._currentlyVisibleIntentDetectionItemLabel=e.label,null===(t=this._getCheckingService())||void 0===t||t.onIntentFeedback(n.l.Intent.FeedbackType.INTENT_ALERT,e.predictionId);const a=null===(i=this._getCheckingService())||void 0===i?void 0:i.sessionUuid;a&&this._gnar.intentShow(e.predictionId,e.label,a)}}onIntentDetectionItemExpand(e){var t,i;this._log.trace("Sending INTENT_LOOKED feedback to CAPI:",e),null===(t=this._getCheckingService())||void 0===t||t.onIntentFeedback(n.l.Intent.FeedbackType.INTENT_LOOKED,e.predictionId);const a=null===(i=this._getCheckingService())||void 0===i?void 0:i.sessionUuid;a&&this._gnar.intentCardExpanded(e.predictionId,e.label,a)}onIntentDetectionViewModelDisposed(){this._currentlyVisibleIntentDetectionItemLabel=null}dispose(){this._subs.unsubscribe()}}},63047:(e,t,i)=>{"use strict";i.d(t,{Z:()=>a});var a,s=i(40327),n=i(66896),r=i(36156),o=i(5920),l=i(48521),c=i(16892),d=i(4890),p=i(79471),m=i(93494),h=i(73975),u=i(5114),g=i(83078),v=i(95195),f=i(55415);!function(e){let t,i;e.id="IntentDetectionItemId",e.Kind="IntentDetectionItem",e.isIntentDetectionItem=function(t){return t.id===e.id},e.eq=h.f7(((e,t)=>e.hashCode()===t.hashCode())),function(e){let t;!function(e){e.intentDetectionItemShow="intentDetectionItemShow",e.intentDetectionItemExpand="intentDetectionItemExpand",e.intentDetectionItemClick="intentDetectionItemClick",e.intentDetectionItemFeedbackAccurate="intentDetectionItemFeedbackAccurate",e.intentDetectionItemFeedbackInaccurate="intentDetectionItemFeedbackInaccurate",e.intentDetectionItemClose="intentDetectionItemClose",e.intentDetectionItemAccept="intentDetectionItemAccept"}(t=e.Kind||(e.Kind={})),e.isIntentDetectionItemShowAction=function(e){return e.kind===t.intentDetectionItemShow},e.isIntentDetectionItemExpandAction=function(e){return e.kind===t.intentDetectionItemExpand},e.isIntentDetectionItemClickAction=function(e){return e.kind===t.intentDetectionItemClick},e.isIntentDetectionItemFeedbackInaccurateAction=function(e){return e.kind===t.intentDetectionItemFeedbackInaccurate},e.isIntentDetectionItemFeedbackAccurateAction=function(e){return e.kind===t.intentDetectionItemFeedbackAccurate},e.isIntentDetectionItemCloseAction=function(e){return e.kind===t.intentDetectionItemClose},e.isIntentDetectionItemAcceptAction=function(e){return e.kind===t.intentDetectionItemAccept}}(t=e.Event||(e.Event={})),function(e){e.changePosition=e=>t=>new w(t.predictionId,t.label,t.emojiUnicode,t.title,t.browser,t.lensIsPriority,e,t.visualState),e.transitionTo=e=>t=>new w(t.predictionId,t.label,t.emojiUnicode,t.title,t.browser,t.lensIsPriority,t.positionState,l.o.VisualState.to(t.visualState,e)),e.completeTransition=e=>t=>new w(t.predictionId,t.label,t.emojiUnicode,t.title,t.browser,t.lensIsPriority,t.positionState,l.o.VisualState.complete(t.visualState,e)),e.select=e=>t=>(0,s.pipe)(e,u.filter((e=>e.id===t.id)),g.vx((0,s.pipe)(t,u.fromPredicate((e=>"focused"===e.visualState.transition.type)))),u.fold((()=>{const i=c.s.PositionState.invalidateHeight(t.positionState),a={type:"focused",clockwise:!0},n=(0,s.pipe)(e,u.fold((()=>l.o.VisualState.initial(a)),(()=>l.o.VisualState.to(t.visualState,a))));return new w(t.predictionId,t.label,t.emojiUnicode,t.title,t.browser,t.lensIsPriority,i,n)}),(()=>t))),e.unselect=e=>t=>(0,s.pipe)(e,u.filter((e=>e.id===t.id)),g.vx((0,s.pipe)(t,u.fromPredicate((e=>"rendered"===e.visualState.transition.type)))),u.fold((()=>{const e=c.s.PositionState.invalidateHeight(t.positionState),i="hidden"===t.visualState.transition.type?t.visualState:l.o.VisualState.to(t.visualState,{type:"rendered",clockwise:!0});return new w(t.predictionId,t.label,t.emojiUnicode,t.title,t.browser,t.lensIsPriority,e,i)}),(()=>t)))}(i=e.Capabilities||(e.Capabilities={}));e.getStateTransformer=t=>({state:i,metadata:a})=>{if(!p.nL.hasItems(i)||!n.R.isMainLens(i.currentLens.id)||!p.nL.isLensview(i))return v.t$({state:i,metadata:a});const r=(0,s.pipe)(o.l.find(i.currentLens.items,e.isIntentDetectionItem),u.map(f.ei("value")));return(0,s.pipe)(i,p.nL.getLens,u.chain(((e,t)=>i=>{const a=t.getValue(),r=a?new w(a.predictionId,a.label,a.emojiUnicode,a.title,a.browser,n.R.isPriority(i.id),c.s.PositionState.changeWatched(c.s.PositionState.empty,!0),l.o.VisualState.initial({type:"rendered",clockwise:!0},!1)):null;return(0,s.pipe)(e,u.fold((()=>u.some({lens:i,newIntentDetectionItem:r})),(e=>(null==r?void 0:r.label)===e.label?u.none:u.some({lens:i,newIntentDetectionItem:r}))))})(r,t)),u.map((({lens:e,newIntentDetectionItem:t})=>{let a=(0,s.pipe)(r,u.fold((()=>e.items),(t=>e.items.remove(t.id))));return t&&(a=a.add(t)),p.nL.Prism.getLens().compose(m.v.Prism.items).set(a,i)})),u.getOrElse((()=>i)),(e=>v.t$({state:e,metadata:a})))}}(a||(a={}));class w{constructor(e,t,i,s,n,r,o,l){this.predictionId=e,this.label=t,this.emojiUnicode=i,this.title=s,this.browser=n,this.lensIsPriority=r,this.positionState=o,this.visualState=l,this.kind=a.Kind,this.id=a.id,this.renderOptions=d.j.defaultOptions}equals(e){return a.eq.equals(this,e)}hashCode(){return(0,r.NO)({predictionId:this.predictionId,label:this.label,emojiUnicode:this.emojiUnicode,title:this.title,browser:this.browser,lensIsPriority:this.lensIsPriority,positionState:JSON.stringify(this.positionState),visualState:JSON.stringify(this.visualState)})}}},73122:(e,t,i)=>{"use strict";if(i.d(t,{w:()=>s}),75==i.j)var a=i(20594);class s{constructor(e,t,i){var a;if(this._pageState=e,this._isEnabled=!1,!i.isPremium||!(null===(a=i.experiments)||void 0===a?void 0:a.premiumAlertLabels))return;const{gdocsPremiumEmblemNewEndTimestamp:s}=this._pageState.get();s||t.startShowingPremiumEmblems(),this._isEnabled=!0}get premiumAlertHighlightsEnabled(){const{gdocsPremiumEmblemNewEndTimestamp:e}=this._pageState.get();return this._isEnabled&&!!e}get premiumAlertHighlightRenderOption(){const{gdocsPremiumEmblemNewEndTimestamp:e}=this._pageState.get();return e<Date.now()?a.IG.Features.showPersistentPremiumCardLabels:a.IG.Features.showNewPremiumCardLabels}}},86620:(e,t,i)=>{"use strict";i.d(t,{U:()=>a,C:()=>l});var a,s=i(27378),n=i(29511),r=i(71284),o=i(88056);!function(e){let t;!function(e){e.isAppleSystem="isAppleSystem"}(t=e.SidebarFlag||(e.SidebarFlag={})),e.Flag={...t,...r.a.Flag},e.Context=s.createContext(o.Y.invariantContent("Environment"))}(a||(a={}));class l{constructor(){this._flags=new Set,this.actions={openUrl:()=>{throw new Error("Not implemented")},openPopup:()=>{throw new Error("Not implemented")}};(0,n.O)().config.systemInfo.os.isMac&&this._flags.add(a.Flag.isAppleSystem),this._flags.add(a.Flag.supportsSVGDominantBaseline),this._flags.add(a.Flag.onlyTrustedEvents)}has(e){return this._flags.has(e)}}},90989:(e,t,i)=>{"use strict";i.d(t,{S:()=>a,I:()=>c});var a,s=i(27378),n=i(30763),r=i(88056),o=i(19429),l=i(35407);!function(e){e.Context=s.createContext(r.Y.invariantContent("SidebarTextResources")),e.holder=o.VF((()=>({logoText:"GRAMMARLY",plagiarismTooltip:"Scan for plagiarism",setGoalsTooltip:"Adjust goals",statisticsTooltip:"See performance"})))}(a||(a={}));const c=l.GG({denali:n.m.holder,sidebar:a.holder})},10720:(e,t,i)=>{"use strict";i.d(t,{h:()=>Z,u:()=>W});var a,s=i(57050),n=i(27378),r=i(13922),o=i(2027),l=i(90361),c=i(4680),d=i(66896),p=i(68579),m=i(36156),h=i(71841),u=i(74238),g=i(99116),v=i(79471),f=i(18955),w=i(77176),_=i(98403),b=i(32952),y=i(93508),E=i(76974),k=i(2844),C=i(60797),S=i(24209),A=i(18625),I=i(66310),M=i(40151),x=i(85089),L=i(2834),T=i(95093),F=i(24713),V=i(85985),P=i(49708),R=i(17343),O=i(19751),N=i(5114),D=i(19962),U=i(5739),B=i(81531),H=i(47476);!function(e){e.regular="regular",e.small="small"}(a||(a={}));const j=c.UI.Grid.make((({slots:e,view:t})=>n.createElement(U.F.div,{className:t("spacing").pipe(w.U((e=>e===a.regular?H.spacingRegular:e===a.small?H.spacingSmall:(0,l.vE)(e))))},e.children)));function G(e){switch(e){case d.R.SpecialId.PredictionTakeaways:case d.R.SpecialId.Priority:return a.small;default:return a.regular}}const Z=n.forwardRef((({state:e,cardsViewModel:t,cardsListScrollManager:i,connectorElements:a,header:l,footer:d,capabilities:u,comparator:g,intentDetectionViewModel:w},k)=>{const C=_.jw((e=>{let t=7;return t=31*t+(0,m.AC)(e.currentLens.id),t=31*t+(v.nL.hasItems(e)?1231:1237),t}),e).view((e=>v.nL.hasItems(e.get())?e.view(v.nL.Prism.getLens()):null)).view((e=>e?{state:e,spacing:G(e.get().id)}:null)),S=n.useContext(o.Dg).state;return n.createElement(f.d,{className:E.of(""),name:"cardlist",stateSyncListener:q(i,a,S),height:W(e,i,u),isMaster:!0},n.createElement(n.Fragment,null,l?n.createElement(U.F.div,{className:H.headerOrFooterWrapper,mount:e=>a.lens("title").set(N.fromNullable(e))},l):null,n.createElement(U.F.div,{mount:k},C.view((e=>{return e?c.UI.mount((a=e.spacing,(0,s.zG)(p.A.cardList(r.O.item(t.actionEvents)),c.UI.patch("content","cell","item")((e=>(0,s.zG)(c.UI.Knot.make(j,{children:e.child}),c.UI.squash,c.UI.contramapState((e=>({children:e,root:{spacing:a}}))),c.UI.mapAction((e=>e.action))))))),(e=>(0,s.zG)(r.O.createCardListFlow(w)(t,e,new b.xQ,h.i$(i).pipe(y.O(!1)),u,g)))(e.state)):null;var a}))),d?n.createElement(U.F.div,{className:H.headerOrFooterWrapper},d):null))})),W=(e,t,i)=>{const a=(0,g.Sd)(i)(e.view(v.nL.mapper((({currentLens:e,alertSource:t})=>N.some({currentLens:e,alertSource:t})))));return k.aj([a.pipe(C.oA,w.U((({currentLens:e})=>e.cardsHeight)),y.O(0)),t.paddingTop]).pipe(w.U((([e,t])=>e+t)))},q=(e,t,i)=>{const a=B.C8.Logging.getLogger("view_models");return S.T(A.P((()=>{e.paddingTop.set(0)})),t.view("viewport").pipe(I.w(N.fold((()=>M.E),(e=>x.YC(e).pipe(L.b((()=>a.debug("update card list viewport due to viewport resize event"))),T.T(i.pipe(F.j("dragging"),V.h((e=>!e)),I.w(_.b2.rafScheduler),L.b((()=>a.debug("update card list viewport due to drag end event"))))),w.U((()=>e.getBoundingClientRect())),w.U((e=>({top:u.r.FromWindowTop.ISO.wrap(e.top),height:e.height}))))))),L.b(_.wW(e.viewport))),t.view("scrollProvider").pipe(I.w(N.fold((()=>M.E),(t=>P.R(t,"scroll").pipe(w.U((()=>t.scrollTop)),y.O(t.scrollTop),L.b(_.wW(e.scrollTop)),R.h(_.PU)))))),t.view("title").pipe(I.w(N.fold((()=>E.of(D.UL.empty)),(e=>x.YC(e)))),w.U((e=>e.height)),O.d({bufferSize:1,refCount:!0}),L.b(_.wW(e.paddingTop))),t.view("scrollConsumer").pipe(I.w(N.fold((()=>M.E),(t=>e.scrollOffset.pipe(L.b((e=>{t.scrollTop+=e})))))))).pipe(R.h(void 0))}},68340:(e,t,i)=>{"use strict";i.d(t,{C:()=>R,S:()=>P});var a=i(40327),s=i(18756),n=i(27378),r=i(13922),o=i(10720),l=i(73582),c=i(41488),d=i(71936),p=i(4680),m=i(66896),h=i(70023),u=i(61903),g=i(93494),v=i(18955),f=i(98403),w=i(60797),_=i(2834),b=i(77176),y=i(19962),E=i(5114),k=i(5739),C=i(74880),S=i(57050),A=i(38819),I=i(30509);const M=({upgradeViewModel:e})=>n.createElement(k.F.div,{className:I.premiumLens},p.UI.mount(A.r,d.Z.fromSideEffect((t=>{"upgrade"===t.action.action.action.kind&&e.openUpgradeUrl(l.L.Place.gdocsSidebarSuccessView)}),e.advancedAlerts.pipe(b.U((0,S.ls)(E.map((e=>({count:e.count,alerts:e.alerts()})))))))));var x=i(30763),L=i(89379),T=i(28378),F=i(879);const V=({successLensViewModel:e})=>{const t=(0,L.hM)((0,L.wK)(e.successState.view("type"),n.useContext(x.m.Context)));return n.createElement(k.F.div,{className:F.successLens},p.UI.mount(T.q,t))},P=n.forwardRef((({state:e,cardsViewModel:t,upgradeViewModel:i,cardsListScrollManager:c,capabilities:v,...w},b)=>{const y=f.jw((e=>{let t=7;return t=31*t+(0,s.AC)(e.currentLens.id),t=31*t+(g.v.WithSuccess.State.isInSuccess(v)(e)?1231:1237),t}),e),C=(0,a.pipe)((0,h.Q)(i.advancedAlerts),d.Z.extendActions(_.b((e=>{e.key===u.n.State.expanded&&"upgrade"===e.action.kind&&i.openUpgradeUrl(l.L.Place.gdocsSidebarCardList)}))));return n.createElement(R,{ref:b},(e=>n.createElement(k.F.Fragment,null,y.view((a=>{const s=a.get();return s.currentLens.id===m.R.SpecialId.Premium?n.createElement(M,{upgradeViewModel:i}):g.v.WithSuccess.State.isInSuccess(v)(s)?n.createElement(V,{successLensViewModel:w.successLensViewModel}):n.createElement("div",null,n.createElement(o.h,{state:a,cardsViewModel:t,cardsListScrollManager:c,connectorElements:e,header:p.UI.mount(u.n.ToggablePanel,C),comparator:r.O.listItemOrd,capabilities:v,intentDetectionViewModel:E.none}))})))))})),R=n.forwardRef((({children:e,onClick:t,className:i=C.cardList,footer:s},r)=>{const o=v.d.Elements.create(),l=(0,a.pipe)(o.view("viewport"),w.oA,b.U(y.UL.fromEl));return n.createElement("div",{onClick:t,className:i,ref:e=>{"function"==typeof r?r(e):r&&(r.current=e);const t=E.fromNullable(e);o.lens("scrollConsumer").set(t),o.lens("scrollProvider").set(t),o.lens("viewport").set(t)}},n.createElement(c.l.RootVirtualContainer,{name:"cardListConnector",viewport:l},e(o)),s)}))},1309:(e,t,i)=>{"use strict";i.d(t,{Z:()=>c});var a=i(27378);if(75==i.j)var s=i(87380);if(75==i.j)var n=i(94793);if(75==i.j)var r=i(66896);if(75==i.j)var o=i(5739);var l=i(57731);const c=({lensPreviewViewModel:e})=>{const t=e.getLens(r.R.SpecialId.AllAlerts).view((e=>e.count));return a.createElement(o.F.div,{className:l.footer},a.createElement(d,{activeAlerts:t}))},d=({activeAlerts:e})=>a.createElement(o.F.Fragment,null,e.view((e=>e>0?a.createElement(s.x.OutcomeCounter,{count:e,theme:{counterWrapper:l.counterWrapper,counterContent:l.counter}}):a.createElement(n.JO.CheckmarkOutcomes,{className:l.counterCheckmarkIcon}))))},74928:(e,t,i)=>{"use strict";i.d(t,{$l:()=>I});var a=i(27378);if(75==i.j)var s=i(77394);if(75==i.j)var n=i(90989);if(75==i.j)var r=i(7046);if(75==i.j)var o=i(94793);if(75==i.j)var l=i(81301);if(75==i.j)var c=i(3656);if(75==i.j)var d=i(4680);if(75==i.j)var p=i(71936);if(75==i.j)var m=i(66896);if(75==i.j)var h=i(40018);if(75==i.j)var u=i(40743);if(75==i.j)var g=i(87667);if(75==i.j)var v=i(92644);if(75==i.j)var f=i(15774);if(75==i.j)var w=i(89186);if(75==i.j)var _=i(84317);if(75==i.j)var b=i(77176);if(75==i.j)var y=i(85985);if(75==i.j)var E=i(22232);if(75==i.j)var k=i(8125);if(75==i.j)var C=i(5114);if(75==i.j)var S=i(12187);var A=i(21831);const I=({state:e,navigationViewModel:t,modalManager:i,lensPreviewViewModel:n,features:r})=>{switch(r.priorityLens.kind){case s.h.Kind.dropdown:return a.createElement(M,{state:e,navigationViewModel:t,modalManager:i,lensPreviewViewModel:n});case s.h.Kind.priorityToggle:return a.createElement(x,{state:e,navigationViewModel:t,modalManager:i,lensPreviewViewModel:n,defaultMode:r.priorityLens.defaultMode});case s.h.Kind.none:return a.createElement(L,{navigationViewModel:t,modalManager:i});default:(0,E.vE)(r.priorityLens)}},M=({state:e,navigationViewModel:t,modalManager:i,lensPreviewViewModel:s})=>a.createElement("div",{className:A.priorityLensHeader},a.createElement(T,{navigationViewModel:t,modalManager:i}),a.createElement("div",{className:A.prioritySwitchWrapper},d.UI.mount(g.n.Switch,(0,v.i)(s,t,e.pipe(b.U((e=>e.currentLens.id))))))),x=({state:e,navigationViewModel:t,modalManager:i,lensPreviewViewModel:s,defaultMode:n})=>a.createElement("div",{className:A.priorityLensHeader},a.createElement(T,{navigationViewModel:t,modalManager:i}),a.createElement("div",{className:A.prioritySwitchFlatWrapper},d.UI.mount(w.B.DefaultHeader,(0,_.HP)(t,e.pipe(b.U((e=>e.currentLens.id)),y.h((0,k.Kg)(m.R.isPriority,m.R.isAllAlerts))),"priority"===n?f.H.LensMode.priority:f.H.LensMode.all,"compact",s,10)))),L=({navigationViewModel:e,modalManager:t})=>a.createElement("div",{className:A.defaultHeader},a.createElement(T,{navigationViewModel:e,modalManager:t}),a.createElement("div",Object.assign({},(0,S.Sh)(A.lensNavigation,A.disabledLensNavigation)),d.UI.mount(u.C,p.Z.fromSideEffect((t=>{e.events.next({type:"switchToLens",id:t.lens.id,focusFirst:!1,actionSource:h.l$.sidebar})}),{activeLensId:C.none,previews:Object.values(e.lensPreviews.get()).filter((e=>e.id!==m.R.SpecialId.Vox)),disabled:!1})))),T=({navigationViewModel:e,modalManager:t})=>{const i=a.useContext(n.S.Context),s=t.state.view(C.exists((e=>e.instance.type===l.dC.SetGoals)));return a.createElement("div",{className:A.head},a.createElement("div",{className:A.headerGroup},a.createElement(o.JO.Grammarly,{className:A.logoIcon,width:18}),a.createElement(c.H5,{className:A.logoText},i.logoText)),a.createElement(r.zx.Flat,{name:"setGoals",className:A.setGoalsButton,title:i.setGoalsTooltip,titleAlign:"bottomCenter",active:s,disabled:s,onClick:()=>e.events.next({type:"setGoals"})},a.createElement(o.JO.GoalsEmpty,{width:24})),a.createElement("div",{className:A.headerGroup},a.createElement("div",{className:A.divider}),a.createElement(r.zx.Flat,{name:"closeSidebar",onClick:()=>e.events.next({type:"toggleSidebar",actionSource:h.l$.sidebar})},a.createElement(o.JO.Close,{width:16}))))}},80550:(e,t,i)=>{"use strict";i.d(t,{L:()=>o});var a=i(57050),s=i(27378),n=i(5114),r=i(5739);const o=({modalManager:e})=>s.createElement(r.F.Fragment,null,e.state.view((0,a.ls)(n.map((({component:e})=>e)),n.toNullable)))},11177:(e,t,i)=>{"use strict";i.d(t,{P:()=>o});var a=i(27378),s=i(50790),n=i(95403),r=i(32380);const o={unauthorizedError:(e,t)=>a.createElement(n.s.UnauthorizedError,{action:t("gotoLogin")}),offline:()=>a.createElement(l,null),alertUndo:(e,t)=>a.createElement(r.A.Standard,{action:t("undo"),params:e.args.params})},l=()=>a.createElement(s.DI.TitledContent,{title:"Lost Connection"},"Your Internet session was interrupted.")},92132:(e,t,i)=>{"use strict";i.d(t,{Q:()=>l});var a=i(27378),s=i(41046),n=i(60797),r=i(95300),o=i(5114);const l=({children:e,remSize:t,setter:i})=>(c+=1,a.useEffect((()=>{const e=t.subscribe((e=>{d.next(o.some(e)),i(o.some(e))}));return()=>{e.unsubscribe(),c-=1,0===c&&(d.next(o.none),i(o.none))}}),[t]),a.createElement(s.u.Context.Provider,{value:d.pipe(n.oA)},e));let c=0;const d=new r.X(o.none)},9025:(e,t,i)=>{"use strict";i.d(t,{_:()=>n});var a=i(27378);if(75==i.j)var s=i(94071);const n=({children:e,className:t})=>a.createElement("div",{className:t,style:{position:"fixed",right:"0px",top:"0px",bottom:"0px",width:s.xK,zIndex:1e3,background:"white",display:"flex",flexDirection:"column",height:"100vh"}},e)},94071:(e,t,i)=>{"use strict";i.d(t,{iB:()=>a,xK:()=>s,H2:()=>n,kl:()=>r});const a=".docs-companion-sidebar",s="300px";var n;!function(e){e.selector=".companion-guest-app-switcher .app-switcher-button",e.selectedClass="app-switcher-button-selected",e.selectedSelector=`.${e.selectedClass}`,e.activeClass="app-switcher-button-active",e.hoverClass="app-switcher-button-hover",e.disabledClass="app-switcher-button-disabled"}(n||(n={}));const r=".companion-about-panel-button"},94663:(e,t,i)=>{"use strict";i.d(t,{I:()=>r});var a=i(5802),s=i(41966);const n={priority:a.P.Priority.highest,timeout:a.P.TimeoutDisabled,position:a.P.Position.top,viewType:a.P.ViewType.standard};var r;!function(e){e.createFactory=function(){return{alertUndo:s.r.createBuilder().build({priority:a.P.Priority.low,timeout:a.P.DefaultTimeout,position:a.P.Position.bottomRight,viewType:a.P.ViewType.standard}),unauthorizedError:s.r.createBuilder().build(n),offline:s.r.createBuilder().build(n)}}}(r||(r={}))},70091:(e,t,i)=>{"use strict";i.d(t,{U9:()=>M,jv:()=>L});var a=i(27378);if(75==i.j)var s=i(86620);if(75==i.j)var n=i(90989);if(75==i.j)var r=i(68340);if(75==i.j)var o=i(1309);if(75==i.j)var l=i(74928);if(75==i.j)var c=i(80550);if(75==i.j)var d=i(11177);if(75==i.j)var p=i(92132);if(75==i.j)var m=i(9025);if(75==i.j)var h=i(50981);var u=i(48189);if(75==i.j)var g=i(71284);if(75==i.j)var v=i(41046);if(75==i.j)var f=i(30763);if(75==i.j)var w=i(47861);if(75==i.j)var _=i(97528);if(75==i.j)var b=i(53187);if(75==i.j)var y=i(85255);if(75==i.j)var E=i(76974);if(75==i.j)var k=i(8313);var C=i(79850),S=i(75259),A=i(67129);const I=({state:e,cardsViewModel:t,navigationViewModel:i,successLensViewModel:s,upgradeViewModel:n,cardsListScrollManager:c,notificationManager:p,lensPreviewViewModel:h,modalManager:u,features:g,capabilities:v})=>a.createElement(m._,{className:A.sidebarContainer},a.createElement(l.$l,{state:e,navigationViewModel:i,modalManager:u,lensPreviewViewModel:h,features:g}),a.createElement(r.S,{cardsViewModel:t,state:e,successLensViewModel:s,upgradeViewModel:n,cardsListScrollManager:c,capabilities:v}),"none"!==g.priorityLens.kind?null:a.createElement(o.Z,{lensPreviewViewModel:h}),a.createElement(w.i,{key:"notificationCenter",manager:p,views:d.P,theme:{grid:{container:S.container,bottomLeft:S.bottomLeft,bottomRight:S.bottomRight,top:S.top},view:{wrapper:S.notificationWrapper}}}));function M(e){return({integration:t,sidebarReady:i})=>()=>{const n=t.engine,r=new s.C,{lensState:o,cardsViewModel:l,navigationViewModel:d,successLensViewModel:p,upgradeViewModel:m,dispose:u,cardsListScrollManager:g,notificationManager:v,lensPreviewViewModel:f,modalManager:w,capabilities:_}=(0,h.G)(n,t.denaliViewAdapter,e,t.connectionState,t.pageState,t.actions,t.gnar,t.user,t.document.settings.lens("selectedLens"),t.features,i);return y.P.useEffectOnWillUnmount((()=>{n.shutdown(),u()})),a.createElement(x,{environment:r},a.createElement(I,{state:o,cardsViewModel:l,navigationViewModel:d,successLensViewModel:p,upgradeViewModel:m,cardsListScrollManager:g,notificationManager:v,lensPreviewViewModel:f,modalManager:w,features:t.features,capabilities:_}),a.createElement(c.L,{modalManager:w}),a.createElement(b.X,null))}}const x=({environment:e,children:t})=>{const i=a.useRef((0,n.I)(f.m.getConfig(e.has(s.U.Flag.isAppleSystem)?"mac":"windows")));return a.createElement(p.Q,{remSize:E.of(16),setter:e=>v.u.setRootCssVar(document.documentElement,e)},a.createElement(s.U.Context.Provider,{value:e},a.createElement(g.a.Context.Provider,{value:e},a.createElement(n.S.Context.Provider,{value:i.current.sidebar},a.createElement(f.m.Context.Provider,{value:i.current.denali},a.createElement(k.TG.ContextMock,null,a.createElement(_.G.DefaultProvider,null,a.createElement(L,null,t))))))))},L=({children:e})=>a.createElement(a.Fragment,null,a.createElement("div",{"data-grammarly-part":"gdocs-sidebar",className:C.wrapper},e),a.createElement(u.p,{thin:!0,thinItalic:!0,regular:!0,italic:!0,bold:!0,boldItalic:!0,semiBold:!0}))},16868:(e,t,i)=>{"use strict";i.d(t,{hp:()=>N,CV:()=>D,k9:()=>U});var a=i(57050),s=i(40327),n=i(74850),r=i(59443),o=i(40018),l=i(66896),c=i(18625),d=i(76974),p=i(60797),m=i(77176),h=i(66310),u=i(17343),g=i(98403),v=i(91224),f=i(40151),w=i(38194),_=i(24209),b=i(93508),y=i(16118),E=i(85985),k=i(28043),C=i(41398),S=i(83401),A=i(598),I=i(25980),M=i(58562),x=i(74238),L=i(99116),T=i(4890),F=i(79471),V=i(5114),P=i(83078),R=i(38983);class O{constructor(e,t){this._cardPositions=e,this._markPositions=t,this._log=n.Y.create(O.name)}alignCardToMark({id:e,renderOptions:{features:t},activeAlert:i,activeHighlightIndex:a},n){return c.P((()=>d.of(this._markPositions.getMarkAlertPosition({alert:i,highlightIndex:a})))).pipe(p.oA,m.U((i=>(0,s.pipe)(this._cardPositions.getCardSuggestedPositionInViewport(e,t.has(T.j.Features.showLabel),V.some(i),"cardContentTop"),V.fromEither))),p.oA,h.w((i=>this._cardPositions.setCardPosition(e,t.has(T.j.Features.showLabel),!0,i.top))),u.h(g.PU),v.K((e=>(this._log.error("Cannot align card to mark",e),f.E))),w.B())}alignMarkTo(e,t,i,a){return c.P((()=>d.of((0,s.pipe)(this._cardPositions.getCardSuggestedPositionInViewport(e.id,e.renderOptions.features.has(T.j.Features.showLabel),V.some(i),"cardContentTop"),V.fromEither)).pipe(p.oA))).pipe(h.w((i=>_.T(this._markPositions.moveAlertHighlightInViewport(t,x.r.FromWindowTop.ISO.modify(x.L.concatC(i.contentOffset))(i.top),r.uq.initial),this._cardPositions.setCardPosition(e.id,e.renderOptions.features.has(T.j.Features.showLabel),!0,i.top)))),u.h(g.PU),v.K((e=>(this._log.error("Cannot align mark to suggested position",e),f.E))),w.B())}alignMarkToCard({id:e,renderOptions:{features:t},activeHighlightIndex:i,activeAlert:a},n,o=V.none){return c.P((()=>d.of((0,s.pipe)(this._cardPositions.getCardSuggestedPositionInViewport(e,t.has(T.j.Features.showLabel),o,"cardContentTop"),V.fromEither)).pipe(p.oA))).pipe(h.w((s=>_.T(this._markPositions.moveAlertHighlightInViewport({alert:a,highlightIndex:i},x.r.FromWindowTop.ISO.modify(x.L.concatC(s.contentOffset))(s.top),r.uq.initial),this._cardPositions.setCardPosition(e,t.has(T.j.Features.showLabel),!0,s.top)))),u.h(g.PU),v.K((e=>(this._log.error("Cannot align mark to card",e),f.E))),w.B())}alignCardTo(e,t,i){const a=i!==I.v.Animation.NO_ANIMATION;return c.P((()=>d.of((0,s.pipe)(this._cardPositions.getCardSuggestedPosition(e.id,e.renderOptions.features.has(T.j.Features.showLabel),V.some(t),"cardTop"),V.fromEither)).pipe(p.oA))).pipe(h.w((t=>this._cardPositions.setCardPosition(e.id,e.renderOptions.features.has(T.j.Features.showLabel),a,t.top))),u.h(g.PU),v.K((e=>(this._log.error("Cannot align card to required top",e),f.E))),w.B())}}const N=(e,t,i,a,s,n)=>new O(M.eZ.getSuperScrollMapper(e,a,R.h.create(16)),M.UC.getMapper(t,s,n));var D;!function(e){e.skip="skip"}(D||(D={}));const U=(e,t,i,n,r,c=g.b2.rafScheduler)=>{const d=(e,i,a,s)=>{if(a===o.l$.text)return t.alignCardToMark(e,i?I.v.Animation.ANIMATE_ALL:I.v.Animation.NO_ANIMATION,!0);if(a===F.h8.forceText)return t.alignCardToMark(e,I.v.Animation.NO_ANIMATION,!1);{const n=a===o.l$.sidebar;return t.alignMarkToCard(e,n?i?I.v.Animation.ANIMATE_ALL:I.v.Animation.ANIMATE_MARK:I.v.Animation.NO_ANIMATION,s)}},p=_.T(e.view(F.nL.mapper((({currentLens:e,alertSource:t})=>V.some({currentLens:e,alertSource:t})))).pipe(b.O(V.none),m.U(V.map((e=>e.currentLens.id))),y.G(),E.h((([e,t])=>(0,s.pipe)(P.vB(((e,t)=>e!==t))(e,t),V.exists(a.yR)))),u.h(V.none)),e.view(F.nL.mapper((({currentLens:e,alertSource:t})=>V.some({currentLens:e,alertSource:t})))).pipe(E.h(V.exists((({currentLens:e})=>(0,L.Bk)(r)(e)))),m.U(V.chain((({currentLens:e,alertSource:t})=>(0,s.pipe)(n(e),V.filter(r.isValidToAlign),V.map((i=>({item:i,source:t,lensId:e.id}))))))))).pipe(k.x((0,a.ls)(P.vB(((e,t)=>e.lensId===t.lensId&&e.item.activeAlert.id===t.item.activeAlert.id&&e.item.visualState.transition.type===t.item.visualState.transition.type&&e.item.activeHighlightIndex===t.item.activeHighlightIndex)),V.exists(a.yR))),b.O(V.none),y.G(),m.U((([e,t])=>(0,s.pipe)(t,V.map((i=>({item:i.item,source:i.source,animate:(0,s.pipe)(e,P.wo((({lensId:e})=>e===i.lensId))),suggestedPosition:(0,s.pipe)(e,V.filter((e=>!r.isScheduledToDispose(e.item))),V.chain((e=>(0,s.pipe)(t,V.map((t=>[e.item,t.item]))))),V.filter((([e,t])=>t.lensId===e.lensId&&t.positionState.absTop>e.positionState.absTop)),V.map((([e,t])=>x.r.FromWindowTop.ISO.wrap(t.positionState.absTop))))})))))),h.w(V.fold((()=>f.E),c)),C.M(i),h.w((([{item:e,source:t,animate:a,suggestedPosition:n},r])=>(0,s.pipe)(r,V.fold((()=>d(e,a,t,n)),(t=>(i.set(V.none),t===D.skip?S.C:d(e,a,t,n))))))));return{id:"alignmentSideEffect",when:l.R.isWithAlertsId,what:F.nL.Effect.Applicator.create(p.pipe(A.c(S.C)))}}},93829:(e,t,i)=>{"use strict";if(i.d(t,{C:()=>c}),75==i.j)var a=i(45586);if(75==i.j)var s=i(85985);if(75==i.j)var n=i(15646);if(75==i.j)var r=i(9105);if(75==i.j)var o=i(32138);if(75==i.j)var l=i(37179);class c{constructor(e,t,i,s){this._cardsViewModel=e,this._gnar=t,this._getAlertById=i,this._user=s,this._subs=new a.w.Keeper,this.subscribeToSidebarCardActions()}subscribeToSidebarCardActions(){this._subs.push(this.subscribeToAnonymousUserSignInClick(),this.subscribeToPremiumTrialFooterCtaClick(),(0,l.u)(this._cardsViewModel.actionEvents,this._gnar,this._getAlertById,this._user))}subscribeToAnonymousUserSignInClick(){return this._cardsViewModel.actionEvents.pipe(s.h((e=>e.type===n.lY.Type.toSignIn))).subscribe((()=>{this._gnar.gdocsSidebarAnonymousUserSignIn(),window.open((0,o.s7)())}))}subscribeToPremiumTrialFooterCtaClick(){return r.Z.subscribeToCardFooterAction(this._cardsViewModel.actionEvents,this._gnar)}dispose(){this._subs.dispose()}}},51540:(e,t,i)=>{"use strict";i.d(t,{A7:()=>C,uo:()=>S,Ng:()=>A,CH:()=>I});var a=i(57050),s=i(40018);if(75==i.j)var n=i(66896);var r=i(55935),o=i(66310),l=i(40151),c=i(76974),d=i(41398),p=i(85985),m=i(77176);if(75==i.j)var h=i(28043);if(75==i.j)var u=i(598);if(75==i.j)var g=i(83401);if(75==i.j)var v=i(13444);if(75==i.j)var f=i(57091);if(75==i.j)var w=i(16118);var _=i(79471);if(75==i.j)var b=i(93494);var y=i(5114);if(75==i.j)var E=i(83078);if(75==i.j)var k=i(38983);function C(e,t){return{id:"alertSwitchingByClickSideEffect",when:a.W8,what:_.nL.Effect.SwitchAlert.create(e.alertClicked.pipe(r.T(1),o.w(y.fold((()=>l.E),c.of)),d.M(t.pipe(p.h(_.nL.hasCards),m.U((e=>e.currentLens.id))),((e,t)=>({...e,lensId:t}))),m.U((({alert:e,highlightIndex:t,lensId:i})=>({alertHighlight:{alert:e,highlightIndex:t},alertSource:s.l$.text,options:{lensId:i,order:"textOrder"}})))))}}function S(e,t){return{id:"connectionManager",when:()=>!0,what:_.nL.Effect.SwitchAlert.create(e.pipe(m.U((e=>e.online)),h.x(),o.w((e=>e?l.E:t.enqueue("offline",{reconnectTime:k.h.create(10)}))),u.c(g.C)))}}function A(e,t,i){const a=e.getLens(n.R.SpecialId.Premium).pipe(m.U((e=>e.count>0)),h.x());return{id:"autoSwitchToPremiumLensSideEffect",when:e=>e===n.R.SpecialId.AllAlerts||e===n.R.SpecialId.Priority,what:_.nL.Effect.SwitchLens.create(t.pipe(m.U(b.v.WithSuccess.State.isInSuccess(i)),h.x(),v.g(1),f.a(a),p.h((([e,t])=>e&&t)),m.U((()=>({lensId:n.R.SpecialId.Premium,alertSource:s.l$.sidebar,options:{toFocus:_.nL.Effect.FocusBehavior.noFocus}})))))}}function I(e,t){const i=e.getLens(n.R.SpecialId.AllAlerts).pipe(m.U((e=>e.count>0)),h.x()),r=e.getLens(n.R.SpecialId.Priority).pipe(m.U((e=>e.count>0)),h.x());return{id:"autoSwitchFromPremiumLensSideEffect",when:a.W8,what:_.nL.Effect.SwitchLens.create(t.pipe(m.U((e=>e.currentLens.id)),h.x(),w.G(),p.h((([e,t])=>t===n.R.SpecialId.Premium)),m.U((([e,t])=>e)),f.a(i,r),m.U((([e,t,i])=>e===n.R.SpecialId.Priority&&i?y.some(n.R.SpecialId.Priority):e===n.R.SpecialId.AllAlerts&&t?y.some(n.R.SpecialId.AllAlerts):y.none)),p.h(y.isSome),m.U(E.MH),m.U((e=>({lensId:e,alertSource:s.l$.sidebar,options:{toFocus:_.nL.Effect.FocusBehavior.noFocus}})))))}}},50981:(e,t,i)=>{"use strict";if(i.d(t,{G:()=>ee}),75==i.j)var a=i(57050);if(75==i.j)var s=i(58809);if(75==i.j)var n=i(13922);if(75==i.j)var r=i(9105);if(75==i.j)var o=i(73122);if(75==i.j)var l=i(77394);if(75==i.j)var c=i(94663);if(75==i.j)var d=i(93829);if(75==i.j)var p=i(62346);if(75==i.j)var m=i(37290);if(75==i.j)var h=i(73582);if(75==i.j)var u=i(44618);if(75==i.j)var g=i(90361);if(75==i.j)var v=i(81301);if(75==i.j)var f=i(61813);if(75==i.j)var w=i(66896);if(75==i.j)var _=i(13313);if(75==i.j)var b=i(98403);if(75==i.j)var y=i(76974);if(75==i.j)var E=i(77176);if(75==i.j)var k=i(85985);if(75==i.j)var C=i(21619);if(75==i.j)var S=i(54216);if(75==i.j)var A=i(17510);if(75==i.j)var I=i(48052);if(75==i.j)var M=i(91549);if(75==i.j)var x=i(83167);if(75==i.j)var L=i(20594);if(75==i.j)var T=i(35607);if(75==i.j)var F=i(20291);if(75==i.j)var V=i(34383);if(75==i.j)var P=i(11245);if(75==i.j)var R=i(4890);if(75==i.j)var O=i(79471);if(75==i.j)var N=i(93494);if(75==i.j)var D=i(73841);if(75==i.j)var U=i(89770);if(75==i.j)var B=i(39920);if(75==i.j)var H=i(17372);if(75==i.j)var j=i(74364);if(75==i.j)var G=i(27125);if(75==i.j)var Z=i(5114);if(75==i.j)var W=i(95195);if(75==i.j)var q=i(8125);if(75==i.j)var z=i(95574);if(75==i.j)var Y=i(38983);if(75==i.j)var K=i(81531);if(75==i.j)var $=i(16868);if(75==i.j)var Q=i(51540);if(75==i.j)var X=i(11755);if(75==i.j)var J=i(71962);const ee=(e,t,i,ee,te,ie,ae,se,ne,re,oe)=>{const le=K.C8.Logging.getLogger("view_models"),ce=Y.h.create(_.A.defaultState),de=S.t.create(S.t.defaultLensFilters,S.t.defaultTextFilters),pe=new o.w(te,ie,se),me=e.alertsList.state.pipe((t=>_.A.get(t,e.alertsList.lensesScores,de))).subscribe(b.wW(ce)),he=new X.t(ce.view("lenses"),de),ue=(0,I.$)((0,u.a)(t).getContents),ge={features:(()=>{var e;const t=new Set;return se.isAnonymous&&(null===(e=se.experiments)||void 0===e?void 0:e.anonUserGDocsSidebar)&&t.add(L.IG.Features.showAnonymousUserFooters),t.add(L.IG.Features.showCardLabelInOutcomes),r.Z.isInFreeTrial(se,te.get())&&t.add(L.IG.Features.showPremiumTrialFooters),pe.premiumAlertHighlightsEnabled&&t.add(pe.premiumAlertHighlightRenderOption),t})(),cardLayoutDensityMode:R.j.Density.compact,shouldAnimateAlertApply:a.jv},ve=(0,L.Ls)(ue,e.alertsReader,ge,(()=>y.of(Z.none)),e.mutingAlertsReader),fe=M.R.ItemFactory.create(ue,e.mutingAlertsReader,ge,(()=>y.of(Z.none))),we=(0,P.U)(ue,e.alertsReader,ge,V.T.ordAlert),_e=n.O.getCapabilities(ve,fe,we,e.alertsReader,ue,Y.h.create(V.D.empty())),be=new U.oq(e.alertsList.state,e.alertsReader,ce.view("lenses"),e.positionManager,he,new B.gi(ve,de,n.O.equatable.structEq,n.O.defaultOrd),(0,B.is)(ve,_e),_e,de),ye=((e,t)=>{switch(e.kind){case l.h.Kind.dropdown:return t.get();case l.h.Kind.priorityToggle:return"priority"===e.defaultMode?w.R.SpecialId.Priority:w.R.SpecialId.AllAlerts;case l.h.Kind.none:return w.R.SpecialId.AllAlerts;default:(0,g.vE)(e)}})(re.priorityLens,ne);i.next({kind:l.R.ChangeLens,selectedLens:ye===w.R.SpecialId.Priority?"priority":"all"});const Ee=Y.h.create(be.emptyState(ye)),ke=Ee.pipe(E.U((e=>e.currentLens.id)),k.h(s.U.SelectedLens.filter)).subscribe((e=>ne.set(e))),Ce=(0,x.u0)((()=>t.getCursor().index),be),Se=new h.x(e.alertsList,he,5),Ae=new v.EQ(new J.o(e.sessionModel,Se,se.isPremium,Z.none)),Ie=new m.$(Ee,he,i,Ae,t,re,ae,H.z.all),Me=new A.Xx({flush:()=>t.flushChanges()},Ie.events,ve,e.alertsService,(()=>Promise.resolve()),(()=>Promise.resolve()),e.mutedAlertsCategoriesModel,Z.none,(()=>!1),n.O.getActiveItemWithAlert,_e,Ee),xe=new d.C(Me,ae,e.alertsReader.getById,se),Le=new p.o(e.alertsList,e.alertsReader,e.positionManager,e.alertsService,t,Ee,de,n.O.getActiveItemWithAlert,oe),Te=new T.o((()=>W.F2(void 0))),Fe=(0,$.hp)(Ee,Le,Y.h.create(16),Te,t,le),Ve=new C.m(t,Ee,Le,e.alertsReader,n.O.getActiveItemWithAlert),Pe=new f.y(Y.h.create([]),c.I.createFactory(),3,5e3),Re=[A.dv.changeAlertEffect(Ee,Me,ve,n.O.getActiveItemWithAlert,e.alertsReader,Z.some(Fe),Ce,le.getLogger("CardsViewModelEffects.changeAlertEffect")),...Me.getApplicatorEffects(),F.R7(Ee,Te,_e,(0,a.MZ)(Me.actionEvents),{cardsAroundActive:25,cardsBeyondViewport:25}),Q.A7(Ve,Ee),(0,$.k9)(Ee,Fe,Y.h.create(Z.none),n.O.getActiveAlignableItem,_e),F.XU(Ee,Te,_e),j.EQ.focusMarkByActiveAlert(Ee,Le,e.alertsReader,n.O.getActiveFocusableItem,le.getLogger("MarksEffects.focusMarkByActiveAlert")),j.EQ.highlightMarkByHighlightedCard(Me,Ee,Le,e.alertsReader,_e,le.getLogger("MarksEffects.highlightMarkByHighlightedCard")),Q.uo(ee,Pe),A.dv.createSendActiveAlertFeedbacksEffect(Ee,n.O.getActiveItemWithAlert,e.alertsService,e.alertsReader,le.getLogger("MarksEffects.highlightMarkByHighlightedCard")),Q.Ng(he,Ee,_e),Q.CH(he,Ee),Ie.lensChangeEffect],Oe="none"!==re.priorityLens.kind?Ie.lensMode.view(H.K.isPriorityMode).view((0,q.RN)(w.R.SpecialId.Priority,w.R.SpecialId.AllAlerts)):Y.h.create(w.R.SpecialId.AllAlerts),Ne=(0,x.VC)(be,Ce,Oe,n.O.getActiveItemWithAlert,_e),De=Y.h.create(!0),Ue=x.Py.getStateTransformer(x.Py.getDefaultBehavior(n.O.getActiveItemWithAlert,_e),Ne,e.alertsReader,_e,De,a.Q1,Oe),Be=N.v.Items.getItemsPositionsUpdateTransformer(_e),He=(0,a.ls)(Ue,z.L9(Be)),je=new D.l(Ee,be,e.alertsReader,e.alertsService,Re,n.O.getActiveItemWithAlert,He),Ge=new G.L(Ee,e.sessionModel,a.Q1,_e,Z.none,Z.none,(e=>O.nL.isWithPriorityList(e)&&N.v.WithPriority.onlyNonPriorityAlertsLeft(e.currentLens,n.O.priorityTest,_e)),N.v.WithPriority.isInSuccess(n.O.priorityTest,_e));return{lensState:Ee,lensStateManager:je,cardsViewModel:Me,marksViewModel:Le,navigationViewModel:Ie,successLensViewModel:Ge,alignmentViewModel:Fe,lensPreviewViewModel:he,cardsListScrollManager:Te,notificationManager:Pe,upgradeViewModel:Se,modalManager:Ae,capabilities:_e,dispose:()=>{Le.dispose(),ke.unsubscribe(),me.unsubscribe(),xe.dispose()}}}},11755:(e,t,i)=>{"use strict";i.d(t,{t:()=>v});var a=i(71249),s=i(57050),n=i(40327),r=i(45614),o=i(32426),l=i(66896),c=i(26653),d=i(64992),p=i(8125),m=i(22232),h=i(5114),u=i(90329),g=i(38983);class v{constructor(e,t){this._lensesList=e,this._alertsFilterService=t,this.getLens=(0,p.HP)((function(e){switch(e){case l.R.SpecialId.AllAlerts:return this._lensesList.view(f(l.R.Info.allAlerts,l.R.Meta.group.empty,this._alertsFilterService.getLensesFilter(l.R.SpecialId.AllAlerts)));case l.R.SpecialId.Priority:return this._lensesList.view(f(l.R.Info.priority,l.R.Meta.group.empty,this._alertsFilterService.getLensesFilter(l.R.SpecialId.Priority)));case l.R.SpecialId.PredictionTakeaways:return this._lensesList.view(f(l.R.Info.predictionTakeaways,l.R.Meta.group.empty,this._alertsFilterService.getLensesFilter(l.R.SpecialId.PredictionTakeaways)));case l.R.SpecialId.PredictionEmogenie:return this._lensesList.view(f(l.R.Info.predictionEmogenie,l.R.Meta.group.empty,this._alertsFilterService.getLensesFilter(l.R.SpecialId.PredictionEmogenie)));case l.R.SpecialId.RealTimeProofit:return this._lensesList.view(f(l.R.Info.realTimeProofit,l.R.Meta.group.empty,this._alertsFilterService.getLensesFilter(l.R.SpecialId.RealTimeProofit)));case l.R.SpecialId.Plagiarism:return this._lensesList.view(this._getPlagiarismLens);case l.R.SpecialId.Premium:return this._lensesList.view(f(l.R.Info.premium,l.R.Meta.group.empty,this._alertsFilterService.getLensesFilter(l.R.SpecialId.Premium)));case l.R.SpecialId.Correctness:case l.R.SpecialId.Clarity:case l.R.SpecialId.Engagement:case l.R.SpecialId.Delivery:case l.R.SpecialId.Vox:case l.R.SpecialId.CorrectnessPriority:case l.R.SpecialId.ClarityPriority:case l.R.SpecialId.EngagementPriority:case l.R.SpecialId.DeliveryPriority:case l.R.SpecialId.VoxPriority:return this._lensesList.view(f(l.R.Info.createOutcome(e),l.R.Meta.group.empty,this._alertsFilterService.getLensesFilter(e)));case l.R.SpecialId.RealTimeProofit:return this._lensesList.view(f(l.R.Info.realTimeProofit,l.R.Meta.group.empty,this._alertsFilterService.getLensesFilter(e)));default:return(0,m.vE)(e)}})),this._outcomes=[l.R.SpecialId.Correctness,l.R.SpecialId.Clarity,l.R.SpecialId.Engagement,l.R.SpecialId.Delivery],this._previews=(0,p.HP)((()=>r.uX((0,o.getFirstSemigroup)(),a.IX)(this._outcomes,(e=>[e,this._getPreview(e)])))),this._isDocumentEmpty=g.h.create(!1),this._isFree=g.h.create(!1),this._outcomeStatusMask=g.h.combine(this._isDocumentEmpty,this._isFree,((e,t)=>{let i=0;return e&&(i|=d.x.IsDocumentEmpty),t&&(i|=d.x.IsFreeUser),i})),this._getPlagiarismLens=(0,s.ls)(f(l.R.Info.plagiarism,{...l.R.Meta.group.empty,percentile:c.T.MAX},this._alertsFilterService.getLensesFilter(l.R.SpecialId.Plagiarism)),l.R.WithAlerts.modifyMeta((e=>({...e,percentile:c.T.groupSum.concat(c.T.MAX,c.T.groupSum.inverse(e.percentile))}))))}findLens(e){return(0,n.pipe)(h.fromNullable([this.getLens(l.R.SpecialId.AllAlerts),this.getLens(l.R.SpecialId.Premium)].find((t=>e(t.get())))),h.map((e=>e.get().id)))}_getPreview(e){return{...l.R.Info.base,logo:h.none,...this._getOutcomeButtonData(e)}}get lensPreviews(){return this._previews()}_getOutcomeButtonData(e){const t=this.getLens(e),i=t.get().title,a=this._isFree.view((t=>t&&(e===l.R.SpecialId.Engagement||e===l.R.SpecialId.Delivery))),s=g.h.combine(t.view("count").view((e=>0===e)),a,((e,t)=>e&&!t)),{description:n,stateMessage:r}=(0,d.O)(e),o=g.h.combine(this._isDocumentEmpty,s,t.view("percentile"),((e,t,i)=>e?c.T.MIN:t?c.T.MAX:i)).view(c.g.fromRatio),p=g.h.create(!1),m=g.h.combine(t,o,this._outcomeStatusMask,p,r);return{id:e,title:i,description:n,status:m,progress:o,isUnavailable:a}}get nonEmptyLensId(){return(0,n.pipe)(h.fromNullable([this.getLens(l.R.SpecialId.AllAlerts),this.getLens(l.R.SpecialId.Premium)].find((e=>e.get().count>0))),h.map((e=>e.get().id)))}}function f(e,t,i){return a=>{return new l.R.LensImpl(e,(s=e.id,r=t,e=>(0,n.pipe)(u.P5(l.R.Id.ord)(s,e),h.getOrElse((()=>r))))(a),i);var s,r}}},62346:(e,t,i)=>{"use strict";i.d(t,{o:()=>j});var a,s,n=i(57050),r=i(40327),o=i(95572),l=i(95384),c=i(5817),d=i(51374),p=i(66896),m=i(40018),h=i(4390),u=i(45586),g=i(98403),v=i(59368),f=i(16746),w=i(17594),_=i(79471),b=i(93494),y=i(74364),E=i(76974),k=i(32952),C=i(16118),S=i(77176),A=i(85985),I=i(40151),M=i(24209),x=i(60797),L=i(41398),T=i(24713),F=i(28043),V=i(5114),P=i(8125),R=i(92843),O=i(95195),N=i(83078),D=i(55415),U=i(22232),B=i(38983),H=i(81531);!function(e){e.create=(e,t,i,a)=>(s,n)=>l.sO.Change.getCreateAction({range:s,capiAlertId:e,visualState:n.to.visualState===v.Bd.highlighted?{type:l.sO.Change.VisualState.Type.highlighted,source:t()}:{type:l.sO.Change.VisualState.Type.visible},extensionDisplayType:i,order:a}),e.update=(e,t,i,a)=>(s,n)=>l.sO.Change.getUpdateAction({range:s,capiAlertId:e,visualState:n.to.visualState===v.Bd.highlighted?{type:l.sO.Change.VisualState.Type.highlighted,source:t()}:{type:l.sO.Change.VisualState.Type.visible},extensionDisplayType:i,order:a}),e.remove=e=>t=>l.sO.Change.getRemoveAction({range:t,capiAlertId:e})}(a||(a={}));class j{constructor(e,t,i,c,g,_,b,M,x=E.of(void 0),L=!1){this._alertList=e,this._alertsReader=t,this._positionManager=i,this._alertsService=c,this._ded=g,this._lensState=_,this._alertsFilterService=b,this._getActiveItemWithAlert=M,this._readyObs=x,this._emulateAppliedAlertAnimation=L,this._highlightedAlert=V.none,this._focusedAlert=V.none,this._marksMap=new Map,this._subs=new u.w.Keeper,this.events=new k.xQ,this._alertStateDiff=this._alertList.state.pipe(C.G(),S.U((([e,t])=>h.p.diff(e,t))),A.h((0,P.ff)(R.v.isEmpty))),this._alertsFilter=B.h.create(n.jv),this._filteredAlerts=B.h.create(V.none),this._ready=!1,this._log=H.C8.Logging.getLogger("marks_view_model"),this.getMarkByAlert=e=>(0,r.pipe)(this._marksMap.get(e.alert.id),V.fromNullable,V.chain((t=>t.markByIndex(e.highlightIndex)))),this.getAlertByMark=e=>(0,r.pipe)(this._alertsReader.getRegistered(d.P.fromRangeIdToAlertId(e.id)),V.chain((t=>(0,r.pipe)(y.$A.getHighlightIndex(t,e.range()),O.UI((e=>({alert:w.$.fromModel(t),highlightIndex:e}))),V.fromEither)))),this.ensureAlertHighlightInViewport=(e,t,i)=>(0,r.pipe)(this.getMarkByAlert(e),V.fold((()=>I.E),(e=>this._ded.scrollToMark(e,{animate:i,paddingTop:t})))),this._createMA=e=>{const t=N.MH(e.rawId),{impact:i,cardLayout:{outcome:n}}=e.toRawAlert(),c=o.DD.createOutcomeType(n),d="critical"===i?o.Hg.critical:o.Hg.advanced,m=o.DD.createExtensionType(d,c),h=p.R.getSortOrder(e.lensType),u=new f.v((t=>(0,r.pipe)(this._alertsReader.getById(e.id),V.alt((()=>(t&&this._log.warn("Could not find alert for provided MarkAlert",{alert:e,source:t}),V.some(e)))),V.map(w.$.fromModel),N.MH)),this._alertsService,this._alertsService,(e=>this._ded.changeMarks(e)),a.create(t,(()=>l.sO.Change.VisualState.Source.api),m,h),a.update(t,(()=>s.getAlertSource(e,this._lensState.get(),this._getActiveItemWithAlert)),m,h),a.remove(t),(t=>{t.to.visualState===v.Bd.applied&&(this.events.next({type:y.tn.Type.AppliedAlertAnimationFinished,alert:e}),this._handleRemovedAlerts([e]).forEach((e=>e.apply())))}));return this._marksMap.set(e.id,u),u},this._handleRemovedAlerts=e=>e.map((({id:e})=>{const t=this._marksMap.get(e);return this._marksMap.delete(e),t.scheduleApply(v.Bd.disposed),t})),this._handleAlertUpdate=e=>e.map((e=>m.bZ.isRegistered(e)?(0,r.pipe)(V.fromNullable(this._marksMap.get(e.id)),V.fold((()=>this._alertsFilter.get()(e)?this._createMA(e):null),(e=>(e.scheduleUpdate(),v.Oe.isOrWillBe(v.Bd.success)(e)&&e.scheduleApply(v.Bd.highlighted),e)))):(0,r.pipe)(V.fromNullable(this._marksMap.get(e.id)),V.fold((()=>{}),(t=>(e.allowUpdate&&m.bZ.isCapiDone(e)&&m.bZ.isRated(e)&&v.Oe.isOrWillBe(v.Bd.highlighted)(t)?(t.scheduleUpdate(),t.scheduleApply(v.Bd.success)):(t.scheduleApply(v.Bd.disposed),this._marksMap.delete(t.alert.id)),t)))))).filter((e=>Boolean(e))),this._subs.push(this._readyObs.subscribe((()=>{this._subs.push(this._listenAlertsUpdates(),this._listenRangesUpdates(),this._listenFilterChange(),this._listenFilteredAlerts()),this._ready=!0})))}focusAlertHighlight(e){return this._ready?(0,r.pipe)(this._marksMap.get(e.alert.id),V.fromNullable,V.map((t=>{this._focusedAlert=V.some(e.alert.id),t.scheduleApply(v.Bd.highlighted),t.scheduleForceUpdate(),t.apply()})),O.Yo((()=>new Error("Unknown alert"))),O.UI((()=>({dispose:()=>{V.exists((t=>t===e.alert.id))(this._focusedAlert)&&(this._highlightedAlert=V.none),(0,r.pipe)(this._marksMap.get(e.alert.id),V.fromNullable,V.filter((()=>!(0,r.pipe)(this._highlightedAlert,V.exists((t=>t===e.alert.id))))),V.map((e=>{e.scheduleApply(v.Bd.visible),e.apply()})))}})))):O.t$(new Error("marks view model is not ready yet"))}highlightAlertHighlight(e){return this._ready?(0,r.pipe)(this._marksMap.get(e.id),V.fromNullable,V.map((t=>{this._highlightedAlert=V.some(e.id),t.scheduleApply(v.Bd.highlighted),t.apply()})),O.Yo((()=>new Error("Unknwn alert"))),O.UI((()=>({dispose:()=>{V.exists((t=>t===e.id))(this._highlightedAlert)&&(this._highlightedAlert=V.none),(0,r.pipe)(this._marksMap.get(e.id),V.fromNullable,V.filter((()=>!(0,r.pipe)(this._focusedAlert,V.exists((t=>t===e.id))))),V.map((e=>{e.scheduleApply(v.Bd.visible),e.apply()})))}})))):O.t$(new Error("marks view model is not ready yet"))}moveCursorToHighlight(e,t){return this._ready?(0,r.pipe)(this._marksMap.get(e.alert.id),V.fromNullable,V.chain((t=>t.markByIndex(e.highlightIndex))),V.chain((e=>V.fromEither(e.range()))),V.fold((()=>O.t$(new Error("Cannot find mark for given range"))),(e=>{const{index:i,length:a}=this._ded.getCursor();if(0===a&&(i<e.start||i>e.end)){const i=Math.min(e[t],this._ded.getLastPossibleCursorPosition());return(0,r.pipe)(this._ded.setCursor(i,0),O.vx(O.t$))}return O.F2(void 0)}))):O.t$(new Error("marks view model is not ready yet"))}dispose(){this._subs.dispose()}_listenAlertsUpdates(){const e=e=>({activeAlerts:[],updatedAlerts:[],removedAlerts:[],acceptedAlerts:[],hiddenMarkAlerts:[],...e});return M.T(this._filteredAlerts.pipe(x.cp((({visible:t,hidden:i})=>E.of(e({activeAlerts:D.qo(t),removedAlerts:D.qo(i)}))))),this._alertStateDiff.pipe(L.M(this._alertsFilter),S.U((([t,i])=>(0,r.pipe)(t,R.v.reduce(e({}),((e,t)=>(this._marksMap.has(t.alert.id)&&e.removedAlerts.push(t.alert),e)),((e,t,i)=>(m.bZ.isAccepted(i.alert)?e.acceptedAlerts.push(i.alert):e.updatedAlerts.push(i.alert),e)),((e,t)=>(i(t.alert)&&e.activeAlerts.push(t.alert),e)))))))).pipe(S.U((({activeAlerts:e,removedAlerts:t,updatedAlerts:i,acceptedAlerts:a})=>{let s=[];return s=s.concat(e.filter((0,P.W9)((0,P.ff)(m.bZ.isPremium),(e=>V.isSome(e.rawId)))).map((e=>{const t=this._marksMap.get(e.id);return void 0!==t?(t.scheduleForceUpdate(),t):this._createMA(e)}))),this._emulateAppliedAlertAnimation&&setTimeout((()=>{a.forEach((e=>{this.events.next({type:y.tn.Type.AppliedAlertAnimationFinished,alert:e})}))}),3*(0,c.Xd)(20)),s=s.concat(this._handleRemovedAlerts(t.concat(a).filter((e=>this._marksMap.has(e.id))))),s=s.concat(this._handleAlertUpdate(i)),s}))).subscribe((e=>{if(e.length>0){const[t,...i]=e;t.applyWith(i)}}))}_listenRangesUpdates(){return this._positionManager.rangeChanged.pipe(T.j("changed"),S.U((e=>e.filter((e=>d.P.is(e)&&d.x.isVisible(e)&&this._marksMap.has(e.meta.alertId))))),A.h((e=>e.length>0))).subscribe((e=>{const t=Array.from(e.values()).filter((e=>V.isSome(this._alertsReader.getById(e.meta.alertId)))).reduce(((e,t)=>((0,r.pipe)(this._alertsReader.getRegistered(t.meta.alertId),V.chain((e=>V.fromNullable(this._marksMap.get(e.id)))),V.fold(P.ZT,(t=>{t.scheduleForceUpdate(),e.push(t)}))),e)),[]);if(t.length>0){const[e,...i]=t;e.applyWith(i)}}))}_listenFilterChange(){return this._lensState.pipe(A.h((e=>e.currentLens.id!==p.R.SpecialId.Premium)),F.x(((e,t)=>!(e.currentLens.id!==t.currentLens.id||_.nL.isWithPriorityList(e)&&_.nL.isWithPriorityList(t)&&b.v.WithPriority.isNonPriorityListOpened(e.currentLens)!==b.v.WithPriority.isNonPriorityListOpened(t.currentLens)||t.currentLens.id===p.R.SpecialId.PredictionTakeaways))),F.x(),S.U((e=>this._alertsFilterService.alertVisibleInText(e.currentLens.id,b.v.WithPriority.nonPriorityAlertsVisible(e))))).subscribe(g.wW(this._alertsFilter))}_listenFilteredAlerts(){return this._alertsFilter.pipe(L.M(this._alertList.state),S.U((([e,t])=>(0,r.pipe)(t,h.p.reduce({visible:{},hidden:{}},((t,i)=>(e(i.alert)&&m.bZ.isRegistered(i.alert)?t.visible[i.alert.id]=i.alert:t.hidden[i.alert.id]=i.alert,t))),(e=>V.some(e)))))).subscribe(g.wW(this._filteredAlerts))}}!function(e){e.toSidebarFluidMarkSource=e=>{switch(e){case m.l$.text:case _.h8.forceText:return l.sO.Change.VisualState.Source.text;case m.l$.sidebar:case _.h8.forceSidebar:return l.sO.Change.VisualState.Source.sidebar;case m.l$.api:return l.sO.Change.VisualState.Source.api;default:return(0,U.vE)(e)}},e.getAlertSource=(t,i,a)=>_.nL.hasCards(i)?(0,r.pipe)(a(i.currentLens),V.fold((()=>l.sO.Change.VisualState.Source.api),(a=>a.activeAlert.id===t.id?e.toSidebarFluidMarkSource(i.alertSource):l.sO.Change.VisualState.Source.api))):l.sO.Change.VisualState.Source.api}(s||(s={}))},71962:(e,t,i)=>{"use strict";i.d(t,{o:()=>F});var a=i(57050),s=i(40327),n=i(98403),r=i(18625),o=i(57091),l=i(66310),c=i(76974),d=i(13444),p=i(93508),m=i(48403),h=i(95343),u=i(25970),g=i(5114),v=i(95195),f=i(38983),w=i(81531);class _{constructor(e,t){this._documentModel=e,this._modalOperations=t,this.reportViewModel=g.none,this.state=r.P((()=>n.GQ((()=>this._documentModel.calculateStats())))).pipe(o.a(this._documentModel.checkingState,((e,t)=>(0,s.pipe)(e,g.filter((()=>"idle"===t))))),l.w(g.fold((()=>c.of({type:u.g.State.Type.LOADING}).pipe(d.g(150))),v.g_((e=>(w.C8.Logging.getLogger("editor.toolbar").error("Error on requesting document stats",e),this.onModalClose(),c.of({type:u.g.State.Type.ERROR}))),(e=>f.h.combine(this._documentModel.score,this._documentModel.counters,this._documentModel.documentLength.view("trimmed"),((t,i,a)=>(0,s.pipe)(t,g.fold((()=>({type:u.g.State.Type.SHORT_CONTENT})),(t=>({type:u.g.State.Type.READY,documentIsEmpty:0===a,score:t,counters:i,stats:e})))))))))),p.O({type:u.g.State.Type.EMPTY}),m._(1),h.x()),this.onModalClose=()=>{this._modalOperations.onClose()}}}var b=i(73582),y=i(73353),E=i(81301),k=i(71936),C=i(4680),S=i(54286),A=i(93483),I=i(60779),M=i(22621),x=i(39321),L=i(77176),T=i(22232);class F{constructor(e,t,i,a){this._documentModel=e,this._upgradeViewModel=t,this._isPremiumUser=i,this._mutedCategoriesVM=a}load(e){switch(e.type){case E.dC.SetGoals:return this._loadSetGoals(e.source);case E.dC.Performance:return this._loadPerformance();case E.dC.MutedAlerts:return this._loadMutedAlerts();default:return(0,T.vE)(e)}}_loadSetGoals(e){return Promise.resolve((t=>{const i={demoMode:!1,isRedesign:!1,isFree:!this._isPremiumUser,defaultAudience:"knowledgeable"},n=S._.create(this._documentModel.context.get(),(0,s.pipe)(this._documentModel.defaultContext.get(),g.fold((()=>y.R$.defaultContextFallback),a.yR)),i,!1),r=f.h.combine(n.showSetGoalsLoader,n.localContext,((t,a)=>({blocks:n.blocks,context:a,showOnLoad:t,features:i,source:e}))),o=k.Z.fromSideEffect((e=>{switch(e.kind){case M.R.ActionsKind.open:break;case M.R.ActionsKind.upgrade:this._upgradeViewModel.openUpgradeUrl(b.L.Place.gdocsGoals);break;case M.R.ActionsKind.close:t.onClose(),this._documentModel.updateContext(e.context);break;case M.R.ActionsKind.reset:n.localContext.set(y.R$.unset);break;case M.R.ActionsKind.showOnLoadChanged:n.showSetGoalsLoader.set(e.value);break;default:(0,T.vE)(e)}}),r);return{instance:{type:E.dC.SetGoals,source:e},component:C.UI.mount(M.R.Modal,o)}}))}_loadPerformance(){return Promise.resolve((e=>{const t=new _(this._documentModel,e),i=C.UI.Knot.make(x.q.ModalView,{downloadButton:C.UI.Node.empty}),a=k.Z.fromSideEffect((t=>{switch(t.action.kind){case x.q.ActionsKind.close:e.onClose();break;default:(0,T.vE)(t.action.kind)}}),t.state.pipe(L.U((e=>({root:e})))));return{instance:{type:E.dC.Performance},component:C.UI.mount(i,a)}}))}_loadMutedAlerts(){return Promise.resolve((e=>(0,s.pipe)(this._mutedCategoriesVM,g.fold((()=>{throw new Error("Tried to load Muted Alerts Dialogue, but Muted Alerts Model was absent")}),(t=>{const i=C.UI.mount(A.B,(0,I.g)(t,e));return{instance:{type:E.dC.MutedAlerts},component:i}})))))}}},37290:(e,t,i)=>{"use strict";if(i.d(t,{$:()=>b}),75==i.j)var a=i(57050);if(75==i.j)var s=i(77394);if(75==i.j)var n=i(81301);if(75==i.j)var r=i(40018);if(75==i.j)var o=i(66896);if(75==i.j)var l=i(32952);if(75==i.j)var c=i(45586);if(75==i.j)var d=i(41398);if(75==i.j)var p=i(77176);if(75==i.j)var m=i(85985);if(75==i.j)var h=i(66310);if(75==i.j)var u=i(40151);if(75==i.j)var g=i(79471);if(75==i.j)var v=i(43637);if(75==i.j)var f=i(5114);if(75==i.j)var w=i(22232);if(75==i.j)var _=i(38983);class b{constructor(e,t,i,s,n,h,u,w){this._state=e,this._lensPreviewVM=t,this._sidebarEvents=i,this._modalManager=s,this._ded=n,this._features=h,this._gnar=u,this._defaultLensMode=w,this.isUphooksRedesign=!1,this.popover=_.h.create(f.none),this.events=new l.xQ,this.activeLensId=this._state.view("currentLens","id"),this.documentActions=_.h.create({proofit:v.Bo.proofitDisabled(v.TV.NotAvailable),plagiarism:v.Bo.plagiarismDisabled(v.eh.NotAvailable)}),this.showMuteControl=_.h.create(!1),this._subs=new c.w.Keeper,this._lensSwitch=new l.xQ,this.lensMode=_.h.create(this._defaultLensMode),this.lensTitleType="none"!==this._features.priorityLens.kind?v.Bo.LensTitleType.priority:v.Bo.LensTitleType.default,this.lensChangeEffect={id:"lensChangeEffect",when:a.W8,what:g.nL.Effect.SwitchLens.create(this._lensSwitch.pipe(d.M(this._state.pipe(p.U((e=>e.currentLens.id)))),m.h((([{lensId:e},t])=>e!==t)),p.U((([{lensId:e,focusFirst:t}])=>({lensId:e,alertSource:r.l$.sidebar,options:{order:"lensOrder",toFocus:t?g.nL.Effect.FocusBehavior.focusFirst:g.nL.Effect.FocusBehavior.noFocus}})))))},this._listenNavigationEvent();const b=[o.R.SpecialId.Correctness,o.R.SpecialId.Clarity,o.R.SpecialId.Engagement,o.R.SpecialId.Delivery].reduce(((e,t)=>(e[t]=this._lensPreviewVM.lensPreviews[t],e)),{});this.lensPreviews=_.h.create(b)}dispose(){this._subs.dispose()}_listenNavigationEvent(){this._subs.push(this.events.pipe(h.w((e=>{switch(e.type){case"toggleSidebar":return this._sidebarEvents.next({kind:s.R.Close}),u.E;case"switchToLens":if("none"!==this._features.priorityLens.kind){const t=e.id===o.R.SpecialId.Priority?"priority":"all";this._sidebarEvents.next({kind:s.R.ChangeLens,selectedLens:t}),this._lensSwitch.next({lensId:e.id,focusFirst:e.focusFirst}),this._gnar.gdocsSidebarChangeLensButtonClick(t,this._lensPreviewVM.getLens(o.R.SpecialId.AllAlerts).get().count,this._ded.getTextLength(),this._lensPreviewVM.getLens(o.R.SpecialId.Priority).get().count,"dropdown"===this._features.priorityLens.kind?"dropdown":"priorityToggle")}else this._gnar.gdocsSidebarOpenLensButtonClick(e.id);return u.E;case"setGoals":return this._modalManager.show(n.Iy.setGoals("user"));case"performance":return this._modalManager.show(n.Iy.performance);case"switchToCritical":case"switchToAdvanced":case"mutedAlerts":case"preferences":case"switchToAll":return u.E;default:return(0,w.vE)(e)}}))).subscribe())}}},73582:(e,t,i)=>{"use strict";i.d(t,{L:()=>a,x:()=>v});var a,s=i(40327),n=i(65421),r=i(39354),o=i(66896),l=i(40018),c=i(6782),d=i(4390),p=i(5114),m=i(8125),h=i(95574),u=i(95195),g=i(81531);!function(e){let t;!function(e){e.gdocsSidebarCardList="gdocsSidebarCardList",e.gdocsSidebarSuccessView="gdocsSidebarSuccessView",e.gdocsGoals="gdocsGoals",e.assistantCardList="assistantCardList",e.extensionSettingsAssistant="extensionSettingsAssistant"}(t=e.Place||(e.Place={}))}(a||(a={}));class v{constructor(e,t,i){this._alertsList=e,this._lensPreviewVM=t,this._maxAlertCategories=i,this._log=g.C8.Logging.getLogger("UpgradeViewModel"),this.advancedAlerts=this._lensPreviewVM.getLens(o.R.SpecialId.Premium).view("count").view((e=>e>0?(0,s.pipe)(p.some({count:e,alerts:()=>this._formatLiteAlerts(this.getAdvancedGroupedLiteAlerts())})):p.none)),this._formatLiteAlerts=e=>{const t=e.slice(0,this._maxAlertCategories),i=e.slice(this._maxAlertCategories).map((e=>e.count)).reduce(m.Sm,0);return i>0?[...t,{group:"",category:"",categoryHuman:"more...",count:i}]:t},this.getAdvancedGroupedLiteAlerts=()=>this._getGroupedLiteAlerts(l.bZ.isPremium),this._getAdvancedLiteAlerts=()=>(0,s.pipe)(this._alertsList.state.get(),d.p.reduce([],((e,{alert:t})=>(l.bZ.isRegistered(t)&&e.push(t),e)))).filter(l.bZ.isPremium).map((e=>(0,n.fe)(this._toRawAlertWithPossibleWrongId(e),"sidebar"))),this._toRawAlertWithPossibleWrongId=e=>({...e.toRawAlert(),id:(0,s.pipe)(e.rawId,p.getOrElse((()=>e.id)))})}openUpgradeUrl(e){(0,s.pipe)(h.vM((()=>{(0,r.P4)().openSubscriptionDialog({currentAlerts:this._getAdvancedLiteAlerts(),isAnonymousUser:!1,showPlanComparison:!0,isFromEmail:!1,forceUtmCampaign:e})})),u.fS((e=>this._log.fatal("unexpected error on open upgrade page",e))))}_getGroupedLiteAlerts(e){return c.Q.group((0,s.pipe)(this._alertsList.state.get(),d.p.reduce([],((e,{alert:t})=>(l.bZ.isRegistered(t)&&e.push(t),e)))).filter(e).map((e=>e.toLiteAlert())))}}},86705:(e,t,i)=>{"use strict";i.d(t,{v:()=>n});var a=i(27378),s=i(80895);const n=({browser:e,className:t})=>"safari"!==e?a.createElement(s.C,{title:"BETA",kind:"success",className:t}):null},95888:(e,t,i)=>{"use strict";i.d(t,{J:()=>l});var a=i(27378),s=i(53112);const n=({color:e=s.Z.neutral0})=>a.createElement("svg",{width:"16",height:"13",viewBox:"0 0 16 13",fill:"none",xmlns:"http://www.w3.org/2000/svg"},a.createElement("g",{filter:"url(#filter0_d)"},a.createElement("path",{d:"M3 5L6.5 8.5L13 2",stroke:e,strokeWidth:"2"})),a.createElement("defs",null,a.createElement("filter",{id:"filter0_d",x:"0.292892",y:"0.292847",width:"15.4142",height:"12.6213",filterUnits:"userSpaceOnUse",colorInterpolationFilters:"sRGB"},a.createElement("feFlood",{floodOpacity:"0",result:"BackgroundImageFix"}),a.createElement("feColorMatrix",{in:"SourceAlpha",type:"matrix",values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0"}),a.createElement("feOffset",{dy:"1"}),a.createElement("feGaussianBlur",{stdDeviation:"1"}),a.createElement("feColorMatrix",{type:"matrix",values:"0 0 0 0 0.211765 0 0 0 0 0.34902 0 0 0 0 0.709804 0 0 0 0.5 0"}),a.createElement("feBlend",{mode:"normal",in2:"BackgroundImageFix",result:"effect1_dropShadow"}),a.createElement("feBlend",{mode:"normal",in:"SourceGraphic",in2:"effect1_dropShadow",result:"shape"}))));var r=i(12187),o=i(53358);const l=({onChange:e=(()=>null),labelId:t,className:i,children:s})=>{const[l,c]=a.useState(!1);a.useEffect((()=>{e(l)}),[l]);const d=e=>{e.preventDefault(),e.stopPropagation(),c(!l)};return a.createElement("div",{"data-grammarly-part":"ui-kit-checkbox",className:i},a.createElement("div",{className:o.checkboxContainer},a.createElement("div",Object.assign({},(0,r.Sh)(o.checkbox,l?o.checkboxChecked:null),{role:"checkbox","aria-checked":l,tabIndex:0,"aria-labelledby":t,onKeyDown:e=>{" "===e.key&&d(e)},onClick:d}),l?a.createElement(n,null):null),a.createElement("label",{id:t,onClick:d},s)))}},47422:(e,t,i)=>{"use strict";i.d(t,{z:()=>l});var a=i(27378),s=i(84488),n=i(68370),r=i(51897),o=i.n(r);const l=({placeholder:e,onChange:t,ariaLabel:i,className:r})=>{const[l,c]=a.useState("");return a.useEffect((()=>{t(l)}),[l]),a.createElement(s.G,{"data-grammarly-part":"ui-kit-textbox",className:r,style:{width:"100%",height:"100%"}},a.createElement(n.b,null,o().__css),a.createElement("div",{role:"textbox",className:o().textBox,contentEditable:!0,onInput:e=>c(e.target.innerText),"data-placeholder":e,"aria-placeholder":e,"aria-label":i}))}},81108:(e,t,i)=>{"use strict";i.d(t,{Q:()=>o});var a=i(27378),s=i(90361),n=i(10247);const r=e=>{if(e.reason===n.rS.NO_FREE_TRIALS_LEFT){const t="No email reviews left this month";let i;if(e.meta.quotaResetDate){const t=Intl.DateTimeFormat([],{month:"short",day:"numeric"}).format(new Date(Date.parse(e.meta.quotaResetDate)));i=`You will get ${n.SR} free reviews again next month (${t}). You can also use paid expert writing help in Grammarly's web editor anytime.`}else i=`You will get ${n.SR} free reviews again next month. You can also use paid expert writing help in Grammarly's web editor anytime.`;return{title:t,message:i}}return(e=>{switch(e){case n.rS.NOT_AVAILABLE:return{message:"Our experts are currently working on other text. Please try again later."};case n.rS.NOT_AVAILABLE_QUOTA_ERROR:return{title:"Something went wrong",message:"We couldn't determine how many requests you have left. Please try again later."};case n.rS.NOT_ENOUGH_WORDS:return{message:`Your email must be at least ${n.fy} words.`};case n.rS.TOO_MANY_WORDS:return{message:`Your email must be under ${n.Vw} words.`};case n.rS.CONFLICTING_REQUEST:return{title:"Separate request in progress",message:"You can submit this request once the experts are finished with the one you already submitted."};case n.rS.CHECKING_INITIAL_AVAILABILITY:return{message:"Checking for available experts..."};case n.rS.UNSUPPORTED_LANGUAGE:return{message:"Our writing experts can only help with emails written in English."};default:(0,s.vE)(e)}})(e.reason)},o=({info:e,includeTitle:t})=>{const i=r(e);return a.createElement(a.Fragment,null,t?a.createElement(a.Fragment,null,i.title?a.createElement("b",null,i.title):a.createElement("b",null,"Get expert writing help"),a.createElement("br",null)):null,i.message)};o.defaultProps={includeTitle:!1}},53844:(e,t,i)=>{"use strict";i.d(t,{q:()=>v,d:()=>g});var a=i(27378),s=i(12187),n=i(21420);const r=({options:e,onChange:t=(()=>null),ariaLabel:i,className:r})=>{const o=[],[l,c]=a.useState(null);a.useEffect((()=>{var i;null!==l&&(null===(i=o[l])||void 0===i||i.focus()),t(null!==l?e[l].value:null)}),[l]);const d=null!==l?e[l]:null;return a.createElement("div",{"data-grammarly-part":"ui-kit-radio-group",className:r},a.createElement("div",{className:n.radioGroup,role:"radiogroup","aria-label":i,onKeyDown:t=>{if(" "!==t.key||d){if("ArrowRight"===t.key||"ArrowDown"===t.key){t.preventDefault(),t.stopPropagation();c(((l||0)+1)%e.length)}else if("ArrowLeft"===t.key||"ArrowUp"===t.key){t.preventDefault(),t.stopPropagation();const i=(l||0)-1;c(i<0?e.length-1:i)}}else t.preventDefault(),t.stopPropagation(),c(0)}},e.map(((e,t)=>{const i=(null==d?void 0:d.value)===e.value,r=0===t;return a.createElement("div",Object.assign({key:e.value},(0,s.Sh)(n.radioGroupOption,i?n.radioGroupOptionSelected:null),{role:"radio",tabIndex:i||r&&!d?0:-1,"aria-checked":i,onClick:e=>{e.preventDefault(),e.stopPropagation(),c(t)},ref:e=>o.push(e)}),e.render())}))))};var o,l=i(24606),c=i(47422),d=i(95888),p=i(53112),m=i(5872),h=i(51217),u=i(44544);function g(e){return"score"in e}!function(e){e.bad="bad",e.ok="ok",e.good="good"}(o||(o={}));const v=e=>{const t=[o.bad,o.ok,o.good],[i,n]=a.useState(null),[g,v]=a.useState(""),[f,w]=a.useState(!1),[_,b]=a.useState(!1);let y;return y=_?a.createElement("div",Object.assign({"data-grammarly-part":"surveys-feedback-form-thank-you"},(0,s.Sh)(h.feedbackFormContainer,h.feedbackFormContainerAlignCenter)),a.createElement("div",{className:h.feedbackFormSuccessMessageTextContainer},a.createElement("div",{className:h.feedbackFormSuccessMessageIcon}),a.createElement("div",{className:h.feedbackFormSuccessMessageTitle},"Thank you!"),a.createElement("div",{className:h.feedbackFormSuccessMessageSubtitle},"Your feedback helps us improve.")),a.createElement(l.z,{containerClassName:(0,m.cs)(h.feedbackFormSubmitButton,e.fixSubmitButtonOverflowBottomPadding?h.feedbackFormSubmitButtonFixOverflowBottomPadding:null),kind:"success",type:"submit",onClick:e.onClose,style:{height:"32px"}},"Done")):a.createElement("div",Object.assign({"data-grammarly-part":"surveys-feedback-form-fields"},(0,s.Sh)(h.feedbackFormContainer,"center"===e.align?h.feedbackFormContainerAlignCenter:null)),a.createElement("div",{className:h.feedbackFormFields},e.hideLogo?null:a.createElement("div",{className:h.feedbackFormLogo}),a.createElement("div",{className:h.feedbackFormTitle},e.title||a.createElement("span",null,"How do you like ",a.createElement("br",null)," Grammarly?")),e.withScore?a.createElement(a.Fragment,null,a.createElement(r,{ariaLabel:"Feedback Score",options:t.map((e=>({value:e,render(){let t,i;return e===o.bad?(t=u.feedbackFormOptionIconDisheartening,i="Dissatisfied"):e===o.ok?(t=u.feedbackFormOptionIconNeutral,i="It's Ok"):(t=t=u.feedbackFormOptionIconSmiling,i="Satisfied"),a.createElement("div",{className:u.feedbackFormOption},a.createElement("div",Object.assign({},(0,s.Sh)(u.feedbackFormOptionIcon,t))),a.createElement("div",null,i))}}))),onChange:n,className:h.feedbackFormScore}),a.createElement("div",{className:h.feedbackFormTextBoxTitle},"How can we improve?")):null,a.createElement(c.z,{onChange:v,placeholder:"Tell us what you think",ariaLabel:"Feedback Text",className:h.feedbackFormTextBox}),e.domain?a.createElement(a.Fragment,null,a.createElement("div",{className:h.feedbackFormShareDomainTitle},"Help improve Grammarly by sharing the domain you’re on:"),a.createElement(d.J,{labelId:"feedback-form-share-domain-checkbox",onChange:w,className:h.feedbackFormShareDomainCheckbox},"Include the domain ",a.createElement("b",null,e.domain)," with my feedback")):null),a.createElement(l.z,{containerClassName:(0,m.cs)(h.feedbackFormSubmitButton,e.fixSubmitButtonOverflowBottomPadding?h.feedbackFormSubmitButtonFixOverflowBottomPadding:null),kind:"success",type:"submit",disabled:e.withScore?!i:!g,onClick:()=>{var t,a;e.withScore&&i?(null===(t=e.onSubmit)||void 0===t||t.call(e,{score:i,text:g,domain:f?e.domain:void 0}),b(!0)):!e.withScore&&g&&(null===(a=e.onSubmit)||void 0===a||a.call(e,{text:g,domain:f?e.domain:void 0}),b(!0))},style:{height:"32px",background:(e.withScore?i:g)?void 0:p.Z.neutral40}},"Submit")),a.createElement("div",{style:{height:"100%",...e.style},"data-grammarly-part":"surveys-feedback-form"},y)};v.defaultProps={hideLogo:!1,align:"center",fixSubmitButtonOverflowBottomPadding:!1}},24372:(e,t,i)=>{"use strict";i.d(t,{J:()=>s});var a=i(64408);const s=new Proxy({},{get:(e,t)=>(...e)=>a.emitBackground("gnar-track",{method:t,props:e})})},25682:(e,t,i)=>{var a=i(93476)((function(e){return e[1]}));a.push([e.id,"._380Y1-textBox{font-family:Inter,sans-serif;font-style:normal;font-weight:normal;color:#0e101a;font-size:14px;line-height:21px;font-feature-settings:'ss03' on;background:#f9faff;border:1px solid #e7e9f5;box-sizing:border-box;border-radius:4px;padding:10px 8px;overflow-y:auto;cursor:text;width:100%;height:100%;}._380Y1-textBox:empty:before{font-feature-settings:'ss03' on;font-family:Inter,sans-serif;font-style:normal;font-weight:normal;color:#6d758d;font-size:14px;line-height:21px;content:attr(data-placeholder)}",""]),a.locals={textBox:"_380Y1-textBox"},e.exports=a},41794:e=>{e.exports={container:"rWxB3",contentContainer:"_1MFbY",thankYouContentContainer:"_3tH8C",main:"_2DNNh",thankYouMain:"_1wXyS",question:"UhER3",helperText:"_3te2s",optionsContainer:"_2rd2k",checkboxOption:"_8Cmo7",radioOption:"_3lgCn",thankYou:"_3DVR-",thankYouSubtext:"_2tIVN",buttonsContainer:"bOyYX"}},33751:e=>{e.exports={cardList:"_1Eape",cardListFooterDynamic:"Inkbe",cardListFooterStatic:"_7OpWh",cardListFooterAnimate:"_29PbU",upgradeHookWrapper:"_9GpAY",footer_button:"_1Vj8X",assistant:"AnaVG",feedback_button:"ncuAb",personalization_button:"_3lVFJ",dragging:"_1XWvb",mainView:"_38aRY"}},78846:e=>{e.exports={actions_hovered:"Xf2Pk",header:"_3p6xo",draggableWrapper:"_2_Oau",draggable:"_1m9e2",headerActions:"_2asjJ",headerActionBtn:"_2u6D9",headerActionBtnProofitIcon:"_1GEsJ",logoscore_fadein:"xzxut",fadein:"_30rWn",logoscore_fadeout:"_1DBSi",fadeout:"_24pVK",logo_score:"_6nCpo",spin:"_2gcAi"}},19217:e=>{e.exports={insight:"_3o8h_",insight__inline_icon:"svSbC",insight__inline_text:"_3Uft0"}},75039:e=>{e.exports={panel:"_1_EJL",score_container:"_2K_dc",info_icon:"wbvN6",lens_switch:"_3zrPc"}},98029:e=>{e.exports={predictions:"_3feHG",predictions__header:"_35Gcg",predictions__card:"_2xc9F",counterContainer:"_2co0s",predictions__zero_text:"_25oPK",predictions__off_brand:"_1sCHK"}},40145:e=>{e.exports={relatedSuggestionsTitle:"_3lmjh"}},55364:e=>{e.exports={viewOverlay:"_3iGYO",content:"_2sw8A",footer:"_3kpn-",viewOverlayGoBack:"_2Z1Xu",defaultViewOverlayPanel:"jqEio",gradientViewOverlayPanel:"_3Qgxa",proofitViewOverlayPanel:"_9lDqb",defaultViewOverlayHeader:"_1GTGF",defaultViewOverlayContent:"nXzeg",gradientViewOverlayContent:"_2hao0",proofitViewOverlayContent:"_2XeMU",logo:"xQSpk",proofitViewOverlayHeader:"_3dGrl",proofitViewOverlayHeaderBetaBadge:"_2wTGA"}},91197:e=>{e.exports={checklistAnimationWrapper:"SwRGm",animateChecklistHeightChanges:"_3ajnS",checklistCollapsed:"_2misS",checklistHeader:"_3km-f",checklistTitle:"_2r9Yo",checklistFirstItemPreview:"_29yzo",checklistExpanded:"_1M7Xt",checklistGroupHeader:"_3Tvt-",checklistItem:"ETzli",itemBullet:"_1KBAD",itemText:"iXUS0",checked:"JbfTD",fadeIn:"_3vdyB",fadeInFast:"_1aVF8",fadeOut:"VeNTM",fadeOutFast:"eO5gv",fadeInContentChange:"_23vih",fadeOutContentChange:"_3wGOA",expand:"EUb4D",collapsedToExpanded:"bcdnr",collapse:"_3xSXQ",expandedToCollapsed:"vcwfv"}},90295:e=>{e.exports={viewOverlay:"_3-ynL",content:"_272rY",footer:"_23Hk5",viewOverlayGoBack:"_20r1E",defaultViewOverlayPanel:"fOEpx",gradientViewOverlayPanel:"VmOOi",onboardingPanel:"_2MGhh",defaultViewOverlayHeader:"civcO",defaultViewOverlayContent:"_2bKbb",gradientViewOverlayContent:"_3GMhV",logo:"_3HWWb",onboardingPanelContent:"_2OSAG",onboardingBanner:"_31lP9",onboardingBannerImage:"_3GEtW",onboardingHeader:"_21vy0",onboardingBannerMessage:"_13zKm",onboardingContent:"_2_FA9",heatmap:"Qcuqf",gettingStartedButton:"_1Qgvx"}},82318:e=>{e.exports={viewOverlay:"_24v8y",content:"_1GUCQ",footer:"_VXnz",viewOverlayGoBack:"_2vYal",defaultViewOverlayPanel:"_181-n",gradientViewOverlayPanel:"_30LCU",defaultViewOverlayHeader:"_2YCIK",defaultViewOverlayContent:"_1T1GW",gradientViewOverlayContent:"_2hMw0",logo:"_1wpBP",cardList:"_2M4t-",headerGroup:"Qwt6V",questionMarkButton:"_2U3v1",questionMarkIcon:"_3hiB8",summaryWrapper:"_3f-rw",message:"_2UO09",inlineButton:"_1-m6b",relatedSuggestionsTitle:"_3oKNQ"}},91574:e=>{e.exports={settingsDoneButton:"_3hYyu"}},35327:e=>{e.exports={summary_heading:"_28Zxw",summary_wrapper:"_3qF24",summary_fadein:"_1OTrB",fadein:"_1ETLE",summary_fadeout:"GJSzn",fadeout:"YHKQy"}},73008:e=>{e.exports={viewOverlay:"_8FYR8",content:"D8x8A",footer:"_1oEdF",viewOverlayGoBack:"_2IRn0",defaultViewOverlayPanel:"_3wpsL",gradientViewOverlayPanel:"_2zadI",defaultViewOverlayHeader:"_3Y5Ie",defaultViewOverlayContent:"_1FPwk",gradientViewOverlayContent:"_2WqSK",logo:"oiRsy"}},62513:e=>{e.exports={compactSuccessLens:"_1G56p",compactSuccessLensContainer:"_1cOu3"}},47476:e=>{e.exports={headerOrFooterWrapper:"_1snlI",spacingRegular:"_1QmQP",spacingSmall:"vv_Ep"}},74880:e=>{e.exports={cardList:"_2bCPN"}},30509:e=>{e.exports={premiumLens:"_2XK23"}},879:e=>{e.exports={successLens:"_1mbLA"}},57731:e=>{e.exports={footer:"_3W9PJ",plagiarismButton:"_1nouH",counterWrapper:"GHbf1",counter:"_2h93m",counterCheckmarkIcon:"_2-1xd"}},21831:e=>{e.exports={defaultHeader:"ghh6_",priorityLensHeader:"_2xf6x",head:"_1uTIv",headerGroup:"_1oce-",logoIcon:"_3Ey-O",logoText:"_1hTkC",headerButton:"_2HD8-",setGoalsButton:"_1EomQ",divider:"_2ku5Y",lensNavigation:"_1d7rU",disabledLensNavigation:"NFW3f",prioritySwitchWrapper:"EIY83",prioritySwitchFlatWrapper:"_3ujn6"}},79850:e=>{e.exports={wrapper:"_2PLre"}},75259:e=>{e.exports={container:"_2D4XC",baseGrid:"_2pCwn",bottomLeft:"_3_LGs",bottomRight:"_2tHhO",top:"_2Qg0A",notificationWrapper:"_3waR1"}},67129:e=>{e.exports={sidebarContainer:"_1_f6i"}},67489:e=>{e.exports={intentDetectionCardContent:"n8ZBv",intentDetectionCardContentExpanded:"_1zJsg",intentDetectionCardContentAccepted:"_2Nm5X",intentDetectionCardEmojiAndTitle:"W04V0",intentDetectionCardEmoji:"_2E35l",intentDetectionCardBetaBadgeAndCloseButton:"bRRgr",intentDetectionCardBetaBadge:"u4Umu",intentDetectionCardCloseButton:"_1kFTv",intentDetectionCardVoteAndBetaBadge:"Szcks",intentDetectionCardExpandedInfo:"_1iUYT"}},53358:e=>{e.exports={checkboxContainer:"_30OQ2",checkbox:"_1eqmB",checkboxChecked:"_105R3"}},21420:e=>{e.exports={radioGroup:"_3jZFB",radioGroupOption:"_1Boe7",radioGroupOptionSelected:"_37tnK"}},59e3:e=>{e.exports={proofitRequestFormBtnLoadingSpinner:"_1dhPr",spin:"_34iE-"}},17487:e=>{e.exports={proofitRequestForm:"_16jRB",proofitRequestFormImg:"L3ge0",proofitRequestFormTitle:"_2AohE",proofitRequestFormDescription:"_1-l2N",proofitRequestFormCostAndTime:"_1fthW",proofitRequestFormTime:"XwGo8",proofitRequestFormCostAndTimeTitle:"kTnKg",proofitRequestFormCostAndTimeSubtitle:"_12FlO",proofitRequestFormRequestBtn:"_3Iaok",proofitRequestFormUnavailableMsg:"_1hKiE",proofitRequestFormFreeTrialFootnote:"Ir66w",proofitRequestFormPrivacyInfoTitle:"_2YkLm",proofitRequestFormPrivacyInfoDescription:"_23aSV",proofitRequestFormPrivacyInfoDescriptionItem:"_31giz",proofitRequestFormPrivacyInfoDescriptionItemBulletPoint:"_3vURB"}},8400:e=>{e.exports={proofitReviewForm:"_1_T1p",proofitReviewFormImg:"_1JRxr",proofitReviewFormTitle:"_1VtIM",proofitReviewFormDescription:"gQQZe"}},57398:e=>{e.exports={scoreRing:"_1V95O",loading:"_3_fuY",rotation:"_3cevg",scoreText:"_3MN4B"}},51217:e=>{e.exports={feedbackFormContainer:"_1M-GI",feedbackFormContainerAlignCenter:"_3QNrK",feedbackFormFields:"Jg_OY",feedbackFormTitle:"nPjzw",feedbackFormTextBoxTitle:"_2yUbL",feedbackFormLogo:"_2C-d7",feedbackFormScore:"_3AmBq",feedbackFormTextBox:"FO2oU",feedbackFormShareDomainTitle:"_2UXTO",feedbackFormShareDomainCheckbox:"_3mSXM",feedbackFormSubmitButton:"_32xYR",feedbackFormSubmitButtonFixOverflowBottomPadding:"IJDSA",feedbackFormSuccessMessageTextContainer:"_2JO6Z",feedbackFormSuccessMessageIcon:"oVxds",feedbackFormSuccessMessageTitle:"_1MdvM",feedbackFormSuccessMessageSubtitle:"_1EKkw",spin:"_2ycFE"}},44544:e=>{e.exports={feedbackFormOption:"_9K_Q8",feedbackFormOptionIcon:"_259oL",feedbackFormOptionIconDisheartening:"_3NJTM",feedbackFormOptionIconNeutral:"i-5N8",feedbackFormOptionIconSmiling:"_1Dxi9",spin:"_2elyX"}},71527:e=>{e.exports={selected:"_3Ibej",label:"EKNV1",option:"ygVjN"}},66402:e=>{e.exports={american:"pyFmV",australian:"_2WGo3",british:"_1nkJZ",canadian:"_35Lt7"}},68089:e=>{e.exports={hover_blocker:"_1b9OS"}},56542:e=>{e.exports={settingsContent:"_2LPPC",heading:"uyO-m",allSettings:"_3yj-F",separator:"_2LaDH",settingsLink:"_1DiWR"}},1005:e=>{e.exports={heading:"LLSOT"}},26485:e=>{e.exports={select_checkbox:"_3jXk9",beta:"_2D7H7",new:"_3Lqg-",checkbox:"_2nj-e",checkbox_check:"_28S0f",on:"UigB5",off:"_30ryz",checkbox_check_round:"_1PwEM",checkbox_control_wrapper:"_1KIp6",grayOut:"ZleQc",on_off:"_3mcZ6",disabled:"_1Sp_7",setting_item:"_3JLH2"}},6304:e=>{e.exports={line:"_2vgUt",disabled:"_3kA-F",dialectPicker:"_2v6OJ"}},47740:e=>{e.exports={container:"_1eoMt",contant:"_255K3",title:"_3hI6a",spacer:"_2uzpC"}},17324:e=>{e.exports={windows:"_2wKpF",setting_item:"_6eFop",fixing:"_3sQF9",thin_text:"_2m369",footer:"AIrzw",gr_popup_settings:"_18flg",footer_btn:"_16bxQ",short_border:"FqAkb",top:"_2N9kH",show_news:"_3gR-M",news:"_1cBf5",news_content:"_3szOJ",close_news:"_8vCda",upgraded:"_1D3x1",content:"_36NTm",since:"dfV8r",business:"Nb2Rp",edu:"_3Q9EY",my_grammarly:"_1NXBN",new_document:"bpEGW",unsupported_site:"iBAYN",unsupported_item:"_13zLn",unsupported_title:"_3rfYX",domain:"_1tlAE",domain_in_details:"_2z4_y",unsupported_temporary:"Xw4Jp",unsupported_permanently:"_27hK2",unsupported_grammarly:"_2xTYa",diamond:"p3X6p",userPanel:"_3cZ8t",email:"bBX3_",link:"_3ko8g",blue:"b4yKe",edc_stripe:"_1wkrp",line:"_2_8JS",not_supported:"kU9B_",site_switcher:"_2KZQq",upgrade:"_1zI1G",def_switcher:"_29_cp",on:"_2JO5i",off:"_3f4Zs",favicon:"sjSDn",hotkeys:"DWDpl",shortcut_title:"rI_db",shortcut:"ynWKZ",summary:"_1cNov",upgrade_title:"_3aOe6",settingsContent:"_2BkNA"}},23345:e=>{e.exports={line:"NMkwQ",content:"lWYTI",upgrade:"_2GRJe"}}}]);