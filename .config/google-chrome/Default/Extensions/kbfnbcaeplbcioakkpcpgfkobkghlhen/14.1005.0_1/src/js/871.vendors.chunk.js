/*! For license information please see 871.vendors.chunk.js.LICENSE.txt */
(window.webpackChunk=window.webpackChunk||[]).push([[871],{12738:(e,t,r)=>{"use strict";var n;r.d(t,{$:()=>n}),function(e){!function(e){e.echo="echo",e.silent="silent"}(e.Mode||(e.Mode={}))}(n||(n={}))},59443:(e,t,r)=>{"use strict";r.d(t,{Y1:()=>n,uq:()=>l});var n,i,a,s,o,l,c,u,d=r(73975),p=r(22232),m=r(8125),h=r(51996);!function(e){e.nonEmpty=function(e){return e.length>0},e.isEmpty=function(e){return 0===e.length},e.toTextRange=function(e){return h.SV.create(e.index,e.index+e.length)},e.eq=(0,d.f7)((function(e,t){return e.index===t.index&&e.length===t.length})),e.empty={index:0,length:0}}(n||(n={})),function(e){e.DenaliOtherDocSession="denaliOtherDocSession",e.DenaliSameDocSession="denaliSameDocSession",e.MSOutlook="outlook",e.MSWord="word",e.MSWordOnline="wordOnline",e.MSExcel="excel",e.MSOffice="msoffice",e.ProbablyMSOutlookOnline="probablyMSOutlookOnline",e.GDocs="gdocs",e.GSheets="gsheets",e.ProbablyGMail="probablyGmail",e.CocoaHTMLWriter="cocoaHTMLWriter",e.DropboxPaper="dropbox_paper",e.PlainText="plainText",e.Unknown="unknown",e.Synthetic="synthetic"}(i||(i={})),function(e){e.empty={top:0,bottom:0}}(a||(a={})),function(e){!function(e){e.top="top",e.middle="middle",e.bottom="bottom"}(e.Y||(e.Y={})),function(e){e.left="left",e.middle="middle",e.right="right"}(e.X||(e.X={})),function(t){t.toViewport=function(t){return function(r){switch(r){case e.X.left:return t.left;case e.X.middle:return t.left+t.width/2;case e.X.right:return t.right;default:return(0,p.vE)(r)}}}}(e.X||(e.X={})),function(t){t.toViewport=function(t){return function(r){switch(r){case e.Y.top:return t.top;case e.Y.middle:return t.top+t.height/2;case e.Y.bottom:return t.bottom;default:return(0,p.vE)(r)}}}}(e.Y||(e.Y={}))}(s||(s={})),function(e){var t;!function(e){e.textMaybeWithFormatting="text",e.onlyFormatting="formatting"}(t=e.Type||(e.Type={})),e.isTextMaybeWithFormatting=function(e){return e.type===t.textMaybeWithFormatting},e.isOnlyFormatting=function(e){return e.type===t.onlyFormatting}}(o||(o={})),function(e){e.none="none",e.fast="fast",e.initial="initial",e.fake="fake"}(l||(l={})),function(e){var t;!function(e){e.bold="bold",e.italic="italic",e.underline="underline",e.strike="strike",e.header1="header1",e.header2="header2",e.bulletList="bulletList",e.dashedList="dashedList",e.orderedList="orderedList",e.link="link"}(t=e.Type||(e.Type={})),e.is=function(e){return(0,m.CI)(t,e)},function(e){e.is=function(e){return void 0!==e[t.link]}}(e.LinkPayload||(e.LinkPayload={}))}(c||(c={})),function(e){e.undo="undo",e.redo="redo",e.cut="cut",e.copy="copy",e.paste="paste",e.selectAll="selectAll"}(u||(u={}))},41046:(e,t,r)=>{"use strict";r.d(t,{u:()=>n});var n,i=r(27378),a=r(40327),s=r(5114),o=r(83078),l=r(98403),c=r(19751),u=r(85255),d=r(2844),p=r(85089),m=r(2834),h=r(9223);!function(e){e.Manager=({children:t,remSize:r})=>{const n=l.Dx(r).pipe(c.d({refCount:!0,bufferSize:1}));return u.P.useSingleton("RemSize.Manager"),u.P.useSubscriptionTo(n),i.createElement(e.Context.Provider,{value:n},t)},e.DefaultManager=({children:t})=>(u.P.useSingleton("RemSize.DefaultManager"),i.createElement(e.Manager,{remSize:e.withRemSizeEffect(e.defaultSizeObserver)},t)),e.defaultSizeObserver=d.aj(p.Lw("(max-width: 1359px)"),p.Lw("(min-width: 1600px)"),((e,t)=>e?14:t?18:16)),e.withRemSizeEffect=(t,r=e.defaultFontSizeSetter)=>t.pipe(m.b((e=>r(s.some(e)))),h.x(r.bind(null,s.none)),c.d({refCount:!0,bufferSize:1})),e.defaultFontSizeSetter=t=>{e.setRootCssVar(document.documentElement,t),e.setRootFontSize(t)},e.Context=i.createContext(e.defaultSizeObserver),e.setRootCssVar=(e,t)=>{e.style.setProperty("--rem",(0,a.pipe)(t,s.map(String),o.QP))},e.setRootFontSize=e=>{document.documentElement.style.fontSize=(0,a.pipe)(e,s.map((e=>e+"px")),o.QP)}}(n||(n={}))},30763:(e,t,r)=>{"use strict";r.d(t,{m:()=>d});var n,i=r(27378),a=r(88056),s=r(18208),o=r(19429);!function(e){e.ClarityAICard="clarityAiCard",e.CardMute="cardMute",e.MuteQuotedAdvice="muteQuotedAdvice",e.SeenPremiumPreviewUnderlines="seenPremiumPreviewUnderlines",e.BulkAccept="bulkAccept",e.PassiveVoiceCard="passiveVoiceCard"}(n||(n={}));var l=r(26653);const c=o.VF((e=>({hideAssistant:"Hide Assistant",textRemoved:`If you didnâ€™t mean to delete that text, press ${e.commandKeyLabel("Z")} to undo.`,hotkeyLabelR:e.commandKeyLabel("R"),hotkeyLabelC:e.commandKeyLabel("C"),tour:{welcomeNewUserTitle:"Ready to write something brilliant?",welcomeNewUserContent:"The Grammarly Editor helps you turn your\nideas into clear, compelling writing.",welcomeOldUserTitle:"Welcome to the new Grammarly Editor",welcomeOldUserContent:"All the features you love, plus a few new ones, wrapped up in a fresh new look.",startTour:"Start a quick tour",skipTour:"Skip the tour",fastApplyHeader:"Editing made easy",fastApplyDescription:"Get detailed feedback on your\nwriting and apply suggestions\nwith just one click.",assistantHeader:"Become a better writer",assistantDescription:"See your feedback organized into categories that help you identify where your writing is strong and where you can make it stronger.",checkTypesHeader:"Go beyond grammar",checkTypesDescription:"Make your writing clear, compelling, and concise with suggestions customized to your writing goals.",goalsHeader:"Set your goals",goalsDescription:"Adjust Grammarlyâ€™s feedback based on your objectives, your target audience, your writing style, and more.",finalTitle:"Enjoy\nthe Grammarly Editor",finalContent:"Youâ€™re ready to start writing! You can also copy and paste or upload some existing text to the Grammarly Editor.",startWriting:"Start writing",notReady:e=>i.createElement("span",null,"Not ready? You can return to Grammarly Classic anytime via the ",e," icon")},dunningNotification:{title:e=>`Donâ€™t lose your ${e?"Grammarly Business":"Premium"} features!`,description:e=>`Please update your billing information to avoid losing access to Grammarly ${e?"Business":"Premium"}.`,cta:"Update payment information",secondaryCta:"Later"},confirmUpgradeModal:{title:"Done! Enjoy Premium.",content:"You have our most advanced features and suggestions.",cta:"Continue writing",secondaryCta:"Learn about Premium",close:"Close"},survey:{oldUser:{title:"Share a feedback",content:"Hi! I'm Igor, a product designer at Grammarly.\nPlease, help me find out how the last update of\nthe interface affected your editing experience.",takeSurvey:"Take a survey",remindLater:"Remind me later"},newUser:{title:"Share your feedback",content:"Hi! Iâ€™m Igor, a product designer at Grammarly.\nPlease, let me know what you think of Grammarly and how we can improve.",takeSurvey:"Take a survey",remindLater:"Remind me later"},satisfaction:{veryUnsatisfied:"Very dissatisfied",unsatisfied:"Somewhat dissatisfied",neutral:"Neither satisfied nor dissatisfied",satisfied:"Somewhat satisfied",verySatisfied:"Very satisfied"},shareFeedback:"Share feedback",tellUs:i.createElement(i.Fragment,null,"Would you take a moment to tell us"," ",i.createElement("b",null,"how satisfied or dissatisfied you are with the Grammarly Editor?")),thankYou:"Thank you!",more:"We take your responses very seriously. Please, tell us a bit more:",whatsBad:"What do you find frustrating or annoying?",whatsGood:"What do you find most helpful?",proofitPromo:{title:"Thorough Human Proofreading",content:"If you need extra confidence that your text is mistake-free, send it to our team of experienced proofreaders.",actions:{view:"Get Started",close:"Close"}},docx:{didYouKnow:"Did you know?",title:"You can use Grammarly in Microsoft Word!",content:"Get Grammarlyâ€™s suggestions while you write\nin Word or Outlook with our free add-in.",download:"Download Grammarly for MS Office",remindLater:"Remind me later"}},performance:{title:"Performance",scoreUnder100:e=>`Text score: ${e} out of 100. This score represents the quality of writing in this document. You can increase it by addressing Grammarly's suggestions.`,score100:"Great job! Your text scores 100 out of 100. This score represents the quality of writing in this document.",notEnoughTextToCalculateStats:"Write away! Grammarly needs at least 30 words to calculate document statistics.",wordCount:"Word count",characters:"Characters",words:"Words",sentence:"Sentence",sentences:"Sentences",readingTime:"Reading time",speakingTime:"Speaking time",readability:"Readability",readabilityScore:"Readability score",vocabulary:"Vocabulary",sectionTitleDescription:"Metrics compared to other Grammarly users",uniqueWords:"Measures vocabulary diversity by calculating\nthe number of unique words.",rareWords:"Measures depth of vocabulary by identifying words that are\nnot among the 5,000 most common English words.",readabilityDescription:"In the Flesch reading-ease test, higher scores\nindicate material that is easier to read.",uniqueWordsTitle:"Unique words",rareWordsTitle:"Rare words",wordLengthTitle:"Word length",sentenceLengthTitle:"Sentence length",notEnoughTextToGenerateReport:"We need at least 30 words to calculate document statistics and generate your report.",belowAverage:"Below average",average:"Average",aboveAverage:"Above average",report:{plagiarismDescription:(e,t)=>`${e}% of your text matches ${t} sources on the web\nor in archives of academic publications`,downloadPdfReport:"Download PDF report",preparingPdfReport:"Preparing PDF report...",readingEase:"reading ease",readingEaseDescription:"Rates the text by the number of years of\neducation needed to understand it",readingEaseMeasure:"grade level",uniqueWordsDescription:"Measures vocabulary diversity by calculating\nthe percentage of words used only once in your\ndocument",wordLengthDescription:"Measures average word length",wordLengthMeasure:"characters per word",sentenceLengthDescription:"Measures average sentence length",sentenceLengthMeasure:"words per sentence"},button:{score:"Overall score",score100:"Great job!",statuses:{calculating:"Calculating...",unavailable:"Text is too short",available:"See performance"}}},sidebar:{content:{premiumIssues:{advancedAlerts:"Advanced issues",foundTitleSingular:{description1:"There is",description2:"advanced issue available only for Premium users."},foundTitlePlural:{description1:"There are",description2:"advanced issues available only for Premium users."}}},openLabel:"start assistant",fixErrorsLabel:"Correct with Assistant",checkingLabel:"Checkingâ€¦",advancedAlerts:"Advanced suggestions",criticalIssue:e=>s._6(e,"Critical issue","Critical issues"),critical:e=>s._6(e,"Critical","Critical"),advanced:e=>s._6(e,"Advanced","Advanced"),advancedIssue:e=>s._6(e,"Advanced issue","Advanced\nissues"),premium:e=>s._6(e,"Premium","Premium"),free:e=>s._6(e,"Suggestion","Suggestions"),premiumAlertsTitle:"Premium\nsuggestions",allAlerts:"All suggestions",backToAllAlerts:"Back to all suggestions ",seeAlerts:e=>`${e} more ${s._6(e,"suggestion","suggestions")}`,sendToProofreaders:i.createElement(i.Fragment,null,"Get Expert",i.createElement("br",null),"Writing Help")},successLens:{goPremium:"Go Premium",paidView:{title:"No critical issues"},emptyText:{title:"Nothing to check yet",firstLine:"Start writing or upload a document\nto see Grammarlyâ€™s feedback."},smallText:{title:"No issues found",firstLine:"Grammarly ran hundreds of checks\non your text and found no writing issues.",secondLine:"Check back in when youâ€™re ready to write some more."},largeText:{title:"No issues found",firstLine:"Grammarly ran hundreds of checks\non your text and found no writing issues."},mutedSuggestions:e=>1===e?`${e} suggestion has been turned off.`:`${e} suggestions have been turned off.`,fixedText:{titles:["You made that look easy!","Thatâ€™s quite an improvement!","Nothing can stop you now!","You must have been practicing!","Looking good!","Give yourself a pat on the back!","Great job!","Everythingâ€™s clear and polished.","To err is human; to edit, divine."]},fixedTextDemoPremium:{title:"Great job!",firstLine:"Youâ€™ve got the hang of it now.",secondLine:"Time to write your own masterpiece!"},priorityFirstCheck:{title:"Great job!",firstLine:"No relevant suggestions."}},uploadDropZone:"Drag a text file here to upload",uploadDropZoneTypes:"Microsoft Word (.doc, .docx), OpenOffice (.odt), TXT and RTF are welcome",rtfCompatibilityModeNotificationTitle:"Your documentâ€™s formatting will be restored upon download.",notificationUploadFileText:"Upload a file in one of the following formats",denaliDocumentUploadNotification:{title:"The document was uploaded successfully",text:"Donâ€™t worry! The previous document has been saved to",link:"My documents"},goals:{title:"Set goals",header:"Get tailored writing suggestions based on your goals and audience.",sections:{audience:{general:e=>i.createElement(i.Fragment,null,i.createElement("b",null,"General",e?" (default)":"",":")," Easy for anyone to read with minimal effort."),knowledgeable:e=>i.createElement(i.Fragment,null,i.createElement("b",null,"Knowledgeable",e?" (default)":"",":")," Requires focus to read and understand."),expert:e=>i.createElement(i.Fragment,null,i.createElement("b",null,"Expert",e?" (default)":"",":")," May require rereading to understand.")},formality:{formal:i.createElement(i.Fragment,null,i.createElement("b",null,"Formal:")," Restricts slang and colloquialisms."),informal:i.createElement(i.Fragment,null,i.createElement("b",null,"Informal:")," Allows slang and other more casual usages."),neutral:i.createElement(i.Fragment,null,i.createElement("b",null,"Neutral (default):")," Restricts slang but allows standard casual expressions.")},domain:{free:"Get customized suggestions for business writing, academic assignments, and more.",academic:i.createElement(i.Fragment,null,i.createElement("b",null,"Academic:")," Strictly applies all rules and formal writing conventions."),business:i.createElement(i.Fragment,null,i.createElement("b",null,"Business:")," Applies almost all rules but allows some informal expressions."),general:i.createElement(i.Fragment,null,i.createElement("b",null,"General (default):")," Applies most rules and conventions with medium strictness."),mail:i.createElement(i.Fragment,null,i.createElement("b",null,"Email: ")," Applies almost all rules, plus email writing conventions."),casual:i.createElement(i.Fragment,null,i.createElement("b",null,"Casual:")," Applies most rules but allows stylistic flexibility."),creative:i.createElement(i.Fragment,null,i.createElement("b",null,"Creative:")," Allows some intentional bending of rules and conventions.")},tone:{experimental:i.createElement(i.Fragment,null,i.createElement("b",null,"Experimental.")," How do you want to sound? This helps us build new suggestions and won't affect your feedback today."),options:{neutral:"ðŸ˜ Neutral",confident:"ðŸ¤ Confident",joyful:"ðŸ™‚ Joyful",optimistic:"âœŒï¸â€ŒOptimistic",friendly:"ðŸ¤— Friendly",urgent:"â° Urgent",analytical:"ðŸ“Š Analytical",respectful:"ðŸ™Œ Respectful"}},intent:{experimental:i.createElement(i.Fragment,null,i.createElement("b",null,"Experimental.")," What are you trying to do? This helps us build new suggestions and won't affect your feedback today."),options:{inform:"Inform",describe:"Describe",convince:"Convince",tellStory:"Tell a Story"}}},footer:{showModalOnStart:i.createElement(i.Fragment,null,"Show ",i.createElement("b",null,"Set Goals")," when I start a new document"),done:"Done",reset:"Reset to defaults"},button:{title:"Goals",subtitle:(e,t,r)=>0===e?"Adjust goals":`${Math.max(e,r)} of ${t} set`}},plagiarism:{webReferenceDescription:"Click to copy reference",publicationReferenceDescription:e=>i.createElement(i.Fragment,null,"Click to copy reference (",e,")"),lensDescription:(e,t,r,n)=>i.createElement("span",null,i.createElement("em",null,e,"%")," of your text matches"," ",i.createElement("em",null,t," ",s._6(t,"fragment","fragments"))," ","from"," ",i.createElement("em",null,r," ",s._6(r,"source","sources"))," ","on the web or in academic databases. Cite them in ",i.createElement(n,{type:"MLA"}),","," ",i.createElement(n,{type:"APA"}),", or ",i.createElement(n,{type:"Chicago"})," format, or in another style you prefer."),percentileDescription:e=>i.createElement(i.Fragment,null,e,"Â of your text matches this source:"),cardDescription:e=>i.createElement("span",null,"Regardless of what subject you're writing for, make a reference using"," ",i.createElement(e,{type:"MLA"}),", ",i.createElement(e,{type:"APA"}),", or"," ",i.createElement(e,{type:"Chicago"})," format, or another style you prefer."),helpIconDescription:(e,t,r)=>`${e}% of your text ${s._6(l.g.prism.reverseGet(e),"matches","match")}  ${t} ${s._6(t,"fragment","fragments")} from\n${r} ${s._6(r,"source","sources")} on the web or in academic databases.`,loadingDescription:"Grammarly compares billions of web pages to your document and alerts you to passages that may need citations.",title:"Plagiarism",description:"Finds unoriginal text by checking against academic databases and over 16 billion web pages.",originalText:i.createElement("span",null,"Looks like your text is 100% original. ",i.createElement("br",null),"We found no matching text in our databases or on the Internet.")},documentActions:{plagiarism:{tooltip:{available:"Plagiarism Check",emptyDocument:"Add text first to check for plagiarism"}},proofit:{tooltip:{available:"Human Proofreading",emptyDocument:"Add text first to get expert writing help"}}},documentPerformanceRankText:e=>i.createElement("span",null,"Great job! Your text is expected to ",i.createElement("br",null),"perform ",i.createElement("b",null,"better than ",e,"%")," of comparable ",i.createElement("br",null),"texts written by other Grammarly users."),proofitTitle:"Get Expert Writing Help",proofitDescription:"Our writing experts are ready to check your document right now.",proofitOrderModal:{promo:{stepsNavigation:{howItWorks:"How it works",editingOptions:"Editing options",provideDetails:"Provide details"},step1:{title:"Save Time\nwith Human Expertise",description:"No time to polish your text?\nSend it to our team of writing experts."},step2:{title:"How it works",li1:"Select how fast youâ€™d like your document\nreturned and place your order.",li2:i.createElement(i.Fragment,null,"Our writing experts will fix writing mechanics",i.createElement("br",null),"(like spelling, grammar, and punctuation).",i.createElement("br",null),"If you choose the ",i.createElement("b",null,"Correctness and Clarity"),i.createElement("br",null),"option, theyâ€™ll also revise sentences that are",i.createElement("br",null),"unclear or hard to follow."),li3:"We will email you a link to the edited version\nin a DOCX file with all changes marked.",back:"got it"},step3:{header:{correctness:{h1:"Correctness",h2:"Fix errors only"},correctnessClarity:{h1:"Correctness\n& Clarity",h2:"Fix errors and\nimprove clarity"}},spelling:{h1:"Spelling"},grammar:{h1:"Grammar"},punctuation:{h1:"Punctuation"},conciseness:{h1:"Conciseness",h2:"Streamline wordy\nsentences"},preciseness:{h1:"Preciseness",h2:"Clarify vague sentences"},readability:{h1:"Readability",h2:"Make sentences easier\nto follow"}},step4:{title:"Optional: Get better feedback by providing some extra information",nativeLanguage:"Your native language",nativeLanguageDescription:"Weâ€˜ll pay special attention to issues that are common among writers with your language background",dialect:"Preferred English dialect",quotationType:"Default quotation marks",quotationTypeSingle:"â€˜Singleâ€™",quotationTypeDouble:"â€œDoubleâ€",spaceType:"Spaces after end punctuation",spaceTypeSingle:"One space",spaceTypeDouble:"Two spaces",choose:"Choose from the list"}},order:{title:"How fast do you need your document returned?",tierBase:"Correctness only",tierClarity:"Correctness and Clarity",tierTitle:"Which option would you like?",helpMeChoose:"Help me choose",warningConfirm:"We wonâ€™t charge you until you confirm\nby clicking â€œPlace Order.â€",placeOrder:"Place Order",chooseOptions:"Choose from turnaround options to continue",recommended:"recommended",perWord:"per word",paymentWarnings:{payPal:e=>i.createElement("span",null,"By placing an order you authorize a charge of"," ",i.createElement("b",{"data-name":"payment-warning-price"},"$",s.T4(e)),i.createElement("br",null),"to your PayPal account"),creditCard:e=>i.createElement("span",null,"By placing an order you agree that your card ",i.createElement("br",null),"will be charged"," ",i.createElement("b",{"data-name":"payment-warning-price"},"$",s.T4(e))),updateBilling:"Update billing information"}},card:{toProtect:"To protect your security, we ask you to authorize\nthis charge by re-entering payment details\nfor Grammarly.",paymentSuccess:{title:"Success",message:"Your billing information has been updated successfully"},paymentError:{title:"Error",message:e=>i.createElement("span",null,"There is an issue with the payment method you provided. Please review your paymentÂ  information and try again or select a different payment method",i.createElement("br",null),"If you need further assistance, please contact ourÂ ",i.createElement("a",{href:e,target:"_blank",style:{color:"#fff"}},"Support Team"))}}},proofitSuccessModal:{title:"Your document will be ready byâ€¦",description:e=>i.createElement("span",null,"We will email you at ",i.createElement("span",{"data-name":"useremail"},e)," with a link to the corrected version in a DOCX file with all changes marked.")},proofitPayment:{creditCard:"Your card has been declined.",payPal:"Your PayPal account has been declined"},resolve:i.createElement("span",null,"Mark as resolved and",i.createElement("br",null),"hide suggestion"),dismiss:"Dismiss",back:"Back",new:"New",card:{less:"Less",more:"Learn more",addToDict:"Add to dictionary",disabledForAnonymous:"Sign in to use this feature",like:"I'll address this",dislike:"Not helpful",wrong:"Incorrect suggestion",mute:"Turn off suggestions like this",offensive:"Offensive content",updatingSuggestion:"Updating suggestionâ€¦",or:"or",onboarding:{[n.ClarityAICard]:{title:"Grammarly just got smarter",content:"Grammarly now helps rewrite sentences to make your point clearer."},[n.PassiveVoiceCard]:{title:"Improved passive voice suggestions",content:"Grammarly now helps you rewrite passive voice sentences in the active voice."}},progressBarLabels:{readability:{min:"Hard to read",max:"Easy to read"},sentenceVariety:{min:"Monotonous",max:"Lively"},conciseness:{min:"Cluttered",max:"Concise"}},matchesNavigation:{next:"Next match",prev:"Previous match",currentMatchPosition:(e,t)=>`${e} of ${t}`,numberOfMatches:e=>`${e} ${s._6(e,"match","matches")}`},todoAction:e=>`Click to ${e}`,checking:"Checking...",actionDescription:{setGoals:"Set goals to get tailored writing suggestions",openPreferences:"Open settings"},fluency:{tooltip:"This suggestion is based on your language settings.",cardTitle:"Fluency improvements",cardFooter:(e="multilingual")=>`Common issue for ${e} speakers`},takeaway:{defaultTitle:"Is this your text's main point?",feedback:"Is this your textâ€™s main point?",yes:"Yes",no:"No",done:"Done"},smartPhrases:{showMoreIdeas:"Show more ideas",intentDetectedFeedbackYes:"Yes",intentDetectedFeedbackNo:"No",openFeedbackFormQuestion:"Anything we can improve?",done:"Done"},sentenceLevelBrandTones:{helpfulFeedbackQuestion:e=>`Do you agree it sounds ${e}?`,helpfulFeedbackYes:"Yes",helpfulFeedbackNo:"No",offBrandBadge:"OFF-BRAND",offBrandCardTitle:"Off-brand",detected:"instance detected"},showChangesToggle:"Highlight changes",muteCitedText:e=>i.createElement(i.Fragment,null,"Don't want Grammarly to check quotes?",i.createElement("br",null),i.createElement("span",null,"Change this in ",e,".")),feedbackForm:{dismissReason:"Why did you dismiss this suggestion?",submit:"Submit",skip:"Skip",error:"Select one of the reasons first"},gapCard:{placeholder:"Who or whatâ€¦"}},placeholderRTF:{typeOrPasteText:`Type or paste (${e.commandKeyLabel("V")}) your text here or `,upload:"upload",ending:" a document."},placeholder:{typeOrPasteText:`Type or paste (${e.commandKeyLabel("V")}) your text here. `,upload:"Upload",ending:" a document to save original formatting."},toolbar:{loading:"Loading...",processing:"Processing your document...",backToMyGrammarly:"Back to My Grammarly",signOut:"Sign out",title:{rename:"Rename",untitledDocument:"Untitled document",onboarding:{title:"Add a title",message:"Give your document a name so you can find it later."}},formatting:{head:"Text formatting",bold:"Bold",italic:"Italic",underline:"Underline",header1:"Heading 1",header2:"Heading 2",link:"Link",orderedList:"Numbered list",bulletList:"Bullet list",clear:"Clear formatting",tooltips:{head:"Text formatting",bold:"Bold",italic:"Italic",underline:"Underline",header1:"Heading 1",header2:"Heading 2",link:"Link",orderedList:"Numbered list",bulletList:"Bullet list",clear:"Clear formatting"},links:{apply:"Apply",change:"Change",remove:"Remove",placeholder:"Enter link URL"}}},footer:{word:"word",words:"words",character:"character",characters:"characters",readingTime:"reading time",speakingTime:"speaking time",readabilityScore:"readability score",disabledReadabilityScore:"Readability score â€” not enough text",rtfCompatibilityInfo:{message:{plainText:"âš ï¸ Formatting tools are ",textWithTooltip:"disabled"},tooltip:"Your documentâ€™s formatting will be restored upon download. To preserve your documentâ€™s original formatting, Grammarlyâ€™s formatting tools are temporarily disabled.",officeAddinPromo:{part1:"Try ",part2:"Grammarly for MS Office."}}},emogenie:{popup:{title:"Hereâ€™s how your text sounds",subtitle:"Which tones did we get right?",actions:{like:"Tone is detected correctly",dislike:"Tone is detected incorrectly"},intensities:{slight:"Slight intensity",moderate:"Moderate intensity",strong:"Strong intensity",veryStrong:"Very strong intensity"},textIsTooShortMessage:"Write away! Grammarly needs at least 30 words to detect your tone."}},vox:{styleGuide:"style guide"},mutedAlerts:{dialogue:{openBtnTooltip:"Manage deactivated suggestions",header:"Deactivated Suggestions",subHeader:"Youâ€™ve chosen to turn off the following types of suggestions:",on:"Turn on",off:"Turn back off",suggestions:e=>`${e} ${s._6(e,"suggestion","suggestions")} in this document`,footerSuggestions:e=>`${e} ${s._6(e,"suggestion","suggestions")}  will be turned back on`},undoNotification:{text:"Youâ€™ve turned off suggestions related to",buttonText:"Turn back on"},onboarding:{cardMute:{description:"You can now deactivate certain types of suggestions (including Oxford commas and passive voice.)",buttonText:"Got it"},dialogue:{description:"Click this icon to manage deactivated suggestions."}}},preferences:{autoJumpToNextAlert:"Auto-jump to the next suggestion",autoScrollToNextAlert:"Auto-scroll to the next suggestion",autoJumpToNextAlertDescription:"When a suggestion is applied or rejected, automatically scroll the text to the next suggestion.",increaseFontSize:"Increase text font size",muteQuotedAlerts:"Donâ€™t check text inside quotes"},actions:{select:"Select",close:"Close",gotIt:"Got it"},statuses:{disabled:"Disabled",selected:"Selected",unavailable:"Unavailable"},subscription:{paypal:{description:"You can subscribe to Grammarly with PayPal. Click on the button below to sign in to your Paypal account.",descriptionWhenConnected:"You're already subscribed to Grammarly with PayPal. Click the button below to change your Paypal information."},apple:"Since you purchased your Grammarly Premium subscription through the App Store, please open the Grammarly app on your iOS device to manage your subscription.\nWe're working on a way to bring this functionality to you in our desktop products, but it's not quite ready yet."},desktopUpdate:{softTitle:"New version is available",hardTitle:"Please update to the latest version",soft:"The new version of the Grammarly Editor contains bug fixes and provides a better experience.",hard:"Your current version of the Grammarly Editor is outdated and will not work properly.",reload:"Update",download:"Download the latest version"},undo:"Undo",switchToDenali:"You switched to the new Grammarly Editor for this document.",feedbackSend:"Your feedback has been sent. Thank you!",statisticsError:"Error on requesting document statistics. Please try again later.",referenceCopied:"Reference copied to clipboard",documentCopied:"Document copied to clipboard",downloadDocumentNotFoundError:"Requested document was not found.",isTemporaryDownloadError:"Document wasn't downloaded.\nPlease try again.",freemiumNotifications:{engagement:"Grammarly Premium suggests ways to make your writing more specific, vivid, and interesting to keep your readers engaged.",delivery:"Grammarlyâ€™s AI adjusts the level of formality, confidence, friendliness, and more in your writing so you can make the best impression.",plagiarism:"Grammarly compares billions of web pages to your document and alerts you to passages that may need citations."},whatsNew:{title:"What's New?"},fileSizeExceededNotification:{title:"Maximum document size exceeded",body:"Currently, Grammarly can support documents up to 4 MB and 100,000 characters (about 60 pages).\n    Try uploading your file in multiple parts or copying and pasting your text into the editor.",link:"Alternatively, you can install Grammarly for Microsoft Office"},documentSettings:{close:"Close",myGrammarly:"My Grammarly",documentHeader:"DOCUMENT",newDocument:"New document",uploadFile:"Upload file",download:"Download",downloadLabel:"as .docx",print:"Print",template:"Insert Template",editHeader:"EDIT",undo:"Undo",redo:"Redo",cut:"Cut",copy:"Copy",paste:"Paste",selectAll:"Select all",editorSettings:"Editor settings",accountHeader:"ACCOUNT",eduLabel:"EDU",upgradeToPremium:"Upgrade to premium",language:"Language preference",subscription:"Subscription",logout:"Log out",support:"Support",whatsNew:"What's new",feedback:"Send product feedback",switchToClassicEditor:"Back to Classic Editor",privacyPolicy:"Privacy policy",termsOfService:"Terms of service",tooltips:{close:"Close",myGrammarly:"My Grammarly",newDocument:"Create a new document",uploadFile:"Upload a file",download:"Download",print:"Print",undo:"Undo",redo:"Redo",cut:"Cut",copy:"Copy",paste:"Paste",selectAll:"Select all",editorSettings:"Editor settings",upgradeToPremium:"Upgrade to premium",language:"Personal dictionary and dialect",subscription:"Manage your subscription",logout:"Log out",support:"Support",whatsNew:"What's new",feedback:"Send product feedback",switchToClassicEditor:"Back to Classic Editor",privacyPolicy:"Privacy policy",termsOfService:"Terms of service"},onboarding:{title:"Shortcuts and settings",message:"Click to adjust your settings"},supportTitle:"Support and feedback"},hotkeyUnsupported:"This action is unavailable using the menu, but you can still use ",goPremium:"Go Premium",editorSettingsModalHeader:"Editor settings",documentUploaded:{message:"Document successfully uploaded. ",link:"Open document for editing"},documentUploadGeneralError:"Document wasn't uploaded. Please try again.",documentIsEmpty:"The submitted file is empty.",noFileToUpload:"No files to upload!",oneDocumentIsAllowed:"Only one document upload at a time is allowed",tooltipUploadElementInput:"Click here to upload document",goBackToAllAlerts:"Go back to All Suggestions",beta:"Beta",premiumAlertLabel:{tooltip:{includedWithPaid:i.createElement(i.Fragment,null,i.createElement("div",null,"This suggestion is included"),i.createElement("div",null,"with your paid subscription."))},new:"new"},premiumFreeTrial:e=>i.createElement(i.Fragment,null,"This advanced suggestion is included in your"," ",i.createElement("span",{style:{whiteSpace:"nowrap"}},"1-week")," Premium Trial."," ",i.createElement("a",{onClick:e},"Learn More"),"."),freePremiumAlertFooter:{beforeIcon:"Your free",afterIcon:"Premium suggestion"},anonymousUserGenericSignInPrompt:e=>i.createElement(i.Fragment,null,i.createElement("a",{onClick:e},"Sign in")," to get key Grammarly features"),anonymousUserAddToDictionarySignInPrompt:e=>i.createElement(i.Fragment,null,i.createElement("a",{onClick:e},"Sign in")," to start your personalized dictionary"),inlineUpgradeHook:{suggestionIsPartOfPremium:"This suggestion is part of Grammarly Premium.",upgradeToPremium:"UPGRADE TO PREMIUM"},inlineCard:{addToDictionary:"Add to dictionary",dismiss:"Dismiss",seeMore:"See more"},changePlan:{title:e=>`Switch and save over ${e}`,confirmationDescription:(e,t,r,n,a)=>i.createElement(i.Fragment,null,"Your current plan ",e," Plan will update to Annual on"," ",t.toLocaleDateString(),", at which time you will be charged one payment of"," ",r,". Your subscription will automatically renew every ",a," months. You will be charged ",n," on each renewal."),cancelButton:"cancel",confirmationButton:e=>`Switch to ${e} Plan`,promoBadge:e=>`${e} PROMO`,savedBadge:e=>`${e} SAVED`,perYear:"year",perMonth:"mo",successfulNotificationCopy:e=>`You were switched to ${e} Plan`,hook:{title:"Your writing looks great with Grammarly Premium! Keep up the great work!",button:{switchTo:"Switch to Annual Plan ",price:e=>`Save ${e}`,cancel:"Later"}}},review:"Review",news:{bulkAccept:{title:"Accept multiple suggestions at once",body:"Save time by accepting all high-confidence suggestions at once. This will automatically apply any suggestions that other Grammarly users almost always accept."},mutedAlerts:{title:"Turn certain suggestions off",body:"You can now deactivate certain types of suggestions (including Oxford commas and passive voice.)"},proofitClarity:{title:"Expanded options from our expert writing service",body:'Our writing experts now offer a "Correctness and Clarity" option. Select this option when submitting a text and our experts will make sure your writing is concise, precise, and easy to read.'},pdf:{title:"Expanded PDF report now available",body:"Each documentâ€™s PDF report now contains the document text and shows Grammarlyâ€™s suggestions for all detected writing issues. "},rtf:{title:"Rich text formatting has arrived!",body:"The Grammarly Editor now supports bold, italics, bullet points, and more. The editor can now also preserve rich text formatting in pasted text."},clarity:{title:"Go Beyond Grammar",body:"Streamline your sentences with Grammarly's new clarity suggestions. Blue underlines appear with suggested edits for hard-to-read phrases and sentences."}},priorityLens:{prioritySuggestion:"Top suggestions",allSuggestion:"All suggestions",disabledAllSuggestion:"No additional suggestions",description:"Grammarly prioritizes suggestions based on the context of your writing.",descriptionLink:"goals"},feedModeSelector:{priority:"Top suggestions",priorityDescription:i.createElement(i.Fragment,null,"Prioritize suggestions based on the context ",i.createElement("br",null)," of your writing and your editing history."),all:"All"},waysToUseGrammarly:(e,t,r,n,a,s)=>i.createElement("ul",null,i.createElement("li",null,"In your browser (",i.createElement("a",{href:e,target:"_blank"},"Chrome"),","," ",i.createElement("a",{href:t,target:"_blank"},"Edge"),","," ",i.createElement("a",{href:r,target:"_blank"},"Firefox"),","," ",i.createElement("a",{href:n,target:"_blank"},"Safari"),")"),i.createElement("li",null,i.createElement("a",{href:a,target:"_blank"},"On your phone")," ","(iOS and Android)"),i.createElement("li",null,i.createElement("a",{href:s,target:"_blank"},"On your desktop")),i.createElement("li",null,"In the Grammarly Editor")),premiumOnboardingSurvey:{firstQuestion:{question:"How has your experience with Grammarly been?",answers:{verySatisfied:"Very satisfying",somewhatSatisfied:"Somewhat satisfying",neutral:"Neither satisfying nor dissatisfying",somewhatDissatisfied:"Somewhat dissatisfying",veryDissatisfied:"Very dissatisfying"}},secondSatisfactionQuestion:{question:"Great! Is there anything in particular that youâ€™ve enjoyed?",answers:{plagiarismChecker:"Plagiarism checker",claritySuggestions:"Clarity suggestions",engagementSuggestions:"Engagement suggestions",toneSuggestions:"Delivery suggestions",usingMultipleDevices:"Using Grammarly Premium across devices"},learnMoreLink:"Learn more"},secondDissatisfactionQuestion:{question:"Weâ€™re sorry to hear that. What did you have trouble with?",answers:{lowQualitySuggestions:"Low-quality suggestions",poorPlagiarismSuggestions:"Canâ€™t see plagiarism suggestions",noSupportForDesirableApp:"It doesnâ€™t integrate with an app I use",aggressivePremiumPromotion:"It keeps asking me to upgrade",noPremiumSuggestions:"I canâ€™t access Premium suggestions",premiumAndFreeAreIdentical:"The Premium and Free plans feel identical"}},completion:{enjoyment:{header:"Thank you so much for your feedback.",sub:"We hope you continue enjoying Grammarly!"},badExperience:{lowQuality:"Thanks for letting us know. We are constantly working to improve our suggestions. If you click the flag icon on suggestions that are unhelpful, it helps us understand how we can adjust our algorithms to be more accurate.",noPlagiarism:i.createElement(i.Fragment,null,"The plagiarism checker is turned off by default. To check your document for plagiarism, open a document in the Grammarly Editor and then click the Plagiarism button in the"," ",i.createElement("b",null,"lower right corner"),"."),noSupportForDesirableApp:(t,r,n,a,s,o)=>i.createElement(i.Fragment,null,"Weâ€™re working hard to be wherever you write, but there are some applications that we donâ€™t yet support. Still, we may have what youâ€™re looking for. Here are a few different ways to access Grammarly:",c(e).waysToUseGrammarly(t,r,n,a,s,o)),possibleMultipleAccounts:"We recommend double-checking to make sure youâ€™re logged into your Premium account. Try visiting app.grammarly.com and look for the Premium label in the upper left corner. If you donâ€™t see it, you may have unintentionally created a second free account."}}},gbSatisfactionSurvey:{firstQuestion:{question:"How has your experience with Grammarly been?",answers:{verySatisfied:"Very satisfying",somewhatSatisfied:"Somewhat satisfying",neutral:"Neither satisfying nor dissatisfying",somewhatDissatisfied:"Somewhat dissatisfying",veryDissatisfied:"Very dissatisfying"}},secondSatisfactionQuestion:{question:"Great! Is there anything in particular that youâ€™ve enjoyed?",answers:{admin:{CreatingStrongCompanyBrand:"Creating a strong company brand",SavingTimeWritingAndEditing:"Saving time writing and editing",CentrallyManagingGrammarlyAccount:"Centrally managing team accounts and billing",FeelingConfidentTheTeamWillSoundPolishedAndProfessional:"Feeling confident the team will sound polished and professional",EnablingTeamToCommunicateWithCustomersEffectively:"Enabling the team to communicate effectively",ImprovingTeamsOverallWritingSkills:"Improving the team's overall writing skills",Other:"Other"},teamMember:{SavingTimeWritingAndEditing:"Saving time writing and editing",SoundingFluentInEnglish:"Sounding fluent in English",SoundingMoreProfessionalAndPolished:"Sounding more professional and polished",ImprovingOverallWritingSkills:"Improving overall writing skills",FeelingConfidentWhenCommunicating:"Feeling confident when communicating",CommunicatingWithCustomersEffectively:"Communicating with customers effectively",Other:"Other"}},learnMoreLink:"Learn more"},secondDissatisfactionQuestion:{question:"Weâ€™re sorry to hear that. What did you have trouble with?",answers:{admin:{DoesntIntegrateWithAnAppIUse:"It doesn't integrate with an app the team uses",LowQualitySuggestions:"Low-quality suggestions",FeaturesAreMissing:"The features I expected were missing",TechnicalDifficulties:"Technical difficulties",NotSureWhatGrammarlyBusinessDoes:"I'm still not sure what Grammarly Business does",Other:"Other",DidntFindItValuable:"I didn't find it valuable"},teamMember:{DoesntIntegrateWithAnAppIUse:"It doesn't integrate with an app I use",LowQualitySuggestions:"Low-quality suggestions",FeaturesAreMissing:"The features I expected were missing",TechnicalDifficulties:"Technical difficulties",NotSureWhatGrammarlyBusinessDoes:"I'm still not sure what Grammarly Business does",Other:"Other",DidntFindItValuable:"I didn't find it valuable"}}},thirdSatisfactionQuestion:{title:"Thank you.",question:i.createElement(i.Fragment,null,i.createElement("p",null,"We hope you continue enjoying Grammarly!"),i.createElement("p",null,"Is there anything else you'd like to share about your experience?"))},thirdDissatisfactionQuestion:{admin:{DoesntIntegrateWithAnAppIUse:(t,r,n,a,s,o)=>i.createElement(i.Fragment,null,i.createElement("p",null,"Weâ€™re working hard to be wherever you write, but there are some applications that we donâ€™t yet support."),i.createElement("p",null,"Still, we may have what youâ€™re looking for. Here are a few different ways to access Grammarly:"),c(e).waysToUseGrammarly(t,r,n,a,s,o),i.createElement("p",null,"Is there another app you need Grammarly in?")),LowQualitySuggestions:i.createElement(i.Fragment,null,i.createElement("p",null,"Thanks for letting us know. We are constantly working to improve our suggestions. If you click the flag icon on suggestions that are unhelpful, it helps us understand how we can adjust our algorithms to be more accurate."),i.createElement("p",null,"Is there anything else you'd like to share about your experience?")),FeaturesAreMissing:"Thanks for letting us know. Which features did you expect to see?",TechnicalDifficulties:i.createElement(i.Fragment,null,i.createElement("p",null,"Thanks for letting us know. We're here to help!"),i.createElement("p",null,"Please let our support team know about the difficulties you're having here")),NotSureWhatGrammarlyBusinessDoes:"Thanks for letting us know. Grammarly Business can deliver real-time writing suggestions to help everyone on your team compose mistake-free and on-brand writing. Is there anything you need help with?",Other:"Is there anything in particular you found frustrating or annoying?",DidntFindItValuable:{title:"Is there anything in particular you need help with?",answers:{CreatingAStrongCompanyBrand:"Creating a strong company brand",SavingTimeWritingAndEditing:"Saving time writing and editing",CentrallyManagingGrammarlyAccount:"Centrally managing Grammarly account settings, security, and billing",FeelingConfidentTheTeamWillSoundPolished:"Feeling confident the team will sound polished and professional",EnablingTheTeamToCommunicateWithCustomers:"Enabling the team to communicate with customers effectively",ImprovingTheTeamsOverallWritingSkills:"Improving the team's overall writing skills",Other:"Other"}}},teamMember:{DoesntIntegrateWithAnAppIUse:(t,r,n,a,s,o)=>i.createElement(i.Fragment,null,i.createElement("p",null,"Weâ€™re working hard to be wherever you write, but there are some applications that we donâ€™t yet support."),i.createElement("p",null,"Still, we may have what youâ€™re looking for. Here are a few different ways to access Grammarly:"),c(e).waysToUseGrammarly(t,r,n,a,s,o),i.createElement("p",null,"Is there another app you need Grammarly in?")),LowQualitySuggestions:i.createElement(i.Fragment,null,i.createElement("p",null,"Thanks for letting us know. We are constantly working to improve our suggestions. If you click the flag icon on suggestions that are unhelpful, it helps us understand how we can adjust our algorithms to be more accurate."),i.createElement("p",null,"Is there anything else you'd like to share about your experience?")),FeaturesAreMissing:"Thanks for letting us know. Which features did you expect to see?",TechnicalDifficulties:i.createElement(i.Fragment,null,"Thanks for letting us know. Can you tell us more about what happened? We'll try to help."),NotSureWhatGrammarlyBusinessDoes:(t,r,n,a,s,o)=>i.createElement(i.Fragment,null,i.createElement("p",null,"Thanks for letting us know. Grammarly helps compose polished, mistake-free writing wherever you write. Here are a few different ways to use Grammarly:"),c(e).waysToUseGrammarly(t,r,n,a,s,o),i.createElement("p",null,"Is there anything else you'd like to share about your experience?")),Other:"Is there anything in particular you found frustrating or annoying?",DidntFindItValuable:{title:"Is there anything in particular you need help with?",answers:{SavingTimeWritingAndEditing:"Saving time writing and editing",SoundingFluentInEnglish:"Sounding fluent in English",SoundingMoreProfessionalAndPolished:"Sounding more professional and polished",ImprovingOverallWritingSkills:"Improving overall writing skills",FeelingConfidentWhenCommunicating:"Feeling confident when communicating",CommunicatingWithCustomersEffectively:"Communicating with customers effectively",Other:"Other"}}}},thankYou:"Thank you so much for your feedback."},bulkAccept:{title:e=>`Accept ${e} suggestions at once`,appliedTitle:e=>`Youâ€™ve made ${e} instant corrections`,apply:e=>`Accept all ${e}`,confirm:"Looks good",undoAll:"Undo all"},seeWhatsInPremium:"See what's in Premium",premiumSuggestions:"Premium suggestions",gbUpHook:{proTipBadge:"Pro Tip",dontShowAgain:"Don't Show Again",dismiss:"Dismiss",smbSpecificProfessionalism:{title:"Give your business a professional edge",description:"Help your team impress customers with clear, professional, and compelling communication.",cta:"Try Grammarly Business for free"},styleGuides:{title:"A strong business needs consistent writing",description:"Grammarly Business helps your team use a consistent voice and style everywhere they write.",cta:"Create a Grammarly Business style guide for free"}},gbVoxLensUpHook:{title:"Style guide",description:"Grammarly Business helps your whole team consistently match your companyâ€™s voice and style. Create a style guide with rules specific to your business.",cta:"Try Grammarly Business for free",maybeLater:"Maybe later"},gbEnableVoxLensHook:{title:"Create a company style guide",description:"Let Grammarly Business deliver customized writing feedback to help your team stay on-brand and in your company's voice.",cta:"Create a style guide",maybeLater:"Maybe later"},gbBillingMigration:{title:"Action required: Update your subscription",description:e=>`Your teamâ€™s subscription will expire on ${e}. Please add your billing information for uninterrupted access to Grammarly Business.`,cta:"Add Billing Information"},premiumUngatingRenewalNotification:{title:"Your Grammarly Business subscription is about to renew",message:e=>`On ${e}, your free trial of Grammarly Business will end and you'll be charged for a subscription renewal.`,cta:"Manage Your Subscription"},safariExtActivationNotification:{title:"Re-activate Grammarly Today",description:"Due to a recent update, Grammarly for Safari was turned off in your browser. Re-activate it today to enhance your writing across the web!",cta:"Re-activate"},undoCard:{title:"Instantly corrected",confirm:"Looks good",revert:e=>i.createElement(i.Fragment,null,"Revert to ",e)},priorityList:{expand:"More",collapse:"Less",toggleButtonTooltip:e=>(e?"Show":"Hide")+" de-prioritized suggestion (less relevant for this text or those you often dismiss)",hint:"Grammarly de-prioritizes suggestions that are less relevant for this text or those you often dismiss.",successState:{allAlertsHint:"No more relevant suggestions.",outcomesHint:"Youâ€™ve addressed the most relevant suggestions.",firstCheckText:"No relevant suggestions."}}})));function u(e){return t=>("mac"===e||"ios"===e?"âŒ˜+":"Ctrl+")+t}var d;!function(e){e.holder=c,e.getConfig=function(e){return{commandKeyLabel:u(e)}},e.Context=i.createContext(a.Y.invariantContent("PlatformTextResources"))}(d||(d={}))},62310:(e,t,r)=>{"use strict";r.d(t,{C:()=>n});var n,i=r(27378),a=r(12187),s=r(90351),o=r(63969),l=r(40219),c=r(94793);!function(e){e.Regular=e=>i.createElement("span",Object.assign({},(0,a.Sh)(h.badge,e.className)),e.children),e.New=({className:t})=>i.createElement(e.Regular,{className:t},"New"),e.NewWrapper=({children:t})=>i.createElement("div",null,i.createElement(e.New,null),t),e.Premium=({className:t})=>i.createElement(e.Regular,Object.assign({},(0,a.Sh)(h.premiumBadge,t)),i.createElement(c.JO.PaidLink,{className:h.premiumBadgeIcon,width:12}),"PREMIUM"),e.Business=({className:t})=>i.createElement(e.Regular,Object.assign({},(0,a.Sh)(t)),"BUSINESS")}(n||(n={}));const u={display:"inline-block",padding:`${o.u.rem(s.Zh.BadgeY)} ${o.u.rem(s.Zh.BadgeX)}`,height:o.u.rem(s.L3.Badge),borderRadius:o.u.rem(l.mA),background:s.Il.CoreGreen10,color:s.Il.CoreGreen70,verticalAlign:"middle",textAlign:"center",textTransform:s._5.Badge,letterSpacing:s.LK.Badge,fontWeight:s.U9.Badge,fontSize:o.u.rem(s.Bf.Badge),lineHeight:o.u.rem(s.L3.Badge)},d={marginRight:s.Zh.BadgeX,maxWidth:o.u.rem(s.L3.Badge),maxHeight:o.u.rem(s.L3.Badge),minWidth:o.u.rem(s.L3.Badge),minHeight:o.u.rem(s.L3.Badge),verticalAlign:"top"},p={background:s.Il.CoreYellow20,color:s.Il.CoreYellow80},m={fill:s.Il.CoreYellow80},h=o.u.stylesheet({badge:[u],badgeIcon:[d],premiumBadge:[u,p],premiumBadgeIcon:[d,m]})},24811:(e,t,r)=>{"use strict";r.d(t,{B:()=>w,N:()=>C});var n=r(27378),i=r(5739),a=r(12187),s=r(38983),o=r(8125),l=r(90351),c=r(63969),u=r(24588),d=r(40219),p=r(26653),m=r(76974),h=r(2844),g=r(98403),f=r(77176),y=r(93508),v=r(66310),b=r(19751);function w({value:e,initValue:t=p.g.MIN,wrapperClass:r,progressClass:s,isLoading:o=m.of(!1)}){const l=C(e,t);return n.createElement(i.F.div,Object.assign({},(0,a.Sh)(R.wrapper,r)),n.createElement(S,{width:l,progressClass:s,isLoading:o}))}function C(e,t=p.g.MIN){const r=s.h.create(!1);return requestAnimationFrame((()=>requestAnimationFrame((()=>r.set(!0))))),h.aj(g.Dx(e),r,((e,r)=>r?e:t))}function S({width:e,progressClass:t,isLoading:r}){const s=e.pipe(f.U((e=>`${e}%`))),l=e.pipe(f.U(p.g.prism.reverseGet),f.U((e=>e>0?`${e+.75}%`:0)),y.O(0)),c=r.pipe(v.w((e=>e?s:"0"))),u=e.pipe(f.U(p.g.isMin),b.d({bufferSize:1,refCount:!0}));return n.createElement(n.Fragment,null,n.createElement(i.F.div,Object.assign({},(0,a.Sh)(R.borderContainer,u.pipe(f.U((0,o.RN)(R.borderContainerZeroWidth,R.borderContainerWithMinWidth)))),{style:{width:l}})),n.createElement(i.F.div,Object.assign({},(0,a.Sh)(t||R.defaultProgress,R.progressBar,u.pipe(f.U((0,o.RN)(R.progressBarZeroWidth,R.progressBarWithMinWidth)))),{style:{width:s}})),n.createElement(i.F.div,{className:R.loading,style:{width:c}}))}const I=c.u.keyframes({"0%":{backgroundPosition:"0 0"},"100%":{backgroundPosition:"20px 20px"}}),k={position:"relative",width:c.u.percent(100),height:c.u.rem(.25),borderRadius:c.u.rem(d.Jr),backgroundColor:u.xO},x={position:"relative",top:0,height:c.u.percent(100),borderRadius:c.u.rem(d.Jr),backgroundPosition:"center",transition:"width .8s ease-in-out 0s"},A={minWidth:c.u.px(4)},E={position:"absolute",backgroundColor:l.Il.CoreNeutral0},T={minWidth:c.u.px(6)},_={position:"absolute",minWidth:0,backgroundImage:u.b6,backgroundSize:"20px 20px",transition:"none",animation:`${I} 1s linear infinite`},L={backgroundImage:u.Xd},R=c.u.stylesheet({wrapper:[k,k],progressBar:[x],progressBarZeroWidth:[{minWidth:0}],progressBarWithMinWidth:[A],borderContainer:[x,E],borderContainerZeroWidth:[{minWidth:0}],borderContainerWithMinWidth:[T],loading:[x,_],defaultProgress:[L]})},77797:(e,t,r)=>{"use strict";r.d(t,{Ys:()=>u});var n=r(27378),i=r(5739),a=r(12187),s=r(90351),o=r(63969),l=r(40219);const c=()=>n.createElement("svg",{className:g.svg2,viewBox:"0 0 12 9",width:"12",height:"9",xmlns:"http://www.w3.org/2000/svg"},n.createElement("path",{d:"M1.386 4.115L4.561 7.29l5.81-5.81",stroke:"#FFF",strokeWidth:"2",fill:"none",fillRule:"evenodd",strokeLinecap:"round"})),u=({checked:e,className:t,children:r,name:i})=>n.createElement(d,{checked:e,name:i,className:t,checkedComponent:e=>n.createElement("div",{key:e?"checkbox1":"checkbox2",className:e?g.rectangleFilledBlue:g.rectangle},e&&n.createElement(c,null))},r),d=({checked:e,checkedComponent:t,className:r,children:s,name:o})=>n.createElement(i.F.label,Object.assign({},(0,a.Sh)(g.wrapper,r),{onClick:e=>e.stopPropagation()},o?{"data-name":`${o}-checkbox`}:{}),n.createElement(i.F.input,{type:"checkbox",checked:e,onChange:t=>e.modify((e=>!e)),className:g.inputCheckbox}),e.view(t),n.createElement("div",null,s)),p={display:"flex",marginRight:o.u.rem(.5),paddingTop:o.u.rem(.18),width:o.u.rem(1),height:o.u.rem(1),border:`2px solid ${s.Il.CoreNeutral30}`,borderRadius:o.u.rem(l.mA),backgroundColor:"transparent",alignItems:"center"},m={paddingTop:o.u.rem(.1),borderColor:s.Il.CoreBlue50,borderRadius:o.u.rem(l.mA),backgroundColor:s.Il.CoreBlue50},h={width:o.u.percent(100),height:o.u.percent(100)},g=o.u.stylesheet({wrapper:[{display:"flex",cursor:"default",alignItems:"center",userSelect:"none"}],rectangle:[p],rectangleFilledBlue:[p,m],inputCheckbox:[{margin:0,"-webkit-appearance":"none",appearance:"none"}],svg:[h],svg2:[{margin:"auto"}]})},87380:(e,t,r)=>{"use strict";r.d(t,{x:()=>n});var n,i=r(27378),a=r(5739),s=r(12187),o=r(19962),l=r(90351),c=r(63969),u=r(24588),d=r(71284),p=r(94793),m=r(42329),h=r(70134),g=r(77176),f=r(98403),y=r(57091),v=r(93508),b=r(26653);!function(e){function t(e){return 0===e?"":e>=1e3?`${Math.min(Math.trunc(e/1e3),9)}k+`:String(e)}const r=({className:e,isChecking:t,type:r,animateFade:n=!0})=>{const{state:o,complete:l}=h.f.fadeOutState(t),c="checking-complete";return i.createElement(a.F.div,Object.assign({},(0,s.Sh)(G.loader,e),{role:"loader"}),n?o.pipe(g.U((e=>"end"===e?i.createElement("div",{key:"checking-complete",className:c}):i.createElement(m.$,{key:"spinner",variation:r,size:"100%",className:"fadeOut"===e?G.fadeOut:void 0,onTransitionEnd:l})))):t.pipe(g.U((e=>e?i.createElement(m.$,{variation:r,size:"100%"}):i.createElement("div",{className:c})))))},n=({name:e,theme:r={},count:n,type:l="white",suffix:c=""})=>{const u=i.useContext(d.a.Context);return i.createElement(a.F.div,Object.assign({},(0,s.Sh)(G.roundCounter,f.ab(l,m.$.getClassName(G)),r.counterWrapper),{role:"counter"}),i.createElement("svg",{viewBox:"0 0 32 32",className:G.circular},i.createElement("g",null,i.createElement("circle",{r:"15.75",cx:"16",cy:"16"}),i.createElement("text",Object.assign({x:"16",y:"17"},o.h5(u.has(d.a.Flag.supportsSVGDominantBaseline)),{fontSize:n>=100?14:18,"data-name":e},(0,s.Sh)(T,r.counterContent)),t(n),c))))},l=({name:e,theme:r={},count:n,type:l="white",suffix:c=""})=>{const u=i.useContext(d.a.Context);return i.createElement(a.F.div,Object.assign({},(0,s.Sh)(G.ovalCounter,f.ab(l,m.$.getClassName(G)),r.counterWrapper),{role:"counter"}),i.createElement("svg",{viewBox:"0 0 32 20",className:G.circular},i.createElement("rect",{width:"32",height:"20",rx:"10"}),i.createElement("text",Object.assign({x:"16",y:"10.5"},o.h5(u.has(d.a.Flag.supportsSVGDominantBaseline)),{fontSize:11,"data-name":e},(0,s.Sh)(T,r.counterContent)),t(n),c)))};e.Counter=({theme:e={},count:t,type:r="white"})=>{const a=t>=100?l:n;return i.createElement(a,{theme:Object.assign(Object.assign({},e),{counterWrapper:(0,s.Sh)(e.counterWrapper,G.flexCounter).className}),count:t,type:r})},e.OutcomeCounter=({name:e,theme:r={},count:n,type:l="white",suffix:c,fontSize:u=12})=>{const p=i.useContext(d.a.Context);return i.createElement(a.F.div,Object.assign({},(0,s.Sh)(G.outcomeCounter,f.ab(l,m.$.getClassName(G)),r.counterWrapper),{role:"counter"}),i.createElement("svg",{viewBox:"0 0 32 18",className:G.circular},i.createElement("rect",Object.assign({},function(e,t){return t||e>=100?{width:32}:e>=10?{x:4,width:24}:{x:7,width:18}}(n,!!c),{height:18,rx:9})),i.createElement("text",Object.assign({x:"50%",y:"10px"},o.h5(p.has(d.a.Flag.supportsSVGDominantBaseline)),{fontSize:u,"data-name":e},(0,s.Sh)(T,r.counterContent)),t(n),c)))},e.MainMeter=({count:e,isChecking:t,className:a})=>{const o=0===e;return i.createElement("div",Object.assign({},(0,s.Sh)(G.meter,a)),i.createElement(r,{isChecking:t,type:o?"green":"red"}),0===e?i.createElement(p.JO.Grammarly,null):i.createElement(n,{count:e,type:"red",name:"toolbar-mistakes"}))},e.LensNavMeter=({count:e,isChecking:t})=>i.createElement("div",{className:G.lensNavMeter},i.createElement(r,{isChecking:t,type:"red"}),i.createElement(n,{count:e,type:"white",name:"toolbar-mistakes"})),e.PlagiarismMeter=({count:e,isChecking:t,className:n})=>i.createElement("div",Object.assign({},(0,s.Sh)(G.plagiarismMeter,n)),i.createElement(r,{isChecking:t,type:"violet",animateFade:!1}),i.createElement(a.F.div,{className:G.wrapper},e.pipe(y.a(t),g.U((([e,t])=>0===e?i.createElement(p.JO.NotificationInfo,{className:G.plagiarismIcon,key:"icon",width:20}):!t&&i.createElement(l,{count:e,type:"violet",key:"value",suffix:i.createElement("tspan",{fontSize:8,dominantBaseline:"center"},"%")}))),v.O(null)))),e.PlagiarismOutcomesMeter=({count:t,isChecking:n,className:o})=>i.createElement("div",Object.assign({},(0,s.Sh)(G.plagiarismMeter,o)),i.createElement(r,{isChecking:n,type:"cyan",animateFade:!1}),i.createElement(a.F.div,{className:G.wrapper},t.pipe(y.a(n),g.U((([t,r])=>b.g.isMin(t)?i.createElement(p.JO.CheckmarkOutcomes,{className:G.plagiarismOutcomeIcon,key:"icon",width:20}):!r&&i.createElement(e.OutcomeCounter,{count:b.g.prism.reverseGet(t),type:"cyan",key:"value",suffix:i.createElement("tspan",{fontSize:11},"%")}))),v.O(null))))}(n||(n={}));const w=1.25,C={position:"absolute",top:0,right:0,bottom:0,left:0,overflow:"visible",margin:"auto",width:c.u.percent(100),height:c.u.percent(100)},S={position:"absolute",width:c.u.percent(150),height:c.u.percent(150),transform:"translate(-17%, -17%)"},I={position:"relative",display:"inline-flex"},k={width:c.u.percent(100),height:c.u.percent(100)},x={minWidth:c.u.rem(2),width:c.u.percent(100),height:c.u.rem(w)},A={maxWidth:c.u.rem(2),height:c.u.rem(w)},E="counterText",T=c.u.joinClasses([E,c.u.style({fontWeight:"bold",textAnchor:"middle",fill:l.Il.CoreNeutral0})]),_={fill:u.zh,$nest:{"& .counterText":{fill:u.FW}}},L={fill:l.Il.CoreRed50,$nest:{"& .counterText":{fill:l.Il.CoreNeutral0}}},R={fill:l.Il.CoreGreen50,$nest:{"& .counterText":{fill:l.Il.CoreNeutral0}}},P={fill:l.Il.CoreBlue50,$nest:{"& .counterText":{fill:l.Il.CoreNeutral0}}},O={fill:"transparent",$nest:{"& .counterText":{fill:u.FW}}},M={fill:u.lh,$nest:{"& .counterText":{fill:l.Il.CoreNeutral0}}},F={fill:u.AX,$nest:{"& .counterText":{fill:l.Il.CoreNeutral0}}},N={fill:l.Il.CoreYellow60,$nest:{"& .counterText":{fill:l.Il.CoreNeutral0}}},D={fill:l.Il.CoreCyan50,$nest:{"& .counterText":{fill:l.Il.CoreNeutral0}}},$={width:c.u.rem(1.5),height:c.u.rem(1.5)},U={margin:`0 ${c.u.rem(.25)}`},B={width:c.u.rem(2),height:c.u.rem(w)},j={margin:`${c.u.rem(-1)} 0`},W={$nest:{"&:not([data-disabled='true'])[data-active='true'], &:not([data-disabled='true'])[data-hovered='true']":{fill:l.Il.CoreCyan50}}},H={width:c.u.rem(2),height:c.u.rem(1.125),position:"relative"},G=c.u.stylesheet({fadeOut:[{opacity:0,transition:"opacity .5s linear"}],circular:[C],loader:[S],wrapper:[I],roundCounter:[I,k],ovalCounter:[I,x],flexCounter:[I,A],gray:[_],red:[L],green:[R],blue:[P],white:[O],violet:[M],yellow:[F],orange:[N],cyan:[D],meter:[I,$],lensNavMeter:[I,$,U],plagiarismMeter:[I,B],plagiarismIcon:[j],plagiarismOutcomeIcon:[j,W],outcomeCounter:[I,{position:"absolute",left:0},H]})},29245:(e,t,r)=>{"use strict";r.d(t,{d:()=>l});var n=r(27378),i=r(34685),a=r(63969);const s=/(?:[\u2700-\u27bf]|(?:\ud83c[\udde6-\uddff]){2}|[\ud800-\udbff][\udc00-\udfff]|[\u0023-\u0039]\ufe0f?\u20e3|\u3299|\u3297|\u303d|\u3030|\u24c2|\ud83c[\udd70-\udd71]|\ud83c[\udd7e-\udd7f]|\ud83c\udd8e|\ud83c[\udd91-\udd9a]|\ud83c[\udde6-\uddff]|[\ud83c[\ude01-\ude02]|\ud83c\ude1a|\ud83c\ude2f|[\ud83c[\ude32-\ude3a]|[\ud83c[\ude50-\ude51]|\u203c|\u2049|[\u25aa-\u25ab]|\u25b6|\u25c0|[\u25fb-\u25fe]|\u00a9|\u00ae|\u2122|\u2139|\ud83c\udc04|[\u2600-\u26FF]|\u2b05|\u2b06|\u2b07|\u2b1b|\u2b1c|\u2b50|\u2b55|\u231a|\u231b|\u2328|\u23cf|[\u23e9-\u23f3]|[\u23f8-\u23fa]|\ud83c\udccf|\u2934|\u2935|[\u2190-\u21ff])/g;function o(e,t=c.emoji){return`<img alt="${e}" class="${t}" src="${function(e){return i.gK+function(e){return e.length<4?e.codePointAt(0).toString(16):e.codePointAt(0).toString(16)+"-"+e.codePointAt(2).toString(16)}(e)+".svg"}(e)}" onerror="this.replaceWith(this.alt)" draggable="false" />`}const l=({children:e,emojiClassName:t,className:r})=>{const i=n.useCallback((e=>{null!==e&&(e.innerHTML=e.innerHTML.replace(s,(e=>o(e,t))))}),[e]);return n.createElement("span",{ref:i,className:r},e)},c=a.u.stylesheet({emoji:[{display:"inline",marginRight:".25em",width:"1em",verticalAlign:"sub",lineHeight:1,transform:"scale(1.25)",transformOrigin:"bottom",userSelect:"none"}]})},57120:(e,t,r)=>{"use strict";r.d(t,{u_:()=>K,aV:()=>X,ay:()=>J,Pj:()=>Z});var n=r(27378),i=r(57050),a=r(38983),s=r(5739),o=r(12187),l=r(25781),c=r(22232),u=r(90351),d=r(63969),p=r(24588),m=r(40219),h=r(7046),g=r(94793),f=r(29909),y=r(84347),v=r(81531),b=r(46680),w=r(85089),C=r(98403),S=r(10061),I=r(21921),k=r(66310),x=r(77176),A=r(67434),E=r(24209),T=r(49708),_=r(17343),L=r(28043),R=r(93508),P=r(95300),O=r(85985),M=r(2834),F=r(12126),N=r(2844),D=r(76974),$=r(13444),U=r(55935),B=r(64916);class j extends n.Component{constructor(){super(...arguments),this._subs=[],this._classes={hidden:"ps-hidden",visible:"ps-hovered",fastTransition:"ps-fast-transition"},this._mount=e=>{this._el=e,this.props.onMount&&e&&this.props.onMount(e)},this._update=()=>{requestAnimationFrame((()=>{this._el&&y.update(this._el)}))}}componentDidMount(){const{name:e,update:t,showWhenScrollable:r,scrollTo:n,className:i}=this.props,a=this._el;y.initialize(a,{suppressScrollX:!0,minScrollbarLength:40,handlers:["click-rail","drag-scrollbar","keyboard","passiveWheel","touch"]}),this._update(),this._subs.push(...W.customize(a,{name:e,showWhenScrollable:r||!1,classes:this._classes})),this._subs.push(w.YC(this._el).pipe(I.e(200)).subscribe(this._update)),t&&this._subs.push(t.subscribe(this._update)),n&&this._subs.push(n.pipe(k.w(C.b2.rafScheduler)).subscribe((e=>{a.scrollTop=e,this._update()}))),i&&this._subs.push(C.Dx(i).pipe(x.U((e=>e?e.split(" "):[])),A.R(((e,t)=>(e&&a.classList.remove(...e),t&&a.classList.add(...t),t)),[])).subscribe())}componentWillUnmount(){y.destroy(this._el),this._subs.forEach((e=>e.unsubscribe())),this._subs=[]}shouldComponentUpdate(){return!1}render(){const{children:e,onScroll:t,name:r,showWhenScrollable:i}=this.props;return n.createElement(s.F.div,Object.assign({},(0,o.Sh)(i&&this._classes.visible),{onScroll:t?()=>t.next():void 0,mount:this._mount,role:`scrollbar-${r}`}),e)}}var W,H;!function(e){const t=["mousewheel","DOMMouseScroll","wheel","touchmove"];e.customize=(e,{name:r,showWhenScrollable:n,classes:i})=>{const a=v.C8.Logging.getLogger(`scrollBarY.${r}`,b.i.DEBUG),s=e.querySelector(".ps__scrollbar-y"),o=e.querySelector(".ps__scrollbar-y-rail"),l=E.T(T.R(e,"mouseenter",{passive:!0}).pipe(_.h(!0)),T.R(e,"mouseleave",{passive:!0}).pipe(_.h(!1))).pipe(L.x(),R.O(!1)),u=E.T(T.R(o,"mouseenter",{passive:!0}).pipe(_.h(!0)),T.R(o,"mouseleave",{passive:!0}).pipe(_.h(!1))).pipe(L.x(),R.O(!1)),d=E.T(T.R(s,"mousedown",{passive:!0}).pipe(_.h(!0)),T.R(document,"mouseup",{passive:!0}).pipe(_.h(!1))).pipe(R.O(!1)),p=new P.X(!1),m=E.T(T.R(document,"paste",{passive:!0}),T.R(document,"mousedown",{passive:!0}).pipe(O.h((e=>{const t=e.target;return t!==s&&t!==o})),M.b((e=>a.trace("force hide event",e))))).pipe(k.w((()=>F.D([!0,!1]))),R.O(!1));return[E.T(...t.map((t=>T.R(e,t).pipe(x.U((e=>(e.preventDefault(),e.stopPropagation(),!0))))))).subscribe(p),N.aj(l,d,u,m).pipe(O.h((()=>!n)),k.w((([e,t,r,n])=>n?D.of("forceHide"):t||r?r&&!t?D.of("show").pipe($.g(600)):D.of("show"):e?E.T(p.pipe(U.T(1),B.p(100),_.h("show")),p.pipe(_.h("hide"),B.p(100),k.w((()=>D.of("hide").pipe($.g(600)))))):D.of("hide").pipe($.g(600)))),L.x()).subscribe((t=>{switch(S.c.emit(t),a.trace("new scroll action",{action:t}),t){case"show":e.classList.remove(i.hidden,i.fastTransition),e.classList.add(i.visible);break;case"hide":e.classList.remove(i.visible);break;case"forceHide":e.classList.remove(i.visible),e.classList.add(i.fastTransition);break;default:(0,c.vE)(t)}return t}))]}}(W||(W={})),function(e){function t(e){let t=e.deltaX,r=-1*e.deltaY;return void 0!==t&&void 0!==r||(t=-1*e.deltaX/6,r=e.deltaY/6),e.deltaMode&&1===e.deltaMode&&(t*=10,r*=10),t!=t&&r!=r&&(t=0,r=e.deltaY),[t,r]}e.verticalScrollByWhellEvent=e=>T.R(e,"wheel",{passive:!0}).pipe(x.U(t),x.U(f.Yg),M.b((t=>e.scrollTop-=t)))}(H||(H={}));var G=r(70134),z=r(28706),Y=r(85255),V=r(60797),q=r(40151);class X extends n.Component{constructor(){super(...arguments),this._overlayIndex=X._index++,this._subs=[],this._visibilityState=a.h.create("hidden")}componentDidMount(){this._visibilityState.set(this.props.visible.get()?"visible":"hidden"),this._subs.push(this._visibilityState.pipe(x.U((e=>"visible"===e)),L.x()).subscribe((e=>X._activeOverlays.modify((t=>{const r=new Set(t);return e?r.add(this._overlayIndex):r.delete(this._overlayIndex),r})))),this.props.visible.pipe(U.T(1)).subscribe((e=>{const t=this.props.animate?"fadeOut":"hidden";this._visibilityState.set(e?"visible":t)}))),this._subs.push(this._visibilityState.pipe(k.w((e=>"visible"===e?T.R(document,"keydown"):q.E)),O.h((e=>e.keyCode===l.R.ESC_CODE))).subscribe((()=>{this.props.preventClose||this.props.visible.set(!1),this.props.onClose&&this.props.onClose()})))}componentWillUnmount(){X._activeOverlays.modify((e=>{const t=new Set(e);return t.delete(this._overlayIndex),t})),this._subs.forEach((e=>e.unsubscribe())),this._subs=[]}render(){return n.createElement(s.F.Fragment,null,this._visibilityState.view((e=>{switch(e){case"visible":case"fadeOut":return n.createElement(s.F.div,Object.assign({role:"overlay-wrapper"},(0,o.Sh)(this.props.animate?this._getAnimatedTypeClass(e):this._getTypeClass(e),this._getPositionType(this.props.positionType)),{onClick:()=>{this.props.preventClose||this.props.visible.set(!1),this.props.onClose&&this.props.onClose()},onTransitionEnd:()=>{"fadeOut"===e&&this._visibilityState.set("hidden")}}),n.createElement(s.F.div,Object.assign({},(0,o.Sh)(this.props.animate&&this._getContentClass(e))),n.createElement("div",{className:he.scroll,role:"scrollbar-modal"},n.createElement(s.F.div,Object.assign({},(0,o.Sh)(this._getAlignmentClass(),this._getSmallResolutionClass())),this.props.children))));case"hidden":return null;default:return(0,c.vE)(e)}})))}_getSmallResolutionClass(){switch(this.props.smallResolution){case"resize":return he.wrapperResize;case"cut":default:return""}}_getAlignmentClass(){switch(this.props.alignment){case"top-center":return he.wrapperTopCenter;case"bottom-right":return he.wrapperBottomRight;case"none":return"";case"center":default:return he.wrapperCenter}}_getTypeClass(e){if("visible"!==e)return he.wrapperTransparent;switch(this.props.overlayType){case"light":return he.wrapperLight;case"transparent":return he.wrapperTransparent;case"dark":default:return he.wrapperDark}}_getPositionType(e){switch(e){case"absolute":return he.wrapperAbsolute;case"fixed":return he.wrapperFixed;default:return(0,c.vE)(e)}}_getAnimatedTypeClass(e){const t="visible"===e;switch(this.props.overlayType){case"light":return G.f.rafSequence(t?[he.wrapperTransparent,he.wrapperLight]:[he.wrapperLight,he.wrapperTransparent],!0);case"transparent":return D.of(he.wrapperTransparent);case"dark":default:return G.f.rafSequence(t?[he.wrapperTransparent,he.wrapperDark]:[he.wrapperDark,he.wrapperTransparent],!0)}}_getContentClass(e){const{contentFaded:t,content:r}=this.props.theme||he,n="visible"===e?[t,r]:[r,t];return G.f.rafSequence(n,!0)}}X.defaultProps={visible:a.h.create(!0)},X._activeOverlays=a.h.create(new Set),X.activeCount=X._activeOverlays.view((e=>e.size)),X._index=0;const Z=e=>n.createElement(X,Object.assign({},e,{visible:a.h.create(!0),preventClose:!0}),e.children),J=e=>n.createElement(X,Object.assign({},e,{visible:a.h.create(!0),preventClose:!1}),e.children);function K({children:e,className:t,close:r}){return n.createElement(s.F.div,Object.assign({},(0,o.Sh)(he.modal,t),{onClick:z.UW(i.Q1)}),e,r?n.createElement("div",{className:he.closeIconButtonContainer},n.createElement(h.zx,{name:"modal-close",onClick:r},n.createElement(g.JO.Close,{className:he.closeIcon,width:13}))):null)}!function(e){e.Header=({children:e,className:t})=>n.createElement(s.F.header,Object.assign({},(0,o.Sh)(he.header,t)),e),e.Body=({children:e,className:t,wrapperClassName:r,name:i})=>{const{ref:a,onMount:l}=Y.P.useElWatcher();return n.createElement(j,Object.assign({name:i},(0,o.Sh)(he.scrollBody,r),{showWhenScrollable:!0,update:a.pipe(V.oA,k.w(w.YC),_.h(C.PU))}),n.createElement(s.F.div,Object.assign({},(0,o.Sh)(he.body,t),{mount:l}),e))},e.Footer=({children:e,className:t})=>n.createElement(s.F.div,Object.assign({},(0,o.Sh)(he.footer,t))," ",e," ")}(K||(K={}));const Q={top:0,left:0,display:"flex",flexDirection:"column",overflow:"hidden",width:d.u.percent(100),height:d.u.percent(100),transition:`background ${d.u.seconds(.2)}`,pointerEvents:"auto"},ee={position:"fixed",zIndex:m.DY},te={margin:`${d.u.rem(-.5)} auto auto`},re={background:"rgba(255, 255, 255, .7)"},ne={background:"rgba(100, 107, 131, .4)"},ie={position:"absolute",top:d.u.rem(.5),right:d.u.rem(.5)},ae={stroke:p.FW},se={position:"relative",display:"flex",flexDirection:"column",overflow:"hidden",maxHeight:"90vh",borderRadius:d.u.rem(m.Jr),boxShadow:p.Re},oe={position:"relative",overflow:"hidden",padding:`${d.u.rem(2.5)} ${d.u.rem(2)} ${d.u.rem(1)}`,borderTopLeftRadius:d.u.rem(m.Jr),borderTopRightRadius:d.u.rem(m.Jr),backgroundColor:u.Il.CoreNeutral1},le={position:"absolute",top:d.u.px(10),right:"@top"},ce={padding:d.u.rem(2),backgroundColor:u.Il.CoreNeutral0},ue={display:"flex",padding:`0 ${d.u.rem(2)}`,height:d.u.rem(4),border:"0 solid transparent",borderWidth:"0 1px",borderBottomRightRadius:d.u.rem(m.Jr),borderBottomLeftRadius:d.u.rem(m.Jr),backgroundColor:u.Il.CoreNeutral1,alignItems:"center",justifyContent:"flex-end",$nest:{"& > *:not(:last-child)":{marginRight:d.u.rem(.5)}}},de={transitionDuration:d.u.seconds(.2),transitionProperty:"opacity, transform",transformOrigin:"center"},pe={position:"relative",display:"flex",padding:`${d.u.rem(.5)} 0`,width:"100vw",height:"100vh"},me={$nest:{[`@media (${m.pZ})`]:{margin:`${d.u.rem(2)} auto auto`}}},he=d.u.prefixedStylesheet("modal",{wrapper:[Q],wrapperFixed:[ee],wrapperAbsolute:[{position:"absolute"}],wrapperTopCenter:[te],wrapperBottomRight:[{margin:"auto 0 0 auto"}],wrapperCenter:[{margin:"auto"}],wrapperLight:[Q,re],wrapperDark:[Q,ne],wrapperTransparent:[Q,{overflow:"hidden",background:"transparent"}],closeIconButtonContainer:[ie],closeIcon:[ae],modal:[se],header:[oe],closeBtn:[le],body:[ce],scrollBody:[{position:"relative",flexGrow:1}],footer:[ue],contentBase:[de],contentFaded:[de,{opacity:0,transform:"scale(.8)"}],content:[de,{opacity:1,transform:"none"}],scroll:[pe],wrapperResize:[me]})},81301:(e,t,r)=>{"use strict";r.d(t,{dC:()=>n,Iy:()=>i,EQ:()=>g});var n,i,a,s=r(57050),o=r(38983),l=r(5114),c=r(66310),u=r(18625),d=r(95300),p=r(76974),m=r(2834),h=r(40151);!function(e){e.SetGoals="SetGoals",e.Performance="Performance",e.MutedAlerts="MutedAlerts"}(n||(n={})),function(e){e.setGoals=e=>({type:n.SetGoals,source:e}),e.performance={type:n.Performance},e.mutedAlerts={type:n.MutedAlerts}}(i||(i={}));class g{constructor(e){this._modalViews=e,this.state=o.h.create(l.none),this._modalFactoryCache=new Map}show(e){return this.preload(e).pipe(c.w((e=>this.showPreloaded(e))))}showPreloaded(e){return u.P((()=>{const t=new d.X("opened");return this.state.set(l.some(e({onClose:()=>{this.state.set(l.none),t.next("closed"),t.complete()}}))),t}))}preload(e){const t=JSON.stringify(e);if(this._modalFactoryCache.has(t)){const e=this._modalFactoryCache.get(t);return p.of(e)}return u.P((()=>this._modalViews.load(e))).pipe(m.b((e=>{this._modalFactoryCache.set(t,e)})))}hideAll(){this.state.set(l.none)}}!function(e){e.Mock=class{constructor(){this.state=o.h.create(l.none),this.hideAll=s.Q1}show(e){return h.E}showPreloaded(e){return h.E}preload(e){return h.E}}}(a||(a={}))},47861:(e,t,r)=>{"use strict";r.d(t,{i:()=>g});var n=r(27378);if(75==r.j)var i=r(5739);if(75==r.j)var a=r(8125);var s=r(63969),o=r(40219);if(75==r.j)var l=r(57120);if(75==r.j)var c=r(2844);if(75==r.j)var u=r(28043);if(75==r.j)var d=r(77176);if(75==r.j)var p=r(14522);if(75==r.j)var m=r(5802);if(75==r.j)var h=r(50790);const g=({manager:e,views:t,onNotificationClose:r=a.ZT,theme:s={}})=>{const o=function(e,t,r={}){return i=>{const a=e[i.type],s=e=>()=>{i.actions.next(e)};return i.metadata.viewType===m.P.ViewType.standard?n.createElement(h.DI.Wrapper,{key:i.id,notification:i,onClose:()=>{i.actions.next("closedByUser"),t(i)},theme:r},a(i,s)):n.createElement(n.Fragment,{key:i.id},a(i,s))}}(t,r,s.view),g=void 0!==s.grid?Object.assign({},I,s.grid):I,y=e.state.view((e=>e.filter(f(m.P.Position.bottomLeft)))),v=e.state.view((e=>e.filter(f(m.P.Position.bottomRight)))),b=e.state.view((e=>e.filter(f(m.P.Position.top))));return n.createElement(i.F.div,{className:g.container},c.aj(b,v,b,(e=>e.some(p._.isHighPriority))).pipe(u.x(),d.U((e=>e&&n.createElement("div",{className:g.overlay},n.createElement(l.aV,{positionType:"absolute",key:"notificationOverlay",preventClose:!0,overlayType:"light",alignment:"top-center",animate:!0,theme:{content:S.overlayContent,contentFaded:S.overlayContentFaded}}))))),n.createElement(i.F.div,{className:g.bottomLeft},y.view((e=>e.map(o)))),n.createElement(i.F.div,{className:g.bottomRight},v.view((e=>e.map(o)))),n.createElement(i.F.div,{className:g.top},b.view((e=>e.map(o)))))};function f(e){return t=>t.metadata.position===e}const y={position:"fixed",top:0,left:0,zIndex:o.nt,width:s.u.percent(100),height:s.u.percent(100),pointerEvents:"none"},v={position:"absolute",zIndex:o.nt,display:"flex",flexDirection:"column",width:s.u.rem(27),pointerEvents:"auto",alignItems:"flex-end"},b={right:s.u.rem(o.Ig),bottom:s.u.rem(1.5)},w={bottom:s.u.rem(1.5),left:s.u.rem(2)},C={transition:"transform .1s",transformOrigin:"center"},S=s.u.stylesheet({notificationContainer:[y],notificationWrapper:[v],bottomRightNotificationWrapper:[v,b],bottomLeftNotificationWrapper:[v,w],topNotificationWrapper:[v,{top:0,right:0,left:0,margin:"0 auto"}],overlayContentBase:[C],overlayContent:[C,{transform:"none"}],overlayContentFaded:[C,{transform:"scale(.95)"}]}),I={container:S.notificationContainer,bottomLeft:S.bottomLeftNotificationWrapper,bottomRight:S.bottomRightNotificationWrapper,top:S.topNotificationWrapper}},41966:(e,t,r)=>{"use strict";r.d(t,{r:()=>n});var n,i=r(32952);!function(e){e.createBuilder=function(){return{build:(e,r)=>{const n=t();return{make:(t,a)=>({metadata:e,data:r,args:a,id:n,type:t,actions:new i.xQ})}}}};const t=(()=>{let e=1;return()=>e++})()}(n||(n={}))},14522:(e,t,r)=>{"use strict";r.d(t,{_:()=>n});var n,i=r(5802);!function(e){e.isHighPriority=function(e){return e.metadata.priority>i.P.Priority.average},e.isCloseAction=function(e){return"timeout"===e||"closedByUser"===e||"closedByNotificationWithMorePriority"===e||"closedByMaxNotificationOnScreen"===e}}(n||(n={}))},61813:(e,t,r)=>{"use strict";if(r.d(t,{y:()=>w}),75==r.j)var n=r(8125);if(75==r.j)var i=r(81531);if(75==r.j)var a=r(46680);if(75==r.j)var s=r(18625);if(75==r.j)var o=r(80900);if(75==r.j)var l=r(17343);if(75==r.j)var c=r(40151);if(75==r.j)var u=r(95093);if(75==r.j)var d=r(2768);if(75==r.j)var p=r(85985);if(75==r.j)var m=r(8473);if(75==r.j)var h=r(50628);if(75==r.j)var g=r(2834);if(75==r.j)var f=r(9223);if(75==r.j)var y=r(38194);if(75==r.j)var v=r(14522);if(75==r.j)var b=r(5802);class w{constructor(e,t,r,n){this.state=e,this._factory=t,this._maxNotificationsOnScreen=r,this._defaultTimeout=n,this._log=i.C8.Logging.getLogger("notificationsManager")}enqueue(e,t){const r=this._factory[e].make(e,t);return s.P((()=>{const t=r.metadata.timeout!==b.P.TimeoutDisabled?o.H(r.metadata.timeout===b.P.DefaultTimeout?this._defaultTimeout:r.metadata.timeout).pipe(l.h("timeout")):c.E;this.state.modify((e=>{const t=e.filter(((t,n)=>t.metadata.priority<r.metadata.priority?(this._log.debug(`closing ${t.type} notification, ${r.type} have higher priority`),t.actions.next("closedByNotificationWithMorePriority"),!1):t.id!==r.id&&(!(0===n&&e.length>=this._maxNotificationsOnScreen)||(this._log.debug(`closing ${t.type} notification, more than ${this._maxNotificationsOnScreen} notification on the screen`),t.actions.next("closedByMaxNotificationOnScreen"),!1))));return t.push(r),t}));const i=r.actions.pipe(u.T(t.pipe(d.R(r.actions.pipe(p.h(v._.isCloseAction))))));return i.pipe(m.o((0,n.ff)(v._.isCloseAction)),u.T(i.pipe(h.P(v._.isCloseAction))),g.b((t=>{this._log.log(v._.isHighPriority(r)?a.i.WARN:a.i.INFO,`Notification ${e} is ${t}`)})),f.x((()=>{this.state.modify((e=>e.filter((e=>e.id!==r.id))))})),y.B())}))}}},5802:(e,t,r)=>{"use strict";var n;r.d(t,{P:()=>n}),function(e){let t,r,n,i;!function(e){e.sparkles="sparkles",e.priority="priority"}(t=e.Icon||(e.Icon={})),function(e){e[e.lowest=0]="lowest",e[e.low=1]="low",e[e.average=2]="average",e[e.high=3]="high",e[e.highest=4]="highest"}(r=e.Priority||(e.Priority={})),function(e){e.top="top",e.bottomLeft="bottomLeft",e.bottomRight="bottomRight"}(n=e.Position||(e.Position={})),function(e){e.standard="standard",e.custom="custom"}(i=e.ViewType||(e.ViewType={})),e.DefaultTimeout="DefaultTimeout",e.TimeoutDisabled="TimeoutDisabled"}(n||(n={}))},50790:(e,t,r)=>{"use strict";r.d(t,{DI:()=>x,SJ:()=>A});var n=r(27378),i=r(12187),a=r(22232),s=r(90351),o=r(63969),l=r(24588),c=r(40219),u=r(7046),d=r(94793),p=r(3656),m=r(5802);const h={position:"relative",width:o.u.percent(100)},g={position:"relative",margin:`0 0 ${o.u.rem(.5)}`},f={display:"flex",boxSizing:"border-box",padding:`${o.u.rem(1)} ${o.u.rem(2)} ${o.u.rem(1)} ${o.u.rem(.75)}`,width:o.u.percent(100),borderRadius:o.u.rem(c.fx),background:s.Il.BackgroundNotification,color:s.Il.CoreNeutral0,textAlign:"left",letterSpacing:0,alignItems:"flex-start"},y={width:o.u.percent(100)},v={display:"inline-block",width:o.u.percent(100)},b={margin:`${o.u.rem(-.5)} ${o.u.rem(.75)} ${o.u.rem(-.5)} 0`},w={position:"absolute",top:0,right:0,marginTop:o.u.rem(.5),marginRight:o.u.rem(.4),marginLeft:o.u.rem(.5)},C={stroke:l.FW},S={margin:`0 0 ${o.u.rem(.5)}`,color:s.Il.CoreNeutral0,wordBreak:"break-word",fontWeight:"bold",fontSize:o.u.rem(s.xv.BodySize),lineHeight:o.u.rem(1.25)},I={marginTop:o.u.rem(-.1),marginBottom:o.u.rem(-.25),color:s.Il.CoreNeutral0,fontSize:o.u.rem(s.xv.BodySize),lineHeight:o.u.rem(1.25)},k=o.u.prefixedStylesheet("notifications",{wrapper:[h],notification:[g],flexibleNotification:[g,{display:"flex",width:"auto"}],contentWrapper:[f],miniContentWrapper:[f,{position:"relative",width:"auto"}],fullWidthNotification:[g,f,y],content:[v],miniContent:[{flex:1}],alertIcon:[b],closeIconWrapper:[w],closeIcon:[C],header:[S],description:[I]});var x,A;!function(e){e.Wrapper=({notification:t,onClose:i,children:a,theme:s={}})=>{n.useEffect((()=>t.actions.next("shown")),[]);const o={wrapper:s.wrapper||r.wrapper,content:void 0!==s.content?Object.assign({},r.content,s.content):r.content};return n.createElement("div",{className:o.wrapper},n.createElement(e.Base,{metadata:t.metadata,onClose:i,theme:o.content},a))},e.Base=({metadata:r,onClose:i,theme:a,children:s})=>n.createElement("div",{className:a.wrapper},t(r,a.icon),n.createElement("div",{className:a.content},s),!function(e){return e.priority===m.P.Priority.high||e.priority===m.P.Priority.highest}(r)&&n.createElement(e.CloseButton,{onClick:i,className:a.close}));const t=(t,r)=>{switch(t.icon){case m.P.Icon.sparkles:return n.createElement(d.JO.Sparkles,{className:r});case void 0:case m.P.Icon.priority:return n.createElement(e.PriorityIcon,{priority:t.priority,className:r});default:return(0,a.vE)(t.icon)}};e.AdHoc=({title:t,children:a,className:s,onClose:o})=>n.createElement("div",Object.assign({},(0,i.Sh)(r.content.wrapper,s)),n.createElement("div",{className:r.content.content},n.createElement(e.TitledContent,{title:t},a)),n.createElement(e.CloseButton,{onClick:o,className:r.content.close})),e.PriorityIcon=({priority:e,className:t})=>{switch(e){case m.P.Priority.lowest:case m.P.Priority.low:return n.createElement(d.JO.NotificationInfo,{className:t});case m.P.Priority.average:return n.createElement(d.JO.NotificationWarning,{className:t});case m.P.Priority.high:case m.P.Priority.highest:return n.createElement(d.JO.NotificationError,{className:t});default:return(0,a.vE)(e)}},e.CloseButton=({onClick:e,className:t})=>n.createElement(u.zx,{name:"closeNotification",className:t,onClick:e},n.createElement(d.JO.Close,{className:k.closeIcon,width:12})),e.TitledContent=({title:t,children:r})=>r?n.createElement(n.Fragment,null,n.createElement(p.P1,{className:k.header},t),n.createElement(e.Content,null,r)):n.createElement(p.P1,{className:k.description},t),e.Content=({children:e})=>n.createElement(p.XY,{className:k.description},e);const r={wrapper:k.wrapper,content:{wrapper:k.fullWidthNotification,icon:k.alertIcon,content:k.content,close:k.closeIconWrapper}}}(x||(x={})),function(e){e.Wrapper=({notification:e,onClose:t,children:r})=>(n.useEffect((()=>e.actions.next("shown")),[]),n.createElement("div",{className:k.flexibleNotification},n.createElement(x.Base,{metadata:e.metadata,onClose:t,theme:{wrapper:k.miniContentWrapper,icon:k.alertIcon,content:k.miniContent,close:k.closeIconWrapper}},r)))}(A||(A={}))},70920:(e,t,r)=>{"use strict";r.d(t,{t:()=>C});var n,i=r(59312),a=r(27378),s=r(57050),o=r(40327),l=r(5739),c=r(12187),u=r(77176),d=r(2844),p=r(28043),m=r(71249),h=r(45614),g=r(32426),f=r(19962),y=r(22232),v=r(95574),b=r(5114),w=r(95195);!function(e){var t,r,n;function a(e,r){var n=r.position,a=r.point,s={width:Math.trunc(e.width),height:Math.trunc(e.height)};return f.UL.validate(t.match((function(){return(0,i.pi)({top:a.y,right:a.x,bottom:a.y+s.height,left:a.x-s.width},s)}),(function(){return(0,i.pi)({top:a.y-s.height,right:a.x,bottom:a.y,left:a.x-s.width},s)}),(function(){return(0,i.pi)({top:a.y-s.height,right:a.x+s.width,bottom:a.y,left:a.x},s)}),(function(){return(0,i.pi)({top:a.y,right:a.x+s.width,bottom:a.y+s.height,left:a.x},s)}))(n))}function s(t){return e.topLeft(f.UL.Point.normalize({x:t.left,y:t.top}))}!function(e){e.topLeft="topLeft",e.topRight="topRight",e.bottomRight="bottomRight",e.bottomLeft="bottomLeft"}(t=e.Position||(e.Position={})),function(e){e.match=function(t,r,n,i){return function(a){switch(a){case e.topRight:return t();case e.bottomRight:return r();case e.bottomLeft:return n();case e.topLeft:return i();default:return(0,y.vE)(a)}}}}(t=e.Position||(e.Position={})),e.topLeft=function(e){return{position:t.topLeft,point:f.UL.Point.normalize(e)}},e.topRight=function(e){return{position:t.topRight,point:f.UL.Point.normalize(e)}},e.bottomRight=function(e){return{position:t.bottomRight,point:f.UL.Point.normalize(e)}},e.bottomLeft=function(e){return{position:t.bottomLeft,point:f.UL.Point.normalize(e)}},e.relativeTo=function(e,t){return{position:e.position,point:f.UL.Point.relativeTo(e.point,t)}},e.empty=e.topLeft(f.UL.Point.empty),e.toRect=a,e.fromRect=s,e.inRect=function(e,t){var r=t.point;return f.UL.hasPoint(e,r)},e.toCss=function(e){var r=e.position,n=e.point;return t.match((function(){return{top:n.y,right:n.x}}),(function(){return{right:n.x,bottom:n.y}}),(function(){return{bottom:n.y,left:n.x}}),(function(){return{top:n.y,left:n.x}}))(r)},function(t){t.create=function(e,t){return(0,y.kG)(e.point.x===t.point.x||e.point.y===t.point.y,"can not form Zone without a common dimension",(function(){return JSON.stringify({a:e,b:t})})),[e,t]},t.bySide=function(r,n){return f.UL.Side.match((function(){return t.create(e.bottomLeft({x:Math.ceil(n.left),y:Math.ceil(n.top)}),e.bottomRight({x:Math.floor(n.right),y:Math.ceil(n.top)}))}),(function(){return t.create(e.topLeft({x:Math.floor(n.right),y:Math.ceil(n.top)}),e.bottomLeft({x:Math.floor(n.right),y:Math.floor(n.bottom)}))}),(function(){return t.create(e.topLeft({x:Math.ceil(n.left),y:Math.floor(n.bottom)}),e.topRight({x:Math.floor(n.right),y:Math.floor(n.bottom)}))}),(function(){return t.create(e.topRight({x:Math.ceil(n.left),y:Math.ceil(n.top)}),e.bottomRight({x:Math.ceil(n.left),y:Math.floor(n.bottom)}))}))(r)}}(r=e.Zone||(e.Zone={})),function(e){e.byAxis=function(e,t){return h.sQ((0,g.getFirstSemigroup)(),m.IX)(f.UL.Axis.toSides(e).map((function(e){return[e,r.bySide(e,t)]})))}}(e.Variants||(e.Variants={})),function(t){function r(e,t){return(0,o.pipe)(f.UL.intersection(e,t),b.map((function(e){var r=e.width/t.width,n=e.height/t.height,i=(Number.isNaN(r)?0:r/2)+(Number.isNaN(n)?0:n/2);return(0,y.kG)(i>=0,"quality can not be negavite: "+i),(0,y.kG)(i<=1,"quality can be higher than 1: "+i),i})))}t.empty={quality:0,point:e.empty},t.qualityOfIntersection=r,t.byViewport=function(e,t){return{quality:(0,o.pipe)(r(e,t),b.getOrElse((function(){return 0})))+(0,o.pipe)(f.UL.scale(2,t),w.tS(f.UL.normalize),b.fromEither,b.chain((function(t){return r(e,t)})),b.getOrElse((function(){return 0}))),point:s(t)}},t.fromZone=function(e,r,n){return(0,o.pipe)(m.IX.traverse(w.wE)(n,(function(e){return a(r,e)})),w.tS((function(e){var t=e[0],r=e[1];return f.UL.join(t,r)})),w.tS((function(e){return f.xu.placeIntoRect(r,e)})),w.UI((function(r){return r.map((function(r){return t.byViewport(e,r)}))})))}}(n=e.Qualified||(e.Qualified={})),function(e){e.build=function(e,t,r){return(0,o.pipe)(r,h.UI((function(r){return n.fromZone(e,t,r)})))}}(e.QualifiedVariants||(e.QualifiedVariants={})),function(e){var t;!function(e){e[e.left=0]="left",e[e.middle=1]="middle",e[e.right=2]="right",e[e.edges=20]="edges",e[e.any=210]="any"}(t=e.Placement||(e.Placement={})),e.takeBy=function(e,t){return function(r){return(0,o.pipe)(r,h.To({point:n.empty,side:e},(function(r,n,i){return(0,o.pipe)(i,w.UI((function(i){return i.filter((function(n,i){return t.toString().includes(i.toString())&&e===r})).reduce((function(e,t){return t.quality>e.point.quality?{point:t,side:r}:e}),n)})),v.MH)}))).point}},e.preferBy=function(e,t){return function(r){return(0,o.pipe)(r,h.To({point:n.empty,side:e},(function(r,n,i){return(0,o.pipe)(i,w.UI((function(i){return i.reduce((function(n,i,a){return i.quality>n.point.quality||i.quality===n.point.quality&&t.toString().includes(a.toString())&&e===r?{point:i,side:r}:n}),n)})),v.MH)}))).point}},e.preferTopMiddle=e.preferBy("top",t.middle),e.preferTopEdges=e.preferBy("top",t.edges)}(e.Selector||(e.Selector={}))}(n||(n={}));var C,S=r(83078),I=r(8125),k=r(90351),x=r(63969),A=r(41488),E=r(85255),T=r(98403);!function(e){let t;!function(e){e.toSelector=function(e){switch(e){case"top":case"topCenter":return{align:"top",selector:n.Selector.preferBy("top",n.Selector.Placement.middle)};case"topRight":return{align:"top",selector:n.Selector.preferBy("top",n.Selector.Placement.right)};case"topLeft":return{align:"top",selector:n.Selector.preferBy("top",n.Selector.Placement.left)};case"bottom":case"bottomCenter":return{align:"bottom",selector:n.Selector.preferBy("bottom",n.Selector.Placement.middle)};case"bottomRight":return{align:"bottom",selector:n.Selector.preferBy("bottom",n.Selector.Placement.right)};case"bottomLeft":return{align:"bottom",selector:n.Selector.preferBy("bottom",n.Selector.Placement.left)};case"left":return{align:"left",selector:n.Selector.preferBy("left",n.Selector.Placement.middle)};case"right":return{align:"right",selector:n.Selector.preferBy("right",n.Selector.Placement.middle)};case"auto":case"center":return{align:f.UL.Axis.vertical,selector:n.Selector.preferBy("top",n.Selector.Placement.middle)};default:return(0,y.vE)(e)}}}(t=e.Alignment||(e.Alignment={})),e.ByPoint=e=>{var{point:t,className:r}=e,s=(0,i._T)(e,["point","className"]);return a.createElement(l.F.div,Object.assign({role:"positioned-container",style:t.pipe(u.U(S.dH(n.toCss,{})))},(0,c.Sh)(F.wrapper,r,t.pipe(u.U((e=>b.isNone(e)?F.hidden:"")))),s))};const r=t=>{const{rect:r,onMount:i}=E.P.useRectWatcher(),o=T.Dx(t.rect),l=T.Dx(t.pinTargetRect),c=h(t.align),d=m(o,r,c,t.selector||n.Selector.preferTopMiddle,l,"relative"===t.position);return a.createElement(e.ByPoint,{mount:i,className:t.className,point:d.pipe(u.U(b.map((e=>e.tangentialPoint))))},t.withPin&&d.pipe(u.U((0,s.ls)(b.chain((e=>e.median)),b.map((t=>a.createElement(e.Pin,{point:t,key:"pin"}))),b.toNullable))),t.children)};e.ByAbsoluteRect=e=>a.createElement(r,Object.assign({},e,{position:"absolute"})),e.ByRelativeRect=e=>a.createElement(r,Object.assign({},e,{position:"relative"})),e.Pin=e=>{const t=T.Dx(e.point).pipe(u.U((e=>e.side)),u.U((e=>M[e]))),r=T.Dx(e.point).pipe(u.U((e=>e.point)),u.U((({x:e,y:t})=>({top:t,left:e}))));return a.createElement(l.F.i,Object.assign({role:"pin",style:r},(0,c.Sh)(t,M.wrapper)))};const m=(e,t,r,i,s,l)=>d.aj(e,a.useContext(A.l.Context).pipe(u.U((e=>e.rect))),t.pipe(p.x(b.getEq(f.xu.eq).equals)),s).pipe(u.U((([e,t,a,s])=>(0,o.pipe)(a,b.map((a=>{const c=n.QualifiedVariants.build(t,a,r(e));let u=i(c).point;const d=(0,o.pipe)(n.toRect(a,u),b.fromEither,b.chain((t=>(0,o.pipe)(f.UL.getMedian(e,t),b.map((e=>({anchorMedian:e,bodyRect:t})))))),b.chain((({anchorMedian:e,bodyRect:t})=>{if(s){const r=f.UL.stickToSide(f.UL.Side.invert(e.side),s)(t);return u=n.fromRect(r),(0,o.pipe)(f.UL.getMedian(s,r),b.map((({side:e,point:t})=>({side:e,point:f.UL.Point.relativeTo(t,r)}))))}return(0,o.pipe)(b.some(e),b.map((({side:e,point:r})=>({side:e,point:f.UL.Point.relativeTo(r,t)}))))})));return{tangentialPoint:n.relativeTo(u,l?e:t),median:d}})))))),h=(e=f.UL.Axis.both)=>(0,I.CI)(f.UL.Axis,e)?t=>n.Variants.byAxis(e,t):t=>({[e]:n.Zone.bySide(e,t)})}(C||(C={}));const _={position:"absolute",border:`${x.u.px(7)} solid ${k.Il.BackgroundTooltip}`,transform:`translate(${x.u.px(-7)}, ${x.u.px(-7)})`},L={borderTopColor:"transparent",borderRightColor:"transparent",borderLeftColor:"transparent",$nest:{"& + *":{transform:`translateY(${x.u.px(7)})`}}},R={borderTopColor:"transparent",borderRightColor:"transparent",borderBottomColor:"transparent",$nest:{"& + *":{transform:`translateX(${x.u.px(-7)})`}}},P={borderRightColor:"transparent",borderBottomColor:"transparent",borderLeftColor:"transparent",$nest:{"& + *":{transform:`translateY(${x.u.px(-7)})`}}},O={borderTopColor:"transparent",borderBottomColor:"transparent",borderLeftColor:"transparent",$nest:{"& + *":{transform:`translateX(${x.u.px(7)})`}}},M=x.u.stylesheet({wrapper:[_],top:[L],right:[R],bottom:[P],left:[O]}),F=x.u.stylesheet({hidden:[{visibility:"hidden",opacity:0}],wrapper:[{position:"absolute",transition:"opacity .2s"}]})},63847:(e,t,r)=>{"use strict";r.d(t,{P:()=>v});var n=r(27378),i=r(12187),a=r(22232),s=r(19962),o=r(90351),l=r(63969),c=r(24588),u=r(71284),d=r(94793);const p=2*Math.PI*32,m=36,h="#f1f2fa",g="#fff",f=(e,t,r)=>e<t?t:e>r?r:e,y=e=>{switch(e){case v.IconSize.pdf:return 110;case v.IconSize.normal:return 52;case v.IconSize.outcome:return 32;case v.IconSize.small:return 24;case v.IconSize.extraSmall:return 16;default:return(0,a.vE)(e)}};class v extends n.Component{render(){const{percentage:e,aimValue:t=100,colorType:r=v.ColorType.logan,fontSize:o=v.FontSize.normal,iconSize:l=v.IconSize.normal,description:c,theme:b=S}=this.props,w=[n.createElement("circle",{key:"circle",id:"circle",cx:m,cy:m,r:32,fill:"none"})],C=(e=>{switch(e){case v.FontSize.normal:return 32;case v.FontSize.small:return 24;default:return(0,a.vE)(e)}})(o),I=(e=>{switch(e){case v.IconSize.pdf:case v.IconSize.normal:case v.IconSize.outcome:return 5;case v.IconSize.small:return 3;case v.IconSize.extraSmall:return 10;default:return(0,a.vE)(e)}})(l),k=f(e,0,100),x=f(t,k,100),A=k*p/100,E=x*p/100,T=360*I/p,_=k?p-A-2*I:p;let L,R,P,O,M;const F=(e=>{switch(e){case v.ColorType.eggBlue:return{type:"gradient",value:{coordinates:{x1:"0%",y1:"50%",x2:"50%",y2:"50%"},start:"#0bc7c3",end:"#0fd5bf"},background:h,outline:g};case v.ColorType.dandelion:return{type:"gradient",value:{coordinates:{x1:"50%",y1:"0%",x2:"35%",y2:"100%"},start:"#ffde66",end:"#ffc148"},background:h,outline:g};case v.ColorType.radicalRed:return{type:"gradient",value:{coordinates:{x1:"50%",y1:"50%",x2:"40%",y2:"100%"},start:"#ff4562",end:"#ff153e"},background:h,outline:g};case v.ColorType.lightVisteria:return{type:"gradient",value:{coordinates:{x1:"50%",y1:"0%",x2:"50%",y2:"100%"},start:"#e191e2",end:"#c770c8"},background:h,outline:g};case v.ColorType.royalBlue:return{type:"gradient",value:{coordinates:{x1:"17%",y1:"15%",x2:"50%",y2:"100%"},start:"#2a42ef",end:"#6391ff"},background:h,outline:g};case v.ColorType.logan:return{type:"plain",value:"#a6adc9",background:h,outline:g};case v.ColorType.electricViolet:return{type:"plain",value:"#913dcc",background:"#eed6ff"};case v.ColorType.crimson:return{type:"plain",value:"#ea1537",background:"#ffccd5"};case v.ColorType.blueRibbon:return{type:"plain",value:"#1a57ff",background:"#cdf"};case v.ColorType.green:return{type:"plain",value:"#15c39a",background:"#dcf6f6"};case v.ColorType.lightBlue:return{type:"plain",value:"#00bbcc",background:"#ccfbff"};case v.ColorType.orange:return{type:"plain",value:"#ffa600",background:"#fee8b4"};case v.ColorType.neoBlue:return{type:"plain",value:"#4A6EE0",background:"#DBEBFF"};case v.ColorType.white:return{type:"plain",value:"#fff",background:"#fff",backgroundOpacity:.2};default:return(0,a.vE)(e)}})(r);if("plain"===F.type)L=F.value,R=L,P=F.outline,O=F.background,M=void 0===F.backgroundOpacity?1:F.backgroundOpacity;else{const e=F.value;this._gradientId=this._gradientId||"pb-gradient-"+v._nextGradientId++,w.push(n.createElement("linearGradient",Object.assign({id:this._gradientId,key:this._gradientId,gradientUnits:"userSpaceOnUse"},e.coordinates),n.createElement("stop",{stopColor:e.start,offset:"0%"}),n.createElement("stop",{stopColor:e.end,offset:"100%"}))),L=`url(#${this._gradientId})`,R="#2b2d38",P=F.outline,O=F.background,M=void 0===F.backgroundOpacity?1:F.backgroundOpacity}return n.createElement(u.a.Context.Consumer,null,(e=>n.createElement(d.a1,Object.assign({},(0,i.Sh)(S.iconWrapper,b.radialProgressBar),{width:y(l),viewBox:"0 0 72 72"}),n.createElement("defs",null,w),n.createElement("g",null,n.createElement("use",{className:S.valueCircle,stroke:k>=94&&P?P:O,strokeOpacity:M,strokeWidth:I,strokeDasharray:p,strokeDashoffset:p-E,transform:"rotate(-90 36 36)",strokeLinecap:"round",xlinkHref:"#circle"}),P&&n.createElement("use",{className:S.valueCircle,stroke:P,strokeWidth:I,strokeDasharray:p,strokeDashoffset:_,transform:`rotate(${-90-T} 36 36)`,strokeLinecap:"round",xlinkHref:"#circle"}),n.createElement("use",{className:S.valueCircle,stroke:L,strokeDasharray:p,strokeDashoffset:p-A,strokeLinecap:"round",transform:"rotate(-90 36 36)",strokeWidth:I,xlinkHref:"#circle"}),n.createElement("text",Object.assign({className:b.radialProgressText,y:"38",x:"36",fill:R,fontSize:C,fontStyle:"normal",textAnchor:"middle"},s.h5(e.has(u.a.Flag.supportsSVGDominantBaseline))),k),c&&n.createElement("text",{className:b.radialProgressDescription,fill:R,x:"50%",y:"80%",fontStyle:"normal",textAnchor:"middle"},c)))))}}v._nextGradientId=0,function(e){let t,r,n;!function(e){e.eggBlue="eggBlue",e.dandelion="dandelion",e.radicalRed="radicalRed",e.lightVisteria="lightVisteria",e.royalBlue="royalBlue",e.logan="logan",e.electricViolet="electricViolet",e.crimson="crimson",e.blueRibbon="blueRibbon",e.green="green",e.lightBlue="lightBlue",e.orange="orange",e.white="white",e.neoBlue="neoBlue"}(t=e.ColorType||(e.ColorType={})),function(e){e.normal="normal",e.small="small"}(r=e.FontSize||(e.FontSize={})),function(e){e.normal="normal",e.small="small",e.extraSmall="extraSmall",e.outcome="outcome",e.pdf="pdf"}(n=e.IconSize||(e.IconSize={}))}(v||(v={}));const b={width:l.u.percent(100),height:l.u.percent(100),fontWeight:"bold",fill:o.Il.CoreNeutral90},w={fontSize:l.u.rem(2),fill:o.Il.CoreNeutral90},C={fontWeight:"normal",fontSize:l.u.px(11),fill:c.UE},S=l.u.stylesheet({radialProgressBar:[b],radialProgressText:[w],radialProgressDescription:[C],valueCircle:[{transition:"stroke-dashoffset .5s"}],iconWrapper:[{stroke:"none",fill:"none",$nest:{"&[data-hovered='true']":{stroke:"none",fill:"none"}}}]})},42329:(e,t,r)=>{"use strict";r.d(t,{$:()=>p});var n=r(59312),i=r(27378),a=r(5739),s=r(12187),o=r(22232),l=r(90351),c=r(63969),u=r(24588),d=r(98403);function p(e){var{wrapperClassName:t,variation:r,isIdle:s,ref:o}=e,l=(0,n._T)(e,["wrapperClassName","variation","isIdle","ref"]);return i.createElement(a.F.span,{role:"spinner",className:t},d.ab(r,(e=>i.createElement(p.Svg,Object.assign({},l,{type:e,isIdle:s})))))}!function(e){e.getClassName=e=>t=>{switch(t){case"red":return e.red;case"green":return e.green;case"blue":return e.blue;case"white":return e.white;case"violet":return e.violet;case"yellow":return e.yellow;case"orange":return e.orange;case"gray":return e.gray;case"cyan":return e.cyan;default:return(0,o.vE)(t)}},e.Svg=t=>{const{className:r,size:a=64,strokeWidth:l=2,type:c,name:u,isIdle:d}=t,p=(0,n._T)(t,["className","size","strokeWidth","type","name","isIdle"]),m=i.useRef(null),h=i.useRef(null);return i.useEffect((()=>((0,o.kG)(null!==m.current,"groupEl should be already created"),h.current=m.current.animate({transform:["rotate(0deg)","rotate(360deg)"]},{duration:2e3,easing:"linear",fill:"forwards",iterations:1/0}),()=>h.current.cancel())),[]),i.useEffect((()=>{(0,o.kG)(null!==h.current,"groupAnimation should be already created");const e=h.current;e.play&&(d?e.pause():"running"!==e.playState&&e.play())})),i.createElement("svg",Object.assign({"data-role":u},(0,s.Sh)(r),{viewBox:"25 25 50 50",width:a,height:a},p),i.createElement("g",{transform:"translate(50 50)"},i.createElement("g",{ref:m},i.createElement("circle",Object.assign({},(0,s.Sh)(A.path,d&&g,e.getClassName(A)(c)),{cx:"50",cy:"50",r:"20",fill:"none",transform:"translate(-50 -50)",strokeWidth:l,strokeMiterlimit:"10"})))))}}(p||(p={}));const m=200,h=c.u.keyframes({"0%":{strokeDasharray:`1px, ${c.u.px(m)}`,strokeDashoffset:c.u.px(1)},"50%":{strokeDasharray:`89px, ${c.u.px(m)}`,strokeDashoffset:c.u.px(-35)},"100%":{strokeDasharray:`89px, ${c.u.px(m)}`,strokeDashoffset:c.u.px(-124)}}),g="spinnerIdle",f={animation:`${h} 2s ease-in-out infinite`,strokeDasharray:`1px, ${c.u.px(m)}`,strokeDashoffset:c.u.px(1),strokeLinecap:"round",$nest:{[`&.${g}`]:{animationIterationCount:0}}},y={stroke:l.Il.CoreRed50},v={stroke:l.Il.CoreGreen50},b={stroke:l.Il.CoreBlue50},w={stroke:l.Il.CoreNeutral0},C={stroke:u.lh},S={stroke:u.AX},I={stroke:l.Il.CoreYellow60},k={stroke:u.FW},x={stroke:l.Il.CoreCyan50},A=c.u.stylesheet({path:[f],red:[y],green:[v],blue:[b],white:[w],violet:[C],yellow:[S],orange:[I],gray:[k],cyan:[x]})},53187:(e,t,r)=>{"use strict";r.d(t,{X:()=>E});var n=r(27378),i=r(57050),a=r(19962),s=r(5114),o=r(90351),l=r(63969),c=r(40219),u=r(70920),d=r(40327),p=r(5739),m=r(25781),h=r(83078),g=r(10061),f=r(98403),y=r(49708),v=r(85985),b=r(41398),w=r(24209),C=r(17343),S=r(38194),I=r(598),k=r(50628),x=r(97528);class A extends n.Component{constructor(){super(...arguments),this._subs=[],this._outOfTarget=e=>t=>!a.UL.hasPoint(t.getBoundingClientRect(),e)}componentDidMount(){this._listenTooltipAppearance()}componentWillUnmount(){this._subs.forEach((e=>e.unsubscribe())),this._subs=[],this.context.hide()}render(){return n.createElement(p.F.div,{role:"tooltip"},this.context.state.view(this.props.children))}_listenTooltipAppearance(){const e=y.R(document,"keydown").pipe(v.h((e=>e.keyCode===m.R.ESC_CODE))),t=y.R(document,"mousedown").pipe(b.M(this.context.state),v.h((([e,t])=>(0,d.pipe)(t,s.map((e=>e.target)),s.filter((()=>a.pK(e.target))),h.wo(this._outOfTarget({x:e.clientX,y:e.clientY})))))),r=w.T(e,t,y.R(document,"scroll"),g.c.observe.pipe(v.h((e=>"show"===e.detail)))).pipe(C.h(f.PU),S.B());this._subs=[this.context.hasContent.pipe(v.h(Boolean),I.c(r.pipe(k.P()))).subscribe(this.context.hide),this.context.hasContent.pipe(v.h(Boolean),I.c(w.T(f.gw(!0,500),r.pipe(C.h(!1))).pipe(k.P())),v.h(Boolean)).subscribe(this.context.show)]}}A.contextType=x.G.Context;const E=()=>n.createElement(A,null,(0,i.ls)(s.map((e=>n.createElement(u.t.ByAbsoluteRect,Object.assign({rect:a.UL.fromEl(e.target),className:L.container},u.t.Alignment.toSelector(e.alignment),{withPin:!0}),n.createElement("div",{className:L.content},e.content)))),s.toNullable)),T={position:"fixed",zIndex:c.DY,pointerEvents:"none",$nest:{"@media print":{visibility:"hidden"}}},_={padding:`${l.u.rem(.25)} ${l.u.rem(1)}`,borderRadius:l.u.rem(c.fx),background:o.Il.BackgroundTooltip,color:o.Il.CoreNeutral1,textAlign:"center",whiteSpace:"nowrap",letterSpacing:l.u.px(.25),fontSize:l.u.rem(.75),lineHeight:l.u.rem(1)},L=l.u.stylesheet({container:[T],content:[_]})},6782:(e,t,r)=>{"use strict";var n;r.d(t,{Q:()=>n}),function(e){e.group=function(e){return Object.values(e.reduce(((e,{group:t,category:r,categoryHuman:n,cost:i})=>(void 0===e[r]&&(e[r]={group:t,category:r,categoryHuman:n,count:0}),e[r].count+=i,e)),{})).sort(((e,t)=>t.count-e.count))}}(n||(n={}))},20869:(e,t,r)=>{"use strict";r.d(t,{S:()=>Re});var n,i=r(29909),a=r(57050),s=r(40327),o=r(38983),l=r(80358),c=r(84966),u=r(67394),d=r(89943),p=r(81670),m=r(8125),h=r(22232),g=r(5114),f=r(95195),y=r(19429),v=r(81531),b=r(46680),w=r(4390),C=r(20321),S=r(88570),I=r(92843),k=r(68983),x=r(51653),A=r(21729),E=r(67434),T=r(2834),_=r(77176);!function(e){function t(t){return a=>(0,s.pipe)(t,I.v.foldMap(e.group)(n,i,r),(0,k.W)(e.group.concat)(a))}e.group=A.dM.group,e.eq=A.dM.eq,e.applyDiff=t,e.fromAlerts=function(e){const r=v.C8.Logging.getLogger("DocumentCounters");return e.pipe(E.R(((e,r)=>({alerts:r,counters:t(w.p.Diff.toRegistered(w.p.diff(e.alerts,r)))(e.counters)})),{alerts:w.p.empty,counters:A.dM.group.empty}),T.b((({counters:e})=>{A.dM.isValid(e)||r.error("Counters can not be below zero",A.dM.show.show(e))})),_.U((({counters:e})=>e)))};const r=e=>x.R.toUnmutedOnly(e.counters),n=(0,a.ls)(r,e.group.inverse),i=(t,i)=>e.group.concat(r(i),n(t))}(n||(n={}));var L,R=r(17771),P=r(45614),O=r(93756),M=r(90329),F=r(66896),N=r(26653),D=r(85985);!function(e){function t(e){const{left:t,right:r}=(0,s.pipe)(e,P.DZ(g.fromNullable),P.z7((e=>"GeneralScore"!==e)),P.Su(((e,t)=>{return{lensId:(r=e,r===F.R.SpecialId.Plagiarism?f.F2(F.R.SpecialId.Plagiarism):F.R.OutcomeId.toOutcomeId(r)),score:N.T.fromNumber(t)};var r})),P.tV((0,R.Y)(f.wE))),n=(0,s.pipe)(r,P.UI((({lensId:e,score:t})=>(0,a.bc)(e,t))),(e=>new Map(Object.values(e))));return(0,s.pipe)(O.Qp(g.fromPredicate((0,a.ff)(P.xb))(t),g.fromPredicate((0,a.ff)(M.xb))(n)),g.getOrElse((()=>O.F2(new Map))))}e.empty=new Map,e.eq=M.Eh(F.R.Id.ord,N.T.ord),e.fromCapi=function(e){return e.pipe(D.h((0,m.Kg)(l.h.is("finish"),l.h.is("async_check_finished"),l.h.is("feedback_ack"))),_.U((e=>e.outcomeScores)),D.h(m.$K),_.U(t),T.b(O.Vn((e=>{P.xb(e)||v.C8.Logging.getLogger("LensesScores").error("failed to parse capi scores",e)}))),D.h((0,m.Kg)(O.WP,O.tO)),_.U((e=>e.right)))}}(L||(L={}));var $,U=r(95983),B=r(98403),j=r(32952),W=r(38194),H=r(77843),G=r(93508),z=r(95093),Y=r(598),V=r(24209),q=r(50628),X=r(17343),Z=r(36919),J=r(51374),K=r(11064),Q=r(23330),ee=r(64015),te=r(25938),re=r(64450),ne=r(37492),ie=r(51072),ae=r(71249),se=r(26328),oe=r(70996),le=r(32426),ce=r(36991),ue=function(){function e(e){this._delta=e,this._cursor={index:0,operationOffset:0}}return e.prototype.next=function(e){(0,h.kG)(e>=0,"Length cannot be negative");var t=this._cursor.index;if(t>=this._delta.ops.length)return g.none;for(var r=ce.s.operationLength(this._delta.ops[t]),n=e-(r-this._cursor.operationOffset);n>0&&t<this._delta.ops.length-1;)t++,n-=r=ce.s.operationLength(this._delta.ops[t]);return n>0?(this._cursor={index:t+1,operationOffset:0},g.none):(this._cursor={index:t,operationOffset:r+n},g.some(this._delta.ops[t]))},e}();!function(e){const t=g.getMonoid((0,le.getObjectSemigroup)());e.getEnrichedWithFormattingDelta=e=>r=>{const n=new ue(e);return r.ops.reduce((([e,r],i)=>{const a=n.next(r);return ce.s.isInsert(i)?[e.insert(i.insert,g.toUndefined(t.concat(g.chain(ce.s.getAttrs)(a),ce.s.getAttrs(i)))),0]:[e.push(i),ce.s.operationLength(i)]}),[new re.i,1])[0]}}($||($={}));var de=r(40018);function pe(e){switch(e._raw.point){case"AllCapsBoldification":return u.JJ.fromAlternativeBoldified;case"Lists":return u.JJ.fromAlternativeListified;default:return u.JJ.fromAlternative}}const me=(0,m.HP)(v.C8.Logging.getLogger),he=(0,a.ls)(ee.UI((({beingAppliedAlert:e,undo:t,reversedAlternative:r})=>Q.Y3((()=>{const n={action:c.PZ.ACCEPTED,commit:()=>me("AlertManager.ops").debug(`_applyTransformJson(${e.toLiteString()}):commit()`),undo:t,reversedAlternative:e.registerReversedAlternative(r)},i=e.switchToApplied(n),a=de.xS.create(i.state.from,oe.h.create(e));return[i.id,a]}),f.KC))),Q.mg);function ge(e){const t=u.r3.compose(e.alternatives.map(i.UI((e=>e.alternative))),e.currentFullText);return(0,s.pipe)(ce.s.nonEmpty(t.composedDelta)?g.some(t):g.none,g.map((({composedDelta:t,reversedAlternatives:r})=>({changeWithFormatting:(0,s.pipe)(t,$.getEnrichedWithFormattingDelta(e.currentFullText),(t=>te.RI.delta(t,e.originalTextLength))),correctRevAlternatives:(0,s.pipe)(r,p.T.tapFailure((({rejected:e})=>v.C8.Logging.getLogger("AlertManager.ops").error("failed to generate reverse alternative",e))),p.T.foldSuccess(ae.UI((t=>({reversedAlternative:t.reversedAlternative,alternative:i.li(e.alternatives[t.alternativeIndex]),alert:e.alerts[t.alternativeIndex].alert})))))}))))}var fe;!function(e){const t=(0,a.ls)(((e,t)=>f.Y3((()=>de.xS.create(e,t)),f.KC)),f.UI((e=>(0,a.bc)(e[0].id,e))),K.of);e.prepare=K.tS((0,a.og)(t)),e.prepareFromAlert=Q.tS((e=>t(e.state.from,oe.h.create(e))))}(fe||(fe={}));function ye(e,t){return f.DT(e,(e=>{const r=new h.ej(t,e.toString());return v.C8.Logging.getLogger("AlertManager.ops").error(t,r),r}))}const ve=e=>ye(de.bZ.isNotDisposed,e);function be(e){return Q.tS(g.fold((0,a.a9)(Q.F2(void 0)),e))}class we{constructor(e,t,r,n){this._positionManager=e,this._getContent=t,this._capiFeedbackClient=r,this._alertsRepo=n,this._log=v.C8.Logging.getLogger("AlertManager.ops"),this._sendUpdate=e=>Q.Y3((()=>this.events.next({updated:new Map(e)})),f.KC),this._sendSingleUpdate=Q.tS((e=>this._sendUpdate([e]))),this._flushChanges=Q.Y3((()=>this.changes.next(te.RI.flush())),f.KC),this.changes=new j.xQ,this.events=new j.xQ,this.undoApplied=(e,t)=>{return(0,s.pipe)((()=>this._positionManager.getTextLength()),K.tS((t=>{const n={alertsToUpdate:[],reversedDelta:new re.i,undo:a.Q1},i=e.filter(de.bZ.isApplied).reduce(((e,t)=>{const n=t.state.undoable;return de.VD.isWithAlternative(n)?(0,s.pipe)(n.reversedAlternative,g.fold((()=>{c.wQ.withTransformJson(t._raw)&&this._log.error("No reversed delta registered for alert",{alert:t.toLiteString()}),r(e,t)}),(0,a.ls)((e=>e()),f.UI((e=>e.delta)),f.g_((e=>{this._log.error("Could not retrieve reversed delta",{e:e,alert:t.toLiteString()})}),(n=>{r(e,t),(0,s.pipe)(n,u.r3.fromRawDelta,(t=>t.rebase(e.reversedDelta)),g.fold((()=>{e.reversedDelta=e.reversedDelta.compose(n)}),(({delta:t})=>{e.reversedDelta=e.reversedDelta.compose(t)})))}))))):r(e,t),e}),n);return i.alertsToUpdate.length>0?(0,s.pipe)(Q.Y3((()=>{const e=(0,s.pipe)(i.reversedDelta,$.getEnrichedWithFormattingDelta(this._getContent()));this.changes.next(te.RI.delta(e,t))}),f.KC),Q.N(this._flushChanges),Q.N((0,s.pipe)(i.undo,K.UI(f.F2))),Q.a1((0,s.pipe)(i.alertsToUpdate,Q.mg,Q.tS(this._sendUpdate)))):Q.F2(void 0)})));function r(e,r){e.undo=(0,a.ls)(e.undo,r.state.undoable.undo),e.alertsToUpdate.push(fe.prepare((()=>[oe.h.create(r),oe.h.create(r.changeState(t===de.bZ.State.Applied.Method.ByCard?de.bZ.State.init:de.bZ.State.Removed.create(de.bZ.State.Removed.Reason.bulkAcceptUserResponse)))])))}},this._dismissBatch=(e,t)=>(0,s.pipe)(this._flushChanges,Q.a1((0,s.pipe)(e,ae.UI((0,a.ls)(K.of,K.UI(ve("Cannot send feedback for already disposed")),Q.tS((e=>this._applyFeedbackToAlert(e,c.PZ.IGNORE,de.l$.sidebar,this._commitToCapi(e,{kind:c.PZ.IGNORE,subtype:t})))),fe.prepareFromAlert)),Q.mg,Q.tS(this._sendUpdate)))),this._applyAlert=({alert:e,replacementText:t,source:r,method:n,feedbackSubtype:i})=>(0,s.pipe)(e,ye(de.bZ.isRegistered,"can not apply alert in non registered state"),K.of,Q.N(this._flushChanges),Q.tS((e=>this._switchToBeingApplied(e,r,n))),Q.tS((({beingAppliedAlert:e,undo:r})=>(0,s.pipe)(e.getReplaceEither.bind(e),Q.LF,Q.Pd((()=>new Error("Cannot apply alert with tJSON")),(n=>{this._log.debug(`_applyAlert(${e.toLiteString()}, rrange: ${n})`);const a=n.start,s=n.end-n.start,o=(new re.i).retain(a).delete(t.length).insert(e.replaceText);return{alert:e,undo:r,reverseDelta:o,replacementText:t,removeLen:s,feedbackSubtype:i,pos:a}}))))),Q.tS(this._applyAlertData)),this._applySmartPhrasesAlert=({alerts:e,feedbackSubtype:t})=>(0,s.pipe)(this._flushChanges,Q.a1((0,s.pipe)(e,Q.pE((e=>(0,s.pipe)(e.alternative,Q.UI((t=>(0,a.bc)(t,pe(e.alert))))))))),Q.tS((t=>Q.Y3((()=>({alternatives:t,alerts:e,originalTextLength:this._positionManager.getTextLength(),currentFullText:this._getContent()})),f.KC))),Q.UI(ge),be((e=>(0,s.pipe)(e.correctRevAlternatives,ae.UI((({alert:e,alternative:r})=>(0,s.pipe)(Q.dk((()=>e)),Q.mU((e=>Q.dk(this._sendApplySmartPhrasesFeedback(e,r.alternativeIndex,t))))))),Q.mg,Q.tS((t=>(0,s.pipe)(Q.Y3((()=>this.changes.next(e.changeWithFormatting)),f.KC),Q.N(this._flushChanges),K.a1((0,s.pipe)((0,a.ls)(ee.UI((e=>Q.Y3((()=>{const t=oe.h.create(e);e.bumpVersion();const r=de.xS.create(t,oe.h.create(e));return[e.id,r]}),f.KC))),Q.mg)(t),Q.tS(this._sendUpdate)))))))))),this._applyTransformJson=({alerts:e,source:t,method:r,feedbackSubtype:n})=>(0,s.pipe)(this._flushChanges,Q.a1((0,s.pipe)(e,Q.pE((e=>(0,s.pipe)(e.alternative,Q.UI((t=>(0,a.bc)(t,pe(e.alert))))))))),Q.tS((t=>Q.Y3((()=>({alternatives:t,alerts:e,originalTextLength:this._positionManager.getTextLength(),currentFullText:this._getContent()})),f.KC))),Q.UI(ge),be((e=>(0,s.pipe)(e.correctRevAlternatives,ae.UI((({alert:e,alternative:i,reversedAlternative:a})=>(0,s.pipe)(this._switchToBeingApplied(e,t,r),Q.mU((e=>Q.dk(this._sendApplyTransformJsonFeedback(e.beingAppliedAlert,i.alternativeIndex,n)))),Q.UI((e=>Object.assign(Object.assign({},e),{reversedAlternative:a})))))),Q.mg,Q.tS((t=>(0,s.pipe)(Q.Y3((()=>this.changes.next(e.changeWithFormatting)),f.KC),Q.N(this._flushChanges),K.a1((0,s.pipe)(he(t),Q.tS(this._sendUpdate)))))))))),this._alertFeedback=(e,t,r)=>{this._log.debug(`_alertFeedback(${e.toLiteString()}, feedbackType: ${t.kind}, source: ${r})`),de.bZ.isHidden(e)&&this._log.error("Sending feedback for a hidden alert",{alert:e,feedbackType:t.kind});const n=this._commitToCapi(e,t);return(0,s.pipe)(e,ve("Cannot send feedback for already disposed"),K.of,Q.tS((e=>t.kind!==c.PZ.LOOKED||e.isRead?c.nw.willRemoveAlert(t.kind)?(0,s.pipe)(this._flushChanges,Q.a1(this._applyFeedbackToAlert(e,t.kind,r,n)),fe.prepareFromAlert,this._sendSingleUpdate):(0,s.pipe)(n,Q.dk):(0,s.pipe)(fe.prepare((()=>[oe.h.create(e),(e.isRead=!0,oe.h.create(e))])),this._sendSingleUpdate,K.N(n)))))},this._alertBatchFeedback=(e,t,r)=>(0,s.pipe)(e,ae.DZ((e=>e.rawId)),se.nI,g.fold((0,a.a9)(a.Q1),(e=>this._sendFeedback({kind:t,alertIds:e,subtype:r})))),this._notifyAlertUpdated=(0,a.ls)((e=>[[e[0].id,e]]),this._sendUpdate),this._releaseRef=(e,t)=>(0,s.pipe)(Q.Y3((()=>{this._log.debug(`_releaseRef ${e} on (${t.toLiteString()}) refs: ${t._refNames}`,{shouldBeRemoved:de.bZ.shouldBeRemoved(t)}),de.bZ.shouldBeRemoved(t)&&this.events.next({removed:new Map([[t.id,oe.h.create(t)]])})}),f.KC)),this._changeMuteState=(e,t)=>{const r=(0,s.pipe)(e,p.T.fromArray((0,a.ls)(ve("Cannot send Mute feedback for already disposed"),f.tS(ye((e=>g.isSome(e.muteCategory)||de.bZ.belongsToAnySpecialCategory(e)),"Alert is not muting")))));return(0,s.pipe)(r,p.T.foldSuccess(ae.UI((e=>fe.prepare((()=>[oe.h.create(e),(e.mute=t,oe.h.create(e))]))))),Q.mg,Q.UI(se.nI),be(this._sendUpdate),Q.UI((0,a.a9)(r)))},this._changeGapValue=(e,t)=>(0,s.pipe)(e,ye(de.bZ.isOneGap,"can not change gap value for a non one gap alert"),K.of,Q.tS((e=>fe.prepare((()=>[oe.h.create(e),oe.h.create(e.changeGapValue(t))])))),this._sendSingleUpdate),this._confirmApplied=(0,a.ls)(ae.UI((e=>fe.prepare((()=>[oe.h.create(e),oe.h.create(e.changeState(de.bZ.State.Removed.create(de.bZ.State.Removed.Reason.bulkAcceptUserResponse)))])))),Q.mg,Q.tS(this._sendUpdate)),this._changeTakeawayFeedback=(e,t)=>(0,s.pipe)(e,ye(de.bZ.isTakeaway,"can not change feedback for non-takeaway alert"),K.of,Q.tS((e=>{const r=oe.h.create(e),n=e.setFeedback(t),i=oe.h.create(n);return(0,s.pipe)(fe.prepare((()=>[r,i])),Q.tS((e=>(0,s.pipe)(this._sendUpdate([e]),Q.UI((()=>n))))))}))),this._changeSmartPhrasesFeedback=(e,t)=>(0,s.pipe)(e,ye(de.bZ.isSmartPhrases,"Cannot change feedback for a non-SmartPhrases alert."),K.of,Q.tS((e=>Q.Y3((()=>{const r=[(0,a.bc)(e.id,de.xS.create(oe.h.create(e),oe.h.create(e.setFeedback(t))))];return this.events.next({updated:new Map(r)}),e}),f.KC)))),this._rotateSmartPhrasesReplacements=e=>(0,s.pipe)(e,ye(de.bZ.isSmartPhrases,"Cannot rotate replacements for a non-SmartPhrases alert."),K.of,Q.tS((e=>Q.Y3((()=>{const t=[(0,a.bc)(e.id,de.xS.create(oe.h.create(e),oe.h.create(e.rotateReplacements())))];return this.events.next({updated:new Map(t)}),e}),f.KC)))),this._discardSmartPhrasesReplacement=(e,t)=>(0,s.pipe)(e,ye(de.bZ.isSmartPhrases,"Cannot discard replacement for a non-SmartPhrases alert."),K.of,Q.tS((e=>Q.Y3((()=>{const r=[(0,a.bc)(e.id,de.xS.create(oe.h.create(e),oe.h.create(e.discardReplacement(t))))];return this.events.next({updated:new Map(r)}),e}),f.KC)))),this._highlightSmartPhrasesLastAppliedReplacement=e=>(0,s.pipe)(e,ye(de.bZ.isSmartPhrases,"Cannot highlight last applied replacement for a non-SmartPhrases alert."),K.of,Q.tS((e=>Q.Y3((()=>{const t=[(0,a.bc)(e.id,de.xS.create(oe.h.create(e),oe.h.create(e.highlightLastAppliedReplacement())))];return this.events.next({updated:new Map(t)}),e}),f.KC)))),this._restoreSmartPhrasesOriginalHighlight=e=>(0,s.pipe)(e,ye(de.bZ.isSmartPhrases,"Cannot restore original highlight for a non-SmartPhrases alert."),K.of,Q.tS((e=>Q.Y3((()=>{const t=[(0,a.bc)(e.id,de.xS.create(oe.h.create(e),oe.h.create(e.restoreOriginalHighlight())))];return this.events.next({updated:new Map(t)}),e}),f.KC)))),this._changeSentenceLevelBrandTonesFeedback=(e,t)=>(0,s.pipe)(e,ye(de.bZ.isSentenceLevelBrandTones,"Cannot change feedback for a non-Sentence Level Brand Tones alert."),K.of,Q.tS((e=>Q.Y3((()=>{const r=[(0,a.bc)(e.id,de.xS.create(oe.h.create(e),oe.h.create(e.setFeedback(t))))];return this.events.next({updated:new Map(r)}),e}),f.KC)))),this._applyAlertData=({pos:e,removeLen:t,reverseDelta:r,undo:n,replacementText:i,alert:a,feedbackSubtype:o})=>(0,s.pipe)(Q.Y3((()=>{let s=this._positionManager.getTextLength(),l=!1;const u={action:c.PZ.ACCEPTED,replacement:i,commit:()=>{l||this._log.debug(`_applyAlert(${a.toLiteString()}):commit()`)},reversedAlternative:g.none,undo:()=>{l=!0,this._log.debug(`_applyAlert(${a.toLiteString()}):undo()`);const e=this._positionManager.getTextLength();e!==s&&this._log.error(`Text has changed while uncommitted apply is present. Expected: ${s}, actual: ${e}`);const t=te.RI.delta(r,e);this.changes.next(t),this.changes.next(te.RI.flush()),n()}};return this._sendApplyTextFeedback(a,i,o)(),this.changes.next(te.RI.delta((new re.i).retain(e).delete(t).insert(i),s)),this.changes.next(te.RI.flush()),s=this._positionManager.getTextLength(),u}),f.KC),Q.tS((e=>Q.Y3((()=>a.switchToApplied(e)),f.KC))),fe.prepareFromAlert,this._sendSingleUpdate),this._sendApplyFeedback=(e,t)=>e.state.method===de.bZ.State.Applied.Method.ByCard?this._commitToCapi(e,t):a.Q1,this._sendApplyTextFeedback=(e,t,r)=>this._sendApplyFeedback(e,{kind:c.PZ.ACCEPTED,replacementText:t,subtype:r}),this._sendApplyTransformJsonFeedback=(e,t,r)=>{const n={kind:c.PZ.ACCEPTED,alternativeIndex:t,subtype:r},i=de.bZ.isOneGap(e)?Object.assign(Object.assign({},n),{gapValue:e.gapValue}):n;return this._sendApplyFeedback(e,i)},this._sendApplySmartPhrasesFeedback=(e,t,r)=>{const n={kind:c.PZ.ACCEPTED,alternativeIndex:t,subtype:r};return this._commitToCapi(e,n)}}_applyFeedbackToAlert(e,t,r,n){return Q.Y3((()=>{this._alertsRepo.removeFromCapiMapping(e);const i=this._createFeedbackUndoable(e,t,n);return e.changeState(de.bZ.State.Applied.create(i,r,de.bZ.State.Applied.Method.ByCard,oe.h.create(e)))}),f.KC)}_createFeedbackUndoable(e,t,r){return{action:t,replacement:e.replaceText,commit:r,undo:()=>this._alertsRepo.addToCapiMapping(e)}}_commitToCapi(e,t){return(0,s.pipe)(e.rawId,g.fold((0,a.a9)((()=>this._log.debug("skip feedback for local alert",e))),(e=>this._sendFeedback(Object.assign({id:e},t)))))}_sendFeedback(e){return()=>{ie.Vi(this._capiFeedbackClient.sendFeedback(e)).catch((e=>{ne.EP.isDroppedError(e)?this._log.debug("Stopped listening for feedback message acknowledge",e):ne.YG.isNotConnectedError(e)?this._log.warn("Failed to send alert feedback as CAPI was not connected",e):this._log.error("Failed to send alert feedback",e)}))}}_switchToBeingApplied(e,t,r){return Q.Y3((()=>(this._alertsRepo.removeFromCapiMapping(e),e.switchToBeingAppliedState(t,r))),f.KC)}}var Ce,Se,Ie,ke,xe,Ae=r(83078);!function(e){e.toString=f.g_((({id:e})=>`rid:${e}`),(e=>`aid:${e.toString()}`))}(Ce||(Ce={})),function(e){e.match=function(e){return t=>t instanceof de.Ev?e.alertAddOrUpdate(t):t instanceof Map?e.rangeChange(t):"_tag"in t?e.alertRemove(t):e.alertChange(t)}}(Se||(Se={})),function(e){e.defaultValidator=de.bZ.isDuplicatedBy}(Ie||(Ie={}));class Ee{constructor(e,t,r){this._positionManager=e,this._alertsRepo=t,this._alertDuplicateValidator=r,this._log=v.C8.Logging.getLogger("AlertManager.pipeline",b.i.DEBUG),this._heuristicallyRemovedAlerts=new Map,this.process=e=>(this._log.trace(`process, to process = ${e.length}`),this._collectChanges(this._processAlertsBatch(e))),this.reset=e=>(this._cleanupPendingAlerts(e),this._finishAlertsChecking()),this._processAlertsBatch=e=>{const{toAdd:t,toUpdate:r,toAddOrUpdate:n,toRemoveUnfiltered:i,toChangeUnfiltered:o,toDispose:c,rangeChanges:u}=this._processBatch(e),d=e=>(0,s.pipe)(this._alertsRepo.getByAlertId(e),g.getOrElse((()=>t.get(e)||r.get(e)||c.get(e))));o.forEach((e=>(0,s.pipe)(g.fromNullable(n.get(e.id)),g.fold((()=>(0,s.pipe)(this._alertsRepo.getByRawAlertId(e.id),g.map((t=>{const i=t.copy();i.patchWithRawAlert(Ee._prepareUpdate(i,e)),r.set(i.id,i),n.set(e.id,i)})),g.getOrElse((()=>this._log.info("Change from CAPI: Cannot find internal AlertId."))))),(t=>{const n=Ee._prepareUpdate(t,e);r.has(t.id)?t.patchWithRawAlert(n):t.updateAlertWithManagedData(n)})))));const p=i.reduce(((e,i)=>{const a=(0,s.pipe)(i,f.g_((({id:e})=>(0,s.pipe)(this._alertsRepo.getByRawAlertId(e),g.map((e=>de.bZ.isRegistered(e)?e:void 0)),g.getOrElse((()=>this._heuristicallyRemovedAlerts.has(e)?void this._heuristicallyRemovedAlerts.delete(e):n.get(e))))),d));return void 0===a?(f.nM(i)?this._log.debug("Remove from CAPI: Cannot find internal AlertId. capiId: #"+JSON.stringify(i.left)):this._log.error("Cannot find existing alert by id",i.right),e):((0,s.pipe)(this._getMergeTarget(i,n),g.filter(Te((e=>e.lensId!==a.lensId?(this._log.warn("Trying to merge alerts from different lenses",{source:a,target:e}),!1):g.isNone(a.rawId)?(this._log.warn("Trying to merge into local alert",{source:a,target:e}),!1):a.references>e.references))),g.fold((()=>{e.set(a.id,{alert:a,reason:(0,s.pipe)(i,f.LF,g.fromEither,g.chain((e=>e.hint)),g.chain((e=>e===l.A.NotFixed?g.some(de.bZ.State.Removed.Reason.capiDismiss):g.none)),g.getOrElse((()=>de.bZ.State.Removed.Reason.capiDone)))})}),f.g_((e=>{this._log.debug("swap raw alerts with new alert",{source:a.toString(),newTarget:e.toString()}),this._alertsRepo.swapRaw(a,e);const i=Ae.MH(a.rawId);(0,h.kG)(void 0===r.get(e.id),"Added alert should not be present in the updated alerts map",(()=>r.get(e.id).toString()));const s=a.copy();r.set(s.id,s),n.set(i,s),t.delete(e.id),c.set(e.id,e)}),(t=>{this._log.debug("swap raw alerts with existing alert",{source:a.toString(),existingTarget:t.toString()}),this._alertsRepo.swapRaw(a,t),e.set(t.id,{alert:t,reason:de.bZ.State.Removed.Reason.capiDismiss})})))),e)}),new Map),m=new Map;return u&&u.forEach(((e,t)=>{(0,s.pipe)(t,d,g.fromPredicate((n=>n?de.bZ.isInteractable(n)?!r.has(n.id)||(this._log.debug("skip range change on updateHolder alert",n.toLiteString()),!1):(this._log.debug("skip range change on non-interactable alert",n.toLiteString()),!1):(this._log.warn("got range changes for unknown alert",{alertId:t,alertRanges:e}),!1))),g.chain((r=>(0,s.pipe)(r.onRangeChange(e),g.map((e=>{switch(e.state){case de.bZ.Transition.State.Pending:return m.set(r.id,[r,e.removedRanges]);case de.bZ.Transition.State.Dispose:return(0,s.pipe)(r.rawId,g.fold((()=>this._log.debug("dispose by range change on unknown rid",r.id)),(e=>this._heuristicallyRemovedAlerts.set(e,r)))),p.set(t,{alert:r,reason:de.bZ.State.Removed.Reason.textChange});default:return(0,h.vE)(e)}}))))))})),p.forEach((({alert:e})=>{this._log.trace("check cancellations from toRemove: "+e.toLiteString()),(0,s.pipe)(e.rawId,g.fold((()=>{t.get(e.id)&&(this._log.debug("cancel add local alert for: "+e.toLiteString()),t.delete(e.id),p.delete(e.id),c.set(e.id,e)),(0,h.kG)(!1===r.has(e.id),"Added local alert should not be present in the updated alerts map",(()=>r.get(e.id).toString()))}),(i=>{const a=n.get(i);a&&(n.delete(i),t.delete(a.id)?(this._log.debug("cancel add for: "+a.toLiteString()),this._log.debug("cancel remove for: "+e.toLiteString()),p.delete(e.id),c.set(e.id,e),c.set(a.id,a)):r.delete(a.id)?(this._log.debug("cancel update for: "+a.toLiteString()),a.id!==e.id&&(this._log.debug("marking update to dispose: "+a.toLiteString()),c.set(a.id,a))):this._log.error("_addOrUpdateAlert toAdd || toUpdate mapping in unsync state!",a))}))),this._log.trace("check if local orphan toRemove: "+e.toLiteString()),(0,s.pipe)(this._alertsRepo.getByAlertId(e.id),g.fold((()=>{this._log.debug("cancel delete for: "+e.toLiteString()),p.delete(e.id)}),a.Q1))})),c.size>0&&this._log.debug(`_cancelAlerts, to cancel = ${c.size}`,{alerts:Array.from(c.values()).map((e=>e.toLiteString()))}),c.forEach((e=>{m.delete(e.id)&&this._log.debug("cancel startChecking for: "+e.toLiteString());try{e.dispose()}catch(t){this._log.warn("unexpected error on disposing canceled alert",t,e)}})),{toAdd:t,toUpdate:r,toRemove:p,toStartChecking:m}},this._collectChanges=({toAdd:e,toUpdate:t,toRemove:r,toStartChecking:n})=>{const{alertsToAdd:i,alertsToUpdate:a,alertsToRemove:s}=this._addAlerts(Array.from(e.values()),r);return t.size>0&&this._updateAlerts(Array.from(t.values()),a),n.size>0&&this._startAlertsChecking(Array.from(n.values()),a,i),s.size>0&&this._removeAlerts(s,a),{added:i,updated:a}},this._validateAlertAdd=e=>{try{const t=!de.bZ.isPremium(e)||void 0!==e.categoryHuman;return e._raw.impact!==c.wQ.Impact.Critical&&e._raw.impact!==c.wQ.Impact.Advanced&&g.isSome(e.rawId)&&this._log.warn("CAPI provides corrupted impact prop",{alert:e,raw:c.wQ.clearUserTextFields(e._raw)}),t||(this._log.error("CAPI provides corrupted alert",{alert:e,raw:c.wQ.clearUserTextFields(e._raw)}),e.dispose()),(0,s.pipe)(e.rawId,g.exists((e=>g.isSome(this._alertsRepo.getByRawAlertId(e)))))?(this._log.warn("unexpected overlap on rawId for non-updatable alert",{alert:e,raw:c.wQ.clearUserTextFields(e._raw)}),e.dispose(),!1):e.lensType===F.R.Type.Plagiarism&&N.T.isMax(e.progress)?(this._log.info("CAPI provides a Plagiarism alert with an invalid progress",{alert:e,raw:c.wQ.clearUserTextFields(e._raw)}),e.dispose(),!1):t}catch(t){this._log.error("Cannot validate alert",t);try{e.dispose()}catch(e){this._log.warn("Cannot dispose invalid alert",e)}return!1}},this._recheckedAlerts=new Set,this._terminateAlertChecking=({id:e})=>{this._recheckedAlerts.delete(e)&&this._log.debug("Stopped watching checking state for alert",e)},this._applyRemoveToAlert=({alert:e,reason:t})=>(this._alertsRepo.removeFromCapiMapping(e),t!==de.bZ.State.Removed.Reason.textChange&&e.clearCapiId(),e.changeState(de.bZ.State.Removed.create(t))),this._finishAlertChecking=e=>{(0,h.kG)(this._recheckedAlerts.delete(e.id),"tried to finish checking on alert which had not been marked as checking"),this._log.debug("Stopped watching checking state for alert",e.id);const t=oe.h.create(e);return de.xS.create(t,oe.h.create(e.changeState(de.bZ.State.Registered.create(de.bZ.CheckingState.IDLE))))}}static _prepareUpdate(e,t){const r=Object.assign(Object.assign({},e.toRawAlert()),{rev:t.rev});return c.wQ.withTransformJson(r)&&(0,s.pipe)(t.transformJson,Ae.bw((e=>r.transformJson=e))),(0,s.pipe)(t.extraProperties,Ae.bw((e=>r.extra_properties=e))),(0,s.pipe)(t.muted,Ae.bw((e=>r.muted=e))),r}_processBatch(e){return e.reduce(((e,t)=>(Se.match({alertAddOrUpdate:t=>{(0,s.pipe)(t.rawId,g.fold((()=>{e.toAdd.set(t.id,t)}),(r=>{(0,s.pipe)(this._alertsRepo.getByRawAlertId(r),g.filter((e=>e.allowUpdate)),g.map((()=>{(0,s.pipe)(g.fromNullable(e.toAddOrUpdate.get(r)),g.map((t=>{this._log.debug("got overlap in batch on update"),e.toUpdate.delete(t.id),e.toDispose.set(t.id,t)}))),e.toUpdate.set(t.id,t)})),g.getOrElse((()=>{(0,s.pipe)(g.fromNullable(e.toAddOrUpdate.get(r)),g.map((t=>{this._log.info("got overlap in batch on add"),e.toAdd.delete(t.id),e.toDispose.set(t.id,t)}))),e.toAdd.set(t.id,t)}))),e.toAddOrUpdate.set(r,t)})))},rangeChange:t=>{(0,h.kG)(void 0===e.rangeChanges,"unexpected rangeChanges duplicate"),e.rangeChanges=t},alertRemove:t=>{e.toRemoveUnfiltered.push(t)},alertChange:t=>{e.toChangeUnfiltered.push(t)}})(t),e)),{toAdd:new Map,toRemoveUnfiltered:[],toChangeUnfiltered:[],toUpdate:new Map,toAddOrUpdate:new Map,rangeChanges:void 0,toDispose:new Map})}_getMergeTarget(e,t){return(0,s.pipe)(e,f.LF,g.fromEither,g.chain((e=>e.mergedIn)),g.chain((e=>{const r=(0,s.pipe)(this._alertsRepo.getByRawAlertId(e),g.map((e=>f.F2(e))),g.alt((()=>(0,s.pipe)(g.fromNullable(t.get(e)),g.map((e=>f.t$(e)))))));return g.isNone(r)&&this._log.warn("Merge from CAPI: Cannot find alert to merge into.",{capiId:e}),r})),g.filter(Te((e=>!!e.allowUpdate||(this._log.warn("Merge from CAPI: Trying to merge in a non-updatable alert, skipping. ",{target:e.toLiteString()}),!1)))))}_addAlerts(e,t){return e.length>0&&this._log.debug("_addAlerts, count = "+e.length,{alerts:e.map((e=>e.toLiteString()))}),(0,s.pipe)(e,ae.hX(this._validateAlertAdd),ae.u4({alertsToAdd:new Map,alertsToUpdate:new Map,alertsToRemove:t},((e,t)=>{this._log.trace("Adding alert: "+t.toLiteString());const r=this._getAlertsWithMatchingRanges(t.getHighlightRanges()[0]),n=this._tryToMatchInvalid(t,r);switch(this._log.trace("Adding alert match result",{inc:t.id,match:n}),n.type){case ke.Type.Merged:{const r=n.result[1];de.bZ.isNotRegistered(r.alert)?de.bZ.isRemoved(r.alert)&&this._log.warn("unexpected merge into removed alert",{alert:r,newAlert:t}):this._alertsRepo.addToCapiMapping(r.alert),e.alertsToUpdate.set(r.id,n.result);break}case ke.Type.Restored:{const t=n.result[1];(0,h.kG)(!e.alertsToRemove.has(t.id),"can't update alert which we wanted to remove earlier"),this._alertsRepo.addToCapiMapping(t.alert),e.alertsToUpdate.set(t.id,n.result);break}case ke.Type.Unmatched:{const i=n.result,a=r.filter((t=>de.bZ.isDuplicateCandidate(t)&&this._alertDuplicateValidator(i,t)&&!e.alertsToRemove.has(t.id)));(0,h.kG)(i.allowDuplicates||de.bZ.isApplicableAlert(i),"BaseAlertImpl must allow duplicates or be an ApplicableAlert type"),a.length>0&&this._log.info("Trying to add a duplicated alert",{newAlert:t.toString(),duplicates:a.map((e=>e.toString()))});const o=i.allowDuplicates?{result:xe.Add,toRemove:g.none}:this._tryAddAlert(i,a);switch(o.result){case xe.Add:case xe.OverwriteExisting:this._log.debug("AllAlerts: Append alert to all alerts",i.toLiteString()),this._alertsRepo.addToCapiMapping(i),(0,h.kG)(!e.alertsToRemove.has(i.id),"can't add alert which we wanted to remove earlier",(()=>i.toLiteString())),this._alertsRepo.add(i),e.alertsToAdd.set(i.id,oe.h.create(i)),(0,s.pipe)(o.toRemove,Ae.bw((t=>{if(e.alertsToAdd.has(t.id)){this._alertsRepo.removeFromCapiMapping(t);const e=t.changeState(de.bZ.State.Removed.create(de.bZ.State.Removed.Reason.canceled));this._terminateAlertChecking(e),this._alertsRepo.remove(e)}else this._log.debug("schedule to remove duplicate",t.toLiteString()),e.alertsToRemove.set(t.id,{alert:t,reason:de.bZ.State.Removed.Reason.duplicated});e.alertsToAdd.delete(t.id),e.alertsToUpdate.delete(t.id)})));break;case xe.Skip:this._log.debug("Skip alert with low priority",i.id);break;default:(0,h.vE)(o.result)}break}default:(0,h.vE)(n)}return e})))}_updateAlerts(e,t){this._log.debug(`_updateAlerts, to update = ${e.length}`,{alerts:e.map((e=>e.toLiteString()))}),(0,s.pipe)(e,ae.u4(t,((e,t)=>(this._log.trace("Updating alert: "+t.toLiteString()),(0,s.pipe)(this._alertsRepo.getByRawAlertId(Ae.MH(t.rawId)),g.fold((()=>this._log.warn("tried to update unknown alert",t)),(r=>{const n=t._raw;t.dispose();const i=e.has(r.id)?e.get(r.id)[0]:oe.h.create(r);r.enqueueRawAlertForUpdate(n),e.set(r.id,de.xS.create(i,oe.h.create(r)))}))),e))))}_startAlertsChecking(e,t,r){this._log.debug(`_startAlertsChecking, to update = ${e.length}`,{alerts:e.map((([e,t])=>[e.toLiteString(),t]))});const n=(e,t)=>{const r=e.changeState(de.bZ.State.Registered.create(de.bZ.CheckingState.CHECKING));return this._recheckedAlerts.add(e.id),oe.h.create(t.size>0?r.enqueueRangesRemove(t):r)};(0,s.pipe)(e,ae.u4({updatedAlerts:t,addedAlerts:r},((e,[t,r])=>((0,s.pipe)(this._alertsRepo.getByAlertId(t.id),g.fold((()=>{this._log.warn("tried to start checking unknown alert",{alert:t,ranges:r})}),(()=>{if(e.addedAlerts.has(t.id))e.addedAlerts.set(t.id,n(t,r));else{const i=e.updatedAlerts.has(t.id)?e.updatedAlerts.get(t.id)[0]:oe.h.create(t);e.updatedAlerts.set(t.id,de.xS.create(i,n(t,r)))}}))),e))))}_removeAlerts(e,t){e.forEach(((e,r)=>{(0,s.pipe)(this._alertsRepo.getByAlertId(r),g.fold((()=>{this._log.warn("tried to remove unknown alert",e)}),(()=>{const n=t.has(r)?t.get(r)[0]:oe.h.create(e.alert),i=this._applyRemoveToAlert(e);this._terminateAlertChecking(i),t.set(r,de.xS.create(n,oe.h.create(i)))})))}))}_getAlertsWithMatchingRanges(e){return(0,s.pipe)(this._positionManager.findIntersections(e),ae.hX((0,m.W9)(J.P.is,J.x.isVisible)),ae.DZ((e=>this._alertsRepo.getByAlertId(e.meta.alertId))),ae.hX((e=>!(de.bZ.isApplied(e)&&e.getAppliedRanges().length>0))))}_tryToMatchInvalid(e,t){return(0,h.kG)(!e.isValid,"added alert should be invalid"),(0,h.kG)(de.bZ.isRegistered(e),"added alert should be in registered state",(()=>e.toString())),(0,s.pipe)(g.fromNullable(t.find((t=>!t.isValid&&t.canBeMergedWith(e)))),g.fold((()=>({result:e,type:ke.Type.Unmatched})),(t=>{(0,h.kG)((0,s.pipe)(t.rawId,Ae.wo((0,a.ls)(this._alertsRepo.getByRawAlertId,g.isNone))),"CAPI mapping should not contain invalid alerts"),this._log.debug(`Merging new alert (${e}) into the existing one aid(${t})`);const r=oe.h.create(t);return t.patchWithRawAlert(e._raw),e.dispose(),t.allowUpdate&&de.bZ.isCapiDone(t)?{result:de.xS.create(r,oe.h.create(t.changeState(de.bZ.State.init))),type:ke.Type.Restored}:{result:de.xS.create(r,oe.h.create(t)),type:ke.Type.Merged}})))}_tryAddAlert(e,t){return(0,s.pipe)(se.nI(t),g.map((t=>{(0,h.kG)(1===t.length,"Only one visible alert to one range is expected while _tryEnqueueAlert",`got ${t.map((e=>e.toString()))} with input (${e.toString()})`);const r=t[0];return r.extraProperties.priority<=e.extraProperties.priority?{result:xe.OverwriteExisting,toRemove:g.some(r)}:(e.dispose(),{result:xe.Skip,toRemove:g.none})})),g.getOrElse((()=>({result:xe.Add,toRemove:g.none}))))}_cleanupPendingAlerts(e){e.removed.forEach((e=>{this._heuristicallyRemovedAlerts.delete(e)&&this._log.info("unexpected alert remove from finish msg",e)})),this._heuristicallyRemovedAlerts.size>0&&this._log.info("we had heuristically removed alerts which were not confirmed by capi",{size:this._heuristicallyRemovedAlerts.size}),this._heuristicallyRemovedAlerts.clear()}_finishAlertsChecking(){return(0,s.pipe)(Array.from(this._recheckedAlerts.values()),ae.DZ((e=>{const t=this._alertsRepo.getByAlertId(e);g.isNone(t)&&(this._log.error("tried to finish checking on missing alert",e),this._recheckedAlerts.delete(e));const r=(0,s.pipe)(t,g.filter((e=>de.bZ.isRegistered(e))),g.map((e=>(0,a.bc)(e.id,this._finishAlertChecking(e)))));return g.isNone(r)&&this._log.error("tried to update checking state on non-registered alert",e),r})),(e=>({updated:new Map(e)})))}}function Te(e){return f.g_(e,e)}!function(e){let t;!function(e){e.Unmatched="Unmatched",e.Merged="Merged",e.Restored="Restored"}(t=e.Type||(e.Type={}))}(ke||(ke={})),function(e){e.Skip="Skip",e.Add="Add",e.OverwriteExisting="OverwriteExisting"}(xe||(xe={}));class _e{constructor(){this._log=v.C8.Logging.getLogger("AlertManager.repository",b.i.DEBUG),this._allAlerts=new Map,this._capiAlertsIdMapping=new Map,this.add=e=>{this._allAlerts.set(e.id,e)},this.remove=e=>{this._log.trace("AllAlerts: Clean alert from all alerts",e.toLiteString()),(0,h.kG)(0===e.references,"can not dispose alert in use",(()=>e.toString())),(0,h.kG)(!1===e.isValid,"can not dispose valid alert",(()=>e.toString())),(0,h.kG)(this._allAlerts.delete(e.id),"alert should exist in alerts list",(()=>e.toString())),e.dispose()},this.addToCapiMapping=e=>{e.isValid||(0,s.pipe)(e.rawId,g.fold((()=>this._log.debug("skip register of local alert in capi mapping",e)),(t=>{this._log.trace("register alert in capi mapping",e.toLiteString()),(0,h.kG)(void 0===this._capiAlertsIdMapping.get(t),"unexpected overlap of rawid alert",(()=>e.toString())),e.validate(),this._capiAlertsIdMapping.set(t,e.id)})))},this.removeFromCapiMapping=e=>{e.isValid&&((0,s.pipe)(e.rawId,Ae.bw((t=>{this._log.trace("clean valid alert capi mapping for: "+e.toLiteString()),(0,h.kG)(this._capiAlertsIdMapping.delete(t),"valid alert should had valid raw id",(()=>e.toString()))}))),e.invalidate())},this.getByAlertId=e=>g.fromNullable(this._allAlerts.get(e)),this.getByRawAlertId=e=>(0,s.pipe)(g.fromNullable(this._capiAlertsIdMapping.get(e)),g.chain(this.getByAlertId)),this.swapRaw=(e,t)=>{const r=(0,s.pipe)(e.rawId,g.exists((e=>this._capiAlertsIdMapping.has(e)))),n=(0,s.pipe)(e.rawId,g.exists((e=>this._capiAlertsIdMapping.has(e))));(0,h.kG)(r||n,"At least one of the swapped alerts should be registered in the system");const i=e._raw;e.silentPatchWithRawAlert(t._raw),t.silentPatchWithRawAlert(i),r&&this._capiAlertsIdMapping.set(Ae.MH(e.rawId),e.id),n&&this._capiAlertsIdMapping.set(Ae.MH(t.rawId),t.id)},this.toArray=()=>Array.from(this._allAlerts.values()),this.toMap=()=>this._allAlerts,this.toJSON=()=>({allAlerts:Array.from(this._allAlerts.entries()),idMapping:Array.from(this._capiAlertsIdMapping.entries())})}}var Le=r(96021);class Re{constructor(e,t,r,c,u,h,I,k=Ie.defaultValidator){this._positionManager=e,this._alternativeManager=t,this._getContent=r,this._capiEvents=c,this._capiClient=u,this._documentCounters=h,this._transformRawAlert=I,this._alertDuplicateValidator=k,this._state=o.h.create(S.r.empty),this.state=this._state.view(S.r.toCheckingResult),this.lensesScores=o.h.create(L.empty),this._log=v.C8.Logging.getLogger("AlertManager",b.i.TRACE),this._subs=[],this._addAlerts=new j.xQ,this._removeAlerts=new j.xQ,this._changeAlerts=new j.xQ,this._flush=new j.xQ,this._alertsPerRevision=0,this._alertsRepository=new _e,this._pipeline=new Ee(this._positionManager,this._alertsRepository,this._alertDuplicateValidator),this._invalidateAlerts=()=>{this.flushAlerts();const[e,t]=d.uK(this._getAllAlertsAsArray(),(e=>e.isValid));this._log.debug("Invalidate alerts...",{valid:e.length,invalid:t.length}),e.forEach((e=>{this._alertsRepository.removeFromCapiMapping(e),e.clearCapiId()})),t.forEach((e=>e.clearCapiId()))},this._removeInvalidAlerts=e=>{this._log.debug(`Removing invalid alerts by type '${e}'...`);const t=this._getTypeFilter(e),r=this._getAllAlertsAsArray().filter((e=>!e.isValid&&de.bZ.isRegistered(e)&&t(e)));r.forEach((e=>this._removeAlertBuffered(f.F2(e.id)))),this._log.debug(`${r.length} invalid alerts removed`),this.flushAlerts(),this._log.isEnabled(b.i.TRACE)&&this._log.trace("Removed alerts",r.map((e=>e.toString())))},this._onCapiEvent=e=>{try{switch("alert_received"===e.kind&&this._alertsPerRevision++,e.kind){case"alert_received":case"plagiarism_alert_received":if(!1===e.alert.hidden&&void 0===e.alert.cardLayout)return void this._log.warn("got alert with empty mapping",{pname:e.alert.pname});this._addAlertBuffered(de.bZ.create(this._transformRawAlert(e.alert),this._ops,this._positionManager,this._alternativeManager));break;case"alert_removed":this._log.debug(`Remove from capi #${e.alertId}, merged in #${g.getOrElse((()=>"None"))(e.mergedIn)}, hint: ${g.getOrElse((()=>"None"))(e.hint)}`);(0,s.pipe)(this._alertsRepository.getByRawAlertId(e.alertId),g.exists(de.bZ.isBulkApplied))||this._removeAlertBuffered(f.t$({id:e.alertId,mergedIn:e.mergedIn,hint:e.hint}));break;case"alert_changed":this._log.debug("Alert change from capi #"+e.alertId),this._changeAlertBuffered({id:e.alertId,rev:e.rev,extraProperties:g.fromNullable(e.extraProperties),transformJson:g.fromNullable(e.transformJson),muted:g.fromNullable(e.muted)});break;case"finish":this._log.debug(`Alerts per revision (#${e.revision}): ${this._alertsPerRevision}`),this._alertsPerRevision=0,"idle"===this._capiClient.checkingState&&this._emitDomainEvent(this._pipeline.reset(e))}}catch(t){this._log.warn("Cannot handle alert event "+e.kind,t)}},this._emitDomainEvent=e=>{(0,s.pipe)(e,this._prepareDiff,C.v.createDiff,p.T.recover((e=>this._log.error("conflicts on diff creating",e))),(e=>(this._log.debug("_emitDomainEvent",w.p.Diff.show.show(e)),e)),S.r.applyDiff,y.UI(p.T.recover((e=>this._log.error("conflicts on diff apply",e)))),(e=>this._state.modify(e)))},this._prepareDiff=({added:e,updated:t=new Map,removed:r=new Map})=>(t.forEach(((e,n)=>{(0,s.pipe)(e,i.Yg,de.bZ.fromAlertModel,de.bZ.shouldBeRemoved)&&(t.delete(n),r.set(n,e[0]))})),r.forEach((0,a.ls)(de.bZ.fromAlertModel,this._disposeAlert)),{added:e,updated:t,removed:r}),this._disposeAlert=e=>{if(de.bZ.isApplied(e)&&e.state.undoable.commit(),de.bZ.isNotRegistered(e))try{this._alertsRepository.remove(e)}catch(t){this._log.error("can not remove alert",t),de.bZ.isNotDisposed(e)&&e.dispose()}else this._log.error("unexpected remove of registered alert",e.toString())},this._ops=new we(this._positionManager,this._getContent,this._capiClient,this._alertsRepository),this.loadScores=e=>{this.lensesScores.set(e)},this.undoApplied=this._ops.undoApplied,this.changes=this._ops.changes;const x=e.rangeChanged.pipe(_.U((({affected:e})=>e)),D.h((e=>e.length>0)),_.U((e=>U.vM((e=>e.meta.alertId),e.filter(J.P.is)))),D.h((e=>e.size>0)),T.b((e=>this._log.debug("Range[s] changed",e))),W.B()),A=H.F(250).pipe(G.O(0),z.T(this._flush)),E=B.RX(this._log);this._subs.push(E("_alertsInvalidation",this._capiEvents.pipe(D.h(l.h.is("session_started")),T.b(this._invalidateAlerts),Y.c(V.T(this._capiEvents.pipe(D.h(l.h.is("finish")),q.P(),X.h("alert")),this._capiEvents.pipe(D.h(l.h.is("async_check_finished")),q.P(),X.h("plagiarism")))),T.b(this._removeInvalidAlerts))),E("_capiEvents",this._capiEvents.pipe(T.b(this._onCapiEvent))),E("_alertsProccesing",this._addAlerts.pipe(z.T(this._removeAlerts),z.T(this._changeAlerts),z.T(x),Z.f(A),D.h(m.Dw),_.U(this._pipeline.process),T.b(this._emitDomainEvent))),E("_alertsBuffer",x.pipe(z.T(this._capiEvents.pipe(D.h(l.h.is("before_finish","before_async_check_finish","async_check_finished")))),X.h(B.PU),T.b(this._flush))),E("_alertOpsAlertChanges",this._ops.events.pipe(T.b(this._emitDomainEvent))),E("_lensesScoresChanges",L.fromCapi(this._capiEvents).pipe(T.b(B.wW(this.lensesScores)))),E("documentCountersChanges",n.fromAlerts(this._state.view(C.v.iso.wrap)).pipe(T.b(B.wW(this._documentCounters))))),(0,m.iR)("alerts",(()=>this.toString())),(0,m.iR)("triggerRemove",(e=>{this._removeAlertBuffered(f.F2(e))}))}flushAlerts(){this._flush.next()}loadAlerts(e){const t=new Map;return(0,m.Dw)(e)&&(this._log.debug(`${e.length} external alert(s) where loaded`),e.map(Le.I.splitById).map((({id:e,local:t})=>({id:e,alert:de.bZ.create((0,s.pipe)(t,c.wQ.matchBy(a.yR,(e=>Object.assign(Object.assign({},e),{transformJson:{highlights:e.transformJson.highlights,alternatives:(0,s.pipe)(e.transformJson.alternatives,g.map(u.r3.Group.fromSerialized))}})),a.yR),this._transformRawAlert),this._ops,this._positionManager,this._alternativeManager)}))).forEach((({id:e,alert:r})=>{this._addAlertBuffered(r),e&&t.set(e,r.id)}))),t}toString(){return JSON.stringify(this,void 0,2)}toJSON(){return{repo:this._alertsRepository}}dispose(){this._subs.forEach((e=>e.unsubscribe())),this._subs=[]}_getTypeFilter(e){switch(e){case"alert":return e=>!de.bZ.isPlagiarism(e);case"plagiarism":return e=>de.bZ.isPlagiarism(e);default:return(0,h.vE)(e)}}_addAlertBuffered(e){this._log.trace(`_addAlert(${e.toLiteString()})`),this._addAlerts.next(e)}_changeAlertBuffered(e){this._log.trace(`_changeAlert(${e.id})`),this._changeAlerts.next(e)}_removeAlertBuffered(e){this._log.trace(`_removeAlert(${Ce.toString(e)})`),this._removeAlerts.next(e)}_getAllAlertsAsArray(){return this._alertsRepository.toArray().filter(de.bZ.isNotRemoved)}}},6488:(e,t,r)=>{"use strict";r.d(t,{e:()=>n});var n,i=r(40327),a=r(5114),s=r(4390),o=r(40018);!function(e){e.create=function(e){const t=t=>(0,i.pipe)(e.get(),s.p.get(t),a.map(o.bZ.fromAlertModel)),r=e=>(0,i.pipe)(t(e),a.filter(o.bZ.isInteractable)),n=e=>(0,i.pipe)(t(e),a.filter(o.bZ.isRegistered));return{getById:t,getRegistered:n,getInteractable:r,isRegistered:e=>(0,i.pipe)(n(e),a.isSome),isInteractable:e=>(0,i.pipe)(r(e),a.isSome)}}}(n||(n={}))},79227:(e,t,r)=>{"use strict";r.d(t,{J:()=>n,k:()=>v});var n,i=r(71249),a=r(95195),s=r(23330),o=r(35214),l=r(64015),c=r(57050),u=r(40327),d=r(84966),p=r(5114),m=r(95574),h=r(81670),g=r(81531),f=r(40018),y=r(66896);!function(e){e.getSubTypeFromLens=e=>y.R.isPriority(e)||y.R.isPriorityOutcomeId(e)?d.e3.SidebarPriority:d.e3.Sidebar}(n||(n={}));class v{constructor(e,t){this._alertsReader=e,this._ops=t,this._log=g.C8.Logging.getLogger("AlertsServiceImpl"),this._findAlert=e=>(0,u.pipe)(e,this._alertsReader.getById,a.Yo((()=>new Error(`alert ${e} not found in the repo`)))),this.undoBulk=(0,c.ls)(l.DZ((0,c.ls)(this._alertsReader.getById,p.filter(f.bZ.isBulkApplied))),(e=>this._ops.undoApplied(e,f.bZ.State.Applied.Method.Bulk)()),a.fS((e=>{throw this._log.error("Could not undo bulk-applied alerts",e),e}))),this.getHighlightRanges=(0,c.ls)(this._findAlert,a.UI((e=>e.getHighlightRanges()))),this.hasNewRangesForUpdate=(0,c.ls)(this._findAlert,a.UI((e=>e.hasNewRangesForUpdate))),this.applyPendingRangesUpdate=(0,c.ls)(this._findAlert,a.UI((e=>e.applyPendingRangesUpdate()))),this.getAppliedRanges=(0,c.ls)(this._alertsReader.getById,a.Yo((()=>new Error("alert not found in the repo"))),a.Y$(f.bZ.isApplicableAlert,(e=>new Error(`alert is not applicable: ${e.alertType}`))),a.UI((e=>e.getAppliedRanges())))}apply(e,t,r,n){return this._log.trace("apply",e),(0,u.pipe)(this._findAlert(e),a.tS(a.DT(f.bZ.isApplicableAlert,(()=>new Error("cannot apply not applicable alert")))),a.tS((e=>(0,u.pipe)(m.vM((()=>e.apply(t,n,r))),a.Vn((n=>(this._log.error("apply single alert error",{error:n,alert:e.toLiteAlert(),alternativeIndex:t,source:r}),n)))))))}applyBulk(e,t){this._log.trace("applyBulk",e),this.sendBatchFeedback(e,d.DI.BULK_ACCEPTED,t);const r=(0,u.pipe)(e,h.T.fromArray((e=>(0,u.pipe)(this._findAlert(e),a.Vn((t=>(0,c.bc)(t,{id:e}))),a.tS(a.DT(f.bZ.isRegisteredApplicableAlert,(e=>(0,c.bc)(new Error("cannot apply not applicable or non-registered alert"),e.toLiteAlert())))),a.tS(a.DT((e=>d.wQ.withTransformJson(e._raw)),(e=>(0,c.bc)(new Error("Only alerts with transformJSON can be bulk applied"),e.toLiteAlert())))),a.Vn((([e,t])=>(this._log.error(e.message,t),e)))))));return(0,u.pipe)(r,h.T.flatMap(i.uZ(),(e=>(0,u.pipe)(this._ops._applyTransformJson({alerts:e.map((e=>({alert:e,alternative:f.bZ.getApplicableAlternative(e,0)}))),source:f.l$.api,method:f.bZ.State.Applied.Method.Bulk,feedbackSubtype:t}),s.g_((t=>()=>(this._log.error("applyBulk error",t),h.T.of([],e.map((e=>e.id))))),(()=>()=>h.T.of(e.map((e=>e.id))))))())))}confirmApplied(e){return this._log.trace("commitApplied",e),(0,u.pipe)(e,h.T.fromArray((0,c.ls)(this._findAlert,a.UI(f.Ev.castApplied))),a.Vn((e=>new Error(`Error on trying to confirm applied alerts: ${e.rejected.join(",")}`))),a.tS((e=>this._ops._confirmApplied(e)())))}dismissBatch(e,t){return this._log.trace("dismissBatch",e),(0,u.pipe)(e.map((0,c.ls)(this._findAlert,a.UI((e=>[e])))),(0,o.fold)(w),a.tS((e=>this._ops._dismissBatch(e,t)())))}applyFeedback(e,t,r){return this._log.trace("sendFeedback",{alertId:e,type:t.kind}),(0,u.pipe)(this._findAlert(e),a.tS((e=>this._ops._alertFeedback(e,t,r)())))}sendBatchFeedback(e,t,r){return this._log.trace("sendBatchFeedback",{alertIds:e,type:t}),(0,u.pipe)(e,h.T.fromArray(this._findAlert),h.T.tapFailure((e=>this._log.error("Cannot send batch feedback for alerts",e.rejected))),h.T.foldSuccess((e=>a.F2(this._ops._alertBatchFeedback(e,t,r)()))))}takeReference(e,t){return this._log.trace("takeReference",{alertId:e.id,from:t}),(0,u.pipe)(this._findAlert(e.id),a.tS((e=>e.takeReference(t))))}changeMuteState(e,t){return this._log.trace("changeMuteState",e),(0,u.pipe)(e,h.T.fromArray((e=>this._findAlert(e.id))),h.T.flatMap(i.uZ(),(e=>(0,u.pipe)(this._ops._changeMuteState(e,t)(),a.Vn((e=>(this._log.error("Can not change mute state",e),e))),m.MH))))}changeGapValue(e,t){return(0,u.pipe)(this._findAlert(e),a.tS((e=>this._ops._changeGapValue(e,t)())))}changeSmartPhrasesFeedback(e,t){return(0,u.pipe)(this._findAlert(e),a.tS((e=>this._ops._changeSmartPhrasesFeedback(e,t)())))}rotateSmartPhrasesReplacements(e){return(0,u.pipe)(this._findAlert(e),a.tS((e=>this._ops._rotateSmartPhrasesReplacements(e)())))}discardSmartPhrasesReplacement(e,t){return(0,u.pipe)(this._findAlert(e),a.tS((e=>this._ops._discardSmartPhrasesReplacement(e,t)())))}highlightSmartPhrasesLastAppliedReplacement(e){return(0,u.pipe)(this._findAlert(e),a.tS((e=>this._ops._highlightSmartPhrasesLastAppliedReplacement(e)())))}restoreSmartPhrasesOriginalHighlight(e){return(0,u.pipe)(e,this._alertsReader.getById,p.fold((()=>(this._log.warn(`Cannot find SmartPhrases alert (alert ID: ${e}) when trying to restore original highlight. Skipping.`),(0,u.pipe)(void 0,a.F2))),(e=>(0,u.pipe)(e,a.F2,a.tS((e=>this._ops._restoreSmartPhrasesOriginalHighlight(e)()))))))}changeTakeawayFeedback(e,t){return(0,u.pipe)(this._findAlert(e),a.tS((e=>this._ops._changeTakeawayFeedback(e,t)())))}changeSentenceLevelBrandTonesFeedback(e,t){return(0,u.pipe)(this._findAlert(e),a.tS((e=>this._ops._changeSentenceLevelBrandTonesFeedback(e,t)())))}}const b=i.uZ(),w=(0,a.$4)(b)},43320:(e,t,r)=>{"use strict";r.d(t,{R:()=>s});var n=r(12738),i=r(51072),a=r(32952);class s{constructor(e,t,r,i,a,o,l,c){const u=s.NamedChangesSink.factory(c),d={pm:u(s.Receiver.PM,a),dm:u(s.Receiver.PM,o),capi:u(s.Receiver.CAPI,i),dox:u(s.Receiver.DOX,r),userTextSilent:u(s.Receiver.UserText,s._duplexToSync(e,n.$.Mode.silent)),userTextEcho:u(s.Receiver.UserText,s._duplexToSync(e,n.$.Mode.echo))};s.Producer.create(s.Producer.UserText,{changes:e.changes})(d.dm,d.pm,d.capi,d.dox),s.Producer.create(s.Producer.ALERT_APPLY,l)(d.userTextEcho),s.Producer.create(s.Producer.DOX,r)(d.dm,d.pm,d.userTextSilent,d.capi),t.subscribe((t=>{"before_alert"===t.kind&&e.flushChanges()}))}static init(e,t,r,n,i,o,l){const c=new a.xQ;return new s(e,t,r,n,i,o,l,c),c}}s._duplexToSync=(e,t)=>({pushChanges:r=>{e.pushChanges(r,t)}}),function(e){let t,r,n;!function(e){e.DEd="denali_editor",e.UserText="user_text",e.DOX="remote_document",e.ALERT_APPLY="alert_synonyms_manager"}(t=e.Producer||(e.Producer={})),function(e){e.create=function(e,t){return(...r)=>t.changes.subscribe((t=>{r.forEach((r=>r.pushChanges(e,t)))}))}}(t=e.Producer||(e.Producer={})),function(e){e.DEd="denali_editor",e.UserText="user_text",e.DOX="remote_document",e.CAPI="checking_service",e.PM="position_manager"}(r=e.Receiver||(e.Receiver={})),function(e){function t(e,t,r){return{pushChanges:(n,a)=>{try{let s=t.pushChanges(a);"function"==typeof s&&(s=i.Vi(s)),void 0!==s&&s.catch((t=>r.next({exception:t,details:{from:n,to:e}})))}catch(t){r.next({exception:t,details:{from:n,to:e}})}}}}e.factory=function(e){return(r,n)=>t(r,n,e)},e.create=t}(n=e.NamedChangesSink||(e.NamedChangesSink={}))}(s||(s={}))},70477:(e,t,r)=>{"use strict";r.d(t,{$:()=>F});var n=r(40327),i=r(49524),a=r(59312),s=r(99950),o=r(32952),l=r(95300),c=r(24209),u=r(76974),d=r(25656),p=r(18625),m=r(66310),h=r(50628),g=r(77176),f=r(2834),y=r(85985),v=r(95093),b=r(24755);var w,C,S=r(95343),I=r(13444),k=r(25938),x=r(64450),A=r(83078),E=r(36991),T=r(5114),_=r(22232),L=r(95195),R=r(81531),P=r(46680),O=r(12738),M=function(){function e(e){var t,r=this;this._primarySourceChangeProcessor=e,this._log=R.C8.Logging.getLogger("DuplexImpl",P.i.DEBUG),this._maybePrimarySourceContent=T.none,this._secondarySourceContent=k.RI.unsafeRes(new x.i),this._syncFlash=new o.xQ,this._syncTimer=C.getImmediateTimer(),this.state=new l.X("idle"),this._changesToSecondarySource=new o.xQ,this._changesToSecondarySourceSync=new o.xQ,this.changesToPrimarySource=new o.xQ,this.changesToSecondarySource=this._changesToSecondarySource.pipe((0,m.w)((function(e){switch(e.kind){case"reset":return r._maybePrimarySourceContent=T.some(e.reset),c.T(r._syncTimer.timer,r._syncFlash).pipe((0,h.P)(),(0,g.U)((function(){var t=r._secondarySourceContent.delta.diff(e.reset.delta);return{fullText:e.reset,change:k.RI.delta(t,r._secondarySourceContent.length)}})));case"change":return r._syncTimer.reset(),u.of({fullText:e.fullText,change:e.change});default:return(0,_.vE)(e)}})),(0,f.b)((function(e){var t=e.fullText;"syncing"===r.state.getValue()&&(r._log.debug("Back to consistent state"),r.state.next("idle")),r._maybePrimarySourceContent=T.none,r._secondarySourceContent=t})),(0,g.U)((function(e){return e.change})),(0,y.h)((function(e){return e.delta.ops.length>0})),(0,v.T)(this._changesToSecondarySourceSync),(0,f.b)((function(){r._log.debug("Emit change to secondary source")})),t?(0,b.O)((function(){return new o.xQ}),t):(0,b.O)(new o.xQ),(0,S.x)())}return Object.defineProperty(e.prototype,"flush",{get:function(){return this._flush(),s.of(void 0)},enumerable:!1,configurable:!0}),e.prototype._flush=function(){this._syncFlash.next(void 0)},e.prototype.getSecondarySourceContents=function(){return this._secondarySourceContent},e.prototype.getPrimarySourceContents=function(){var e=this;return(0,n.pipe)(this._maybePrimarySourceContent,T.getOrElse((function(){return e._secondarySourceContent})))},e.prototype.pushChanges=function(e){switch(e.from){case"primary":return this._pushChangesFromPrimarySource(e.change);case"secondary":return this._pushChangesFromSecondarySource(e.change,e.mode);default:(0,_.vE)(e)}},e.prototype._pushChangesFromPrimarySource=function(e){var t=this;return this._log.debug("Got change from primary source"),(0,n.pipe)(this._primarySourceChangeProcessor(this._secondarySourceContent,this._maybePrimarySourceContent,e),L.UI((function(e){"flush"===e.kind?(t._flush(),t._changesToSecondarySourceSync.next(k.RI.flush())):t._changesToSecondarySource.next(e)})))},e.prototype._pushChangesFromSecondarySource=function(e,t){var r=this;switch(this._log.debug("Got change from secondary source",{source:t}),e.kind){case"delta":return T.isNone(this._maybePrimarySourceContent)&&(this._log.debug("Enter inconsistent state"),this.state.next("syncing"),this._maybePrimarySourceContent=T.some(this._secondarySourceContent)),(0,n.pipe)(this._secondarySourceContent,(function(t){return e.prevLen===t.length?(0,n.pipe)(k.RI.res(t.delta.compose(e.delta)),L.g_((function(){return L.t$(new Error("Got non-document delta after apply"))}),(function(t){return L.F2([e,t])}))):L.t$(new Error("Got delta for wrong text, document length: "+t.length+", got change for "+e.prevLen))}),L.g_((function(e){return r._changesToSecondarySourceSync.next(r._secondarySourceContent),L.t$(e)}),(function(e){var n=e[0],i=e[1];return r._secondarySourceContent=i,t===O.$.Mode.echo&&r._changesToSecondarySourceSync.next(n),r.changesToPrimarySource.next(n),L.F2(void 0)})));case"reset":return T.isNone(this._maybePrimarySourceContent)&&(this._log.debug("Enter inconsistent state"),this.state.next("syncing"),this._maybePrimarySourceContent=T.some(this._secondarySourceContent)),this._secondarySourceContent=e,"echo"===t&&this._changesToSecondarySourceSync.next(e),this.changesToPrimarySource.next(e),L.F2(void 0);case"flush":return this.changesToPrimarySource.next(e),L.F2(void 0);default:(0,_.vE)(e)}},e}();!function(e){var t;!function(e){e.reset=function(e){return L.F2({kind:"reset",reset:e})},e.change=function(e){return L.F2((0,a.pi)({kind:"change"},e))},e.error=function(e){return L.t$(new Error(e))}}(t||(t={})),e.deltaChangeProcessor=function(e,r,i){if(k.RI.isFlush(i))return L.F2(i);if(0===e.length)return k.RI.isReset(i)?t.change({fullText:i,change:i}):0===i.prevLen?(0,n.pipe)(k.RI.res(i.delta),L.g_((function(){return t.error("Cannot apply non-document delta to an empty text")}),(function(e){return t.change({fullText:e,change:i})}))):t.error("Cannot apply delta to text. Expected change for len 0, but got "+i.prevLen);if(T.isNone(r))return k.RI.isDelta(i)&&e.length!==i.prevLen?t.error("Cannot apply delta for wrong text length, expected "+e.length+", but got "+i.prevLen):(0,n.pipe)(k.RI.res(e.delta.compose(i.delta)),L.g_((function(){return t.error("Cannot apply invalid delta")}),(function(e){return t.change({fullText:e,change:i})})));if(k.RI.isDelta(i)&&A.MH(r).length!==i.prevLen)return t.error("Cannot apply delta for wrong text length");var a=k.RI.isReset(i)?i.delta:A.MH(r).delta.compose(i.delta);return E.s.deltaEq.equals(a,e.delta)?t.change({fullText:e,change:k.RI.delta(new x.i,e.length)}):(0,n.pipe)(k.RI.res(a),L.g_((function(){return t.error("Cannot apply invalid delta")}),t.reset))},e.fullTextProcessor=function(e,r,n){var i=k.RI.unsafeRes((new x.i).insert(n));if(0===e.length)return t.change({fullText:i,change:i});if(T.isNone(r)){var a=e.delta.diff(i.delta);return t.change({fullText:i,change:k.RI.delta(a,e.length+E.s.calcDiffLength(a))})}return E.s.deltaEq.equals(i.delta,e.delta)?t.change({fullText:i,change:k.RI.delta(new x.i,e.length)}):t.reset(i)}}(w||(w={})),function(e){e.getImmediateTimer=function(){return{timer:u.of(void 0),reset:d.Z}},e.getAuditTimer=function(e){var t=T.none;return{timer:p.P((function(){var r=(0,n.pipe)(t,T.fold((function(){return e}),(function(t){var r=Date.now()-t;return r>e?0:r})));return t=(0,n.pipe)(t,A.vx(T.some(Date.now()))),u.of(void 0).pipe((0,I.g)(r),(0,f.b)((function(){t=T.none})))})),reset:function(){return t=T.none}}}}(C||(C={}));var F,N=r(95574),D=r(8125),$=r(43320);!function(e){e.connectAsPrimarySourceToDuplex=e=>{const t=new o.xQ,r=R.C8.Logging.getLogger("DenaliEditorToDuplexConnector",P.i.DEBUG),a=new M(w.deltaChangeProcessor),s=$.R.NamedChangesSink.factory(t),l=$.R.Producer.create($.R.Producer.UserText,{changes:a.changesToPrimarySource})(s($.R.Receiver.DEd,{pushChanges:t=>{e.pushChanges(t,"user")}})),c=$.R.Producer.create($.R.Producer.DEd,e)(s($.R.Receiver.UserText,{pushChanges:t=>{const s=a.pushChanges({from:"primary",change:t});(0,n.pipe)(s,N.L9((n=>(r.error("Cannot pass invalid change from master",n,t),a.pushChanges({from:"primary",change:e.getContents()})))),L.g_((e=>{r.fatal("Cannot reset duplex with full context",e)}),i.y))}}));return{duplex:a,fails:t,dispose:()=>{l.unsubscribe(),c.unsubscribe()}}},e.duplexAsUserSource=e=>({changes:e.changesToSecondarySource,pushChanges:(t,r)=>e.pushChanges({from:"secondary",change:t,mode:r}),flushChanges:D.ZT,getContents:()=>e.getSecondarySourceContents()}),e.connectAsPrimarySourceWithoutDuplex=e=>({changes:e.changes,pushChanges(t,r){e.pushChanges(t,r===O.$.Mode.echo?"user":"api")},getContents:()=>e.getContents(),flushChanges:()=>e.flushChanges()})}(F||(F={}))},5008:(e,t,r)=>{"use strict";r.d(t,{n:()=>n,A:()=>i});var n,i,a=r(57050),s=r(25938),o=r(36991),l=r(8125),c=r(62965),u=r(24209);!function(e){e.noopSync={pushChanges:l.ZT},e.ignoreResult=function(e){return{pushChanges:t=>{e.pushChanges(t)}}},e.ignoreTEResult=function(e){return{pushChanges:(0,a.ls)(e.pushChanges,c.UI(l.ZT))}},e.pushDeleteThenInsert=function(e){return{pushChanges:t=>{(s.RI.isDelta(t)?s.RI.fromArrayOfDeltas(o.s.splitToDeleteThenInsert(t.delta).filter(o.s.nonEmpty),t.prevLen):[t]).forEach((t=>e.pushChanges(t)))}}}}(n||(n={})),function(e){e.merge=function(e){return{changes:u.T(...e.map((e=>e.changes)))}}}(i||(i={}))},4390:(e,t,r)=>{"use strict";r.d(t,{p:()=>n});var n,i=r(22690),a=r(57050),s=r(40327),o=r(64681),l=r(92843),c=r(93756),u=r(81670),d=r(19429),p=r(70996),m=r(20321),h=r(88570);!function(e){let t;!function(e){e.show=l.v.getShow(i._3,p.h.show),e.eq=l.v.getEq(p.h.Id.ord,p.h.ord),e.empty=()=>l.v.empty(),e.toRegistered=function(e){return l.v.fromMutation((t=>{(0,s.pipe)(e,l.v.forEach(((e,r)=>p.h.isRegistered(e)&&t.set(r,c.t$(e))),((e,r,n)=>{p.h.isRegistered(e)?p.h.isRegistered(r)?t.set(n,c.Hk(e,r)):t.set(n,c.t$(e)):p.h.isRegistered(r)&&t.set(n,c.F2(r))}),((e,r)=>p.h.isRegistered(e)&&t.set(r,c.F2(e)))))}))},e.filter=function(e){return l.v.filter(e,((t,r)=>e(t)&&e(r)),e)}}(t=e.Diff||(e.Diff={})),e.empty=m.v.iso.wrap(m.v.empty),e.eq=o.Eh(m.v.eqShow),e.get=function(e){return(0,a.ls)(m.v.iso.unwrap,m.v.get(e))},e.reduce=function(e,t){return(0,a.ls)(m.v.iso.unwrap,m.v.reduce(e,t))},e.diff=function(e,t){return m.v.diff(m.v.iso.unwrap(e),m.v.iso.unwrap(t))},e.isEmpty=function(e){return 0===m.v.iso.unwrap(e).entries.size},e.find=function(e){return(0,a.ls)(m.v.iso.unwrap,m.v.find(e))},e.size=function(){return(0,a.ls)(m.v.iso.unwrap,m.v.size)},e.from=function(e){return(0,s.pipe)(m.v.createDiff({added:e.reduce(((e,t)=>e.set(t.id,p.h.create(t))),new Map)}),u.T.recover(a.Q1),h.r.applyDiff,d.UI((0,a.ls)(u.T.recover(a.Q1),m.v.iso.wrap)))(m.v.empty)}}(n||(n={}))},20321:(e,t,r)=>{"use strict";r.d(t,{v:()=>o});var n=r(71249),i=r(22690),a=r(40327),s=r(64681);var o,l={equals:function(){return!0}},c=r(92843),u=r(22232),d=r(95574),p=r(43675),m=r(5114),h=r(93756),g=r(95195),f=r(73975),y=r(90329),v=r(70996);!function(e){function t(e,t){return r=>r.order.reduce(((e,n)=>((0,u.kG)(r.entries.has(n),"got corrupted state"),t(e,r.entries.get(n)))),e)}function r({added:e=new Map,updated:t=new Map,removed:r=new Map}){const n=new Map,i=c.v.fromMutation((i=>{r.forEach(((e,t)=>{i.set(t,h.t$(e))})),e.forEach(((e,t)=>{i.has(t)?n.set(t,`alert add overlaps with alert remove: toAdd(${v.h.show.show(e)} overlapWith(${h.ZN(v.h.show,v.h.show).show(i.get(t))}))`):i.set(t,h.F2(e))})),t.forEach((([e,t],r)=>{i.has(r)?n.set(r,`alert update overlaps with unexpected alert add/remove: toUpdate(${v.h.show.show(t)}) overlapWith(${h.ZN(v.h.show,v.h.show).show(i.get(r))}))`):i.set(r,h.Hk(e,t))}))}));return n.size>0?g.t$({recovered:i,rejected:n}):g.F2(i)}e.iso=s.k4(),e.empty={entries:new Map,order:[],latestChangeDiff:c.v.empty(),diffVersion:0},e.get=function(e){return t=>m.fromNullable(t.entries.get(e))},e.find=function(e){return t(m.none,((t,r)=>(0,a.pipe)(t,m.alt((()=>m.fromPredicate(e)(r))))))},e.reduce=t,e.size=e=>e.entries.size,e.diff=function(e,t){return 0===e.diffVersion?d.MH(r({added:t.entries})):e.diffVersion+1===t.diffVersion?t.latestChangeDiff:p.yi(v.h.ord)(e.entries,t.entries)},e.applyDiff=function(e){return t=>{const r=p.QT(p.kH.createStrict(v.h.ordShow),t.entries,e);return(0,a.pipe)(r,g.Pd((r=>{const n=c.v.fromMutation((t=>{(0,a.pipe)(e,c.v.forEach(((e,n)=>!r.rejected.has(n)&&t.set(n,h.t$(e))),((e,n,i)=>!r.rejected.has(i)&&t.set(i,h.Hk(e,n))),((e,n)=>!r.rejected.has(n)&&t.set(n,h.F2(e)))))}));return{recovered:w(r.recovered,n,t.diffVersion),rejected:r.rejected}}),(r=>w(r,e,t.diffVersion))))}},e.applyDiffLoose=function(e){return t=>{const r=p.QT(p.kH.createLoose(v.h.ordShow),t.entries,e);return(0,a.pipe)(r,g.Pd((r=>({recovered:w(r.recovered,e,t.diffVersion),rejected:r.rejected})),(r=>w(r,e,t.diffVersion))))}},e.createDiff=r,e.toJSON=function(e){return{entries:Array.from(e.entries),order:e.order,latestChangeDiff:c.v.toJSON(e.latestChangeDiff),diffVersion:e.diffVersion}},e.diffEqShow=Object.assign(Object.assign({},c.v.getEq(v.h.Id.ord,v.h.ord)),c.v.getShow(v.h.Id.show,v.h.show));const o=Object.assign(Object.assign({},y.Eh(v.h.Id.ord,v.h.ord)),y.ZN(v.h.Id.show,v.h.show)),b=Object.assign(Object.assign({},n.Eh(v.h.Id.ord)),n.ZN(v.h.Id.show));function w(e,t,r){return{entries:e,order:(0,a.pipe)(e,y.VO(v.h.ord),n.UI((e=>e.id))),latestChangeDiff:t,diffVersion:r+1}}e.contentEqShow=Object.assign(Object.assign({},f.MW({entries:o,order:b,latestChangeDiff:l,diffVersion:l})),i.aM({entries:o,order:b,latestChangeDiff:e.diffEqShow,diffVersion:i.yt})),e.eqShow=Object.assign(Object.assign({},f.MW({entries:o,order:b,latestChangeDiff:e.diffEqShow,diffVersion:f.lr})),i.aM({entries:o,order:b,latestChangeDiff:e.diffEqShow,diffVersion:i.yt}))}(o||(o={}))},88570:(e,t,r)=>{"use strict";r.d(t,{r:()=>n});var n,i=r(57050),a=r(95195),s=r(20321);!function(e){e.empty=s.v.empty,e.applyDiff=function(e){return(0,i.ls)(s.v.applyDiffLoose(e),a.Vn((e=>({recovered:e.recovered,rejected:e.rejected}))))},e.toCheckingResult=function(e){return s.v.iso.wrap(e)}}(n||(n={}))},89772:(e,t,r)=>{"use strict";r.d(t,{w:()=>i});var n,i,a=r(57050),s=r(40327),o=r(92843),l=r(68983),c=r(5114),u=r(90329),d=r(66896),p=r(51653),m=r(70996);!function(e){e.modelToCounters=function(e){return m.h.isRegistered(e)?e.counters:p.R.empty}}(n||(n={})),function(e){e.monoid=u.uZ(d.R.Id.ord,d.R.Meta.group),e.eq=u.Eh(d.R.Id.ord,d.R.Meta.eq),e.isEmpty=u.xb,e.lookup=u.P5(d.R.Id.ord),e.applyDiff=t=>n=>c=>(0,s.pipe)(n,o.v.foldMap(e.monoid)(i(t),p(t),r(t)),(0,l.W)(e.monoid.concat)(c),u.hX((0,a.ff)(d.R.Meta.isEmpty))),e.updatePercentiles=e=>t=>{let r=t;return e.forEach(((e,t)=>{r=(0,s.pipe)(r,u.cq(d.R.Id.ord)(t,d.R.Meta.ratioToPercentile(e)),c.fold((()=>(0,s.pipe)(r,u.ZQ(d.R.Id.ord)(t,d.R.Meta.fromPercentile(e)))),a.yR))})),r};const t=(0,a.ls)(n.modelToCounters,d.R.Meta.fromAlertCounters),r=e=>r=>m(e)(r,t),i=e=>r=>m(e)(r,(0,a.ls)(t,d.R.Meta.group.inverse)),p=t=>(n,a)=>e.monoid.concat(r(t)(a),i(t)(n)),m=e=>(t,r)=>(0,s.pipe)(e,u.hX((e=>e(t.alert))),u.UI((()=>r(t))))}(i||(i={}))},13313:(e,t,r)=>{"use strict";r.d(t,{A:()=>n});var n,i=r(38983),a=r(4390),s=r(54216),o=r(93508),l=r(57091),c=r(67434),u=r(98403),d=r(89772);!function(e){e.defaultState={alerts:a.p.empty,lenses:d.w.monoid.empty},e.get=(n,i,s)=>i.pipe(o.O(new Map),l.a(n.pipe(o.O(a.p.empty),c.R(((e,r)=>t(r,s.lensFilters)(e)),e.defaultState)),r)),e.getMock=(t,r)=>{const n=i.h.create(e.defaultState);return e.get(t,r,s.t.create(s.t.defaultLensFilters,s.t.defaultTextFilters)).subscribe(u.wW(n)),n};const t=(e,t)=>r=>{const n=a.p.Diff.toRegistered(a.p.diff(r.alerts,e));return{alerts:e,lenses:d.w.applyDiff(t)(n)(r.lenses)}},r=(e,t)=>Object.assign(Object.assign({},t),{lenses:d.w.updatePercentiles(e)(t.lenses)})}(n||(n={}))},35301:(e,t,r)=>{"use strict";r.d(t,{J:()=>n});var n,i=r(71249),a=r(22690),s=r(57050),o=r(40327),l=r(38983),c=r(84966),u=r(80358),d=r(45701),p=r(90329),m=r(5114),h=r(43675),g=r(62965),f=r(95195),y=r(8125),v=r(81531),b=r(40018),w=r(32952),C=r(45586),S=r(85985),I=r(77176),k=r(2834),x=r(98403),A=r(16118),E=r(40151),T=r(85654);!function(e){let t,r,n;!function(e){let t;!function(e){e.ord=d.ordString,e.show=a._3,e.create=e=>e}(t=e.Id||(e.Id={})),e.isSpecial=e=>Object.values(c.JW.SpecialCategory).includes(e),e.specialCategoryDescription="Special category"}(t=e.Category||(e.Category={})),function(e){e.filter=e=>p.hX((t=>e(t.id))),e.filterWithCount=(e,t)=>r=>{const n=Array.from(r.keys()),i=T.k.getAlerts(t,n).byCategory;return(0,o.pipe)(r,p.DZ((t=>e(t.id)?m.some(Object.assign(Object.assign({},t),{alertsCount:i.get(t.id).filter(b.bZ.isRegistered).length})):m.none)))}}(r=e.BaseMutedCategories||(e.BaseMutedCategories={})),function(e){let n,a;!function(e){let t;!function(e){e.BeforeCategoriesMuted="BeforeCategoriesMuted",e.CategoriesChanged="CategoriesChanged"}(t=e.Type||(e.Type={})),e.isMuteEvent=function(e){return e.type===t.BeforeCategoriesMuted},e.isChangedEvent=function(e){return e.type===t.CategoriesChanged}}(n=e.Events||(e.Events={})),e.create=function(e,a,d,p,y){const E=v.C8.Logging.getLogger("MutedAlertsModel"),_=l.h.create(new Map),L=new w.xQ,R=new C.w.Keeper;return R.push(e.pipe(S.h(u.h.is("session_started")),I.U((e=>function(e){const t=e.map((e=>[e.userMuteCategory,{id:e.userMuteCategory,description:e.userMuteCategoryDescription,scope:e.userMuteScope}]));return new Map(t)}(e.userMutedCategories))),k.b(x.wW(_)),k.b((()=>L.next({type:n.Type.CategoriesChanged})))).subscribe(),_.pipe(A.G(),I.U((([e,r])=>function(e,r){return{muted:h.uz(t.Id.ord)(e,r),unmuted:h.uz(t.Id.ord)(r,e)}}(e,r))),I.U(function(e){return({muted:t,unmuted:r})=>({toMute:T.k.getAlerts(e,t).all.filter((e=>e.mute!==b.bZ.MuteStateType.Muted)),toUnmute:T.k.getAlerts(e,r).all.filter((e=>e.mute!==b.bZ.MuteStateType.Unmuted))})}(d)),k.b((({toMute:e,toUnmute:t})=>{e.length>0&&p.changeMuteState(e,b.bZ.MuteStateType.Muted),t.length>0&&p.changeMuteState(t,b.bZ.MuteStateType.Unmuted)}))).subscribe()),{events:L,mutedCategories:_,muteCategories:(e,r)=>{(0,o.pipe)(a.sendFeedback({kind:c.Mw.MUTE,userMuteScope:y,userMuteCategories:e}),g.Vn((e=>{E.warn("Alerts could not be muted on CAPI",e)})))();const s=T.k.getAlerts(d,e),l=s.all.filter((e=>e.mute!==b.bZ.MuteStateType.Muted));0===l.length&&E.warn("No alerts were muted on category mute",{categoryIds:e});const u=function(e,r,n){return a=>{const s=new Map(a);return e.forEach(((e,a)=>{t.isSpecial(a)?s.set(a,{id:a,scope:r,description:t.specialCategoryDescription}):(0,o.pipe)(i.P5(0,e),m.chain((e=>e.muteCategory)),m.fold((()=>n.error("No alerts to mute",a)),(e=>s.set(a,{id:e.id,description:e.description,scope:r}))))})),s}}(s.byCategory,y,E)(_.get());return r&&L.next({type:n.Type.BeforeCategoriesMuted,muteScope:y,categories:e.map((e=>u.get(e))),affectedAlerts:l}),_.set(u),L.next({type:n.Type.CategoriesChanged}),f.F2(void 0)},unmuteCategories:e=>{(0,o.pipe)(a.sendFeedback({kind:c.Mw.UNMUTE,userMuteScope:y,userMuteCategories:e}),g.Vn((e=>{E.warn("Alerts could not be un-muted on CAPI",e)})))();return 0===T.k.getAlerts(d,e).all.filter((e=>e.mute!==b.bZ.MuteStateType.Unmuted)).length&&E.warn("No alerts were unmuted on category mute",{categoryIds:e}),_.modify(function(e,t){return r=>{const n=new Map(r);return e.forEach((e=>{r.has(e)?n.delete(e):t.error("Tried to unmute a category which is not muted",e)})),n}}(e,E)),L.next({type:n.Type.CategoriesChanged}),f.F2(void 0)},getMutedCategories:()=>(0,o.pipe)(_.get(),r.filterWithCount((0,s.ff)(t.isSpecial),d)),getMutedSpecialCategories:()=>(0,o.pipe)(_.get(),r.filter(t.isSpecial)),loadCachedMutedCategories:e=>{_.set(e)},dispose:()=>R.dispose()}},function(e){e.create=function(){return{events:E.E,mutedCategories:l.h.create(new Map),getMutedCategories:()=>new Map,getMutedSpecialCategories:()=>new Map,muteCategories:(e,t)=>f.F2(void 0),unmuteCategories:e=>f.F2(void 0),loadCachedMutedCategories:y.ZT,dispose:y.ZT}}}(a=e.Mock||(e.Mock={}))}(n=e.CategoriesModel||(e.CategoriesModel={}))}(n||(n={}))},85654:(e,t,r)=>{"use strict";r.d(t,{k:()=>n});var n,i=r(40327),a=r(5114),s=r(40018),o=r(4390);!function(e){e.create=e=>({getAlertMuteCategory:t=>(0,i.pipe)(e.getById(t),a.chain((e=>e.muteCategory)),a.map((e=>e.id)))}),e.getAlerts=function(e,t){const r={byCategory:new Map(t.map((e=>[e,[]]))),all:[]};return(0,i.pipe)(e.get(),o.p.reduce(r,((e,{alert:r})=>(0,i.pipe)(r.muteCategory,a.filter((e=>t.includes(e.id))),a.map((e=>e.id)),a.alt((()=>a.fromNullable(t.find(s.bZ.belongsToSpecialCategory(r))))),a.fold((()=>e),(t=>(e.byCategory.get(t).push(r),e.all.push(r),e)))))))}}(n||(n={}))},21729:(e,t,r)=>{"use strict";r.d(t,{dM:()=>n,j:()=>i});var n,i,a,s,o=r(73975),l=r(22690),c=r(40327),u=r(38983),d=r(73353),p=r(48837),m=r(5114),h=r(83078);!function(e){e.group=p.kT({critical:p.Kh,advanced:p.Kh,free:p.Kh,paid:p.Kh,criticalPriority:p.Kh,advancedPriority:p.Kh,freePriority:p.Kh,paidPriority:p.Kh,unread:p.Kh,muted:p.Kh}),e.eq=o.MW({critical:o.lr,advanced:o.lr,free:o.lr,paid:o.lr,unread:o.lr,criticalPriority:o.lr,advancedPriority:o.lr,freePriority:o.lr,paidPriority:o.lr,muted:o.lr}),e.show=l.aM({critical:l.yt,advanced:l.yt,free:l.yt,paid:l.yt,criticalPriority:l.yt,advancedPriority:l.yt,freePriority:l.yt,paidPriority:l.yt,unread:l.yt,muted:l.yt}),e.isValid=function(e){return e.critical>=0&&e.advanced>=0&&e.unread>=0},e.isEmpty=function(t){return e.eq.equals(t,e.group.empty)}}(n||(n={})),function(e){e.MIN_GOALS=3,e.TOTAL_GOALS=e.MIN_GOALS+2,e.calculateCompleteness=function(t){const r=(0,c.pipe)(t.goals,m.exists((e=>e.size>0))),n=(0,c.pipe)(t.emotions,m.exists((e=>e.size>0)));return d.R$.equals(t,d.R$.unset)||(0,c.pipe)(t.domain,h.wo((e=>"general"===e)))&&!(m.isSome(t.audience)||m.isSome(t.style)||r||n)?0:Number(r||0)+Number(n||0)+e.MIN_GOALS}}(i||(i={})),function(e){e.zero={full:0,trimmed:0}}(a||(a={})),function(e){let t;!function(e){e[e.Document=0]="Document",e[e.Plagiarism=1]="Plagiarism"}(t=e.CheckingKind||(e.CheckingKind={})),e.Mock={getCheckingForState:()=>u.h.create({kind:e.CheckingKind.Document,type:"idle"})}}(s||(s={}))},54286:(e,t,r)=>{"use strict";r.d(t,{_:()=>i});var n,i,a=r(38983),s=r(73353),o=r(5114),l=r(20817);!function(e){e.unwrap=function(e){return l.Ri.create(o.getOrElse((()=>e)),o.some)}}(n||(n={})),function(e){e.create=function(e,t,r,i){const l=n.unwrap(t.style),c=n.unwrap(t.audience),u=n.unwrap(t.domain),d=a.h.create(e),p=d.lens("style").lens(l),m=d.lens("domain").lens(u),h={audience:{items:s.R$.audiences,current:d.lens("audience").lens(c),default:o.some(t.audience)},formality:{items:s.R$.formalityLevels,current:p,default:o.some(t.style),shouldDisable:e=>m.view((t=>!!t&&!s.R$.isStyleValidWithDomain(t,e)))},domain:{items:s.R$.domains,current:m,default:o.some(t.domain),shouldDisable:e=>p.view((t=>r.isFree?"general"!==e:!s.R$.isStyleValidWithDomain(e,t)))},intent:{items:s.R$.goals,current:d.lens("goals")},tone:{items:s.R$.tone,current:d.lens("emotions")}};return{localContext:d,blocks:h,showSetGoalsLoader:a.h.create(!r.demoMode&&i)}}}(i||(i={}))},7910:(e,t,r)=>{"use strict";r.d(t,{sJ:()=>y,Pv:()=>v});var n=r(57050),i=r(40327),a=r(5114),s=r(71936),o=r(34442),l=r(26027),c=r(48521),u=r(79471),d=r(93494),p=r(2844),m=r(77176),h=r(93508),g=r(28043),f=r(57091);function y(e){return(t,r,n,i,a,o)=>s.Z.composeKnot({content:s.Z.fromSideEffect((r=>{b(t)(r);const n=r.action.action;"item"===n.key&&e(n.action)}),C(r,a,o)),root:w(r,n,i)})}function v(e,t){return{viewState:(r,n,s)=>l=>{const u=(0,i.pipe)(r,a.exists((e=>e===l.id)));return{cell:{item:t(n)(l),root:{height:{value:l.positionState.height,watched:l.positionState.watched&&!e.isScheduledToDispose(l),isValid:l.positionState.isHeightValid},position:{top:l.positionState.absTop,animationInProgress:l.positionState.animationInProgress},layer:u||c.o.isAnimatable(l)&&l.visualState.incomplete&&!(0,i.pipe)(l.visualState.from,a.exists((e=>"focused"===e)))?o.H.Layer.front:o.H.Layer.back}},root:l.id,hashCode:l.hashCode.bind(l),equals:e=>l.equals(e.cell.item.view),compare:e=>s.compare(l,e.cell.item.view)}}}}function b(e){return t=>{switch(t.action.action.action.kind){case o.H.ActionKind.changePosition:e.changePosition.next({id:t.key,height:t.action.action.action.height});break;case o.H.ActionKind.completePositionAnimation:e.completePositionAnimation.next(t.key)}}}const w=(e,t,r)=>s.Z.fromSideEffect((e=>{t.next(e.element)}),p.aj(r,e.view("cardsHeight")).pipe(m.U((([e,t])=>({disableUserActions:e,height:t}))),h.O({disableUserActions:!1,height:0}))),C=(e,t,r)=>{const s=e.view(d.v.Prism.items),o=e.pipe(m.U((e=>e.itemsOrd))),c=e.pipe(m.U((0,n.ls)(u.In.getActiveItem,a.map(l.X.getId)),g.x())),p=e.view(t.getActiveAlertsCount).view((e=>0===e));return s.pipe(f.a(c,p,o),m.U((([e,n,s,o])=>{const l=e.getAt(0);return e.filter((e=>e.positionState.visible||e.positionState.watched&&((e,t)=>!!(0,i.pipe)(t,a.exists((t=>t.id===e.id)))||(0,i.pipe)(t,a.exists((e=>e.positionState.isHeightValid))))(e,l))).map(t.viewState(n,s,o),r(o))})))}},68579:(e,t,r)=>{"use strict";r.d(t,{A:()=>n});var n,i=r(27378),a=r(5739),s=r(12187),o=r(8125),l=r(5114),c=r(4680),u=r(63969),d=r(34442),p=r(95983),m=r(77176);!function(e){let t;function r(e){return c.UI.List.make(p.aW.getFoldableWithIndex(),n(e))}function n(t){return c.UI.Knot.make(e.IdProvider,{cell:c.UI.Knot.make(d.H.Cell,{item:c.UI.Composite.make(e.CardStyleProvider,t)})})}!function(e){e.onMount="onMount"}(t=e.ActionsKind||(e.ActionsKind={})),e.cardListContent=r,e.cardList=function(t){return c.UI.Knot.make(e.ScrollableBox,{content:r(t)})},e.ScrollableBox=c.UI.Grid.make((({notify:e,view:r,slots:n})=>i.createElement(a.F.div,Object.assign({},(0,s.Sh)(r("disableUserActions").pipe(m.U((0,o.RN)(g.disableUserActions,void 0))),g.scrollContent),{"data-purpose":"scrollable-box",style:{height:r("height")},mount:r=>e({kind:t.onMount,element:l.fromNullable(r)})()}),n.content))),e.cell=n,e.CardStyleProvider=c.UI.Grid.make((({slots:e})=>i.createElement("div",{className:g.cardWrapper},e.children))),e.IdProvider=c.UI.Grid.make((({slots:e,state:t})=>i.createElement(a.F.div,{"data-id":t},e.cell)))}(n||(n={}));const h={margin:`${u.u.rem(.5)} 0`,background:"none",userSelect:"none",$nest:{"&:before":{position:"absolute",left:u.u.rem(-.5),width:u.u.rem(.5),height:u.u.percent(100),background:"none",content:"''"}}},g=u.u.stylesheet({scrollContent:[{position:"relative",boxSizing:"content-box"}],disableUserActions:[{pointerEvents:"none"}],cardWrapper:[h]})},84246:(e,t,r)=>{"use strict";r.d(t,{Q:()=>h});var n,i=r(27378),a=r(5739),s=r(4680),o=r(77610),l=r(33119),c=r(50225),u=r(35108),d=r(97734),p=r(77176),m=r(19157);!function(e){e.Mini=({card:e,actions:t,useBundleContainer:r=!1,twoLined:n=!1})=>i.createElement(a.F.Fragment,null,e.pipe(p.U((e=>i.createElement(m.P.SmartPhrases,{card:e,actions:t,useBundleContainer:r,twoLined:n})))))}(n||(n={}));var h,g=r(28043);!function(e){e.Card=e=>s.UI.Node.make((({view:t})=>{const r=t("view");return i.createElement(a.F.Fragment,null,r.pipe(g.x(((e,t)=>e.id===t.id&&e.visualState.transitionId===t.visualState.transitionId&&e.visualState.transition.type===t.visualState.transition.type)),p.U((a=>i.createElement(c.b.Card,{miniCard:o.C.isSmartPhrasesItem(a)?i.createElement(n.Mini,{card:r,actions:e,useBundleContainer:!0}):i.createElement(d.A.Mini,{card:r,actions:e}),fullCard:o.C.isSmartPhrasesItem(a)?i.createElement(l.A.Full,{card:r,actions:e}):i.createElement(d.A.Full,{card:r,actions:e}),successCard:i.createElement(l.A.Success,{isLastCard:t("isLastCard"),actions:e}),feedbackForm:i.createElement(l.A.FeedbackForm,{cardData:a,actions:e}),actions:e,card:a,transitionClassMapper:u.a})))))}))}(h||(h={}))},22373:(e,t,r)=>{"use strict";r.d(t,{p:()=>n});var n,i=r(27378),a=r(5739),s=r(4680),o=r(33119),l=r(50225),c=r(28043),u=r(77176);!function(e){e.Card=e=>s.UI.Node.make((({view:t})=>{const r=t("view");return i.createElement(a.F.Fragment,null,r.pipe(c.x(((e,t)=>e.id===t.id&&e.visualState.transitionId===t.visualState.transitionId&&e.visualState.transition.type===t.visualState.transition.type)),u.U((n=>i.createElement(l.b.Card,{miniCard:i.createElement(o.A.Mini,{card:r,actions:e}),fullCard:i.createElement(o.A.Full,{card:r,actions:e}),successCard:i.createElement(o.A.Success,{isLastCard:t("isLastCard"),actions:e}),feedbackForm:i.createElement(o.A.FeedbackForm,{cardData:n,actions:e}),actions:e,card:n})))))}))}(n||(n={}))},84974:(e,t,r)=>{"use strict";r.d(t,{z:()=>P});var n=r(27378),i=r(5739),a=r(4680),s=r(57050),o=r(5114),l=r(63969),c=r(30763),u=r(26027),d=r(15646),p=r(86718),m=r(4890),h=r(74754),g=r(66346),f=r(1883),y=r(86531),v=r(7046),b=r(94793),w=r(3656),C=r(28706),S=r(77176),I=r(30522),k=r(54126);const x=({item:e,layoutDensity:t})=>{const r=(0,s.zG)(t,m.j.Density.matchOrDefault(m.j.Density.minimal)((()=>R.minimalDescription),(()=>R.description)));return(0,s.zG)(e.cardMeta.details,o.fold((()=>null),(t=>n.createElement(g.G3,{key:"card-actions-details",visualState:e.visualState,className:R.more},n.createElement(w.XY,Object.assign({className:r},h.y.renderToHtml(t)))))))},A=({wordCount:e,checked:t})=>n.createElement(n.Fragment,null,n.createElement(w.H3,{className:t?R.wordCountChecked:R.wordCountUnchecked},e,"Â ",n.createElement(w.XY,{className:R.words},"words"))),E=({item:e,layoutDensity:t,actions:r})=>{const i=p.f.isTextLengthCard(e.cardMeta)?e.cardMeta.wordCount:null;return n.createElement(n.Fragment,null,null!==i?n.createElement(A,{wordCount:i,checked:e.itemMeta.checked}):null,n.createElement(y.dk,{className:null!==i?R.descriptionWithHeader:void 0,description:e.cardMeta.explanation,actions:r,layoutDensity:t}))},T=({item:e,actions:t})=>(0,s.zG)(e.cardMeta.details,o.fold((()=>null),(()=>n.createElement(_,{key:"card-actions-button",actions:t,item:e})))),_=({item:{id:e,visualState:t},actions:r,className:i})=>{const a=n.useContext(c.m.Context);return n.createElement(v.zx.Tertiary,{key:"toggle-more",name:(0,g.hC)(t,a),title:(0,g.hC)(t,a),className:i,onClick:C.hz((()=>{r.next({type:d.eI.Kind.startTransitionTo,id:e,transition:{type:u.X.isCardOpen(t)?"focused":"expanded",clockwise:!0}})}))},u.X.isCardOpen(t)?n.createElement(b.JO.Arrow,{key:"more",className:R.lessIcon}):n.createElement(b.JO.QuestionMark,{key:"expand"}),(0,g.hC)(t,a))},L=e=>a.UI.Knot.make((e=>a.UI.Grid.make((({state:t,slots:r})=>n.createElement(i.F.div,{className:R.expanded},t.pipe(S.U((t=>{return n.createElement(f.Z,{header:n.createElement(i.F.Fragment,null,r.header),visualState:t.visualState,onFocus:s.Q1,theme:(a=t.renderOptions.layoutDensity,{wrapper:(0,s.zG)(a,m.j.Density.matchOrDefault(m.j.Density.minimal)((()=>R.wrapper),(()=>{})))}),body:n.createElement(E,{item:t,actions:e,layoutDensity:t.renderOptions.layoutDensity}),mainActions:null,footer:n.createElement(x,{item:t,layoutDensity:t.renderOptions.layoutDensity}),subActions:n.createElement(T,{item:t,actions:e})});var a})))))))(e),{header:I.r}),R=l.u.stylesheet({wrapper:[k.kX],lessIcon:[k.A2],more:[y.IH],description:[y.LM],minimalDescription:[y.LM,y.Gq],descriptionWithHeader:[k.H4],wordCountChecked:[k.NR],wordCountUnchecked:[k.Lp],words:[k.ht],expanded:[k.TX]});var P,O=r(34190),M=r(3303),F=r(70100),N=r(50225),D=r(19751);!function(e){e.Card=e=>a.UI.Node.make((({view:t})=>{const r=t("view"),s=(0,O.cp)(r,e),o=(0,O.Hu)(r,e);return n.createElement(i.F.Fragment,null,r.pipe(D.$f(F.X.eq),S.U((t=>n.createElement(N.b.Card,{miniCard:a.UI.mount(M.m,s),fullCard:a.UI.mount(L(e),o),actions:e,card:t})))))}))}(P||(P={}))},98752:(e,t,r)=>{"use strict";r.d(t,{fw:()=>n});var n,i=r(27378),a=r(57050),s=r(5739),o=r(5114),l=r(95195),c=r(8125),u=r(81531),d=r(4680),p=r(34190),m=r(30522),h=r(3303),g=r(26027),f=r(77610),y=r(47306),v=r(33119),b=r(50225),w=r(85287),C=r(22800),S=r(35108),I=r(97734),k=r(28522),x=r(76720),A=r(28043),E=r(77176),T=r(85985);function _(e){return e.incomplete?(0,a.zG)(e.from,o.filter((e=>"expanded"===e||"focused"===e)),o.filter((()=>"removed"===e.transition.type)),o.map((()=>({main:w.$4.focused2renderedMain,shade:e.transition.clockwise?w.$4.focused2renderedShadeClockwise:w.$4.focused2renderedShade}))),o.getOrElse((()=>(0,S.SA)(e)))):{}}function L(e){return e.incomplete?(0,a.zG)(e.from,o.filter((e=>"expanded"===e||"focused"===e)),o.filter((()=>"removed"===e.transition.type)),o.map((()=>({main:C.S.focused2renderedBundleMain,shade:e.transition.clockwise?C.S.focused2renderedBundleShadeClockwise:C.S.focused2renderedBundleShade}))),o.getOrElse((()=>(0,S.a)(e)))):{}}!function(e){const t=e=>f.C.isTakeawayItem(e.card)?i.createElement(x.o1.Full,{card:e.card,actions:e.actions,isChecklistItem:!0,isChecklistBundleItem:!!e.isBundle,cardHeader:e.cardHeader}):i.createElement(k.J,{card:e.card,actions:e.actions,isChecking:e.isChecking,transform:e.transform,isCheckingGlobal:e.isCheckingGlobal}),r=e=>(0,a.zG)(e.card,f.C.match({super:(0,a.a9)(o.none),smartPhrases:(0,a.a9)(o.none),sentenceLevelBrandTones:(0,a.a9)(o.none),takeaway:o.some,default:o.some}),o.fromEither,o.chain(a.yR),o.fold((()=>(n("ChecklistBundleCard").error("rendering fallback for card",e.card),i.createElement(i.Fragment,null))),(r=>i.createElement(t,Object.assign({},e,{card:r,isBundle:!0})))));e.Card=e=>d.UI.Node.make((({view:o})=>{const c=o("view"),u=(0,p.cp)(c,e),f=(0,p.Mt)(c,e),w=e=>(n("ChecklistAlertCard").error("rendering fallback for card",e),null),{isChecking:C,isCheckingGlobal:S,transform:k}=g.X.useCardStates(c),x=r=>i.createElement(t,{card:r,actions:e,isChecking:C,isCheckingGlobal:S,transform:k,cardHeader:d.UI.mount(m.r,f),isBundle:!1});return i.createElement(s.F.Fragment,null,c.pipe(A.x(((e,t)=>e.id===t.id&&e.visualState.transitionId===t.visualState.transitionId&&e.visualState.transition.type===t.visualState.transition.type&&e.viewKind===t.viewKind)),E.U((t=>i.createElement(b.b.Card,{miniCard:d.UI.mount(h.m,u),fullCard:y.J.isBundle(t)?i.createElement(I.A.Full,{card:c.pipe(T.h(y.J.isBundle)),actions:e,renderCard:r}):(0,a.zG)(t,g.X.match({super:w,smartPhrases:w,sentenceLevelBrandTones:w,takeaway:x,default:x}),l.fS((e=>(n("ChecklistAlertCard").error("Got an unexpected card type",e),i.createElement(i.Fragment,null))))),feedbackForm:i.createElement(v.A.FeedbackForm,{cardData:t,actions:e}),actions:e,card:t,transitionClassMapper:"bundle"===t.viewKind?L:_,removedCard:d.UI.mount(h.m,u)})))))}));const n=(0,c.HP)(u.C8.Logging.getLogger)}(n||(n={}))},34190:(e,t,r)=>{"use strict";r.d(t,{Hu:()=>o,cp:()=>l,Mt:()=>u});var n=r(57050),i=r(71936),a=r(24713),s=r(77176);const o=(e,t)=>i.Z.composeKnot({root:i.Z.fromSideEffect(n.Q1,e),header:u(e,t)}),l=(e,t)=>i.Z.composeKnot({root:i.Z.fromSideEffect((e=>t.next(e)),e.pipe(a.j("id"))),header:c(e)}),c=e=>i.Z.composeKnot({title:i.Z.fromSideEffect(n.Q1,e.pipe(s.U((e=>Object.assign(Object.assign({},e.itemMeta),{isMinimized:!0}))))),label:i.Z.fromSideEffect(n.Q1,e)}),u=(e,t)=>i.Z.composeKnot({title:i.Z.fromSideEffect(n.Q1,e.pipe(a.j("itemMeta"),s.U((e=>Object.assign(Object.assign({},e),{isMinimized:!1}))))),controls:i.Z.fromSideEffect((e=>t.next(e)),e.pipe(s.U((e=>e.id))))})},30522:(e,t,r)=>{"use strict";r.d(t,{y:()=>w,r:()=>C});var n=r(27378),i=r(57050),a=r(5739),s=r(77176),o=r(5114),l=r(4680),c=r(63969),u=r(15215),d=r(39210),p=r(7046),m=r(94793),h=r(3656),g=r(54126);const f=({checked:e})=>n.createElement(a.F.Fragment,null,e.pipe(s.U((e=>e?n.createElement(m.JO.ValidationOk,{width:16}):n.createElement(m.JO.ValidationWarning,{width:16}))))),y=l.UI.Node.make((({state:e})=>n.createElement(n.Fragment,null,n.createElement(f,{checked:e.pipe(s.U((({miniChecked:e,checked:t})=>(0,i.zG)(e,o.getOrElse((()=>t))))))}),n.createElement(a.F.div,{className:S.titleContainer},e.pipe(s.U((e=>e.isMinimized?n.createElement(h.XY,{className:S.title},(0,i.zG)(e.miniTitle,o.getOrElse((()=>e.title)))):n.createElement(h.H4,{className:S.title},e.title)))))))),v=l.UI.Node.make((({state:e})=>n.createElement(a.F.Fragment,null,e.pipe(s.U((e=>(0,i.zG)(e.itemMeta.miniLabel,o.fold((()=>(0,i.zG)(u.d.getAlertsCount(e),o.fold(i.gn,(e=>n.createElement(h.x4,{className:S.counter,"data-name":"checklist-item/count"},e))))),(t=>n.createElement(h.x4,{className:(0,i.zG)(e.itemMeta.miniChecked,o.getOrElse((()=>e.itemMeta.checked)))?S.labelChecked:S.labelUnchecked},t)))))))))),b=({left:e,right:t,showActivateButton:r})=>n.createElement(a.F.div,{className:S.headerContainer},e,n.createElement(a.F.div,{className:g.Sc},t),r?n.createElement("div",{className:g.Tu},n.createElement(m.JO.Arrow,{className:S.activeTopIcon}),n.createElement(m.JO.Arrow,{className:S.activeBottomIcon})):null),w=l.UI.Knot.make(l.UI.Grid.make((({slots:e})=>n.createElement(b,{left:e.title,right:e.label,showActivateButton:!0}))),{title:y,label:v}),C=l.UI.Knot.make(l.UI.Grid.make((({slots:e})=>n.createElement(b,{left:e.title,right:e.controls,showActivateButton:!1}))),{title:y,controls:l.UI.Node.make((({notify:e,state:t})=>n.createElement(a.F.Fragment,null,t.pipe(s.U((t=>n.createElement(p.zx.Ghost,{name:"collapse",onClick:e({type:d.C.Type.collapseButtonClick,id:t})},n.createElement(m.JO.Arrow,{direction:m.n4.up}))))))))}),S=c.u.stylesheet({headerContainer:[g.lZ],titleContainer:[g.XE],title:[g.Cx],labelChecked:[g.i0],labelUnchecked:[g.D],counter:[g.e],activeTopIcon:[g.Lf],activeBottomIcon:[g.rx]})},3303:(e,t,r)=>{"use strict";r.d(t,{m:()=>d});var n=r(27378),i=r(5739),a=r(4680),s=r(63969),o=r(15646),l=r(77176),c=r(30522),u=r(54126);const d=a.UI.Knot.make(a.UI.Grid.make((({slots:e,notify:t,state:r})=>n.createElement(i.F.div,{className:p.mini,onClick:r.pipe(l.U((e=>t({type:o.lY.Type.miniItemClick,id:e}))))},e.header))),{header:c.y}),p=s.u.stylesheet({mini:[u.oH]})},54126:(e,t,r)=>{"use strict";r.d(t,{TX:()=>o,kX:()=>l,A2:()=>c,NR:()=>u,Lp:()=>d,ht:()=>p,H4:()=>m,lZ:()=>h,Sc:()=>f,XE:()=>y,Cx:()=>v,i0:()=>b,D:()=>w,e:()=>C,Tu:()=>I,Lf:()=>k,rx:()=>x,oH:()=>A});var n=r(90351),i=r(63969),a=r(40219);const s={display:"flex",boxSizing:"border-box",borderRadius:i.u.rem(a.Jr),boxShadow:n.uc.Z100,userSelect:"none",transform:"translateY(0)",background:n.Il.CoreNeutral0,overflow:"hidden"},o=Object.assign(Object.assign({},s),{flexDirection:"column"}),l={padding:`0 ${i.u.rem(.5)} ${i.u.rem(.5)} ${i.u.rem(1)}`},c={transform:"rotate(180deg)"},u={color:n.Il.CoreGreen60},d={color:n.Il.CoreRed50},p={display:"inline-block"},m={marginTop:i.u.rem(.5)},h={display:"flex",flexDirection:"row",alignItems:"center",justifyContent:"flex-start",height:i.u.rem(2.5),width:i.u.percent(100),padding:`0 ${i.u.rem(.5)} 0 0`,boxSizing:"border-box",position:"relative"},g="checklistMiniRight",f=i.u.joinClasses([g,i.u.style({display:"flex",alignItems:"center",flexShrink:0,flexGrow:1,alignSelf:"stretch",justifyContent:"flex-end"})]),y={minWidth:0},v={fontSize:i.u.rem(n.xv.BodySize),whiteSpace:"nowrap",textOverflow:"ellipsis",overflow:"hidden",marginRight:i.u.rem(.5)},b={color:n.Il.CoreGreen70},w={color:n.Il.CoreRed50},C={color:n.Il.CoreNeutral40,display:"flex",alignItems:"center",justifyContent:"center",width:i.u.rem(1)},S="checklistMiniActivateBtn",I=i.u.joinClasses([S,i.u.style({position:"absolute",right:i.u.rem(.5),width:i.u.rem(1),transform:`translate(${i.u.rem(-.5)})`,opacity:0})]),k={display:"flex",margin:`${i.u.rem(.05)} 0 ${i.u.rem(-1.25)}`,transform:"rotate(180deg)"},x={display:"flex",height:"auto"},A=Object.assign(Object.assign({},s),{cursor:"pointer",$nest:{"&:hover":{background:n.Il.CoreNeutral0,boxShadow:"0 1px 12px 0 rgba(129, 137, 169, .2)",transitionDuration:i.u.seconds(.2)},[`&:hover .${S}`]:{opacity:1},"&:hover .checklistMiniRight":{opacity:0}}})},92569:(e,t,r)=>{"use strict";r.d(t,{A:()=>n});var n,i=r(27378),a=r(5739),s=r(8125),o=r(90351),l=r(71936),c=r(4680),u=r(63969),d=r(66896),p=r(87380),m=r(94793),h=r(77176),g=r(57091),f=r(85985);!function(e){e.DefaultCounter=c.UI.Node.make((({state:e})=>i.createElement(a.F.Fragment,null,e.pipe(h.U((({count:e,fontSize:t,lensId:r})=>i.createElement(p.x.OutcomeCounter,{count:e,theme:{counterWrapper:x.get(r),counterContent:k.counterContent},type:"gray",fontSize:t}))))))),e.ZeroCounter=c.UI.Node.make((()=>i.createElement(m.JO.CheckmarkOutcomes,{className:k.zeroCounter}))),e.PlagiarismCounter=c.UI.Node.make((({state:e})=>i.createElement(a.F.Fragment,null,e.pipe(h.U((({count:e,fontSize:t})=>i.createElement(p.x.OutcomeCounter,{count:e,theme:{counterWrapper:k.plagiarismCounterWrapper,counterContent:k.plagiarismCounterContent},suffix:"%",type:"gray",fontSize:t}))))))),e.Component=c.UI.Union.make("kind",{plagiarism:e.PlagiarismCounter,default:e.DefaultCounter,zero:e.ZeroCounter});const t=e=>!d.R.isPlagiarismId(e);e.createLensCounterFlow=(e,r,n)=>l.Z.composeUnion({plagiarism:l.Z.fromSideEffect(s.ZT,r.pipe(h.U((e=>({count:e,fontSize:n}))))),default:l.Z.fromSideEffect(s.ZT,r.pipe(g.a(e.pipe(f.h(t))),h.U((([e,t])=>({count:e,lensId:t,fontSize:n}))))),zero:l.Z.fromSideEffect(s.ZT,null)},(()=>e.pipe(g.a(r),h.U((([e,t])=>({kind:0===t?"zero":e===d.R.SpecialId.Plagiarism?"plagiarism":"default"}))))));const r={fill:u.u.important(o.Il.CoreNeutral0)},n={fill:u.u.important(o.Il.CoreNeutral50)},y={fill:u.u.important(o.Il.CoreRed50)},v={fill:u.u.important(o.Il.CoreBlue50)},b={fill:u.u.important(o.Il.CoreGreen50)},w={fill:u.u.important(o.Il.CorePurple50)},C={fill:u.u.important(o.Il.CoreNeutral50)},S={fill:u.u.important(o.Il.CoreCyan50)},I={fill:o.Il.CoreGreen50,minHeight:0,minWidth:u.u.rem(1)},k=u.u.stylesheet({counterWrapper:[],counterContent:[r],zeroCounter:[I],allAlertsCounter:[n],priorityAlertsCounter:[n],correctnessCounter:[y],clarityCounter:[v],engagementCounter:[b],deliveryCounter:[w],voxCounter:[C],plagiarismCounterWrapper:[S],plagiarismCounterContent:[r,{}]}),x=new Map([[d.R.SpecialId.AllAlerts,k.allAlertsCounter],[d.R.SpecialId.Priority,k.priorityAlertsCounter],[d.R.SpecialId.Correctness,k.correctnessCounter],[d.R.SpecialId.Clarity,k.clarityCounter],[d.R.SpecialId.Engagement,k.engagementCounter],[d.R.SpecialId.Delivery,k.deliveryCounter],[d.R.SpecialId.Vox,k.voxCounter],[d.R.SpecialId.CorrectnessPriority,k.correctnessCounter],[d.R.SpecialId.ClarityPriority,k.clarityCounter],[d.R.SpecialId.EngagementPriority,k.engagementCounter],[d.R.SpecialId.DeliveryPriority,k.deliveryCounter],[d.R.SpecialId.VoxPriority,k.voxCounter]])}(n||(n={}))},40743:(e,t,r)=>{"use strict";r.d(t,{C:()=>f});var n=r(27378),i=r(40327),a=r(5739),s=r(5114),o=r(90351),l=r(4680),c=r(63969),u=r(40219),d=r(66896),p=r(7046),m=r(24811),h=r(3656),g=r(77176);const f=l.UI.Node.make((({state:e,notify:t})=>n.createElement(a.F.Fragment,null,e.pipe(g.U((({previews:e,disabled:r,activeLensId:o})=>n.createElement(a.F.div,{className:E.lensNavigation},e.map((e=>n.createElement(p.zx.Flat,{name:e.id,key:e.id,className:E.lensButton,active:(0,i.pipe)(o,s.exists((t=>t===e.id))),disabled:r,title:e.description,titleAlign:"bottomCenter",onClick:t({kind:"lensClicked",lens:e})},n.createElement(m.B,{value:e.progress,wrapperClass:E.progressBarWrapper,progressClass:y(e.id)}),n.createElement(h.XY,{className:E.lensButtonText},e.title)))))))))));function y(e){switch(e){case d.R.SpecialId.Correctness:return E.correctnessProgressBar;case d.R.SpecialId.Clarity:return E.clarityProgressBar;case d.R.SpecialId.Engagement:return E.engagementProgressBar;case d.R.SpecialId.Delivery:return E.deliveryProgressBar;case d.R.SpecialId.Vox:return E.voxProgressBar;default:return}}const v={display:"flex",height:c.u.percent(100),justifyContent:"space-between",alignItems:"center"},b={display:"flex",flexDirection:"column",marginRight:c.u.rem(.3125),padding:`${c.u.rem(.375)} ${c.u.rem(.25)} 0`,borderRadius:c.u.rem(u.fx),$nest:{"&:last-child":{marginRight:0},"&:hover:not([data-disabled='true'])":{backgroundColor:o.Il.CoreNeutral10},"&[data-active='true']":{backgroundColor:o.Il.CoreNeutral10,color:o.Il.CoreNeutral90}}},w={textTransform:"uppercase",fontSize:c.u.px(8)},C={width:c.u.rem(2),backgroundColor:o.Il.CoreNeutral20},S={backgroundColor:o.Il.CoreRed50},I={backgroundColor:o.Il.CoreBlue50},k={backgroundColor:o.Il.CoreGreen50},x={backgroundColor:o.Il.CorePurple50},A={backgroundColor:o.Il.CoreNeutral50},E=c.u.stylesheet({lensNavigation:[v],lensButton:[b],lensButtonText:[w],progressBarWrapper:[C],correctnessProgressBar:[S],clarityProgressBar:[I],engagementProgressBar:[k],deliveryProgressBar:[x],voxProgressBar:[A]})},34442:(e,t,r)=>{"use strict";r.d(t,{H:()=>E});var n=r(27378),i=r(5739),a=r(12187),s=r(19962),o=r(4680),l=r(63969),c=r(40219),u=r(16782),d=r(41398),p=r(66310),m=r(24209),h=r(49708),g=r(85985),f=r(17343),y=r(76974),v=r(13444),b=r(50628),w=r(40151),C=r(2834),S=r(85089),I=r(28043),k=r(85255),x=r(77176),A=r(93508);var E;!function(e){let t,r;!function(e){e.front="front",e.back="back"}(t=e.Layer||(e.Layer={})),function(e){e.completePositionAnimation="completePositionAnimation",e.changePosition="changePosition"}(r=e.ActionKind||(e.ActionKind={})),e.Cell=o.UI.Grid.make((({slots:e,state:o,notify:l})=>{const c=new u.t,E=o.pipe(d.M(c),p.w((([e,t])=>e.position.animationInProgress?m.T(h.R(t,"transitionend").pipe(g.h((e=>e.target===t&&"transform"===e.propertyName)),f.h(void 0)),y.of(void 0).pipe(v.g(200))).pipe(b.P()):w.E)),C.b(l({kind:r.completePositionAnimation}))),T=o.pipe(d.M(c),p.w((([e,t])=>e.height.watched?S.YC(t).pipe(g.h((t=>e.height.value!==t.height||!e.height.isValid||t.height>0))):w.E)),I.x(),C.b((({height:e})=>l({kind:r.changePosition,height:e})())));k.P.useSubscriptionTo(m.T(E,T));const _=o.pipe(x.U((e=>e.position.top)),x.U((e=>s.ux.translateY(e))),I.x()),R=o.pipe(x.U((e=>e.layer===t.front?1:0)),I.x()),P=o.pipe(x.U((({position:e})=>e)),I.x(((e,t)=>e.top===t.top)),x.U((({animationInProgress:e})=>e?L.animate:void 0)),A.O(void 0));return n.createElement(i.F.div,Object.assign({},(0,a.Sh)(L.item,P),{style:{transform:_,zIndex:R},mount:e=>{null!==e&&c.next(e)}}),e.item)}))}(E||(E={}));const T={position:"absolute",boxSizing:"border-box",width:l.u.percent(100),contain:"layout"},_={transition:`transform ${l.u.seconds(c.v4/1e3)} linear`},L=l.u.stylesheet({item:[T],animate:[_]})},60779:(e,t,r)=>{"use strict";r.d(t,{g:()=>c});var n=r(71249),i=r(40327),a=r(5114),s=r(71936),o=r(17670),l=r(77176);const c=(e,t)=>s.Z.fromSideEffect((r=>{const s=r.kind===o.H.Dialogue.Action.Kind.doneClicked?function(e,t){return{kind:t.kind,unmutedCategories:(0,i.pipe)(e.state.get(),a.map((({categories:e})=>Array.from(e.values()))),a.getOrElse((()=>new Array)),n.hX((e=>!e.isMuted)),n.UI((e=>e.id)))}}(e,r):r;o.H.Dialogue.Action.shouldCloseDialogue(s)&&t.onClose(),e.actionEvents.next(s)}),e.state.pipe(l.U(a.getOrElse((()=>o.H.Dialogue.State.empty)))))},93483:(e,t,r)=>{"use strict";r.d(t,{B:()=>Y});var n,i,a=r(40327),s=r(4680),o=r(27378),l=r(57120);!function(e){e.close="close"}(n||(n={})),function(e){e.Static=s.UI.Grid.make((e=>o.createElement(l.Pj,{positionType:"fixed",animate:!0,smallResolution:"resize",onClose:e.notify({kind:n.close})},e.slots.content)))}(i||(i={}));var c=r(17670),u=r(5739),d=r(12187),p=r(43675),m=r(22232),h=r(90351),g=r(63969),f=r(30763),y=r(7046),v=r(94793),b=r(3656),w=r(85255),C=r(77176);const S=s.UI.Grid.make((({slots:e,notify:t})=>(w.P.useEffectOnDidMount(t({kind:c.H.Dialogue.Action.Kind.modalOpened})),o.createElement(l.u_,{className:G.wrapper,close:t({kind:c.H.Dialogue.Action.Kind.closeClicked})},o.createElement(l.u_.Header,{className:G.modalHeader},o.createElement(o.Fragment,null,e.header),o.createElement("div",{className:G.subHeader},e.subheader)),o.createElement(l.u_.Body,{name:"mutedModalBody",className:G.modalBody},o.createElement(o.Fragment,null,e.categories)),o.createElement(l.u_.Footer,{className:G.modalFooter},o.createElement(o.Fragment,null,e.footer)))))),I=s.UI.Node.make((({view:e,notify:t,state:r})=>{const{suggestions:n}=o.useContext(f.m.Context).mutedAlerts.dialogue;return o.createElement(u.F.div,{className:G.categoryRow},o.createElement(b.XY,{className:G.categoryName},e("description")),o.createElement(b.x4,{className:G.categoryCount},(0,a.pipe)(r,C.U((e=>e.isMuted?n(e.alertsCount):"")))),o.createElement(u.F.div,{className:G.categoryState},(0,a.pipe)(r,C.U((e=>o.createElement(L,{name:"mutedAlertsOnOff_"+e.id,isOn:!e.isMuted,onClick:t({kind:c.H.Dialogue.Action.Kind.categoryClicked,categoryId:e.id,isMuted:!e.isMuted})}))))))})),k=s.UI.List.make(p.A7(),I),x=s.UI.Node.make((({view:e,notify:t})=>o.createElement(u.F.Fragment,null,(0,a.pipe)(e("count"),C.U((e=>o.createElement(_,{count:e,key:"mutedCountInfo"})))),o.createElement(y.zx.Primary,{name:"mutedModalDone",onClick:t({kind:c.H.Dialogue.Action.Kind.doneClicked})},"Done")))),A=s.UI.Node.make((()=>{const{header:e}=o.useContext(f.m.Context).mutedAlerts.dialogue;return o.createElement(b.H1,null,e)})),E=s.UI.Node.make((()=>{const{subHeader:e}=o.useContext(f.m.Context).mutedAlerts.dialogue;return o.createElement(b.XY,null,e)})),T=s.UI.Knot.make(S,{header:A,subheader:E,categories:k,footer:x}),_=({count:e})=>{const{footerSuggestions:t}=o.useContext(f.m.Context).mutedAlerts.dialogue;return 0===e?null:o.createElement("div",{className:G.countInfo},o.createElement(v.JO.GreenOk,{className:G.okIcon,width:16}),o.createElement(b.XY,null,t(e)))},L=({isOn:e,name:t,onClick:r})=>{const{mutedAlerts:{dialogue:n}}=o.useContext(f.m.Context);return o.createElement(y.zx.Ghost,Object.assign({},(0,d.Sh)(G.categoryStateButton,e&&W),{name:t,onClick:r}),e?n.off:n.on)},R=(0,a.pipe)(s.UI.squash(T),s.UI.contramapState((e=>({categories:e.categories,footer:e}))),s.UI.mapAction((e=>{switch(e.key){case"categories":return e.action.action;case"footer":case"root":return e.action;default:(0,m.vE)(e)}}))),P={display:"flex",flexDirection:"column",minHeight:g.u.rem(23),maxHeight:g.u.rem(33),width:g.u.rem(36),backgroundColor:h.Il.CoreNeutral0,textAlign:"left"},O={padding:`0 ${g.u.rem(2)} ${g.u.rem(1)} ${g.u.rem(2)}`},M={marginBottom:0,paddingBottom:0,backgroundColor:h.Il.CoreNeutral0,flexShrink:0},F={marginTop:g.u.rem(.5625),paddingBottom:g.u.rem(.6875),borderBottom:`1px solid ${h.Il.CoreNeutral20}`},N={minHeight:g.u.rem(4)},D={display:"flex",color:h.Il.CoreNeutral90,alignItems:"center",flex:1,justifyContent:"flex-start"},$={marginLeft:g.u.rem(-.5)},U={display:"flex",padding:`${g.u.rem(.75)} 0`,alignItems:"center",$nest:{"&:not(:first-of-type)":{borderTop:`1px solid ${h.Il.CoreNeutral20}`}}},B={display:"flex",paddingRight:g.u.rem(.25),width:g.u.rem(12.25),color:h.Il.CoreNeutral90,fontWeight:600,lineHeight:g.u.rem(1.3125),justifyContent:"flex-start"},j={display:"flex",paddingRight:g.u.rem(.25),width:g.u.rem(12.25),color:h.Il.CoreNeutral50,lineHeight:g.u.rem(1.3125),justifyContent:"flex-start"},W="isOn",H={marginTop:g.u.rem(-.25),marginBottom:g.u.rem(-.25),color:h.Il.CoreBlue50,textTransform:"none",letterSpacing:0,fontWeight:600,fontSize:g.u.rem(h.xv.BodySize),$nest:{"&[data-textpos=everywhere]":{paddingRight:g.u.rem(.5),paddingLeft:g.u.rem(.5)},[`&.${W}`]:{color:h.Il.CoreRed50}}},G=g.u.stylesheet({wrapper:[P],modalBody:[O],modalHeader:[M],subHeader:[F],modalFooter:[N],countInfo:[D],okIcon:[$],categoryRow:[U],categoryName:[B],categoryCount:[j],categoryState:[{display:"flex",justifyContent:"flex-end"}],categoryStateButton:[H]}),z={kind:c.H.Dialogue.Action.Kind.closeClicked},Y=(0,a.pipe)(s.UI.Knot.make(i.Static,{content:R}),s.UI.squash,s.UI.contramapState((e=>({content:e}))),s.UI.mapAction((({action:e})=>e.kind===n.close?z:e)))},52249:(e,t,r)=>{"use strict";if(r.d(t,{A:()=>d}),75==r.j)var n=r(22232);if(75==r.j)var i=r(71936);if(75==r.j)var a=r(66896);if(75==r.j)var s=r(40018);if(75==r.j)var o=r(85985);if(75==r.j)var l=r(77176);if(75==r.j)var c=r(28043);if(75==r.j)var u=r(15774);function d(e,t,r,d){const p=t.pipe(o.h((e=>e!==a.R.SpecialId.Premium)),l.U((e=>e===a.R.SpecialId.Priority?u.H.LensMode.priority:u.H.LensMode.all)),c.x());return i.Z.fromSideEffect((t=>{switch(t.kind){case u.H.Action.Kind.select:e.events.next({type:"switchToLens",id:t.selected===u.H.LensMode.priority?a.R.SpecialId.Priority:a.R.SpecialId.AllAlerts,focusFirst:!1,actionSource:s.l$.sidebar});break;default:(0,n.vE)(t.kind)}}),p.pipe(l.U((e=>({ord:"priority"===r?u.H.Order.priorityFirst:u.H.Order.allFirst,layoutMode:d,lensMode:e})))))}},15774:(e,t,r)=>{"use strict";r.d(t,{H:()=>E});var n=r(27378),i=r(5739),a=r(12187),s=r(22232),o=r(45701),l=r(4680),c=r(30763),u=r(7046),d=r(94793),p=r(16951),m=r(77176),h=r(90351),g=r(63969),f=r(40219),y=r(2040);const v=g.u.style({display:"inline-flex",overflow:"visible",border:`2px solid ${h.Il.CoreNeutral10}`,borderRadius:g.u.rem(f.fx),backgroundColor:h.Il.CoreNeutral10}),b=g.u.joinClasses([g.u.style({padding:`0 ${g.u.rem(.5)} 0 ${g.u.rem(.5)}`,display:"inline-flex",justifyContent:"space-around",textAlign:"center",$nest:{"&:first-child":{marginRight:g.u.px(2)}}}),y.base]),w=g.u.style({fontSize:g.u.rem(h.xv.SmallSize)}),C=g.u.style({width:g.u.rem(2.5)}),S=g.u.style({width:g.u.rem(9.5)}),I=g.u.joinClasses([g.u.style({width:g.u.rem(2.25)}),w]),k=g.u.joinClasses([g.u.style({width:g.u.rem(8.75)}),w]),x=g.u.joinClasses([g.u.style({borderRadius:g.u.rem(f.fx),backgroundColor:h.Il.CoreNeutral0,boxShadow:h.uc.Z100,fontWeight:600,$nest:{"&[data-disabled='true']":{backgroundColor:h.Il.CoreNeutral0}}}),b]),A=g.u.style({display:"inline-flex",width:g.u.rem(1.25),minWidth:0,minHeight:0,fill:h.Il.CoreNeutral50,stroke:h.Il.CoreNeutral50,$nest:{"&[data-disabled='true']":{fill:h.Il.CoreNeutral50,stroke:h.Il.CoreNeutral50}}});var E;!function(e){let t,r,h;!function(e){e.priority="priority",e.all="all"}(t=e.LensMode||(e.LensMode={})),function(e){let t;!function(e){e.select="select"}(t=e.Kind||(e.Kind={}))}(r=e.Action||(e.Action={})),function(t){t.priorityFirst=o.fromCompare((t=>t===e.LensMode.priority?-1:1)),t.allFirst=o.fromCompare((t=>t===e.LensMode.all?-1:1))}(h=e.Order||(e.Order={})),e.Component=l.UI.Node.make((({state:e,notify:s})=>n.createElement(i.F.div,{key:"feedModeSelector",className:v},e.pipe(m.U((({lensMode:e,layoutMode:i,ord:o})=>[t.all,t.priority].sort(o.compare).map((t=>n.createElement(u.zx,Object.assign({name:`${t}-lens`,key:`${t}-lens`,disabled:e===t,onClick:()=>s({kind:r.Kind.select,selected:t})()},(0,a.Sh)(e===t?x:b,f(t,i))),n.createElement(g,{selected:t}))))))))));const g=({selected:e})=>{const r=n.useContext(c.m.Context).feedModeSelector;switch(e){case t.all:return n.createElement(n.Fragment,null,r.all);case t.priority:return n.createElement(n.Fragment,null,r.priority,n.createElement(p.u,{align:"bottomCenter",title:r.priorityDescription},n.createElement(d.JO.Info,{width:10,className:A})));default:(0,s.vE)(e)}},f=(e,r)=>{switch(e){case t.all:return"compact"===r?I:C;case t.priority:return"compact"===r?k:S;default:(0,s.vE)(e)}}}(E||(E={}))},84317:(e,t,r)=>{"use strict";if(r.d(t,{HP:()=>o}),75==r.j)var n=r(71936);if(75==r.j)var i=r(92569);if(75==r.j)var a=r(66310);if(75==r.j)var s=r(52249);function o(e,t,r,o,l,c){return n.Z.composeKnot({info:i.A.createLensCounterFlow(t,t.pipe(a.w((e=>l.getLens(e).view("count")))),c),switcher:(0,s.A)(e,t,r,o)})}},89186:(e,t,r)=>{"use strict";r.d(t,{B:()=>b});var n=r(27378),i=r(5739),a=r(4680),s=r(92569),o=r(7046),l=r(94793),c=r(77176),u=r(15774),d=r(63969),p=r(2040);const m=d.u.style({display:"inline-flex",verticalAlign:"middle",marginRight:d.u.rem(.75),alignItems:"center"}),h=d.u.joinClasses([d.u.style({fontWeight:"bold"}),p.base]),g=d.u.style({minHeight:d.u.rem(1.5)}),f=d.u.style({$nest:{"&:not([data-disabled='true'])[data-hovered='true']":{backgroundColor:"transparent"}}}),y=d.u.style({display:"flex",justifyContent:"space-between",alignItems:"center"}),v=d.u.style({marginTop:d.u.rem(.35)});var b;!function(e){let t,r;e.Grid=a.UI.Grid.make((({slots:e})=>n.createElement(n.Fragment,null,n.createElement("span",{className:m},e.info),e.switcher))),e.GridWithBulkAccept=a.UI.Grid.make((({slots:e})=>n.createElement("div",{className:y},n.createElement("span",{className:v},e.headerContent),e.bulkAccept))),function(e){let t;!function(e){let t;!function(e){e.switchBack="switchBack"}(t=e.Kind||(e.Kind={}))}(t=e.Action||(e.Action={})),e.Component=a.UI.Node.make((({state:e,notify:r})=>n.createElement(i.F.Fragment,null,e.pipe(c.U((({lensTitle:e})=>n.createElement(n.Fragment,null,n.createElement("span",{className:h},e),n.createElement(o.zx.Flat,{name:"switch-back",title:"Back to all suggestions",className:f,onClick:()=>r({kind:t.Kind.switchBack})()},n.createElement(l.JO.Close,{className:g})))))))))}(t=e.LensFilter||(e.LensFilter={})),function(e){e.Component=a.UI.Grid.make((({slots:e})=>n.createElement(n.Fragment,null,n.createElement("span",{className:m},e.counter),e.filter)))}(r||(r={})),e.DefaultHeader=a.UI.Knot.make(e.Grid,{info:s.A.Component,switcher:u.H.Component}),e.LensInfoComponent=a.UI.Knot.make(r.Component,{counter:s.A.Component,filter:t.Component}),e.WithFilterHeader=a.UI.Knot.make(e.Grid,{info:e.LensInfoComponent,switcher:u.H.Component}),e.Component=a.UI.Union.make("kind",{withFilter:e.WithFilterHeader,withoutFilter:e.DefaultHeader})}(b||(b={}))},92644:(e,t,r)=>{"use strict";if(r.d(t,{i:()=>m}),75==r.j)var n=r(22232);if(75==r.j)var i=r(71936);if(75==r.j)var a=r(66896);if(75==r.j)var s=r(40018);if(75==r.j)var o=r(24713);if(75==r.j)var l=r(28043);if(75==r.j)var c=r(85985);if(75==r.j)var u=r(77176);if(75==r.j)var d=r(57091);if(75==r.j)var p=r(87667);function m(e,t,r){const m=e.getLens(a.R.SpecialId.AllAlerts).pipe(o.j("count"),l.x()),h=e.getLens(a.R.SpecialId.Priority).pipe(o.j("count"),l.x()),g=r.pipe(c.h((e=>e!==a.R.SpecialId.Premium)),u.U((e=>e===a.R.SpecialId.Priority?"priority":"all")),l.x());return i.Z.fromSideEffect((e=>{switch(e){case p.n.Actions.switchToAll:t.events.next({type:"switchToLens",id:a.R.SpecialId.AllAlerts,focusFirst:!1,actionSource:s.l$.sidebar});break;case p.n.Actions.switchToPriority:t.events.next({type:"switchToLens",id:a.R.SpecialId.Priority,focusFirst:!1,actionSource:s.l$.sidebar});break;case p.n.Actions.openSetGoals:t.events.next({type:"setGoals"});break;default:(0,n.vE)(e)}}),g.pipe(d.a(m,h,((e,t,r)=>({allAlertsCount:t,priorityAlertsCount:r,selectedLens:e})))))}},87667:(e,t,r)=>{"use strict";r.d(t,{n:()=>n});var n,i=r(27378),a=r(38983),s=r(5739),o=r(90351),l=r(4680),c=r(63969),u=r(40219),d=r(30763),p=r(7046),m=r(95286),h=r(94793),g=r(77176);!function(e){let t;!function(e){e.switchToPriority="switchToPriority",e.switchToAll="switchToAll",e.openSetGoals="openSetGoals"}(t=e.Actions||(e.Actions={}));e.Switch=l.UI.Node.make((({state:e,notify:r})=>{const n=i.useContext(d.m.Context).priorityLens,o=a.h.create(!1);return i.createElement(s.F.Fragment,null,e.pipe(g.U((({allAlertsCount:e,priorityAlertsCount:a,selectedLens:l})=>{const c="priority"===l,u=c?a:e;return i.createElement(m.L,{name:"priorityLensSwitch",appearanceBehavior:"mouseClick",showDelay:0,closeDelay:100,vAlign:"bottom",theme:{dropdownContainer:T.dropdownContainer,dropdownList:T.dropdownContent},onVisibilityChange:e=>o.set(e),label:i.createElement(s.F.Fragment,null,o.pipe(g.U((e=>i.createElement("div",{className:e?T.labelOpened:T.labelClosed},c?n.prioritySuggestion:n.allSuggestion,u>0&&i.createElement("span",{className:T.alertCount}," ","Â· ",u," "),i.createElement(h.JO.Arrow,{direction:e?h.n4.up:h.n4.down,className:T.labelArrow}))))))},i.createElement(p.zx.Flat,{name:"priorityAlerts",className:c?T.boldLensButton:T.lensButton,onClick:r(t.switchToPriority)},i.createElement(h.JO.Star,{width:12}),n.prioritySuggestion,c?i.createElement(h.JO.Yes,{className:T.checkMarkIcon}):null),c&&a===e?i.createElement("div",{className:T.disabledLensButton},i.createElement(h.JO.Formatting.BulletList,{width:21}),n.disabledAllSuggestion):i.createElement(p.zx.Flat,{name:"allAlerts",className:c?T.lensButton:T.boldLensButton,onClick:r(t.switchToAll)},i.createElement(h.JO.Formatting.BulletList,{width:21}),n.allSuggestion,c?null:i.createElement(h.JO.Yes,{className:T.checkMarkIcon})),i.createElement("div",{className:T.separator}),i.createElement("div",{className:T.description},i.createElement(h.JO.Info,{className:T.descriptionIcon}),i.createElement("div",null,n.description)))}))))}))}(n||(n={}));const f={display:"flex",width:c.u.rem(16)},y={zIndex:u.FY,marginTop:0,fontSize:c.u.rem(.875),lineHeight:c.u.rem(1.3125)},v={display:"flex",boxSizing:"border-box",padding:`${c.u.rem(.1875)} ${c.u.rem(.25)} ${c.u.rem(.1875)} ${c.u.rem(.25)}`,height:c.u.rem(1.5),borderRadius:c.u.rem(u.fx),color:o.Il.CoreNeutral90,textTransform:"uppercase",letterSpacing:c.u.rem(.025),fontSize:c.u.rem(.625),lineHeight:c.u.rem(1.125),cursor:"pointer",userSelect:"none",$nest:{"&:hover":{backgroundColor:o.Il.CoreNeutral20}}},b={backgroundColor:o.Il.CoreNeutral10},w={color:o.Il.CoreNeutral50,whiteSpace:"pre"},C={minWidth:c.u.rem(1),minHeight:c.u.rem(1),marginLeft:c.u.rem(.5625)},S={padding:`0 ${c.u.rem(.5)}`,color:o.Il.CoreNeutral90,$nest:{"& i:first-child":{margin:0}}},I={display:"flex",padding:`0 ${c.u.rem(.5)}`,height:c.u.rem(2),color:o.Il.CoreNeutral50,alignItems:"center",cursor:"not-allowed"},k={margin:`${c.u.rem(.5)} ${c.u.rem(1)}`,width:`calc(100% - ${c.u.rem(2)})`,height:c.u.px(1),backgroundColor:o.Il.CoreNeutral20},x={display:"flex",padding:`0 ${c.u.rem(.5)} ${c.u.rem(.5)} ${c.u.rem(.5)}`,fontSize:c.u.rem(.75),lineHeight:c.u.rem(1.125),alignItems:"center"},A={marginBottom:"auto",minHeight:c.u.rem(1.25)},E={color:o.Il.CoreBlue60,cursor:"pointer"},T=c.u.stylesheet({dropdownContainer:[f],dropdownContent:[y],labelClosed:[v],labelOpened:[v,b],alertCount:[w],labelArrow:[C],lensButton:[S],disabledLensButton:[I],boldLensButton:[S,{fontWeight:"bold"}],checkMarkIcon:[{marginLeft:"auto"}],separator:[k],description:[x],descriptionIcon:[A],descriptionLink:[E]})},22621:(e,t,r)=>{"use strict";r.d(t,{R:()=>ce});var n=r(27378),i=r(5739),a=r(4680),s=r(57120),o=r(40327),l=r(38983),c=r(12187),u=r(5114),d=r(71284),p=r(30763),m=r(7046),h=r(77797),g=r(29245),f=r(3656),y=r(90351),v=r(63969),b=r(24588),w=r(40219),C=r(94793);const S=({upgradeAction:e,size:t,title:r,className:i})=>{const a=n.useContext(p.m.Context).goPremium,s=r||a;return n.createElement(m.zx,Object.assign({name:"upgrade"},(0,c.Sh)(i,"big"===t?F.baseBig:"link"===t?F.link:F.baseSmall),{onClick:e}),"link"===t?n.createElement(C.JO.PaidLink,{width:14,className:F.linkIcon}):n.createElement(C.JO.Paid,{className:"big"===t?F.bigIcon:F.icon}),s)},I={background:y.Il.CoreGreen60,borderRadius:v.u.rem(w.fx),boxShadow:`0 2px 5px ${v.u.color(b.UE).fade(.35).toRGBA().toString()}`,color:y.Il.CoreNeutral0,textTransform:"uppercase",letterSpacing:v.u.rem(w.rX),fontWeight:"bold",$nest:{"&:not([data-disabled='true'])[data-hovered='true']":{background:v.u.color(y.Il.CoreGreen60).tint(.1).toRGBA().toString()},"&:not([data-disabled='true']):active":{background:v.u.color(y.Il.CoreGreen60).tint(.2).toRGBA().toString()}}},k={padding:`0 ${v.u.rem(3)} 0 ${v.u.rem(2)}`,fontSize:v.u.rem(.8125),lineHeight:v.u.rem(3)},x={padding:`0 ${v.u.rem(2)} 0 ${v.u.rem(.5)}`,fontSize:v.u.rem(.6875),lineHeight:v.u.rem(2)},A={background:y.Il.CoreGreen60,$nest:{"&:not([data-disabled='true'])[data-hovered='true']":{background:v.u.color(y.Il.CoreGreen60).tint(.1).toRGBA().toString()},"&:not([data-disabled='true']):active":{background:v.u.color(y.Il.CoreGreen60).tint(.2).toRGBA().toString()}}},E={padding:`0 ${v.u.rem(3)} 0 ${v.u.rem(2)}`,fontSize:v.u.rem(.8125),lineHeight:v.u.rem(3)},T={padding:`0 ${v.u.rem(2)} 0 ${v.u.rem(.5)}`,fontSize:v.u.rem(.6875),lineHeight:v.u.rem(2)},_={fill:y.Il.CoreNeutral0,$nest:{"&:not([data-disabled='true'])[data-hovered='true']":{fill:y.Il.CoreNeutral0}}},L={marginRight:v.u.rem(.2)},R={color:y.Il.CoreGreen60,fontSize:v.u.rem(.75),transition:"transform .2s ease-out",$nest:{"&:not([data-disabled='true'])[data-hovered='true']":{transform:"scale(1.05)"},"&:not([data-disabled='true']):active":{transition:"none",transform:"scale(1)"}}},P={color:y.Il.CoreGreen60},O={fill:y.Il.CoreGreen60,$nest:{"&:not([data-disabled='true'])[data-hovered='true'], &:not([data-disabled='true'])[data-active='true']":{fill:y.Il.CoreGreen60}}},M={fill:y.Il.CoreGreen60,$nest:{"&:not([data-disabled='true'])[data-hovered='true'], &:not([data-disabled='true'])[data-active='true']":{fill:y.Il.CoreGreen60}}},F=v.u.stylesheet({base:[I],baseBig:[I,k],baseSmall:[I,x],baseUpHookRedesign:[I,A],baseBigUpHookRedesign:[k,A,E],baseSmallUpHookRedesign:[x,A,T],icon:[_],bigIcon:[_,L],link:[R],linkUpHookRedesign:[R,P],linkIconUpHookRedesign:[O],linkIcon:[M]});var N=r(85255),D=r(2834),$=r(57050);const U=.8125,B={display:"flex",flexDirection:"column",maxHeight:"90vh",width:v.u.rem(41.5),backgroundColor:y.Il.CoreNeutral0,textAlign:"left"},j={padding:`${v.u.rem(1.125)} ${v.u.rem(2)} ${v.u.rem(1)}`,paddingBottom:v.u.rem(1)},W={paddingBottom:0,backgroundColor:y.Il.CoreNeutral0,flexShrink:0,$nest:{"&:after":{position:"absolute",bottom:0,display:"block",width:`calc(100% - ${v.u.rem(4)})`,height:v.u.px(1),background:y.Il.CoreNeutral20,content:"''"}}},H={display:"block",margin:`${v.u.rem(U)} 0`,color:y.Il.CoreNeutral90,fontWeight:y.xv.SmallLightWeight,lineHeight:v.u.rem(1.5)},G={minHeight:v.u.rem(4)},z={display:"flex",$nest:{"&:not(:last-child)":{marginBottom:v.u.rem(1.25),borderBottom:`1px solid ${y.Il.CoreNeutral20}`}}},Y="setGoalsToneButton",V={marginBottom:v.u.rem(-.5),maxWidth:v.u.rem(27),justifyContent:"initial",flexWrap:"wrap",$nest:{[`& > .${Y}`]:{margin:`0 0 ${v.u.rem(.5)}`,marginLeft:v.u.important(0),$nest:{"&:not(:last-child)":{marginRight:v.u.rem(.5)}}}}},q={width:v.u.rem(7),textTransform:"capitalize",lineHeight:v.u.rem(2)},X={marginTop:v.u.rem(U)},Z={margin:`0 0 ${v.u.rem(1.5)} ${v.u.rem(7)}`},J={margin:`0 0 ${v.u.rem(1.5)} ${v.u.rem(7)}`},K={display:"flex",width:v.u.percent(100),justifyContent:"space-between"},Q={color:y.Il.CoreNeutral90,fontWeight:300,fontSize:v.u.rem(.8125)},ee=v.u.stylesheet({wrapper:[B],modalBody:[j],modalHeader:[W],itemDescription:[H],modalFooter:[G],row:[z],toneButtons:[V],rowHeader:[q],extraContent:[X],title:[Z],description:[J],image:[{position:"absolute"}],footerWrapper:[K],checkboxText:[Q]}),te=({name:e,items:t,sticky:r,theme:i={},extraContent:a,children:s})=>n.createElement("div",{className:ee.row},n.createElement("div",null,n.createElement(f.H3,{className:ee.rowHeader},e),a),n.createElement("div",null,n.createElement(m.zx.Group,{sticky:r,className:i.buttonsGroup},t.map((t=>n.createElement(m.zx.White,Object.assign({className:i.button,name:`context-${e}-${t.key}`},t))))),n.createElement(f.x4,{className:ee.itemDescription},s))),re=({items:e,current:t,shouldDisable:r,itemTitle:n=$.yR})=>({sticky:!0,items:e.map((e=>({key:e,active:t.view((t=>t===e)),onClick:()=>t.set(e),disabled:r&&r(e),children:n(e)})))}),ne=({items:e,current:t},r)=>({items:e.map((e=>({key:e,active:t.view((t=>(0,o.pipe)(t,u.exists((t=>t.has(e)))))),onClick:()=>t.modify((t=>{const r=(0,o.pipe)(t,u.fold((()=>new Set),(e=>new Set(e))));return r.has(e)?r.delete(e):r.add(e),u.some(r)})),children:r(e)})))}),ie=({blocks:e,features:t,showOnLoad:r,close:i,upgrade:a,reset:o,showOnLoadChanged:l})=>{const c=n.useContext(d.a.Context);return n.createElement(s.u_,{className:ee.wrapper},n.createElement(s.u_.Header,{className:ee.modalHeader},n.createElement(se,null)),n.createElement(s.u_.Body,{name:"goalsBody",className:ee.modalBody},n.createElement(ae,{features:t,upgradeAction:a,blocks:e})),n.createElement(s.u_.Footer,{className:ee.modalFooter},n.createElement(oe,{supportsSetGoalsLoader:!t.demoMode&&c.has(d.a.Flag.supportsSetGoalsLoader),onDone:i,reset:o,showOnLoad:r,showOnLoadChanged:l})))},ae=({blocks:e,features:t,upgradeAction:r})=>{const a=n.useContext(p.m.Context).goals,{audience:s,formality:l,domain:c,tone:d,intent:m}=e;return n.createElement(n.Fragment,null,n.createElement(te,Object.assign({name:"audience"},re(s)),s.current.view((t=>t&&a.sections.audience[t]((0,o.pipe)(e.audience.default,u.exists((e=>e===t))))))),n.createElement(te,Object.assign({name:"formality"},re(l)),l.current.view((e=>e?a.sections.formality[e]:""))),n.createElement(te,Object.assign({name:"domain"},re(Object.assign(Object.assign({},c),{itemTitle:e=>"mail"===e?"email":e})),{extraContent:n.createElement(i.F.div,{className:ee.extraContent},t.isFree?n.createElement(S,{size:"link",upgradeAction:r}):null)}),c.current.view((e=>t.isFree?a.sections.domain.free:e?a.sections.domain[e]:""))),n.createElement(te,Object.assign({name:"tone",theme:{buttonsGroup:ee.toneButtons,button:Y}},ne(d,(e=>n.createElement(g.d,{key:e},a.sections.tone.options[e])))),a.sections.tone.experimental),n.createElement(te,Object.assign({name:"intent"},ne(m,(e=>a.sections.intent.options[e]))),a.sections.intent.experimental))},se=()=>{const e=n.useContext(p.m.Context).goals;return n.createElement(n.Fragment,null,n.createElement(le,null),n.createElement(f.H1,{className:ee.title},e.title),n.createElement(f.XY,{className:ee.description},e.header))},oe=({supportsSetGoalsLoader:e,showOnLoad:t,showOnLoadChanged:r,reset:i,onDone:a})=>{const s=n.useContext(p.m.Context).goals,o=l.h.create(t);return N.P.useSubscriptionTo(o.pipe(D.b(r))),n.createElement("div",Object.assign({},(0,c.Sh)(e&&ee.footerWrapper)),e&&n.createElement(h.Ys,{checked:o,name:"set-goals"},n.createElement(f.x4,{className:ee.checkboxText},s.footer.showModalOnStart)),n.createElement(m.zx.Group,null,n.createElement(m.zx.Ghost,{name:"reset",onClick:i},s.footer.reset),n.createElement(m.zx.Primary,{name:"closeSetContext",onClick:a},s.footer.done)))},le=()=>n.createElement("svg",{className:ee.image,width:"69",height:"80",viewBox:"0 0 69 80"},n.createElement("g",{fill:"none",fillRule:"evenodd"},n.createElement("path",{d:"M28.935 70C12.955 70 0 57.045 0 41.065 0 25.085 12.955 12.13 28.935 12.13c15.98 0 28.936 12.954 28.936 28.935C57.87 57.045 44.917 70 28.936 70zm0-12.242c9.22 0 16.694-7.474 16.694-16.693 0-9.22-7.475-16.694-16.695-16.694s-16.693 7.475-16.693 16.695 7.474 16.693 16.693 16.693z",fill:"#4C7AF1"}),n.createElement("path",{d:"M28.935 57.758c-9.22 0-16.693-7.474-16.693-16.693 0-9.22 7.474-16.694 16.693-16.694 9.22 0 16.694 7.475 16.694 16.695s-7.475 16.693-16.695 16.693zm0-11.13a5.564 5.564 0 1 0 0-11.128 5.565 5.565 0 0 0 .001 11.129z",fill:"#BCDBFB"}),n.createElement("circle",{fill:"#FFF",cx:"28.935",cy:"41.065",r:"5.565"}),n.createElement("path",{stroke:"#4C7AF1",strokeLinecap:"round",strokeWidth:"1.5",d:"M15.024 68.016L9.46 78.5m32.274-10.484L47.298 78.5"}),n.createElement("path",{d:"M61.96 13.367a.65.65 0 0 1 .645.656.65.65 0 0 1-.646.655h-6.075L29.35 41.7a.636.636 0 0 1-.913 0 .663.663 0 0 1 0-.927L54.972 13.75V7.59a.65.65 0 0 1 .645-.656.65.65 0 0 1 .646.656v5.777h5.696zm3.17-3.215a.65.65 0 0 1 .646.655.65.65 0 0 1-.646.655h-6.34a.65.65 0 0 1-.647-.655V4.372a.65.65 0 0 1 .646-.655.65.65 0 0 1 .644.655v5.78h5.696zm3.17-3.218a.65.65 0 0 1 .647.656.65.65 0 0 1-.646.655h-6.34a.65.65 0 0 1-.647-.655V1.155A.65.65 0 0 1 61.96.5a.65.65 0 0 1 .645.655v5.78H68.3z",fill:"#4C7AF1"}),n.createElement("path",{d:"M49.267 20.486l-8.586 8.757",stroke:"#FFF",strokeWidth:"1.3"})));var ce,ue=r(50628),de=r(77176);!function(e){let t;e.Modal=a.UI.Node.make((({state:e,notify:r})=>(N.P.useSubscriptionTo(e.pipe(ue.P(),D.b((e=>r({kind:t.open,source:e.source})())))),n.createElement(i.F.Fragment,null,e.pipe(de.U((e=>{const i=r({kind:t.close,source:e.source,context:e.context,showOnLoad:e.showOnLoad});return n.createElement(s.ay,{positionType:"fixed",animate:!0,smallResolution:"resize",onClose:i},n.createElement(ie,{blocks:e.blocks,features:e.features,close:i,upgrade:r({kind:t.upgrade}),reset:r({kind:t.reset}),showOnLoad:e.showOnLoad,showOnLoadChanged:e=>r({kind:t.showOnLoadChanged,value:e})()}))}))))))),function(e){e.open="open",e.close="close",e.upgrade="upgrade",e.reset="reset",e.showOnLoadChanged="showOnLoadChanged"}(t=e.ActionsKind||(e.ActionsKind={}))}(ce||(ce={}))},39321:(e,t,r)=>{"use strict";r.d(t,{q:()=>Te});var n=r(27378),i=r(5739),a=r(22232),s=r(4680),o=r(30763),l=r(25970),c=r(7046),u=r(57120);const d=()=>n.createElement("svg",{width:"128",height:"177"},n.createElement("defs",null,n.createElement("rect",{id:"a",y:"14",width:"128",height:"128",rx:"64"})),n.createElement("g",{fill:"none",fillRule:"evenodd"},n.createElement("ellipse",{fill:"#F1F2FA",cx:"64",cy:"173",rx:"48",ry:"4"}),n.createElement("path",{d:"M27 0h62a5 5 0 0 1 5 5v91a5 5 0 0 1-5 5H24a5 5 0 0 1-5-5V8a8 8 0 0 1 8-8z",fill:"#F1F2FA"}),n.createElement("mask",{id:"b",fill:"#fff"},n.createElement("use",{xlinkHref:"#a"})),n.createElement("use",{fill:"#A2BCFF",xlinkHref:"#a"}),n.createElement("path",{d:"M116.708 48.783a4.144 4.144 0 0 1 5.672-1.465 4.138 4.138 0 0 1 1.466 5.667l-17.955 30.462a4.141 4.141 0 0 1-3.57 2.039 4.145 4.145 0 0 1-2.879-1.164l-12.527-12.1a4.138 4.138 0 0 1-.099-5.855 4.144 4.144 0 0 1 5.858-.099l8.747 8.45 15.287-25.935zm-63.446 45.53h58.877a4.141 4.141 0 0 1 4.142 4.139 4.141 4.141 0 0 1-4.142 4.14H53.262a4.141 4.141 0 0 1-4.143-4.14 4.141 4.141 0 0 1 4.143-4.14zM8.793 17.33h31.735a4.141 4.141 0 0 1 4.143 4.14 4.141 4.141 0 0 1-4.143 4.14H8.793a4.141 4.141 0 0 1-4.143-4.14 4.141 4.141 0 0 1 4.143-4.14zm0 17.526h31.735a4.141 4.141 0 0 1 4.143 4.14 4.141 4.141 0 0 1-4.143 4.14H8.793a4.141 4.141 0 0 1-4.143-4.14 4.141 4.141 0 0 1 4.143-4.14zm4.99 68.985a4.74 4.74 0 0 1-4.686 4.794 4.74 4.74 0 0 1-.111-9.477 4.74 4.74 0 0 1 4.798 4.683zm16.757 16.106a4.141 4.141 0 0 1 4.142-4.14 4.141 4.141 0 0 1 4.143 4.14c0 9.416-7.665 17.076-17.087 17.076S4.65 129.363 4.65 119.947a4.141 4.141 0 0 1 4.143-4.14 4.141 4.141 0 0 1 4.143 4.14c0 4.85 3.948 8.796 8.802 8.796 4.853 0 8.802-3.946 8.802-8.796zM8.793 76.46c-1.06 0-2.12-.405-2.93-1.213a4.138 4.138 0 0 1 0-5.855l4.274-4.27-4.273-4.27a4.138 4.138 0 0 1 0-5.855 4.145 4.145 0 0 1 5.859 0l4.273 4.27 4.273-4.27a4.144 4.144 0 0 1 5.858 0 4.138 4.138 0 0 1 0 5.855l-4.273 4.27 4.274 4.27a4.138 4.138 0 0 1-2.93 7.068c-1.06 0-2.12-.405-2.929-1.213l-4.273-4.27-4.273 4.27a4.133 4.133 0 0 1-2.93 1.213zm87.342 44.285l13.678 9.075a4.138 4.138 0 0 1 1.16 5.739 4.144 4.144 0 0 1-5.743 1.159l-11.387-7.555-11.386 7.555a4.143 4.143 0 0 1-4.378.128l-12.844-7.478-11.078 7.35c-.705.468-1.5.691-2.288.691a4.14 4.14 0 0 1-2.295-7.589l13.227-8.776a4.144 4.144 0 0 1 4.377-.128l12.844 7.478 11.53-7.65a4.145 4.145 0 0 1 4.583 0zM31.23 86.814a4.141 4.141 0 0 1 4.142-4.14 4.141 4.141 0 0 1 4.143 4.14v19.402a4.141 4.141 0 0 1-4.143 4.14 4.141 4.141 0 0 1-4.142-4.14V86.814z",fill:"#BDCFFF",mask:"url(#b)"}),n.createElement("path",{d:"M36 12h65a5 5 0 0 1 5 5v88a8 8 0 0 1-8 8H36a5 5 0 0 1-5-5V17a5 5 0 0 1 5-5z",fill:"#7CA1FF",mask:"url(#b)"}),n.createElement("rect",{fill:"#FFF",x:"25",y:"6",width:"75",height:"101",rx:"5"}),n.createElement("path",{d:"M38 21h49a1 1 0 0 1 1 1v3a1 1 0 0 1-1 1H38a1 1 0 0 1-1-1v-3a1 1 0 0 1 1-1zm0 13h32a1 1 0 0 1 1 1v3a1 1 0 0 1-1 1H38a1 1 0 0 1-1-1v-3a1 1 0 0 1 1-1z",fill:"#F1F2FA"})));var p,m=r(42329),h=r(3656),g=r(77176),f=r(12187),y=r(76024);!function(e){function t(e,t){var r=t/60,n=y.nH(e/r);return n.s=n.h>0&&n.m>10?0:Math.floor(n.s),n}e.calculateReadingTime=function(e){return t(e,250)},e.calculateSpeakingTime=function(e){return t(e,130)},e.generateStats=function(t,r){var n={words:t,chars:r,sentences:Math.floor(t/5),readingTime:{},speakingTime:{},uniqueWords:40*Math.random(),uniqueWordsIndex:100*Math.random(),rareWords:20*Math.random(),rareWordsIndex:100*Math.random(),wordLength:5.4,wordLengthIndex:100*Math.random(),sentenceLength:16.7,sentenceLengthIndex:100*Math.random(),readabilityScore:73,readabilityDescription:"Your text is likely to be understood by a reader who has at least 7th grade education (age 12)"};return n.readingTime=e.calculateReadingTime(n.words),n.speakingTime=e.calculateSpeakingTime(n.words),n}}(p||(p={}));var v=r(18208),b=r(5114),w=r(90351),C=r(63969),S=r(24588),I=r(40219),k=r(94793),x=r(40327),A=r(38983),E=r(2844),T=r(66310),_=r(93508),L=r(16118),R=r(76974),P=r(13444);const O=e=>{const{score:t,documentIsEmpty:r,sidebarOpen:a=A.h.create(!0),successIcon:s,progressIcon:o,zeroIcon:l=null}=e,c=t.pipe(g.U(b.map((e=>e.rank)))),u=E.aj(t,r,((e,t)=>(0,x.pipe)(e,b.fold((()=>!1),(({rank:e})=>100===e&&!t))))),d=a.pipe(T.w((e=>e?c.pipe(_.O(b.none),L.G(),T.w((([e,t])=>(0,x.pipe)(t,b.fold((()=>R.of(l)),(t=>u.pipe(_.O(!1),L.G(),T.w((([r,n])=>n?R.of(s):(0,x.pipe)(e,b.filter((()=>!r)),b.fold((()=>R.of(o(t)).pipe(P.g(1),_.O(o(0)))),(()=>R.of(o(t)))))))))))))):R.of(null))),_.O(null));return n.createElement(i.F.Fragment,null,d)};var M=r(98403);function F({value:e,className:t,leftCustomClass:r,rightCustomClass:a}){const s=A.h.create(!1);requestAnimationFrame((()=>requestAnimationFrame((()=>s.set(!0)))));const o=E.aj(M.Dx(e),s,((e,t)=>t?`${Math.max(5,Math.abs(e-50))}%`:0)),l=(e,t,r)=>M.Dx(e).pipe(g.U((e=>e<50?t:r)));return n.createElement(i.F.div,Object.assign({},(0,f.Sh)((e=>M.Dx(e).pipe(g.U((e=>e<50?B.leftSideWrapper:B.rightSideWrapper))))(e),t)),n.createElement(i.F.div,Object.assign({},(0,f.Sh)(l(e,B.leftSideProgress,B.rightSideProgress),r&&a&&l(e,r,a)),{style:{width:o}})))}!function(e){e.Label=({value:e,className:t})=>{const r=n.useContext(o.m.Context).performance,i=e>66?r.aboveAverage:e>50?r.average:r.belowAverage;return n.createElement(h.x4,{className:t},i)}}(F||(F={}));const N={position:"relative",zIndex:1,display:"flex",width:C.u.percent(100),height:C.u.rem(.25),borderRadius:C.u.rem(I.fx)},D={height:C.u.percent(100),backgroundColor:S.FW,transition:"width .8s ease-in-out 0s"},$={marginRight:C.u.percent(50),borderTopLeftRadius:C.u.rem(.25),borderBottomLeftRadius:C.u.rem(.25)},U={marginLeft:C.u.percent(50),borderTopRightRadius:C.u.rem(.25),borderBottomRightRadius:C.u.rem(.25)},B=C.u.stylesheet({wrapper:[N],leftSideWrapper:[N,{justifyContent:"flex-end"}],rightSideWrapper:[N,{justifyContent:"flex-start"}],progress:[D],leftSideProgress:[D,$],rightSideProgress:[D,U]});var j=r(63847);const W={display:"flex",flexDirection:"column",maxHeight:"90vh",width:C.u.rem(32),height:C.u.rem(41),background:w.Il.CoreNeutral0},H={padding:`${C.u.rem(2.75)} ${C.u.rem(1)} 0 ${C.u.rem(2)}`,minHeight:C.u.rem(5.1),height:C.u.rem(5.1),backgroundColor:w.Il.CoreNeutral0},G={marginRight:C.u.rem(1),paddingBottom:C.u.rem(.3),borderBottom:`1px solid ${S.xO}`},z={padding:`0 ${C.u.rem(1)} ${C.u.rem(1)} ${C.u.rem(2)}`},Y={padding:`0 ${C.u.rem(1.9)}`,minHeight:C.u.rem(4),height:C.u.rem(4)},V={position:"absolute",top:C.u.rem(-5.15),right:0,bottom:0,left:0,margin:"auto"},q={display:"flex",flexDirection:"column",marginTop:C.u.rem(7.15),marginBottom:C.u.rem(2),paddingRight:C.u.rem(1),alignItems:"center"},X={wordSpacing:C.u.rem(.05),fontSize:C.u.rem(.875),lineHeight:C.u.rem(1.5)},Z={padding:`${C.u.rem(1.3)} ${C.u.rem(2.6)}`,textAlign:"center"},J=C.u.prefixedStylesheet("statistics",{wrapper:[W],modalHeader:[H],modalHeaderUnderline:[G],modalReady:[{transition:"opacity .2s"}],modalEmpty:[{opacity:0}],modalBody:[z],modalFooter:[Y],loader:[V],zeroStateContainer:[q],performanceText:[X],zeroStateText:[X,Z]});var K;!function(e){e.number="number",e.time="time",e.percentage="percentage"}(K||(K={}));const Q=e=>{switch(e){case K.number:case K.percentage:return Ae.numberRowData;case K.time:return Ae.timeRowData;default:return(0,a.vE)(e)}},ee=({type:e,value:t,info:r,children:i,dataName:s})=>n.createElement("div",{className:Ae.row,"data-name":s},n.createElement("div",{className:Q(e)},n.createElement("div",{className:Ae.metricTitle},i),n.createElement("div",{className:Ae.metric},((e,t)=>{switch(e){case K.number:return(Math.round(10*t)/10).toLocaleString();case K.time:return y.g2(t);case K.percentage:return Math.round(t)+"%";default:return(0,a.vE)(e)}})(e,t))),r&&n.createElement(c.RZ,{title:r})),te=({state:e})=>{const t=n.useContext(o.m.Context).performance,{stats:r,score:a,documentIsEmpty:s}=e;return n.createElement(n.Fragment,null,n.createElement("section",{className:Ae.titleSection},n.createElement("div",{className:Ae.titleColumns},n.createElement(i.F.div,Object.assign({},(0,f.Sh)(J.performanceText,Ae.headerDescription)),100===a.rank?t.score100:t.scoreUnder100(a.rank)),n.createElement(O,{score:R.of(b.some(a)),documentIsEmpty:R.of(s),successIcon:n.createElement(k.JO.CheckmarkAnimated,{key:"modal-checkmark",width:50,className:Ae.checkmark}),progressIcon:e=>n.createElement(j.P,{key:"modal-performance-progress",colorType:j.P.ColorType.royalBlue,fontSize:j.P.FontSize.small,percentage:e,theme:Ee})}))),n.createElement("section",{className:Ae.wordCountSection},n.createElement(h.H2,{className:Ae.sectionHeaderUnderline},t.wordCount),n.createElement("div",{className:Ae.wordCountColumns},n.createElement("div",{className:Ae.firstColumn},n.createElement(ee,{type:K.number,value:Math.max(r.chars-1,0)},t.characters),n.createElement(ee,{type:K.number,value:r.words},t.words),n.createElement(ee,{type:K.number,value:r.sentences},v._6(r.sentences,t.sentence,t.sentences))),n.createElement("div",{className:Ae.secondColumn},n.createElement(ee,{type:K.time,value:p.calculateReadingTime(r.words)},t.readingTime),n.createElement(ee,{type:K.time,value:p.calculateSpeakingTime(r.words)},t.speakingTime)))),n.createElement("section",{className:Ae.readabilitySection},n.createElement("div",{className:Ae.sectionHeaderWrapper},n.createElement(h.H2,null,t.readability),n.createElement(h.CL,null,t.sectionTitleDescription)),n.createElement("div",{className:Ae.readabilityColumns},n.createElement("div",{className:Ae.firstColumn},n.createElement(ee,{type:K.number,value:r.wordLength},t.wordLengthTitle),n.createElement(ee,{type:K.number,value:r.sentenceLength},t.sentenceLengthTitle),n.createElement(ee,{type:K.number,value:r.readabilityScore,info:t.readabilityDescription,dataName:"readability"},t.readabilityScore)),n.createElement("div",{className:Ae.secondColumn},n.createElement("div",{className:Ae.row},n.createElement(F,{value:r.wordLengthIndex,className:Ae.progressBar,leftCustomClass:Ae.leftProgress,rightCustomClass:Ae.rightProgress}),n.createElement(F.Label,{value:r.wordLengthIndex,className:Ae.progressLabel})),n.createElement("div",{className:Ae.row},n.createElement(F,{value:r.sentenceLengthIndex,className:Ae.progressBar,leftCustomClass:Ae.leftProgress,rightCustomClass:Ae.rightProgress}),n.createElement(F.Label,{value:r.sentenceLengthIndex,className:Ae.progressLabel})),n.createElement("div",{className:Ae.verticalPillar}))),n.createElement(h.CL,{className:Ae.readabilityDescr},r.readabilityDescription)),n.createElement("section",null,n.createElement("div",{className:Ae.sectionHeaderWrapper},n.createElement(h.H2,null,t.vocabulary),n.createElement(h.CL,null,t.sectionTitleDescription)),n.createElement("div",{className:Ae.vocabularyColumns},n.createElement("div",{className:Ae.firstColumn},n.createElement(ee,{type:K.percentage,value:r.uniqueWords,info:t.uniqueWords},t.uniqueWordsTitle),n.createElement(ee,{type:K.percentage,value:r.rareWords,info:t.rareWords},t.rareWordsTitle)),n.createElement("div",{className:Ae.secondColumn},n.createElement("div",{className:Ae.row},n.createElement(F,{value:r.uniqueWords,className:Ae.progressBar,leftCustomClass:Ae.leftProgress,rightCustomClass:Ae.rightProgress}),n.createElement(F.Label,{value:r.uniqueWords,className:Ae.progressLabel})),n.createElement("div",{className:Ae.row},n.createElement(F,{value:r.rareWords,className:Ae.progressBar,leftCustomClass:Ae.leftProgress,rightCustomClass:Ae.rightProgress}),n.createElement(F.Label,{value:r.rareWords,className:Ae.progressLabel})),n.createElement("div",{className:Ae.verticalPillar})))))},re={marginBottom:C.u.rem(2.4)},ne={display:"flex",marginTop:C.u.rem(.9),marginRight:C.u.rem(1),justifyContent:"space-between"},ie={marginBottom:C.u.rem(1.5)},ae={display:"flex",marginTop:C.u.rem(.8)},se={marginBottom:C.u.rem(2.4)},oe={display:"flex",marginTop:C.u.rem(.8)},le={display:"flex",marginTop:C.u.rem(.8)},ce={flexBasis:C.u.percent(50)},ue={position:"relative",paddingLeft:C.u.rem(.5),flexBasis:C.u.percent(50)},de={display:"flex",height:C.u.rem(2),alignItems:"center"},pe={display:"flex",justifyContent:"space-between"},me={width:C.u.rem(10),fontFeatureSettings:`${I.Q9}, ${I.g_}`},he={width:C.u.rem(13)},ge={marginRight:C.u.rem(1),paddingBottom:C.u.rem(.5),borderBottom:`1px solid ${S.xO}`},fe={width:C.u.percent(80),whiteSpace:"pre-line"},ye={display:"inline-block",color:w.Il.CoreBlue50,textAlign:"right",fontWeight:"bold",fontSize:C.u.rem(.875),lineHeight:C.u.rem(2)},ve={display:"inline-block",color:w.Il.CoreNeutral90,fontSize:C.u.rem(.875),lineHeight:C.u.rem(2)},be={width:C.u.rem(3.2),height:C.u.rem(3.2),fontWeight:"bold"},we={width:C.u.rem(6),backgroundColor:S.xO},Ce={marginLeft:C.u.rem(1.125)},Se={backgroundImage:S.BZ},Ie={backgroundImage:S.Xd},ke={display:"block",paddingTop:C.u.rem(.5)},xe={position:"absolute",top:C.u.rem(.5),left:C.u.rem(3.5),width:C.u.rem(.0625),height:C.u.rem(3),backgroundColor:S.jj},Ae=C.u.stylesheet({titleSection:[re],titleColumns:[ne],wordCountSection:[ie],wordCountColumns:[ae],readabilitySection:[se],readabilityColumns:[oe],vocabularyColumns:[le],firstColumn:[ce],secondColumn:[ue],row:[de],rowData:[pe],numberRowData:[pe,me],timeRowData:[pe,he],sectionHeaderUnderline:[ge],sectionHeaderWrapper:[ge,{display:"flex",alignItems:"baseline",justifyContent:"space-between"}],headerDescription:[fe],metric:[ye],metricTitle:[ve],checkmark:[{alignItems:"center"}],circleProgressBar:[be],progressBar:[we],progressLabel:[Ce],leftProgress:[Se],rightProgress:[Ie],readabilityDescr:[ke],verticalPillar:[xe]}),Ee={radialProgressBar:Ae.circleProgressBar};var Te;!function(e){let t;e.ModalView=s.UI.Grid.make((({slots:r,state:i,notify:a})=>{const s=a({kind:t.close});return n.createElement(u.ay,{positionType:"fixed",animate:!0,smallResolution:"resize",onClose:s},n.createElement(e.ModalContent,{state:i,downloadButton:r.downloadButton,onClose:s}))})),function(e){e.close="close"}(t=e.ActionsKind||(e.ActionsKind={})),e.ModalContent=({state:t,downloadButton:r,onClose:i})=>n.createElement(u.u_,{className:J.wrapper},n.createElement(u.u_.Header,{className:J.modalHeader},n.createElement(e.Header,{state:t})),n.createElement(u.u_.Body,{name:"performanceBody",className:J.modalBody,wrapperClassName:t.pipe(g.U((e=>e.type===l.g.State.Type.EMPTY?J.modalEmpty:J.modalReady)))},n.createElement(e.Body,{state:t})),n.createElement(u.u_.Footer,{className:J.modalFooter},n.createElement(f,{downloadButton:r,onClose:i})));const r=()=>{const e=n.useContext(o.m.Context);return n.createElement("div",{className:J.zeroStateContainer},n.createElement(d,null),n.createElement("div",{className:J.zeroStateText},e.performance.notEnoughTextToCalculateStats))};e.Header=({state:e})=>{const t=n.useContext(o.m.Context);return n.createElement(i.F.Fragment,null,e.pipe(g.U((e=>n.createElement(h.H2,{key:"statisticsHeader",className:e.type===l.g.State.Type.READY?J.modalHeaderUnderline:""},t.performance.title)))))};const p=()=>n.createElement(m.$,{size:64,className:J.loader,variation:"blue"});e.Body=({state:e})=>n.createElement(i.F.Fragment,null,e.pipe(g.U((e=>{switch(e.type){case l.g.State.Type.EMPTY:return null;case l.g.State.Type.LOADING:case l.g.State.Type.ERROR:return n.createElement(p,{key:"statisticsLoading"});case l.g.State.Type.SHORT_CONTENT:return n.createElement(r,{key:"statisticsEmpty"});case l.g.State.Type.READY:return n.createElement(te,{key:"statisticsContent",state:e});default:return(0,a.vE)(e)}}))));const f=({downloadButton:e,onClose:t})=>n.createElement(n.Fragment,null,e,n.createElement(c.zx.Primary,{name:"close-stats",onClick:t},"Close"))}(Te||(Te={}))},89379:(e,t,r)=>{"use strict";r.d(t,{wK:()=>m,JT:()=>h,hM:()=>g});var n=r(40327),i=r(5114),a=r(8125),s=r(22232),o=r(93756),l=r(71936),c=r(27125),u=r(77176);function d(e){return{title:e.title,firstLine:i.fromNullable(e.firstLine)}}function p(e){switch(e){case c.g.SuccessType.applied:case c.g.SuccessType.large:return"growComplete";default:return"growStart"}}function m(e,t){return()=>e.pipe(u.U((e=>{const r=((e,t)=>{const r=t.successLens;switch(e){case c.g.SuccessType.zero:return r.emptyText;case c.g.SuccessType.small:return r.smallText;case c.g.SuccessType.large:return r.largeText;case c.g.SuccessType.applied:return{title:r.fixedText.titles[(0,a.TN)(9)]};default:return(0,s.vE)(e)}})(e,t);return{kind:p(e),caption:i.some(d(r))}})))}function h(e){return()=>e.pipe(u.U((e=>({kind:p(e),caption:i.none}))))}function g(e){return l.Z.animatingFlow(e,(e=>(0,n.pipe)(e,i.fold((()=>i.some(o.F2("fadein"))),(()=>i.some(o.Hk("fadeout","fadein")))))))}},28378:(e,t,r)=>{"use strict";r.d(t,{q:()=>_});var n=r(27378),i=r(40327),a=r(5739),s=r(83078),o=r(90351),l=r(4680),c=r(63969),u=r(3656),d=r(77176);const p=l.UI.Node.make((()=>n.createElement("svg",{width:"112",height:"126",fill:"none",xmlns:"http://www.w3.org/2000/svg"},n.createElement("g",{clipPath:"url(#clip0)"},n.createElement("rect",{x:"27.482",y:"24.867",width:"57.037",height:"76.267",rx:"28.518",fill:"#D7F7F0"}),n.createElement("path",{d:"M62.399 71.25l11.766-6.85c1.994-1.14 4.587-.83 6.182.831L60.504 77.164",fill:"#D1CEF4"}),n.createElement("path",{d:"M62.399 71.25l11.766-6.85c1.994-1.14 4.587-.83 6.182.831L60.504 77.164",stroke:"#0E101A",strokeMiterlimit:"10"}),n.createElement("path",{d:"M63.994 66.787l9.074-10.48c1.795-2.075 4.787-2.801 7.28-1.66L64.194 74.674",fill:"#D1CEF4"}),n.createElement("path",{d:"M63.994 66.787l9.074-10.48c1.795-2.075 4.787-2.801 7.28-1.66L64.194 74.674",stroke:"#0E101A",strokeMiterlimit:"10"}),n.createElement("path",{d:"M62.897 59.213l2.393-5.396-.199-2.075c-.399-3.32 1.396-6.434 4.288-7.679l.997 10.377-5.883 20.234S47.442 87.229 46.743 89.2c-.598 1.66.2 11.311.698 15.046.4 3.217-20.64 4.047-19.943 1.246 1.297-4.462 4.587-15.046 5.186-17.537.997-3.528-.599-12.348 2.991-18.677 1.596-2.802 5.983-9.858 7.18-13.075 1.396-3.424 1.595-7.678 1.595-7.678 5.385 1.349 3.69 9.961 1.595 14.942-2.193 5.292 6.382 4.67 8.676.726 1.695-3.009 2.891-5.292 2.891-5.292l-.398-5.5-.4-.31c-2.492-2.283-3.29-6.019-1.794-9.235l6.382 7.263 1.495 8.094-1.495 11.206 1.495-11.206z",fill:"#D1CEF4"}),n.createElement("path",{d:"M62.897 59.213l2.393-5.396-.199-2.075c-.399-3.32 1.396-6.434 4.288-7.679l.997 10.377-5.883 20.234S47.442 87.229 46.743 89.2c-.598 1.66.2 11.311.698 15.046.4 3.217-20.64 4.047-19.943 1.246 1.297-4.462 4.587-15.046 5.186-17.537.997-3.528-.599-12.348 2.991-18.677 1.596-2.802 5.983-9.858 7.18-13.075 1.396-3.424 1.595-7.678 1.595-7.678 5.385 1.349 3.69 9.961 1.595 14.942-2.193 5.292 6.382 4.67 8.676.726 1.695-3.009 2.891-5.292 2.891-5.292l-.398-5.5-.4-.31c-2.492-2.283-3.29-6.019-1.794-9.235l6.382 7.263 1.495 8.094zm0 0l-1.495 11.206",stroke:"#0E101A",strokeMiterlimit:"10"})),n.createElement("path",{d:"M54.822 50.297c0 1.948-1.496 3.59-3.49 3.59-1.995 0-3.49-1.54-3.49-3.59 0-2.052 1.495-5.231 3.49-5.231 1.994 0 3.49 3.282 3.49 5.23z",fill:"#F6DF6C",stroke:"#0E101A",strokeMiterlimit:"10",strokeLinejoin:"round"}),n.createElement("path",{d:"M58.411 32.86s-2.194-4.307 1.596-7.897c3.09-2.974 8.276-4.41 10.07-4.923.3-.102.6.205.6.513-.1 1.436-.5 5.026-1.995 7.795-1.695 3.18-6.183 6.359-10.27 4.513zM54.123 37.066s3.49-8.41-9.273-13.334c-.3-.102-.698.206-.599.513.2 1.026.5 3.077.699 5.026.398 4.82 1.396 10.462 9.173 7.795z",fill:"#15C39A",stroke:"#0E101A",strokeMiterlimit:"10"}),n.createElement("path",{d:"M51.431 45.066c.598-4.41 2.393-9.334 7.28-12.513",stroke:"#0E101A",strokeMiterlimit:"10"}),n.createElement("defs",null,n.createElement("clipPath",{id:"clip0"},n.createElement("rect",{x:"27.482",y:"24.867",width:"57.037",height:"76.267",rx:"28.518",fill:"#fff"})))))),m=l.UI.Node.make((()=>n.createElement("svg",{width:"112",height:"126",fill:"none",xmlns:"http://www.w3.org/2000/svg"},n.createElement("rect",{x:"28",y:"26.25",width:"56",height:"73.5",rx:"28",fill:"#DBEBFF"}),n.createElement("path",{d:"M78.5 103.284S73.702 64.99 25.9 42.79",stroke:"#0E101A",strokeMiterlimit:"10"}),n.createElement("path",{d:"M73.797 88.742s-4.895-9.307 4.512-21.619c0 0 6.91 7.465-4.512 21.619z",fill:"#D7E8A9",stroke:"#0E101A",strokeMiterlimit:"10",strokeLinejoin:"round"}),n.createElement("path",{d:"M73.701 88.839S69.958 78.95 54.696 77.98c0 0 .96 10.082 19.005 10.858zM63.239 71.195s-6.335-6.496-1.728-19.001c0 .096 7.583 4.362 1.728 19z",fill:"#D7E8A9",stroke:"#0E101A",strokeMiterlimit:"10",strokeLinejoin:"round"}),n.createElement("path",{d:"M63.143 71.292s-5.567-7.174-18.43-4.072c0 0 3.36 8.143 18.43 4.072zM50.089 57.526s-5.952-4.363-3.84-15.027c0 0 6.623 2.52 3.84 15.026z",fill:"#D7E8A9",stroke:"#0E101A",strokeMiterlimit:"10",strokeLinejoin:"round"}),n.createElement("path",{d:"M49.993 57.623s-5.376-5.042-15.358-.873c0 0 3.743 6.108 15.358.873z",fill:"#D7E8A9",stroke:"#0E101A",strokeMiterlimit:"10",strokeLinejoin:"round"}),n.createElement("path",{d:"M42.314 52.097c-4.8-3.297-10.27-6.399-16.414-9.21",stroke:"#0E101A",strokeMiterlimit:"10"}),n.createElement("path",{d:"M36.65 48.413s-4.607-2.327-4.319-9.986c0-.097 4.895.97 4.32 9.986z",fill:"#D7E8A9",stroke:"#0E101A",strokeMiterlimit:"10",strokeLinejoin:"round"}),n.createElement("path",{d:"M36.65 48.51S32.331 45.6 25.9 49.673c0-.097 3.264 3.78 10.75-1.163z",fill:"#D7E8A9",stroke:"#0E101A",strokeMiterlimit:"10",strokeLinejoin:"round"}),n.createElement("path",{d:"M42.778 85.615c0-2.917-2.194-5.216-4.978-5.216 2.785 0 4.978-2.298 4.978-5.216 0 2.918 2.194 5.216 4.979 5.216-2.785 0-4.979 2.299-4.979 5.216z",fill:"#D1CEF4",stroke:"#0E101A",strokeMiterlimit:"10",strokeLinejoin:"round"}),n.createElement("path",{d:"M56.597 42.094c0-2.652-1.994-4.742-4.525-4.742 2.531 0 4.525-2.09 4.525-4.741 0 2.652 1.995 4.742 4.526 4.742-2.531 0-4.526 2.09-4.526 4.741z",fill:"#FCF5D0",stroke:"#0E101A",strokeMiterlimit:"10",strokeLinejoin:"round"}),n.createElement("path",{d:"M80.06 61.062c0-3.13-2.354-5.596-5.341-5.596 2.987 0 5.34-2.465 5.34-5.595 0 3.13 2.354 5.595 5.341 5.595-2.987 0-5.34 2.466-5.34 5.596z",fill:"#F8C6DA",stroke:"#0E101A",strokeMiterlimit:"10",strokeLinejoin:"round"}),n.createElement("path",{d:"M77 43.212c5.412 0 9.8-4.43 9.8-9.895 0-5.464-4.388-9.894-9.8-9.894-5.412 0-9.8 4.43-9.8 9.894 0 5.465 4.388 9.895 9.8 9.895z",fill:"#15C39A",stroke:"#0E101A",strokeMiterlimit:"10"}),n.createElement("path",{d:"M83.037 29.695c-.35-.353-1.05-.353-1.487 0l-6.125 6.184-2.625-2.65c-.35-.353-1.05-.353-1.487 0-.175.177-.263.442-.263.707 0 .265.088.53.263.706l3.412 3.446c.175.176.438.265.7.265.263 0 .525-.089.7-.265l6.825-6.89c.438-.443.438-1.061.087-1.503z",fill:"#fff"})))),h=l.UI.Node.make((({view:e})=>n.createElement("div",{"data-name":"success-lens-text",className:E.newSuccessText},n.createElement(u.H4,{key:"title"},e("title")),n.createElement("div",{className:E.newSuccessDescription},n.createElement(a.F.div,{className:E.newSuccessDescriptionText},(0,i.pipe)(e("firstLine"),d.U(s.QP))))))),g=l.UI.Union.asOption(h),f=l.UI.Grid.make((({slots:e})=>n.createElement(a.F.div,{className:E.newSuccessContainer},e.image,e.caption))),y=l.UI.Knot.make(f,{image:p,caption:g}),v=l.UI.Knot.make(f,{image:m,caption:g}),b=l.UI.Union.make("kind",{growStart:y,growComplete:v}),w=c.u.keyframes({"0%":{opacity:0},"100%":{opacity:1}}),C=c.u.keyframes({"0%":{opacity:1},"100%":{opacity:0}}),S={animation:`${w} 300ms linear forwards`},I={position:"absolute",top:0,width:c.u.percent(100),animation:`${C} 200ms linear forwards`},k={width:c.u.percent(100),marginTop:c.u.rem(.5)},x={marginTop:c.u.rem(.25)},A={fontSize:c.u.rem(o.xv.NewSuccessDescriptionSize),color:o.Il.CoreNeutral50,letterSpacing:o.xv.NewSuccessDescriptionLetterSpacing,lineHeight:c.u.rem(o.xv.NewSuccessDescriptionLineHeight),fontWeight:o.xv.NewSuccessDescriptionWeight},E=c.u.stylesheet({success_fadein:[S],success_fadeout:[I],newSuccessContainer:[{textAlign:"center"}],newSuccessText:[k],newSuccessDescription:[x],newSuccessDescriptionText:[A]}),T=l.UI.Transition.make({fadein:E.success_fadein},{fadeout:E.success_fadeout}),_=l.UI.Animated.make(T,b)},38819:(e,t,r)=>{"use strict";r.d(t,{r:()=>f});var n=r(27378),i=r(40327),a=r(5114),s=r(4680),o=r(63969),l=r(61903),c=r(30763),u=r(94793),d=r(3656);const p=s.UI.Grid.make((({slots:e})=>n.createElement("div",{className:w.grid},n.createElement("div",{className:w.iconWrapper},e.icon),n.createElement("div",{className:w.titleWrapper},e.title),n.createElement("div",{className:w.bottomWrapper},e.bottom)))),m=s.UI.Node.make((()=>{const e=n.useContext(c.m.Context).successLens.paidView;return n.createElement(d.H4,null,e.title)})),h=s.UI.Node.make((()=>n.createElement(u.JO.GreenOk,{width:32}))),g=s.UI.Knot.make(p,{icon:h,title:m,bottom:s.UI.Union.make("kind",{[l.n.State.hidden]:s.UI.Node.empty,[l.n.State.expanded]:l.n.TogglableExpandedPanel})}),f=(0,i.pipe)(s.UI.squash(g),s.UI.contramapState((e=>(0,i.pipe)(e,a.fold((()=>({bottom:{kind:l.n.State.hidden}})),(e=>({bottom:{kind:l.n.State.expanded,showCloseButton:!1,alertsState:e}}))))))),y={marginTop:o.u.rem(3.5)},v={marginTop:o.u.rem(1.375)},b={marginTop:o.u.rem(2.675)},w=o.u.stylesheet({grid:[{display:"flex",flexDirection:"column",alignItems:"center"}],iconWrapper:[y],titleWrapper:[v],bottomWrapper:[b]})},70023:(e,t,r)=>{"use strict";r.d(t,{Q:()=>d});var n=r(57050),i=r(5114),a=r(22232),s=r(77176),o=r(60797),l=r(93508),c=r(66310),u=r(61903);function d(e){return(0,n.ls)(s.U((e=>{switch(e.key){case u.n.State.expanded:switch(e.action.kind){case"collapse":return i.some(u.n.State.minimized);case"upgrade":case"onUpgradeButtonMount":return i.none;default:return(0,a.vE)(e.action)}case u.n.State.minimized:switch(e.action.action){case"onClick":return i.some(u.n.State.expanded);default:return(0,a.vE)(e.action.action)}default:return(0,a.vE)(e)}})),o.oA,l.O(u.n.State.minimized),c.w((t=>e.pipe(s.U(i.fold((()=>({kind:u.n.State.hidden})),(e=>{switch(t){case u.n.State.minimized:return{kind:u.n.State.minimized,alertsCount:e.count};case u.n.State.expanded:return{kind:u.n.State.expanded,showCloseButton:!0,alertsState:{count:e.count,alerts:e.alerts()}};case u.n.State.hidden:return{kind:u.n.State.hidden};default:return(0,a.vE)(t)}})))))))}},61903:(e,t,r)=>{"use strict";r.d(t,{n:()=>V});var n=r(4680),i=r(27378),a=r(40327),s=r(5739),o=r(22232),l=r(5114),c=r(30763),u=r(7046),d=r(87380),p=r(94793),m=r(3656),h=r(77176),g=r(90351),f=r(63969),y=r(40219);const v={position:"relative",borderRadius:f.u.rem(y.fx),boxShadow:"0 1px 7px 0 rgba(129, 137, 169, .2)",userSelect:"none"},b={padding:`${f.u.rem(1)} ${f.u.rem(2)}`},w={display:"flex",boxSizing:"border-box",padding:`${f.u.rem(1.25)} ${f.u.rem(.5)} ${f.u.rem(1.25)} ${f.u.rem(1.25)}`,height:f.u.rem(3),cursor:"pointer",justifyContent:"flex-start",alignItems:"center",$nest:{"&:before":{position:"absolute",right:f.u.rem(.5),bottom:f.u.rem(-.5),left:f.u.rem(.5),zIndex:-20,display:"block",height:f.u.rem(2),borderRadius:f.u.rem(y.fx),backgroundColor:g.Il.CoreNeutral0,boxShadow:`0 ${f.u.rem(.25)} ${f.u.rem(1.625)} 0 rgba(198, 203, 222, .25)`,content:"' '"}}},C={marginLeft:f.u.rem(.8),fontSize:f.u.rem(.85),lineHeight:f.u.rem(1)},S={display:"flex",width:f.u.percent(100),alignItems:"center",justifyContent:"space-between"},I={position:"relative",padding:`${f.u.rem(1)} ${f.u.rem(2)} ${f.u.rem(2)}`,userSelect:"none"},k={position:"absolute",top:f.u.rem(.2),right:f.u.rem(.3),cursor:"pointer"},x={paddingRight:f.u.rem(1),textAlign:"left",fontSize:f.u.rem(.75),lineHeight:f.u.rem(1.15)},A={marginTop:f.u.rem(.6),fontSize:f.u.rem(.875),flexShrink:0},E={display:"flex",marginBottom:f.u.rem(.6),justifyContent:"flex-end",flexShrink:0},T={marginRight:"auto",lineHeight:f.u.rem(1.3125)},_={marginTop:f.u.rem(.21),minWidth:f.u.rem(1.5),flexShrink:0},L={display:"flex",width:f.u.percent(100),justifyContent:"center",alignItems:"center"},R={display:"flex",width:f.u.percent(100),height:f.u.rem(2),borderRadius:f.u.rem(y.fx),backgroundColor:g.Il.CoreYellow60,color:g.Il.CoreNeutral0,fontWeight:"bold",justifyContent:"center",alignItems:"center",$nest:{"&:not([data-disabled='true'])[data-hovered='true']":{backgroundColor:g.Il.CoreYellow50}}},P={display:"flex",marginTop:f.u.rem(1),justifyContent:"center"},O={position:"absolute",top:f.u.rem(.7),left:f.u.rem(.22),fill:g.Il.CoreNeutral90,$nest:{"&:not([data-disabled='true'])[data-hovered='true']":{fill:g.Il.CoreNeutral90}}},M=f.u.stylesheet({wrapper:[v],maximizedWrapper:[b],minimizedWrapper:[w],shadowWrapper:[{position:"relative",zIndex:1}],minimizedText:[C],minimizedContent:[S],maximizedContainer:[I],maximizedCloseButtonContainer:[k],maximizedHeader:[x],alertCategoryContainer:[A],alertCategory:[E],categoryHumanContainer:[T],alertCounterContainer:[_],premiumButtonWrapper:[L],premiumButton:[R],premiumButtonContainer:[P],icon:[O]});var F=r(12187),N=r(50224);const D=e=>n.UI.Grid.make((({slots:t})=>i.createElement(s.F.div,Object.assign({},(0,F.Sh)(M.wrapper,e,N.m.fullCard)),i.createElement(p.JO.PaidLink,{width:14,className:M.icon}),t.body))),$=n.UI.Node.make((({notify:e})=>i.createElement(s.F.div,{className:M.maximizedCloseButtonContainer},i.createElement(m.zx,{name:"close",onClick:e("onClick")},i.createElement(p.JO.Close,{width:11})))));var U;!function(e){let t;!function(e){e.onUpgrade="onUpgrade",e.onUpgradeButtonMount="onUpgradeButtonMount"}(t=e.ActionsKind||(e.ActionsKind={}))}(U||(U={}));const B=n.UI.Node.make((({state:e,notify:t})=>{const r=i.useContext(c.m.Context);return i.createElement(i.Fragment,null,i.createElement("div",{className:M.maximizedHeader},i.createElement(s.F.Fragment,null,e.pipe(h.U((({count:e})=>e>0?e>1?i.createElement(i.Fragment,{key:"plural"},r.sidebar.content.premiumIssues.foundTitlePlural.description1,"Â ",e,"Â ",r.sidebar.content.premiumIssues.foundTitlePlural.description2):i.createElement(i.Fragment,{key:"singular"},r.sidebar.content.premiumIssues.foundTitleSingular.description1,"Â ",e,"Â ",r.sidebar.content.premiumIssues.foundTitleSingular.description2):null))))),i.createElement(s.F.div,{className:M.alertCategoryContainer},e.pipe(h.U((({alerts:e})=>e.map((e=>i.createElement("div",{key:e.category,className:M.alertCategory},i.createElement("div",{className:M.categoryHumanContainer},e.categoryHuman),i.createElement("div",{className:M.alertCounterContainer},i.createElement(d.x.Counter,{count:e.count,type:"orange"}))))))))),i.createElement("div",{className:M.premiumButtonContainer},i.createElement("div",{ref:e=>{t({kind:U.ActionsKind.onUpgradeButtonMount,element:l.fromNullable(e)})()},className:M.premiumButtonWrapper},i.createElement(u.zx,{name:"upgrade",styleType:m.ZT.Type.Base,className:M.premiumButton,onClick:t({kind:U.ActionsKind.onUpgrade})},r.seeWhatsInPremium))))})),j=n.UI.Composite.make(D(M.maximizedWrapper),n.UI.Group.make({closeButton:n.UI.Union.make("kind",{hidden:n.UI.Node.empty,visible:$}),content:B})),W=(0,a.pipe)(n.UI.squash(j),n.UI.mapAction((e=>{switch(e.key){case"content":switch(e.action.kind){case U.ActionsKind.onUpgrade:return{kind:"upgrade"};case U.ActionsKind.onUpgradeButtonMount:return{kind:"onUpgradeButtonMount",element:e.action.element};default:return(0,o.vE)(e.action)}case"closeButton":switch(e.action.action){case"onClick":return{kind:"collapse"};default:return(0,o.vE)(e.action.action)}default:return(0,o.vE)(e)}})),n.UI.contramapState((e=>({closeButton:{kind:e.showCloseButton?"visible":"hidden"},content:e.alertsState})))),H=n.UI.Node.make((({state:e})=>{const t=i.useContext(c.m.Context);return i.createElement(s.F.div,{className:M.minimizedContent},i.createElement("div",{className:M.minimizedText},t.premiumSuggestions),e.pipe(h.U((({alertsCount:e})=>e>0&&i.createElement(d.x.OutcomeCounter,{type:"orange",key:"advancedCounter-counter",count:e})))))})),G=n.UI.Grid.make((({slots:e,notify:t})=>i.createElement("div",{className:M.shadowWrapper,onClick:t("onClick")},e.body))),z=n.UI.Knot.make(G,{body:n.UI.Composite.make(D(M.minimizedWrapper),H)}),Y=(0,a.pipe)(n.UI.squash(z),n.UI.contramapState((e=>({body:e}))));var V;!function(e){let t;!function(e){e.hidden="hidden",e.minimized="minimized",e.expanded="expanded"}(t=e.State||(e.State={})),e.TogglableExpandedPanel=n.UI.Union.make("kind",{[t.hidden]:n.UI.Node.empty,[t.expanded]:W}),e.ToggablePanel=n.UI.Union.make("kind",{[t.hidden]:n.UI.Node.empty,[t.minimized]:Y,[t.expanded]:W})}(V||(V={}))},70134:(e,t,r)=>{"use strict";r.d(t,{f:()=>d});var n=r(59312),i=r(98036),a=r(40151);var s=function(){function e(e,t){this.count=e,this.source=t}return e.prototype.call=function(e,t){return t.subscribe(new o(e,this.count,this.source))},e}(),o=function(e){function t(t,r,n){var i=e.call(this,t)||this;return i.count=r,i.source=n,i}return n.ZT(t,e),t.prototype.complete=function(){if(!this.isStopped){var t=this.source,r=this.count;if(0===r)return e.prototype.complete.call(this);r>-1&&(this.count=r-1),t.subscribe(this._unsubscribeAndRecycle())}},t}(i.L),l=r(12834);var c=function(){function e(){}return e.prototype.call=function(e,t){return t.subscribe(new u(e))},e}(),u=function(e){function t(t){return e.call(this,t)||this}return n.ZT(t,e),t.prototype._next=function(e){this.destination.next(l.P.createNext(e))},t.prototype._error=function(e){var t=this.destination;t.next(l.P.createError(e)),t.complete()},t.prototype._complete=function(){var e=this.destination;e.next(l.P.createComplete()),e.complete()},t}(i.L);var d,p=function(){function e(){}return e.prototype.call=function(e,t){return t.subscribe(new m(e))},e}(),m=function(e){function t(t){return e.call(this,t)||this}return n.ZT(t,e),t.prototype._next=function(e){e.observe(this.destination)},t}(i.L),h=r(49708),g=r(77176),f=r(93508),y=r(85985),v=r(17343),b=r(24209),w=r(8473),C=r(2768),S=r(50628),I=r(44586),k=r(28043),x=r(32952),A=r(66310),E=r(76974);!function(e){class t{static get observable(){return this._obs||(this._obs=h.R(document,"visibilitychange").pipe(g.U((()=>document.hidden)),f.O(document.hidden),y.h(Boolean),v.h(void 0),(void 0===(e=1)&&(e=-1),function(t){return 0===e?(0,a.c)():e<0?t.lift(new s(-1,t)):t.lift(new s(e-1,t))})));var e}}function r(...e){return b.T(...e.map((e=>e.pipe((function(e){return e.lift(new c)}))))).pipe(w.o((e=>e.hasValue)),(function(e){return e.lift(new p)}))}e.Hidden=t,e.mergeUntilAnyCompletes=r,e.createAnimationObservable=function(e,n,i){return r(function(e,t,r){return I.y.create((n=>{let i,a=window.requestAnimationFrame(s);function s(o){i||(i=o);const l=o-i;l<r?(n.next(Math.round(e+l/r*(t-e))),a=window.requestAnimationFrame(s)):(n.next(t),n.complete())}return()=>window.cancelAnimationFrame(a)})).pipe(k.x())}(e,n,i).pipe(C.R(t.observable)),t.observable.pipe(v.h(n),S.P()))},e.fadeOutState=function(e){const t=new x.xQ;return{state:e.pipe(A.w((e=>e?E.of("inProgress"):b.T(E.of("fadeOut"),t.pipe(v.h("end")))))),complete:()=>t.next(!0)}},e.rafSequence=function(e,t=!1){return I.y.create((r=>{let n;function i(){r.next(e.shift()),e.length&&(n=requestAnimationFrame(i))}return t?i():n=requestAnimationFrame(i),()=>cancelAnimationFrame(n)}))}}(d||(d={}))},10061:(e,t,r)=>{"use strict";r.d(t,{c:()=>n});var n,i=r(18625),a=r(49708);!function(e){const t="scrollaction";e.emit=e=>window.dispatchEvent(new CustomEvent(t,{detail:e})),e.observe=i.P((()=>a.R(window,t)))}(n||(n={}))},85255:(e,t,r)=>{"use strict";r.d(t,{P:()=>n});var n,i=r(27378),a=r(38983),s=r(66310),o=r(76974),l=r(85089),c=r(93508),u=r(77176),d=r(22232),p=r(5114),m=r(19962);!function(e){e.useSubscriptionTo=function(e){i.useEffect((()=>{const t=e.subscribe();return()=>t.unsubscribe()}),[e])};const t=new Set;function r(){return i.useMemo((()=>{const e=a.h.create(p.none);return{ref:e,onMount:t=>e.set(p.fromNullable(t))}}),[])}e.useSingleton=function(e){i.useEffect((()=>((0,d.kG)(!t.has(e),`Component ${e} can be mounted only once!`),t.add(e),()=>{t.delete(e)})),[])},e.useElWatcher=r,e.useRectWatcher=()=>{const{ref:e,onMount:t}=r();return{rect:e.pipe(s.w(p.fold((()=>o.of(p.none)),(e=>l.YC(e).pipe(c.O(m.UL.fromEl(e)),u.U(p.some)))))),onMount:t}},e.useEffectOnDidMount=e=>{i.useEffect(e,[])},e.useEffectOnWillUnmount=e=>{i.useEffect((()=>e),[])}}(n||(n={}))},95983:(e,t,r)=>{"use strict";r.d(t,{vM:()=>p,aW:()=>n});var n,i=r(71249),a=r(57050),s=r(40327),o=r(22232),l=r(83078),c=r(5114),u=r(95195),d=r(89943);function p(e,t){return t.reduce(((t,r)=>{const n="function"==typeof e?e(r):r[e];let i=t.get(n);return i||(i=[],t.set(n,i)),i.push(r),t}),new Map)}!function(e){e.URI="ImmutableSortedMap",e.create=function(t,r,n){const i=Array.isArray(t)?new Map(t.map((e=>[r(e),e]))):t,a=e.orderKeys(i,n);return i.forEach((e=>(0,o.kG)(h(e),"init value should implement IEquals",(()=>JSON.stringify(e))))),new m(i,a,n,r)},e.empty=function(e,t){return new m(new Map,[],t,e)},e.diff=function(e,t){const r=e.clear();return e.reduce((({added:e,preserved:r,removed:n,changed:i},a,s)=>{const o=e.has(s)?e.remove(s):e;if(t.has(s)){const e=a.equals(l.MH(t.get(s)).value);return{removed:n,added:o,preserved:e?r.add(a):r,changed:e?i:i.add(a)}}return{removed:n.add(a),added:o,preserved:r,changed:i}}),{removed:r,added:t,preserved:r,changed:r})},e.unsafeGet=function(e,t){return l.MH(t.get(e)).value},e.unsafeGetBy=function(e){return t=>l.MH(t.get(e)).value},e.unsafeGetAt=function(e,t){return l.MH(t.getAt(e))},e.unsafeGetAtBy=function(e){return t=>l.MH(t.getAt(e))},e.nonEmpty=function(e){return e.size>0},e.lowerBound=function(e,t){let r=-1,n=e.size;for(;r+1!==n;){const i=r+(n-r>>1);t(l.MH(e.getAt(i)))?r=i:n=i}return r+1},e.createKeySorter=function(e,t){return(r,n)=>t(e(r),e(n))},e.orderKeys=function(t,r){return Array.from(t.keys()).sort(e.createKeySorter((e=>t.get(e)),r))},e.takeByKey=function(e,t,r){const n=(0,s.pipe)(r,i.cx((t=>t===e))),a=c.fromNullable(t.get(e));return(0,o.kG)(c.isNone(n)&&c.isNone(a)||c.isSome(n)&&c.isSome(a),"unsynced hash&order"),l.vB(((e,t)=>({index:e,value:t})))(n,a)},e.getFoldableWithIndex=function(){return{URI:e.URI,_E:void 0,reduce:(e,t,r)=>e.reduce(r,t),foldMap:e=>(t,r)=>t.reduce(((t,n)=>e.concat(t,r(n))),e.empty),reduceRight:(e,t,r)=>e.reduce(((e,t)=>r(t,e)),t),reduceWithIndex:(e,t,r)=>e.reduce(((e,t,n)=>r(n,e,t)),t),reduceRightWithIndex:(e,t,r)=>e.reduce(((e,t,n)=>r(n,t,e)),t),foldMapWithIndex:e=>(t,r)=>t.reduce(((t,n,i)=>e.concat(t,r(i,n))),e.empty)}}}(n||(n={}));class m{constructor(e,t,r,n){this._hash=e,this._order=t,this._comp=r,this._getKey=n,(0,o.kG)(e.size===t.length,"every hash entry should has order")}get(e){return n.takeByKey(e,this._hash,this._order)}getIndex(e){return c.fromPredicate((e=>e>-1))(this._order.indexOf(e))}getAt(e){return c.fromNullable(this._hash.get(this._order[e]))}has(e){return this._hash.has(e)}find(e,t=0){if(t<0)return c.none;for(let r=t;r<this._order.length;r++){const t=this._order[r],n=this._hash.get(t);if(e(n))return c.some({index:r,value:n})}return c.none}findFrom(e,t){return this.find(e,t)}findRight(e,t){if(t&&t>=this._order.length)return c.none;for(let r=t||this._order.length-1;r>=0;r--){const t=this._order[r],n=this._hash.get(t);if(e(n))return c.some({index:r,value:n})}return c.none}findRightFrom(e,t){return this.findRight(e,t)}map(e,t=this._comp){const r=new Map;this._order.forEach(((t,n)=>{const i=this._hash.get(t),a=e(i,t,n);(0,o.kG)(h(a),"transformed value should implement IEquals",(()=>JSON.stringify(a))),r.set(t,a)}));const i=n.orderKeys(r,t);return new m(r,i,t,this._getKey)}mapTo(e){return this._order.map(((t,r)=>e(this._hash.get(t),t,r)))}filter(e){const t=new Map,r=this._order.filter((r=>{const n=this._hash.get(r),i=e(n,r);return i&&t.set(r,n),i}));return new m(t,r,this._comp,this._getKey)}reduce(e,t){return this._order.reduce(((t,r,n)=>e(t,this._hash.get(r),r,n)),t)}modifyWith(e,t){const r=new Map(this._hash),i=this._order.slice(),a=(e,a)=>{const s=n.takeByKey(a,r,i),l=t(a,e,s);(0,o.kG)(h(l),"modified value should implement IEquals",(()=>JSON.stringify(l))),r.set(a,l),c.isNone(s)&&i.push(a)};return e instanceof Array?e.forEach((([e,t])=>a(t,e))):e.forEach(a),i.sort(n.createKeySorter((e=>r.get(e)),this._comp)),new m(r,i,this._comp,this._getKey)}patchWith(e,t){const r=new Map(this._hash),i=this._order.slice(),u=(e,u)=>{const d=n.takeByKey(u,r,i),p=t(u,e,d);(0,o.kG)(l.wo(h)(p),"patched value should implement IEquals",(()=>JSON.stringify(p))),(0,s.pipe)(p,c.fold((()=>{(0,s.pipe)(d,c.fold(a.Q1,(({index:e})=>{r.delete(u),i.splice(e,1)})))}),(e=>{r.set(u,e),c.isNone(d)&&i.push(u)})))};return e instanceof Array?e.forEach((([e,t])=>u(t,e))):e.forEach(u),i.sort(n.createKeySorter((e=>r.get(e)),this._comp)),new m(r,i,this._comp,this._getKey)}add(e){const t=new Map(this._hash),r=this._order.slice();return(Array.isArray(e)?e:[e]).forEach((e=>{const n=this._getKey(e);(0,o.kG)(h(e),"added value should implement IEquals",(()=>JSON.stringify(e))),t.set(n,e),-1===r.indexOf(n)&&r.push(n)})),r.sort(n.createKeySorter((e=>t.get(e)),this._comp)),new m(t,r,this._comp,this._getKey)}update(e,t){return(0,s.pipe)(this.get(e),c.fold((()=>u.t$(`Provided key ${e} not found in the map`)),(({value:r})=>{const i=new Map(this._hash),a=this._order.slice();return i.set(e,t(r)),a.sort(n.createKeySorter((e=>i.get(e)),this._comp)),u.F2(new m(i,a,this._comp,this._getKey))})))}remove(e){(0,o.kG)(this.has(e),`can not remove unknown key: ${e}`);const t=new Map(this._hash);t.delete(e);const r=d.CE(e,this._order);return new m(t,r,this._comp,this._getKey)}clear(){return new m(new Map,[],this._comp,this._getKey)}hashCode(){let e=7;return this._hash.forEach((t=>e+=t.hashCode())),e}equals(e){return this.hashCode()===e.hashCode()&&this.size===e.size&&this.values().every(((t,r)=>t.equals(l.MH(e.getAt(r)))))}values(){return this._order.map((e=>this._hash.get(e)))}keys(){return this._order}get size(){return this._order.length}}function h(e){return!(!e||"function"!=typeof e.equals||"function"!=typeof e.hashCode)}},5920:(e,t,r)=>{"use strict";r.d(t,{l:()=>n});var n,i=r(40327),a=r(5114);!function(e){e.update=function(e,t,r){return e.update(t,r)},e.filter=function(e,t){return e.filter(t)},e.get=function(e,t,r){return(0,i.pipe)(e.get(t),a.filter((e=>r(e.value))))},e.find=function(e,t){return e.find(t)}}(n||(n={}))},21619:(e,t,r)=>{"use strict";r.d(t,{m:()=>k});var n,i=r(71249),a=r(57050),s=r(40327),o=r(38983),l=r(5114),c=r(45701),u=r(89943),d=r(8125),p=r(55415),m=r(83078),h=r(66896),g=r(32952),f=r(98403),y=r(77176),v=r(67434),b=r(28043),w=r(41398),C=r(19751),S=r(17594),I=r(79471);!function(e){e.Mock=class{constructor(){this.alertHovered=new g.xQ,this.alertClicked=new g.xQ,this.highlightedAlert=o.h.create(l.none)}}}(n||(n={}));class k{constructor(e,t,r,n,o){this._ded=e,this._state=t,this._markAlertMapper=r,this._alertsReader=n,this._getActiveItemWithAlert=o,this._focusedItem=this._state.view(I.nL.getActiveItem(this._getActiveItemWithAlert)),this._focusedLens=this._state.view("currentLens"),this._marksToAlertTupleArray=e=>(0,s.pipe)(e,l.map((0,a.ls)(i.DZ((e=>this._markAlertMapper.getAlertByMark(e))),i.DY(c.contramap((({alert:{lensType:e,lensPriority:t}})=>({type:e,priority:t})))(h.R.ord))))),this.alertHovered=f.b2.inRaf(this._ded.hoveredMarks).pipe(y.U(this._marksToAlertTupleArray),y.U(l.map(i.UI((({alert:e})=>e)))),v.R(((e,t)=>(0,s.pipe)(t,l.chain((t=>(0,s.pipe)(e,l.filter((e=>-1!==t.indexOf(e))),l.fold((()=>l.fromNullable(t[0])),l.some)))))),l.none),y.U(l.filter((e=>this._alertsReader.isInteractable(e.id)&&!S.$.isPlagiarism(e)))),b.x()),this.alertClicked=f.b2.inRaf(this._ded.activeMarks).pipe(y.U(this._marksToAlertTupleArray),w.M(this._focusedItem,this._focusedLens),v.R(((e,[t,r,n])=>{const i=t=>(0,s.pipe)(e,l.exists((e=>e.alert.id===t.alert.id))),a=e=>(0,s.pipe)(r,l.exists((t=>t.activeAlert.id===e.alert.id))),o=e=>n.meta.filter(e.alert);return(0,s.pipe)(t,l.chain((e=>(0,s.pipe)(e,u.N6([(0,d.W9)(i,a),a,(0,d.W9)(i,o),o,i]),l.fold((()=>l.fromNullable(e[0])),l.some),l.map((e=>p.Vx(e,{highlightIndex:e.alert.hasNestedHighlights?0:e.highlightIndex})))))))}),m.cS()),C.d({refCount:!0,bufferSize:1}))}}},54216:(e,t,r)=>{"use strict";r.d(t,{t:()=>c});var n=r(57050),i=r(8125),a=r(40018),s=r(66896);const o=(0,i.W9)(a.bZ.isRegistered,(0,n.ff)(a.bZ.isMuted)),l=e=>t=>(0,i.W9)(o,e(t));var c;!function(e){e.create=function(e,t){const r=l((t=>e[t]));return{lensFilters:new Map(Object.entries(e)),alertVisibleInText:(e,r)=>(0,i.W9)(l((e=>t[e]))(e),(e=>t=>e||a.bZ.isPriority(t))(r)),alertVisibleInSidebar:r,getLensesFilter:t=>e[t],alertCanBeDisplayed:o,alertIsBulkAcceptable:e=>(0,i.W9)(r(e),a.bZ.isBulkAcceptable)}};const t=e=>t=>e===t.lensId,r=e=>(0,i.W9)(t(s.R.OutcomeId.fromPriorityOutcomeId(e)),a.bZ.isPriority);e.defaultLensFilters={[s.R.SpecialId.Clarity]:t(s.R.SpecialId.Clarity),[s.R.SpecialId.Correctness]:t(s.R.SpecialId.Correctness),[s.R.SpecialId.Delivery]:t(s.R.SpecialId.Delivery),[s.R.SpecialId.Engagement]:t(s.R.SpecialId.Engagement),[s.R.SpecialId.Vox]:t(s.R.SpecialId.Vox),[s.R.SpecialId.ClarityPriority]:r(s.R.SpecialId.ClarityPriority),[s.R.SpecialId.CorrectnessPriority]:r(s.R.SpecialId.CorrectnessPriority),[s.R.SpecialId.DeliveryPriority]:r(s.R.SpecialId.DeliveryPriority),[s.R.SpecialId.EngagementPriority]:r(s.R.SpecialId.EngagementPriority),[s.R.SpecialId.VoxPriority]:r(s.R.SpecialId.VoxPriority),[s.R.SpecialId.Plagiarism]:t(s.R.SpecialId.Plagiarism),[s.R.SpecialId.DraftAI]:n.jv,[s.R.SpecialId.Premium]:t(s.R.SpecialId.Premium),[s.R.SpecialId.AllAlerts]:a.bZ.belongsToAllAlerts,[s.R.SpecialId.Closed]:n.jv,[s.R.SpecialId.Priority]:a.bZ.belongsToPriorityLens,[s.R.SpecialId.PredictionTakeaways]:a.bZ.belongsToPredictionTakeaways,[s.R.SpecialId.PredictionEmogenie]:a.bZ.belongsToPredictionEmogenie,[s.R.SpecialId.RealTimeProofit]:t(s.R.SpecialId.RealTimeProofit)},e.defaultTextFilters=Object.assign(Object.assign({},e.defaultLensFilters),{[s.R.SpecialId.Closed]:a.bZ.isCriticalImpact,[s.R.SpecialId.Premium]:(0,i.Kg)(e.defaultLensFilters[s.R.SpecialId.Premium],a.bZ.belongsToAllAlerts)}),e.priorityTextFilters=e=>({[s.R.SpecialId.Premium]:(0,i.W9)(e[s.R.SpecialId.Premium],a.bZ.isPriority)})}(c||(c={}))},59368:(e,t,r)=>{"use strict";r.d(t,{Oe:()=>n,rG:()=>i,Bd:()=>a});var n,i,a,s=r(73975),o=r(40018);!function(e){e.eq=(0,s.Uz)((e=>e.alert))(o.h$.ordId),e.isPending=e=>null!==e.state.scheduled&&(e.state.scheduled.visualState!==e.state.current.visualState||e.state.scheduled.updateRanges||e.state.scheduled.forceUpdate),e.isOneOf=(...e)=>t=>e.some((e=>e===t.state.current.visualState)),e.notAnyOf=(...e)=>t=>e.every((e=>e!==t.state.current.visualState)),e.canBeChanged=t=>r=>t&&a.applied===r.state.current.visualState?t===a.disposed:o.bZ.State.isBulkApplied(r.alert.state)||e.notAnyOf(a.applied,a.disposed)(r),e.isOrWillBe=e=>t=>null===t.state.scheduled?t.state.current.visualState===e:t.state.scheduled.visualState===e,e.willBe=e=>t=>null!==t.state.scheduled&&t.state.scheduled.visualState===e}(n||(n={})),function(e){e.updateRanges=function(e,t){return Object.assign(Object.assign({},e),{updateRanges:t})},e.forceUpdate=function(e,t){return Object.assign(Object.assign({},e),{forceUpdate:t})},e.updateVisualState=function(e,t){return Object.assign(Object.assign({},e),{visualState:t})},e.from=function(e){return{visualState:e,updateRanges:!1,forceUpdate:!1}}}(i||(i={})),function(e){e.initial="initial",e.highlighted="highlighted",e.visible="visible",e.faded="faded",e.hidden="hidden",e.success="success",e.applied="applied",e.disposed="disposed"}(a||(a={})),function(e){e.isApplied=function(t){return t===e.applied}}(a||(a={}))},16746:(e,t,r)=>{"use strict";r.d(t,{v:()=>S});var n=r(71249),i=r(57050),a=r(40327),s=r(49524),o=r(25656),l=r(24645),c=r(51996),u=r(95195),d=r(5114),p=r(22232),m=r(83078),h=r(89943),g=r(68983),f=r(8125),y=r(81531),v=r(40018),b=r(17594),w=r(36156),C=r(59368);class S{constructor(e,t,r,n,o,l,c,p){this._alert=e,this._alertsService=t,this._alertRangeService=r,this._changeMarksInDEd=n,this._create=o,this._update=l,this._remove=c,this._onTransitionEnd=p,this._currentState=C.rG.from(C.Bd.initial),this._scheduledState=C.rG.from(C.Bd.visible),this.id=this._alert("id").id,this._marksMap=new Map,this._alertRef=this._alertsService.takeReference(this._alert("_alertRef"),"mark"),this._shouldInitMark=!0,this._tryToUpdateRangesInAlert=e=>{if(!e.to.updateRanges||!(0,a.pipe)(this._alertRangeService.hasNewRangesForUpdate(this.id),u.g_(i.jv,s.y)))return d.none;const t=(0,a.pipe)(this._alertRangeService.applyPendingRangesUpdate(this.id),u.Vn((e=>I("markAlert").error("cannot apply pending ranges",e))),d.fromEither,d.chain(s.y),d.filter((({addedHighlightedRanges:e,removedHighlightedRanges:t})=>e.length>0||t.length>0)));return(0,a.pipe)(t,d.map((e=>({commit:()=>e.removedHighlightedRanges[1](),ranges:{added:e.addedHighlightedRanges,removed:e.removedHighlightedRanges[0]}}))))},this._dispose=()=>{this._marksMap.clear(),u.wE.map(this._alertRef,(e=>e.dispose()))},this._disposeIfEmpty=()=>{0===this._marksMap.size&&this._dispose()},u.wE.mapLeft(this._alertRef,(e=>I("markAlert").warn("can not take alertRef",e)))}get state(){return{current:this._currentState,scheduled:this._scheduledState}}get alert(){return this._alert()}scheduleApply(e){return this._throwWhenNotAllowedState(e),this._throwWhenInFinaleState(e),(0,p.kG)(e!==C.Bd.initial,`Cannot schedule change ${this.id} from ${this._currentState.visualState} to initial state`),this._currentState.visualState!==C.Bd.initial||e!==C.Bd.disposed&&!C.Bd.isApplied(e)?this._scheduledState&&this._scheduledState.forceUpdate?this._scheduledState=C.rG.updateVisualState(this._scheduledState,e):this._currentState.visualState!==e||this._currentState.updateRanges?this._scheduledState=C.rG.updateVisualState(this._currentState,e):this._scheduledState=null:(this._scheduledState=null,this._currentState=C.rG.from(C.Bd.disposed),this._dispose()),this}scheduleUpdate(){this._throwWhenInFinaleState(),this._scheduledState=C.rG.updateRanges(this._scheduledState||this._currentState,!0)}scheduleForceUpdate(){this._throwWhenInFinaleState(),this._scheduledState=C.rG.forceUpdate(this._scheduledState||this._currentState,!0)}apply(){if(!C.Oe.isPending(this))return;this._throwWhenInFinaleState();const e=this._getTransition();(0,a.pipe)(this.change(),d.filter((e=>e.rawMark.length>0)),d.map((t=>{this._handleBasicEvent(t.rawMark),t.commit(),this._onTransitionEnd(e,this)})))}applyWith(e){const t=[this,...e];this._handleMultipleHighlights(t,(e=>e.change()))}markByIndex(e){try{return this._throwWhenInFinaleState(),this._shouldInitMark&&(this._shouldInitMark=!1,this.apply()),this._markbyIndex(e)}catch(e){return d.none}}get mark(){return this.markByIndex(0)}_iterateOverMarkAlerts(e,t){e.forEach((({change:e,ma:r})=>{e.rawMark.forEach((e=>{"create"===e.action?r._setMarkAndCheckFinaleState(e.id,(0,a.pipe)(t.created.get(e.id)||u.t$(new Error("Cannot get unknown mark")),d.fromEither)):"remove"===e.action&&r._removeMark(e.id)})),e.commit(),r._disposeIfEmpty()}))}_handleMultipleHighlights(e,t){const r=e.map((e=>[e,t(e)])).filter((([e,t])=>(0,a.pipe)(t,d.filter((t=>0!==t.rawMark.length||(I("markAlert").warn("rawAction must have rawMark array",{rawAction:t.action,state:Object.assign(Object.assign({},e.toJSON()),{alert:void 0})}),!1))),d.isSome))).map((([e,t])=>({ma:e,change:m.MH(t)})));if(0===r.length)return;const n=h.VS(r.map((e=>e.change.rawMark))),i=this._changeMarksInDEd(n);this._iterateOverMarkAlerts(r,i)}get _mark(){return this._markbyIndex(0)}_markbyIndex(e){return this._marksMap.size>e?0===e?this._marksMap.values().next().value:Array.from(this._marksMap.values())[e]:d.none}_setMarkAndCheckFinaleState(e,t){this._throwWhenInFinaleState(),this._setMark(e,t)}_setMark(e,t){this._shouldInitMark=!1,this._marksMap.set(e,t)}_removeMark(e){this._marksMap.delete(e)}change(){(0,p.kG)(C.Oe.isPending(this),"Next state should be scheduled to change it",(()=>JSON.stringify({currentState:this._currentState,aid:this.id})));const e=this._commitTransition();return e.from.visualState!==e.to.visualState||e.to.forceUpdate||e.to.updateRanges?d.some(this._getRawActionForApply(e)):d.none}_handleBasicEvent(e){const t=this._changeMarksInDEd(e);e.forEach((e=>{if(e.action===l.v.Change.ActionType.remove)this._removeMark(e.id);else{const r=(0,a.pipe)(d.fromNullable(this._marksMap.get(e.id)),d.chain(s.y),d.alt((()=>(0,a.pipe)((e.action===l.v.Change.ActionType.create?t.created.get(e.id):t.updated.get(e.id))||u.t$(new Error("Cannot get unknown mark")),d.fromEither))));this._setMark(e.id,r)}})),this._disposeIfEmpty()}_getTransition(){return(0,p.kG)(C.Oe.isPending(this),"Next state should be scheduled to change it",(()=>JSON.stringify({currentState:this._currentState,aid:this.id}))),{from:this._currentState,to:this._scheduledState}}_commitTransition(){const e=this._getTransition();return this._currentState=Object.assign(Object.assign({},e.to),{updateRanges:!1,forceUpdate:!1}),this._scheduledState=null,e}_getRawActionForApply(e){switch(e.from.visualState){case C.Bd.initial:return(0,a.pipe)(this._tryToUpdateRangesInAlert(e),d.map((e=>e.commit()))),{action:"create",commit:o.Z,rawMark:this._getHighlightRanges((t=>this._create((()=>t),e)(t.meta.id)))};default:switch(e.to.visualState){case C.Bd.disposed:const t=C.Bd.isApplied(e.from.visualState)||v.bZ.State.isRemoved(this.alert.state)&&b.$.isApplicableAlert(this.alert)&&this._getAppliedRanges(i.Q1).length>0?this._getAppliedRanges(((e,t)=>({id:t().meta.id,range:t}))):this._getHighlightRanges((e=>({id:e.meta.id,range:()=>e})));return{action:"remove",commit:(0,a.pipe)(this._tryToUpdateRangesInAlert(e),d.map((({commit:e})=>e)),d.getOrElse((()=>i.Q1))),rawMark:t.map((e=>this._remove(e.range)(e.id)))};case C.Bd.applied:const r=this._getHighlightRanges((e=>this._remove((()=>e))(e.meta.id)));return{action:"replace",commit:(0,a.pipe)(this._tryToUpdateRangesInAlert(e),d.map((({commit:e})=>e)),d.getOrElse((()=>i.Q1))),rawMark:[...r,...this._getAppliedRanges(((t,r)=>this._create(r,e)(r().meta.id)))]};default:const n=()=>v.bZ.State.isBulkApplied(this._alert("_getRawActionForApply").state)?this._getAppliedRanges(((e,t)=>t())):this._getHighlightRanges(s.y);return(0,a.pipe)(this._tryToUpdateRangesInAlert(e),d.map((({commit:t,ranges:r})=>this._getReplaceAction(e,n(),r.removed,t))),d.getOrElse((()=>({action:"update",commit:o.Z,rawMark:n().map((t=>this._update((()=>t),e)(t.meta.id)))}))))}}}_getReplaceAction(e,t,r,n){return{action:"replace",commit:n,rawMark:[...r.map((e=>this._remove((()=>e))(e.meta.id))),...t.map((t=>this._create((()=>t),e)(t.meta.id)))]}}_getAppliedRanges(e){return(0,a.pipe)(this._alertRangeService.getAppliedRanges(this.id),u.g_((e=>(I("markAlert").error("cannot get applied ranges",{error:e.message,alert:b.$.snapshot(this._alert("_getAppliedRanges"))}),[])),n.Su(e)))}_getHighlightRanges(e){return(0,a.pipe)(this._alertRangeService.getHighlightRanges(this.id),u.g_((t=>(I("markAlert").warn("cannot get highlight ranges via range service",{error:t,alert:this._alert("_getHighlightRanges")}),(0,a.pipe)(this._alert("_getHighlightRanges_Fallback").getHighlightRanges(),n.UI(e)))),n.UI(e)))}_throwWhenNotAllowedState(e){const t=this._alert("_throwWhenNotAllowedState");(0,p.kG)(!(!b.$.isDefault(t)&&!b.$.isSuper(t))||(!e||v.bZ.State.isBulkApplied(t.state)||!C.Bd.isApplied(e)),`Applied state isn't allowed for ${this.id}`)}_throwWhenInFinaleState(e){(0,p.kG)(e&&C.Oe.isOneOf(C.Bd.applied)(this)?e===C.Bd.disposed||v.bZ.State.isBulkApplied(this._alert("_throwWhenInFinaleState").state):C.Oe.notAnyOf(C.Bd.disposed)(this),`'${this._currentState.visualState}' MarkAlert '${this.id}' cannot be changed${e?` to '${e}' `:""}`)}toJSON(){return{current:this._currentState,scheduled:this._scheduledState,mark:{id:(0,a.pipe)(this._mark,d.map((e=>e.id)),d.toUndefined),range:(0,a.pipe)(this._mark,d.map((e=>e.range)),d.toUndefined)},alert:this._alert("toJSON")}}equals(e){return C.Oe.eq.equals(this,e)}hashCode(){return(0,w.AC)(this.id)}}!function(e){e.compareTo=e=>{const t=(0,g.W)(c.SV.distanceFrom)(e);return(e,r)=>(0,f.qu)(Math.min(...e.alert.getHighlightRanges().map(t)),Math.min(...r.alert.getHighlightRanges().map(t)))}}(S||(S={}));const I=(0,f.HP)(y.C8.Logging.getLogger)},17670:(e,t,r)=>{"use strict";r.d(t,{H:()=>n});var n,i=r(40327),a=r(38983),s=r(73975),o=r(90329),l=r(5114),c=r(22232),u=r(35301),d=r(32952);!function(e){let t,r;!function(e){e.eq=s.MW({id:u.J.Category.Id.ord,description:s.yv,isMuted:s.vD,alertsCount:s.lr})}(t=e.Category||(e.Category={})),function(t){let r,n,s;function u(e){return Object.assign(Object.assign({},e),{isMuted:!0})}function p(e){return(0,i.pipe)(e,o.UI(u))}function m(e){return{categories:e,count:Array.from(e.values()).reduce(((e,t)=>t.isMuted?e:e+t.alertsCount),0)}}!function(e){e.empty={categories:new Map,count:0}}(r=t.State||(t.State={})),function(e){let t;!function(e){e.categoryClicked="categoryClicked",e.doneClicked="doneClicked",e.closeClicked="closeClicked",e.modalOpened="modalOpened"}(t=e.Kind||(e.Kind={})),e.shouldCloseDialogue=function(e){return e.kind===t.closeClicked||e.kind===t.doneClicked}}(n=t.Action||(t.Action={})),function(t){t.create=function(t){const r=a.h.create(l.none),n=r.view(l.map(m)),s=new d.xQ,o=s.subscribe(function(t,r){return n=>{switch(n.kind){case e.Dialogue.Action.Kind.categoryClicked:t.modify(l.map((e=>{const t=new Map(e),r=e.get(n.categoryId);return t.set(n.categoryId,Object.assign(Object.assign({},r),{isMuted:n.isMuted})),t})));break;case e.Dialogue.Action.Kind.doneClicked:r.unmuteCategories(n.unmutedCategories),t.set(l.none);break;case e.Dialogue.Action.Kind.closeClicked:t.set(l.none);break;case e.Dialogue.Action.Kind.modalOpened:t.set(l.some((0,i.pipe)(r.getMutedCategories(),p)));break;default:(0,c.vE)(n)}}}(r,t));return{state:n,actionEvents:s,dispose:()=>o.unsubscribe()}}}(s=t.ViewModel||(t.ViewModel={}))}(r=e.Dialogue||(e.Dialogue={}))}(n||(n={}))},25980:(e,t,r)=>{"use strict";r.d(t,{v:()=>n});var n,i=r(57050),a=r(59443),s=r(95574),o=r(5114),l=r(81531),c=r(18625),u=r(76974),d=r(60797),p=r(66310),m=r(28043),h=r(17343),g=r(98403),f=r(91224),y=r(40151),v=r(38194),b=r(77176),w=r(24209),C=r(74238),S=r(4890);!function(e){let t;!function(e){e[e.ANIMATE_ALL=0]="ANIMATE_ALL",e[e.ANIMATE_MARK=1]="ANIMATE_MARK",e[e.NO_ANIMATION=2]="NO_ANIMATION"}(t=e.Animation||(e.Animation={})),e.alignMarkToItem=function(e,r){return({animation:n,suggestedPosition:b})=>({id:w,renderOptions:{features:I},activeHighlightIndex:k,activeAlert:x})=>c.P((()=>u.of(e.getMarkAlertPosition({alert:x,highlightIndex:k})))).pipe(d.oA,p.w((e=>{const t=s.MH(r.getCardSuggestedPositionInViewport(w,I.has(S.j.Features.showLabel),o.none,"cardContentTop"));return r.setCardPosition(w,I.has(S.j.Features.showLabel),!1,C.r.FromWindowTop.ISO.modify(C.L.concatC(-t.contentOffset))(e)).pipe(m.x(),h.h((0,i.zG)(b,o.filter((e=>r.willFitViewport(w,C.r.FromWindowTop.ISO.modify(C.L.concatC(-t.contentOffset))(e)))),o.getOrElse((()=>C.r.FromWindowTop.ISO.modify(C.L.concatC(t.contentOffset))(t.top))))))})),p.w((r=>e.moveAlertHighlightInViewport({alert:x,highlightIndex:k},r,n===t.ANIMATE_ALL?a.uq.fake:a.uq.none))),h.h(g.PU),f.K((e=>(l.C8.Logging.root.getLogger("AlignmentViewModel").error("Cannot align mark to card",e),y.E))),v.B())},e.alignItemToMark=function(t,r){return({animation:n,fitCardIntoViewport:i})=>({id:d,renderOptions:{features:m},activeAlert:I,activeHighlightIndex:k})=>c.P((()=>u.of(t.getMarkAlertPosition({alert:I,highlightIndex:k})))).pipe(p.w(o.fold((()=>y.E),(e=>u.of(e)))),b.U((e=>({mark:e,card:s.MH(r.getCardSuggestedPositionInViewport(d,m.has(S.j.Features.showLabel),o.some(e),"cardContentTop"))}))),p.w((({card:s,mark:o})=>w.T(r.setCardPosition(d,m.has(S.j.Features.showLabel),n===e.Animation.ANIMATE_ALL,C.r.FromWindowTop.ISO.modify(C.L.concatC(-s.contentOffset))(o)),g.Ft(t.moveAlertHighlightInViewport({alert:I,highlightIndex:k},C.r.FromWindowTop.ISO.modify(C.L.concatC(s.contentOffset))(s.top),n===e.Animation.ANIMATE_ALL?a.uq.initial:a.uq.none))(i)))),h.h(g.PU),f.K((e=>(l.C8.Logging.root.getLogger("AlignmentViewModel").error("Cannot align card to mark",e),y.E))),v.B())}}(n||(n={}))},58562:(e,t,r)=>{"use strict";r.d(t,{eZ:()=>G,UC:()=>z});var n=r(57050),i=r(40327),a=r(49524),s=r(12447),o=r(95574),l=r(22232),c=r(83078),u=r(8125),d=r(55415),p=r(5114),m=r(95195),h=r(40018),g=r(66896),f=r(60797),y=r(98403),v=r(85089),b=r(76974),w=r(77176),C=r(17343),S=r(93508),I=r(28043),k=r(40151),x=r(66310),A=r(598),E=r(83401),T=r(41398),_=r(64916),L=r(95093),R=r(24209),P=r(16118),O=r(85985),M=r(25980),F=r(15646),N=r(91402),D=r(79471),$=r(74238),U=r(14990),B=r(99116);var j,W,H;!function(e){e.CARD_CONTENT_OFFSET_REM=3.4,e.WITH_LABEL_CARD_CONTENT_OFFSET_REM=e.CARD_CONTENT_OFFSET_REM+1,e.contentOffsetGetter=(t=e.CARD_CONTENT_OFFSET_REM,r=e.WITH_LABEL_CARD_CONTENT_OFFSET_REM)=>(e,n)=>Math.round((e?r:t)*n)}(j||(j={})),function(e){e.cardPositionGetter=(e,t)=>(r,a)=>{const s=new U.Db.Impl(t.scrollTop.get(),t.viewport.get(),t.paddingTop.get());return o.vM((()=>(0,i.pipe)(e.view(D.nL.getLens).get(),p.chain((({items:e})=>(0,i.pipe)(e.get(r),p.map((({value:e})=>(0,i.pipe)(a,p.fold((()=>(0,n.ls)($.L.AbsTop.ISO.wrap,s.converters.absTopToViewportTop,s.converters.viewportToWindow)(e.positionState.absTop)),n.yR))))))),c.MH)))},e.cardPositionInViewportGetter=(e,t)=>(r,a)=>{const s=new U.Db.Impl(t.scrollTop.get(),t.viewport.get(),t.paddingTop.get());return(0,i.pipe)(e.view(D.nL.getLens).get(),m.Yo((()=>new Error("Current lens is not WithItemsLensState"))),m.tS((({items:e,id:t})=>(0,i.pipe)(e.get(r),m.Yo((()=>new Error(`The item with id: ${r} does not exist in lens ${t}`))),m.tS((({value:t})=>{return(0,i.pipe)(a,p.map(s.converters.windowToViewport),p.alt((()=>p.some((0,n.ls)($.L.AbsTop.ISO.wrap,s.converters.absTopToViewportTop)(t.positionState.absTop)))),p.map((o=t,l=((e,t)=>(0,i.pipe)(t.get(e),p.map((({index:e})=>({before:(0,i.pipe)(t.getAt(e-1),p.map((e=>e.positionState.height)),p.getOrElse((()=>0))),after:(0,i.pipe)(t.getAt(e+1),p.map((e=>e.positionState.height)),p.getOrElse((()=>0)))}))),p.getOrElse((()=>({before:0,after:0})))))(r,e),c=s.viewport,e=>{const t=(0,B.v_)({cardTop:e,cardHeight:o.positionState.height,viewportHeight:c.height,padding:l});return $.L.FromViewportTop.ISO.modify($.L.concatC(-t))(e)})),p.map(s.converters.viewportToWindow),m.Yo((()=>new Error("Cannot get card position in viewport"))));var o,l,c}))))))}}(W||(W={})),function(e){const t=(e,t,r,n)=>{const a=n.viewport.get(),s=n.scrollTop.get(),c=$.L.converters(s,$.r.FromWindowTop.ISO.unwrap(a.top),n.paddingTop.get());return o.vM((()=>(0,i.pipe)(D.nL.getLens(r),p.chain((t=>t.items.get(e))),p.map((e=>$.L.AbsTop.ISO.wrap(e.value.positionState.absTop))),p.map((e=>c.absTopToViewportTop(e))),p.fold((()=>{throw new l.ej("Cannot get offset for unknown card")}),(e=>{const r=c.windowToViewport(t);return $.L.FromViewportTop.ISO.unwrap(e)-$.L.FromViewportTop.ISO.unwrap(r)})))))};e.moveCardToPositionSyncGetter=(e,r)=>n=>(0,i.pipe)(t(n.id,n.position,e.get(),r),m.tS((e=>r.moveCardsBy(e,"moveCardToPositionAnimated")))),e.moveCardToPositionAnimatedGetter=(e,r)=>n=>(0,i.pipe)(t(n.id,n.position,e.get(),r),m.g_((e=>N._(e)),(e=>r.moveCardsByAnimated(e,"moveCardToPositionAnimated"))))}(H||(H={}));var G,z,Y,V,q=r(71841);!function(e){e.cardSuggestedPositionGetter=(e,t)=>(r,n,a,s)=>{const o="cardTop"===s?0:t(n);return(0,i.pipe)(e(r,(0,i.pipe)(a,p.map($.r.FromWindowTop.ISO.modify($.L.concatC(-o))))),m.UI((e=>({top:e,contentOffset:o}))))},e.getSuperScrollMapper=(t,r,n)=>{const a=H.moveCardToPositionAnimatedGetter(t,r),s=H.moveCardToPositionSyncGetter(t,r),l=j.contentOffsetGetter();return{setCardPosition:(e,t,r,i)=>{const c={top:i,contentOffset:l(t,n.get())};return(r?a({id:e,position:i}):b.of(s({id:e,position:i})).pipe(w.U(o.MH))).pipe(C.h(c),S.O(c),I.x())},getCardSuggestedPosition:e.cardSuggestedPositionGetter(W.cardPositionGetter(t,r),(e=>l(e,n.get()))),getCardSuggestedPositionInViewport:e.cardSuggestedPositionGetter(W.cardPositionInViewportGetter(t,r),(e=>l(e,n.get()))),willFitViewport:(e,n)=>(0,i.pipe)(t.get(),(t=>!!D.nL.hasItems(t)&&((e,t)=>(r,n)=>{const a=new U.Db.Impl(t.scrollTop.get(),t.viewport.get(),t.paddingTop.get());return(0,i.pipe)(e.currentLens.items,(e=>(0,i.pipe)(e.get(r),p.map((({value:e})=>0===(0,B.v_)({cardTop:a.converters.windowToViewport(n),cardHeight:e.positionState.height,viewportHeight:a.viewport.height,padding:{before:0,after:0}}))))),c.MH)})(t,r)(e,n))),isAboveViewportTop:(u=r,e=>$.r.FromWindowTop.ISO.modify($.L.concatC(u.scrollTop.get()+u.paddingTop.get()))(e)<u.viewport.get().top)};var u}}(G||(G={})),function(e){e.getMapper=(e,t,r)=>({moveAlertHighlightInViewport:(t,r,n)=>e.ensureAlertHighlightInViewport(t,$.r.FromWindowTop.ISO.unwrap(r),n),getMarkAlertPosition:n=>(0,i.pipe)(e.getMarkByAlert(n),p.chain((a=>(0,i.pipe)(a.getRect(),m.UI(s.n.relativeToViewport),m.UI((e=>p.some(e.top))),m.fS((()=>(r.debug("Cached alert is missing, falling back to flush"),(r=>(t.flushChanges(),(0,i.pipe)(e.getMarkByAlert(r),p.chain((e=>(0,i.pipe)(p.fromEither((0,i.pipe)(e.getRect(),m.UI(s.n.relativeToViewport),m.UI((e=>e.top))))))))))(n)))),p.map($.r.FromWindowTop.ISO.wrap)))))})}(z||(z={}));!function(e){e.Mock=class{constructor(){this.alignCardToMark=()=>k.E,this.alignCardTo=()=>k.E,this.alignMarkTo=()=>k.E,this.alignMarkToCard=()=>k.E}}}(Y||(Y={})),function(e){let t,r;!function(e){let t;!function(e){e.below="below",e.above="above",e.intersects="intersects"}(t=e.RelativePosition||(e.RelativePosition={})),e.getRelativePosition=(e,r,n)=>r.top+n>e.bottom?t.below:e.top>r.bottom?t.above:t.intersects}(t||(t={})),e.createAlignmentOnTypingEffect=(e,t,r,n,a)=>{const s=e.view(D.nL.mapper((({currentLens:e})=>(0,i.pipe)(p.some(e),p.filter((0,B.Bk)(a)))))).pipe(w.U(p.chain(n),p.filter(a.isValidToAlign)),f.cp((e=>r.pipe(x.w(y.b2.rafScheduler),x.w((()=>t.alignCardToMark(e,M.v.Animation.NO_ANIMATION,!1)))))));return{id:"alignmentOnTyping",when:g.R.isWithAlertsId,what:D.nL.Effect.Applicator.create(s.pipe(A.c(E.C)))}},e.createAlignOnDisjointedAreasEffect=(e,r,s,o)=>{const u=e.view((0,n.ls)(D.nL.getLens,p.filter((e=>p.isNone(D.In.getActiveItem(e))&&e.isCardsHeightValid&&e.items.size>0)))),d=u.pipe(w.U(p.isSome),I.x(),x.w(y.Ft(s.changes.pipe(S.O(y.PU),x.w(y.b2.rafScheduler),w.U((()=>p.some((e=>{const t=e.viewport.getValue();return{top:Math.min(t.text.top,t.wrapper.top),bottom:t.text.bottom}})(s)))),w.U(p.filter((e=>e.top-e.bottom!=0)))))),T.M(u.pipe(w.U(p.map((({items:e})=>e)))),c.vB(((n,a)=>(0,i.pipe)(q.YA(e,o),p.map((e=>({top:$.r.FromWindowTop.ISO.unwrap(e.top),bottom:$.r.FromWindowTop.ISO.unwrap(e.bottom)}))),p.chain((e=>(0,i.pipe)(((e,r,n)=>{const a=(0,i.pipe)(e.getAt(0),p.map((e=>e.positionState.height)),p.getOrElse((()=>0))),s=t.getRelativePosition(r,n,a);switch(s){case t.RelativePosition.above:return(0,i.pipe)(e.getAt(0),p.map((e=>({card:e,top:r.top}))));case t.RelativePosition.below:return(0,i.pipe)(e.getAt(0),p.map((e=>({card:e,top:r.bottom-e.positionState.height}))));case t.RelativePosition.intersects:return p.none;default:return(0,l.vE)(s)}})(a,n,e),p.map((({card:e,top:t})=>r.alignCardTo(e,$.r.FromWindowTop.ISO.wrap(t),M.v.Animation.NO_ANIMATION)))))),p.getOrElse((()=>k.E)))))),x.w(p.fold((()=>k.E),a.y)));return{id:"alignOnDisjointedAreas",when:g.R.isWithAlertsId,what:D.nL.Effect.Applicator.create(d.pipe(A.c(E.C)))}},e.createAlignOnResizeSideEffect=(e,t,r,n,a,s=y.b2.rafScheduler)=>{const o=e.view(D.nL.mapper((({currentLens:e,alertSource:t})=>p.some({currentLens:e,alertSource:t})))).view(p.filter((({currentLens:e})=>(0,B.Bk)(a)(e)))).view(p.chain((({currentLens:e,alertSource:t})=>(0,i.pipe)(n(e),p.filter(a.isValidToAlign),p.map((r=>({item:r,source:t,lensId:e.id}))))))),l=v.Qr.pipe(_.p(100),L.T(r),T.M(o,((e,t)=>t)),x.w(s),x.w(p.fold((()=>k.E),(({item:e})=>t.alignCardToMark(e,M.v.Animation.NO_ANIMATION,!1)))));return{id:"alignOnResizeSideEffect",when:g.R.isWithAlertsId,what:D.nL.Effect.Applicator.create(l.pipe(A.c(E.C)))}},function(e){e.skip="skip"}(r=e.SkipAlertActionSource||(e.SkipAlertActionSource={})),e.createAlignmentSideEffect=(t,r,n=((e,t)=>t),i,a,s,o,l=y.b2.rafScheduler)=>{const c=e._createAlignmentSource(t,r,n,i,a,s,o,l);return{id:"alignmentSideEffect",when:g.R.isWithAlertsId,what:D.nL.Effect.Applicator.create(c.pipe(A.c(k.E)))}},e._createAlignmentSource=(e,t,s=((e,t)=>t),o,l,m,g,f=y.b2.rafScheduler)=>{const v=(0,u.Kg)(F.lY.isAlertMinicardButtonClick,F.lY.isSwitchToClosestByViewport,F.lY.isAlertCardShow,F.eI.isCardExpand,F.lY.isBulkAcceptItemShow,F.lY.isBulkHighlight),b=R.T(e.pipe(w.U(D.nL.mapper((({currentLens:e,alertSource:t})=>p.some({currentLens:e,alertSource:t})))),S.O(p.none),w.U(p.map((e=>e.currentLens.id))),P.G(),O.h((([e,t])=>(0,i.pipe)(c.vB(((e,t)=>e!==t))(e,t),p.exists(a.y)))),C.h(p.none)),e.pipe(w.U(D.nL.mapper((({currentLens:e,alertSource:t})=>p.some({currentLens:e,alertSource:t})))),O.h(p.exists((({currentLens:e})=>(0,B.Bk)(l)(e)))),w.U(p.chain((({currentLens:e,alertSource:t})=>(0,i.pipe)(o(e),p.filter(l.isValidToAlign),p.map((r=>({item:r,source:t,lensId:e.id}))))))))).pipe(I.x((0,n.ls)(c.vB(((e,t)=>e.lensId===t.lensId&&e.source===t.source&&e.item.activeAlert.id===t.item.activeAlert.id&&e.item.visualState.transition.type===t.item.visualState.transition.type&&e.item.activeHighlightIndex===t.item.activeHighlightIndex)),p.exists(a.y)))),A=(0,u.Kg)(F.lY.isBulkHighlight,F.lY.isAlertMinicardButtonClick),_=t.pipe(O.h(v),w.U(p.some),S.O(p.none),P.G(),O.h((0,n.ls)((0,n.og)(c.vB(((e,t)=>!F.lY.isAlertCardShow(t)||!F.lY.isAlertMinicardButtonClick(e)))),p.getOrElse(n.jv))),w.U((([,e])=>(0,i.pipe)(e,p.filter(A)))),S.O(p.none)).pipe(x.w((e=>b.pipe(O.h(p.exists((e=>e.source===h.l$.sidebar))),w.U(p.chain((t=>p.some(Object.assign(Object.assign({},t),{clickPoint:(0,i.pipe)(e,p.map(d.ei("clickPoint")))}))))))))),L=b.pipe(O.h(p.exists((e=>e.source!==h.l$.sidebar))),w.U((e=>(0,i.pipe)(e,p.chain((e=>p.some(Object.assign(Object.assign({},e),{clickPoint:p.none}))))))));return R.T(_,L).pipe(S.O(p.none),P.G(),w.U((([e,t])=>(0,i.pipe)(t,p.map((r=>({lensId:r.lensId,card:r.item,source:r.source,animate:(0,i.pipe)(e,c.wo((({lensId:e})=>e===r.lensId))),clickPoint:(0,i.pipe)(t,p.chain(d.ei("clickPoint")),p.map((0,n.ls)(d.ei("y"),$.r.FromWindowTop.ISO.wrap)))})))))),x.w(p.fold((()=>k.E),f)),T.M(e),x.w((([{card:e,source:t,animate:n,clickPoint:a,lensId:o},l])=>(0,i.pipe)(s(e,t),(t=>D.nL.hasItems(l)&&l.currentLens.items.has(e.id)&&o===l.currentLens.id&&t!==r.skip?((e,t,r,n)=>{if(r===h.l$.text)return(0,i.pipe)(e,g({animation:t?M.v.Animation.ANIMATE_ALL:M.v.Animation.NO_ANIMATION,fitCardIntoViewport:!0}));if(r===D.h8.forceText)return(0,i.pipe)(e,g({animation:M.v.Animation.NO_ANIMATION,fitCardIntoViewport:!1}));{const a=r===h.l$.sidebar?t?M.v.Animation.ANIMATE_ALL:M.v.Animation.ANIMATE_MARK:M.v.Animation.NO_ANIMATION;return(0,i.pipe)(e,m({animation:a,suggestedPosition:n}))}})(e,n,t,a):E.C)))))}}(V||(V={}))},17510:(e,t,r)=>{"use strict";r.d(t,{dv:()=>E,Xx:()=>ie});var n=r(11064),i=r(57050),a=r(40327),s=r(32952),o=r(38983),l=r(84966),c=r(59312);function u(e,t){return{map:function(r,n){return e.map(r,(function(e){return t.map(e,n)}))}}}var d,p=r(5114);function m(e){var t,r,n=(t=e,r=p.Applicative,{map:u(t,r).map,of:function(e){return t.of(r.of(e))},ap:function(e,n){return t.ap(t.map(e,(function(e){return function(t){return r.ap(e,t)}})),n)}}),i=e.of(p.none);return{map:n.map,ap:n.ap,of:n.of,chain:function(t,r){return e.chain(t,(0,p.fold)((function(){return i}),r))},alt:function(t,r){return e.chain(t,(0,p.fold)(r,(function(t){return e.of((0,p.some)(t))})))},fold:function(t,r,n){return e.chain(t,(0,p.fold)(r,n))},getOrElse:function(t,r){return e.chain(t,(0,p.fold)(r,e.of))},fromM:function(t){return e.map(t,p.some)},none:function(){return i}}}!function(e){var t;e.URI="IOOption",e.ioOption=(0,c.pi)({URI:e.URI},m(n.io)),t=(0,a.pipeable)(e.ioOption),e.map=t.map,e.chain=t.chain,e.ap=t.ap,e.alt=t.alt,e.apFirst=t.apFirst,e.apSecond=t.apSecond,e.of=e.ioOption.of,e.fold=function(t,r){return function(n){return e.ioOption.fold(n,t,r)}},e.fromM=e.ioOption.fromM}(d||(d={}));var h=r(22232),g=r(83078),f=r(8125),y=r(95574),v=r(71249),b=r(95195),w=r(81531),C=r(46680),S=r(40018),I=r(79227),k=r(66896),x=r(15646);class A{constructor(e,t=new URLSearchParams){this.base=e,this.params=t;const r=A._toString(e,t).length;(0,h.kG)(r<A.MAX_URL_LENGTH,"url exceeded length limit",String(r))}addParams(e){const t=Object.entries(e).reduce(((e,[t,r])=>(e.append(t,r),e)),(r=this.params,new URLSearchParams(r.toString())));var r;return new A(this.base,t)}toString(){return A._toString(this.base,this.params)}static _toString(e,t){const r=t.toString();return`${e}${r.length?`?${r}`:""}`}}A.MAX_URL_LENGTH=2083;var E,T,_=r(45586),L=r(95983),R=r(598),P=r(40151),O=r(76974),M=r(66310),F=r(91402),N=r(77176),D=r(44586),$=r(83401),U=r(77843),B=r(93508),j=r(95093),W=r(85985),H=r(36919),G=r(2834),z=r(67434),Y=r(38194),V=r(80900),q=r(13444),X=r(49524),Z=r(5920),J=r(25980),K=r(17594),Q=r(20594),ee=r(16892),te=r(48521),re=r(79471),ne=r(93494);!function(e){e.changeAlertEffect=(e,t,r,n,i,s,o,l)=>({id:"changeAlertEffect",when:k.R.isWithAlertsId,what:re.nL.Effect.SwitchAlert.create(t.actionEvents.pipe(M.w((t=>{const c=e.get();if(!re.nL.hasCards(c))return F._(new h.ej("Cannot update state without cards"));switch(t.type){case x.lY.Type.alertMinicardButtonClick:return(0,a.pipe)(i.getRegistered(t.alertHighlight.alert.id),p.fold((()=>(l.error("somehow we got click on non registered alert",{alert:K.$.snapshot(t.alertHighlight.alert),alertInRepo:(0,a.pipe)(i.getById(t.alertHighlight.alert.id),p.map(K.$.fromModel),p.map(K.$.snapshot)),state:re.nL.snapshot(Q.Mq.snapshot,n)(c)}),P.E)),(()=>O.of(t.alertHighlight))));case x.lY.Type.cardMatchesNavigationButtonClick:const e=t.transitionTo;switch(e.kind){case"anotherAlert":return(0,a.pipe)("right"===t.direction?r.nextAlert(e.card):(0,a.pipe)(r.prevAlert(e.card),g.vx(r.anyRegisteredAlert(e.card))),p.fold((()=>P.E),(e=>O.of({alert:e,highlightIndex:0}))));case"sameAlert":return(0,a.pipe)(i.getRegistered(e.card.activeAlert.id),p.fold((()=>P.E),(()=>O.of({alert:e.card.activeAlert,highlightIndex:e.highlightIndex}))));default:return(0,h.vE)(e)}case x.lY.Type.switchToClosestByViewport:return((e,t,r,n)=>{const i=e=>(0,a.pipe)(t,p.map((t=>t.alignMarkToCard(e,J.v.Animation.ANIMATE_ALL,p.none).pipe(R.c(P.E)))),p.getOrElse((()=>P.E)));return(0,a.pipe)(n((t=>(t.lensId===e.id||k.R.isMainLens(e.id))&&!S.bZ.isPremium(t)),"middleOfTheViewport"),p.fold((()=>P.E),(t=>(0,a.pipe)(r(e),p.filter((e=>e.activeAlert.id===t.alert.id)),p.fold((()=>O.of(t)),i)))))})(c.currentLens,s,n,o);default:return P.E}})),N.U((e=>({alertHighlight:e,alertSource:S.l$.sidebar,options:{order:"lensOrder"}})))))}),e.createSendActiveAlertFeedbacksEffect=function(e,t,r,n,s){const o=e.view(re.nL.getActiveAlert(t)).pipe(N.U(p.filter((e=>p.isSome(n.getRegistered(e.id))&&!S.bZ.isInPremiumLens(e)))),M.w(p.fold((()=>P.E),(t=>D.y.create((()=>((0,a.pipe)(r.applyFeedback(t.id,{kind:l.PZ.LOOKED,subtype:I.J.getSubTypeFromLens(e.get().currentLens.id)},S.l$.sidebar),b.g_(s.handler("Failed to send LOOKED feedback").error,i.Q1)),()=>{p.isSome(n.getRegistered(t.id))&&(0,a.pipe)(r.applyFeedback(t.id,{kind:l.PZ.CLOSED,subtype:I.J.getSubTypeFromLens(e.get().currentLens.id)},S.l$.sidebar),b.g_(s.handler("Failed to send CLOSED feedback: ").error,i.Q1))})))))));return{id:"sendActiveAlertFeedbacksEffect",when:i.W8,what:re.nL.Effect.Applicator.create(o.pipe(R.c($.C)))}}}(E||(E={}));class ie{constructor(e,t,r,n,o,c,u,d,m,y,v,k){this._ops=e,this._navigationEvents=t,this._cardFactory=r,this._alertsService=n,this._markOnboardingAsSeen=o,this._markMuteQuotedAdviceAsDismissed=c,this._sendToSignInExperiment=d,this._getActiveItemWithAlert=y,this._checksFeedCapabilities=v,this._lensState=k,this._log=w.C8.Logging.getLogger("CardsViewModelImpl",C.i.DEBUG),this._subs=new _.w.Keeper,this._flushCompleteTransition=new s.xQ,this._flushPositionAnimation=new s.xQ,this.actionEvents=new s.xQ,this.completePositionAnimation=new s.xQ,this.changePosition=new s.xQ,this._transitionBuffer=U.F(100).pipe(B.O(0),j.T(this._flushCompleteTransition)),this._positionAnimationBuffer=U.F(100).pipe(B.O(0),j.T(this._flushPositionAnimation)),this._startTransitionStateChanges=this.actionEvents.pipe(W.h(x.eI.isStartTransitionTo),N.U((e=>t=>{const r=t.currentLens,n=this._applyStartVSChange(r.items,[[e.id,e.transition]]);return re.nL.Prism.getLens().compose(ne.v.Prism.items).set(n,t)}))),this._completeTransitionStateChanges=this.actionEvents.pipe(W.h(x.eI.isCompleteTransitionTo),H.f(this._transitionBuffer),W.h(f.Dw),N.U((e=>t=>{const r=t.currentLens,n=this._applyCompleteVSChange(r,e.map((e=>[e.id,e.transitionId])));return this._log.isEnabled(C.i.TRACE)&&this._log.trace("batch transition complete",{events:e,diff:L.aW.diff(r.items,n.items)}),re.nL.Prism.getLens().set(n,t)}))),this._changePositionEffect=this.changePosition.pipe(N.U((({id:e,height:t})=>r=>{const n=(0,a.pipe)(Z.l.update(r.currentLens.items,e,(e=>this._checksFeedCapabilities.changePosition(ee.s.PositionState.changeHeight(e.positionState,t))(e))),b.g_((()=>r.currentLens.items),i.yR));return re.nL.Prism.getLens().compose(ne.v.Prism.items).set(n,r)}))),this._transitionEndStateChanges=this.completePositionAnimation.pipe(H.f(this._positionAnimationBuffer),W.h(f.Dw),N.U((e=>t=>{const r=t.currentLens.items,n=e.map((e=>[e,!1])).reduce(((e,[t,r])=>(0,a.pipe)(Z.l.update(e,t,(e=>this._checksFeedCapabilities.changePosition(ee.s.PositionState.changeAnimationInProgress(e.positionState,r))(e))),b.g_((()=>e),i.yR))),r);return re.nL.Prism.getLens().compose(ne.v.Prism.items).set(n,t)}))),this._switchToNextChanges=this.actionEvents.pipe(W.h((e=>e.type===x.lY.Type.switchToNext)),N.U((()=>e=>e.patch({currentLens:(0,a.pipe)(re.nL.hasItems(e)?this._checksFeedCapabilities.findNextAlert(e.currentLens):p.none,p.fold((()=>(0,a.pipe)(re.nL.getActiveAlert(this._getActiveItemWithAlert)(e),p.fold((()=>{throw new h.ej("Can not switch from non-existing card")}),(t=>this._checksFeedCapabilities.release(t)(e.currentLens))))),(t=>re.nL.hasItems(e)?this._checksFeedCapabilities.selectItemByAlert(t)(e.currentLens):e.currentLens))),switchOrder:"lensOrder",alertSource:S.l$.sidebar})))),this._dismissMuteQuotedAdvice=this.actionEvents.pipe(W.h(x.lY.isDismissMuteQuotedAdvice),G.b(this._markMuteQuotedAdviceAsDismissed),N.U((()=>e=>{const t=e.currentLens.items.filter((0,i.ls)(this._checksFeedCapabilities.hasActiveAlert,p.exists(K.$.isInQuotes))).keys().map((e=>[e,!1])).reduce(((e,[t])=>(0,a.pipe)(Z.l.update(e,t,this._cardFactory.hideMuteQuotedAdvice),b.g_((()=>e),i.yR))),e.currentLens.items);return re.nL.Prism.getLens().compose(ne.v.Prism.items).set(t,e)}))),this._changeUserInput=this.actionEvents.pipe(W.h(x.lY.isChangeUserInput),G.b((({alertId:e,userInput:t})=>{this._alertsService.changeGapValue(e,t)})),N.U((({cardId:e,userInput:t})=>r=>{const n=(0,a.pipe)(r.currentLens.items.update(e,this._checksFeedCapabilities.updateUserInput(t?p.some(t):p.none)),b.g_((()=>r.currentLens.items),i.yR));return re.nL.Prism.getLens().compose(ne.v.Prism.items).set(n,r)}))),this._focusChecksFeedItem=this.actionEvents.pipe(W.h(x.lY.isMiniItemClick),N.U((e=>t=>t.patch({currentLens:(0,a.pipe)(t.currentLens.items.find((t=>t.id===e.id)),p.fold((()=>(this._log.error("Can not switch from non-existing item"),t.currentLens)),(()=>(0,i.MZ)((0,a.pipe)(t.currentLens,this._checksFeedCapabilities.selectItemById(e.id)))))),switchOrder:"lensOrder",alertSource:S.l$.sidebar})))),this._collapseChecklistItem=this.actionEvents.pipe(W.h(x.lY.isChecklistItemCollapseButtonClick),N.U((()=>e=>e.patch({currentLens:re.nL.hasItems(e)?this._checksFeedCapabilities.unselectItem()(e.currentLens):e.currentLens,switchOrder:"lensOrder",alertSource:S.l$.sidebar})))),this._applyTakeawayFeedback=this.actionEvents.pipe(W.h(x.lY.isTakeawayDetectionFeedbackOrDoneAction),N.U((({id:e,alertId:t,type:r})=>(0,a.pipe)(this._alertsService.changeTakeawayFeedback(t,r===x.lY.Type.takeawayCorrectlyDetected?S.TO.correctlyDetected:r===x.lY.Type.takeawayCorrectlyDetectedAndDone?S.TO.correctlyDetectedAndDone:r===x.lY.Type.takeawayIncorrectlyDetected?S.TO.incorrectlyDetected:(0,h.vE)(r)),b.UI((t=>({newAlert:t,itemId:e})))))),N.U((e=>t=>(0,a.pipe)(e,b.Zl((({newAlert:e,itemId:r})=>Z.l.update(t.currentLens.items,r,(t=>this._checksFeedCapabilities.hasAlert(e.id)(t)?this._checksFeedCapabilities.updateWithAlerts([e])(t):t)))),b.Vn((e=>this._log.error("Error updating Takeaway card.",e))),b.g_((()=>t),(e=>re.nL.Prism.getLens().compose(ne.v.Prism.items).set(e,t))))))),this._smartPhrasesFeedback=this.actionEvents.pipe(W.h(x.lY.isSmartPhrasesFeedbackAction),N.U((({cardId:e,alertId:t,feedbackType:r})=>(0,a.pipe)(this._alertsService.changeSmartPhrasesFeedback(t,r),b.UI((t=>({newAlert:t,cardId:e})))))),G.b((e=>this._sendSmartPhrasesUpdateStateAction(e))),N.U((e=>this._updateSmartPhrasesCard(e)))),this._smartPhrasesShowMoreIdeas=this.actionEvents.pipe(W.h(x.lY.isSmartPhrasesShowMoreIdeasAction),N.U((({cardId:e,alertId:t})=>(0,a.pipe)(this._alertsService.rotateSmartPhrasesReplacements(t),b.UI((t=>({newAlert:t,cardId:e})))))),G.b((e=>this._sendSmartPhrasesUpdateStateAction(e))),N.U((e=>this._updateSmartPhrasesCard(e)))),this._smartPhrasesApply=this.actionEvents.pipe(W.h(x.lY.isSmartPhrasesApplyAction),N.U((({cardId:e,alertId:t,replacementIndex:r})=>(0,a.pipe)(this._alertsService.discardSmartPhrasesReplacement(t,r),b.UI((t=>({newAlert:t,cardId:e})))))),G.b((e=>this._sendSmartPhrasesUpdateStateAction(e))),G.b((e=>this._sendSmartPhrasesHighlightLastAppliedReplacementAction(e))),N.U((e=>this._updateSmartPhrasesCard(e)))),this._smartPhrasesHighlightLastAppliedReplacement=this.actionEvents.pipe(W.h(x.lY.isSmartPhrasesHighlightLastAppliedReplacementAction),N.U((({cardId:e,alertId:t})=>(0,a.pipe)(this._alertsService.highlightSmartPhrasesLastAppliedReplacement(t),b.UI((t=>({newAlert:t,cardId:e})))))),N.U((e=>this._updateSmartPhrasesCard(e)))),this._smartPhrasesRestoreOriginalHighlight=this.actionEvents.pipe(W.h(x.lY.isSmartPhrasesRestoreOriginalHighlightAction),N.U((({cardId:e,alertId:t})=>(0,a.pipe)(this._alertsService.restoreSmartPhrasesOriginalHighlight(t),b.UI((t=>({newAlert:t,cardId:e})))))),W.h((e=>(0,a.pipe)(e,b.g_(i.W8,(({newAlert:e})=>Boolean(e)))))),N.U((e=>this._updateSmartPhrasesCard(e)))),this._sendToSignIn=(0,a.pipe)(this._sendToSignInExperiment,p.map((e=>e(this.actionEvents)))),this._sendFeedback=(0,i.ls)(((e,t)=>this._alertsService.applyFeedback(e,Object.assign(Object.assign({},t),{subtype:I.J.getSubTypeFromLens(this._lensState.get().currentLens.id)}),S.l$.sidebar)),b.g_(this._log.handler("error calling alert service to send a feedback").error,i.Q1)),this._showIgnoreForm=new s.xQ,this._showIgnoreFormEffect=(0,a.pipe)(this._showIgnoreForm,N.U((e=>t=>re.nL.Prism.getLens().compose(ne.v.Prism.items).set(this._applyStartVSChange(t.currentLens.items,[[e.id,{type:"feedback_form",clockwise:!0,options:e.options}]]),t)))),this._handleAlertIgnore=(0,i.ls)(ae((e=>()=>this._sendFeedback(e,{kind:l.PZ.IGNORE})),(e=>()=>this._showIgnoreForm.next(e))),(e=>this.actionEvents.pipe(W.h(x.lY.isAlertIgnoreAction)).subscribe((t=>e(t)())))),this.hovered=this.actionEvents.pipe(W.h(x.lY.isHoverAction),G.b((()=>this._ops.flush())),z.R(((e,t)=>"hover"===t.kind?p.some(t.id):(0,a.pipe)(e,p.filter((e=>e!==t.id)))),p.none),Y.B()),this.flushTransitionTo=()=>this._flushCompleteTransition.next(),this.flushPositionAnimation=()=>this._flushPositionAnimation.next(),this._subs.push(this._handleAlertFeedbacks(),this._handleTakeawayFeedbacks(),this._handleIgnoreFormSubmit(),this._handleAlertIgnore(m),this._applyAlerts(),this._dismissAlertsBatch(),this._newFeatureSeen(),this._handleSmartPhrasesDone(),this._handleSmartPhrasesApplyLast(),this._handleSentenceLevelBrandTonesFeedback()),(0,a.pipe)(u,g.bw((e=>this._subs.push(this._handleMuteCategories(e)))))}_applyStartVSChange(e,t){return t.reduce(((e,[t,r])=>(0,a.pipe)(Z.l.update(e,t,(e=>this._checksFeedCapabilities.transitionTo(r)(e))),b.g_((()=>e),i.yR))),e)}_applyCompleteVSChange(e,t){return t.reduce(((e,[t,r])=>(0,a.pipe)(e.items.get(t),p.map((({value:e})=>e)),p.fold((()=>e),(n=>te.o.isAnimatable(n)&&"removed"===n.visualState.transition.type?this._checksFeedCapabilities.removeItemById(t)(e):(0,a.pipe)(Z.l.update(e.items,t,(e=>te.o.isAnimatable(e)&&e.visualState.transitionId===r?this._checksFeedCapabilities.completeTransition(r)(e):e)),b.g_((()=>e),(t=>ne.v.Prism.items.set(t,e)))))))),e)}_handleSentenceLevelBrandTonesFeedback(){return this.actionEvents.pipe(W.h(x.lY.isSentenceLevelBrandTonesFeedbackAction)).subscribe((({alertId:e,feedbackType:t})=>(this._alertsService.changeSentenceLevelBrandTonesFeedback(e,t),this._sendFeedback(e,{kind:t===S.id.accurate?l.fA.EMOTION_SENTENCE_LIKE:l.fA.EMOTION_SENTENCE_DISLIKE}))))}_sendSmartPhrasesHighlightLastAppliedReplacementAction(e){return(0,a.pipe)(e,b.UI((({newAlert:e,cardId:t})=>e&&e.replacementsLength>0?(0,a.pipe)(V.H(100),G.b((()=>this.actionEvents.next({type:x.lY.Type.smartPhrasesHighlightLastAppliedReplacement,alertId:e.id,cardId:t}))),q.g(2e3)).subscribe((()=>this.actionEvents.next({type:x.lY.Type.smartPhrasesRestoreOriginalHighlight,alertId:e.id,cardId:t}))):void 0)))}_sendSmartPhrasesUpdateStateAction(e){return(0,a.pipe)(e,b.UI((({newAlert:e})=>e?this.actionEvents.next({type:x.lY.Type.smartPhrasesUpdateState,alertId:e.id,state:e.getAlertState()}):void 0)))}_updateSmartPhrasesCard(e){return t=>(0,a.pipe)(e,b.tS((({newAlert:e,cardId:t})=>y.vM((()=>((0,h.kG)(void 0!==e,"SmartPhrases alert should exist when updating SmartPhrases card."),{newAlert:e,cardId:t}))))),b.Zl((({newAlert:e,cardId:r})=>Z.l.update(t.currentLens.items,r,this._checksFeedCapabilities.updateWithAlerts([e])))),b.g_((e=>(this._log.error("Error updating SmartPhrases card.",e),re.nL.Prism.getLens().compose(ne.v.Prism.items).set(t.currentLens.items,t))),(e=>re.nL.Prism.getLens().compose(ne.v.Prism.items).set(e,t))))}_handleAlertFeedbacks(){return this.actionEvents.pipe(W.h(x.lY.isAlertFeedbackAction)).subscribe((({alertId:e,feedbackType:t})=>this._sendFeedback(e,{kind:t})))}_handleTakeawayFeedbacks(){return this.actionEvents.pipe(W.h(x.lY.isTakeawayFeedbackAction)).subscribe((e=>{switch(e.type){case x.lY.Type.takeawayCorrectlyDetected:return this._sendFeedback(e.alertId,{kind:l.PZ.ACCEPTED,replacementText:e.takeawayText});case x.lY.Type.takeawayIncorrectlyDetected:return this._sendFeedback(e.alertId,{kind:l.PZ.IGNORE});case x.lY.Type.takeawayDismiss:return this._sendFeedback(e.alertId,{kind:l.PZ.IGNORE,pnameQualifier:e.isLikelyToBeRead?l.N_.likelyToBeReadTakeaway:l.N_.unlikelyToBeReadTakeaway});case x.lY.Type.takeawayResolve:return this._sendFeedback(e.alertId,{kind:l.PZ.ACKNOWLEDGED,pnameQualifier:e.isLikelyToBeRead?l.N_.likelyToBeReadTakeaway:l.N_.unlikelyToBeReadTakeaway});default:(0,h.vE)(e)}}))}_handleSmartPhrasesDone(){return this.actionEvents.pipe(W.h(x.lY.isSmartPhrasesDoneAction)).subscribe((({alertId:e})=>this._sendFeedback(e,{kind:l.PZ.HIDE})))}_handleSmartPhrasesApplyLast(){return this.actionEvents.pipe(W.h(x.lY.isSmartPhrasesUpdateStateAction),W.h((e=>0===e.state.replacementsLength))).subscribe((({alertId:e})=>this.actionEvents.next({type:x.lY.Type.smartPhrasesDone,alertId:e,source:"auto"})))}_handleIgnoreFormSubmit(){return this.actionEvents.pipe(W.h(x.lY.isAlertIgnoreFeedbackFormSubmit)).subscribe((({alertId:e,reason:t})=>this._sendFeedback(e,{kind:l.PZ.IGNORE,reason:t})))}_handleMuteCategories(e){return this.actionEvents.pipe(W.h(x.lY.isMuteCategoryAction)).subscribe((t=>(0,a.pipe)(e.muteCategories([t.categoryId],!0),b.g_(this._log.handler("error calling categories model to mute category").error,i.Q1))))}_applyAlerts(){return this.actionEvents.pipe(W.h(x.lY.isAlertApplyAction)).subscribe((e=>(0,a.pipe)(this._alertsService.apply(e.alertId,e.alternativeIndex,S.l$.sidebar,I.J.getSubTypeFromLens(this._lensState.get().currentLens.id)),b.g_(this._log.handler("error calling alert service to apply an alert").error,i.Q1))))}_dismissAlertsBatch(){return this.actionEvents.pipe(W.h(x.FG.isDismissAlertsBatchAction)).subscribe((e=>(0,a.pipe)(this._alertsService.dismissBatch(e.alerts,I.J.getSubTypeFromLens(this._lensState.get().currentLens.id)),b.g_(this._log.handler("error calling alert service to dismiss alerts batch").error,i.Q1))))}_newFeatureSeen(){return this.actionEvents.pipe(W.h(x.lY.isOnboardingClose)).subscribe((e=>(0,a.pipe)(this._markOnboardingAsSeen(e.value))))}getApplicatorEffects(){return(0,a.pipe)([[this._startTransitionStateChanges,"startTransitionStateChanges"],[this._completeTransitionStateChanges,"completeTransitionStateChanges"],[this._changePositionEffect,"changePositionEffect"],[this._transitionEndStateChanges,"transitionEndStateChanges"],[this._switchToNextChanges,"switchToNextChanges"],[this._dismissMuteQuotedAdvice,"dismissMuteQuotedAdvice"],[this._changeUserInput,"changeUserInput"],[this._applyTakeawayFeedback,"takeawayFeedback"],[this._smartPhrasesFeedback,"smartPhrasesFeedback"],[this._smartPhrasesShowMoreIdeas,"smartPhrasesShowMoreIdeas"],[this._smartPhrasesApply,"smartPhrasesApply"],[this._smartPhrasesHighlightLastAppliedReplacement,"smartPhrasesHighlightLastAppliedReplacement"],[this._smartPhrasesRestoreOriginalHighlight,"smartPhrasesRestoreOriginalHighlight"],[this._focusChecksFeedItem,"focusChecksFeedItem"],[this._collapseChecklistItem,"collapseChecklistItem"],[this.actionEvents.pipe(W.h(x.lY.isNavigation),G.b(this._navigationEvents),R.c(P.E)),"navigationEvents"],[(0,a.pipe)(this._sendToSignIn,p.fold((()=>P.E),X.y)),"sendToSignIn"],[this._showIgnoreFormEffect,"showIgnoreFormEffect"]],v.UI((([e,t])=>({id:`cardsViewModel.effects.${t}`,when:k.R.isWithAlertsId,what:re.nL.Effect.Applicator.create(e)}))))}dispose(){this._subs.dispose()}}!function(e){let t;e.Mock=class{constructor(){this.animate=o.h.create(!0),this.clockwise=o.h.create(!0),this.toggleAnimations=()=>this.animate.modify((e=>!e)),this.completePositionAnimation=new s.xQ,this.actionEvents=new s.xQ,this.flushTransitionTo=i.Q1,this.sideEffect={id:"cardsViewModelMock",when:k.R.isWithAlertsId,what:re.nL.Effect.Applicator.create(P.E)},this.changePosition=new s.xQ,this.dispose=f.ZT}},function(e){e.sendToSignIn=(e,t)=>r=>r.pipe(W.h((e=>e.type===x.lY.Type.toSignIn)),N.U((()=>r=>(e.actions.openUrl(new A(t.funnel.signin).addParams({utm_medium:"internal",utm_source:"upHook",utm_campaign:"editorDenalianonymousUserGenericSignInPrompt"})),r))))}(t=e.Experiments||(e.Experiments={}))}(T||(T={}));const ae=(e,t)=>r=>i=>(0,a.pipe)(i.eligibleForDismissSurvey,n.of,d.chain((e=>(0,a.pipe)(r,n.UI((t=>t?p.none:p.some(e)))))),d.fold((()=>e(i.alertId)),(e=>t({id:i.id,options:e}))))},48052:(e,t,r)=>{"use strict";r.d(t,{$:()=>B});var n,i=r(71249),a=r(57050),s=r(40327),o=r(36991),l=r(67394),c=r(5114),u=r(95195),d=r(26328),p=r(40018),m=r(22232),h=r(64450),g=r(95574),f=r(98637);function y(e,{text:t,ops:r}){r.reduce(((t,r,n)=>l.JU.isInsertString(r)?(e.insertString(r.insert,r,n),t):l.JU.isInsertGap(r)?(e.insertGap("",r,n),t):l.JU.isInsert(r)?t:l.JU.isDelete(r)?(e.remove(t.slice(0,r.delete),r,n),t.slice(r.delete)):l.JU.isRetain(r)?(e.retain(t.slice(0,r.retain),r,n),t.slice(r.retain)):(0,m.vE)(r)),t)}function v(e){return 0===e.replace(/ /g,"").length}function b(e,t){(0,s.pipe)(e,i.Z$,c.fold((()=>{v(t.text)||e.push(t)}),(r=>{r.type===t.type?r.text+=t.text:e.push(t)})))}function w(e){return(0,s.pipe)(g.vM((()=>(0,s.pipe)(e,d.UI((t=>{const r=[];return y({insertString(t,{type:r}){if(r===l.JU.Type.Main)throw new T("Remove transform contains main insert",e)},insertGap(){throw new T("Remove transform contains gap insert",e)},retain(e,{type:t}){l.JU.isOptionalType(t)||b(r,{type:f.GP.Text,text:e})},remove(e,{type:t}){b(r,{type:t!==l.JU.Type.Main||v(e)?f.GP.Text:f.GP.Delete,text:e})}},t),r})),i.xH))),u.tS((0,a.ls)(u.DT((e=>e.length>0),(()=>new T("Remove transform contains no data",e))),u.UI((e=>({type:n.Type.Remove,remove:e}))))))}function C(e){return(0,s.pipe)(g.vM((()=>(0,s.pipe)(e,d.UI((t=>{const r=[];return y({insertString(t,{type:r}){if(r===l.JU.Type.Main)throw new T("Multi-remove transform contains main insert",e)},insertGap(){throw new T("Multi-remove transform contains gap insert",e)},retain(e,{type:t}){l.JU.isOptionalType(t)||b(r,{type:f.GP.Text,text:e})},remove(e,{type:t}){b(r,{type:t!==l.JU.Type.Main||v(e)?f.GP.Text:f.GP.Delete,text:e})}},t),r}))))),u.tS((0,a.ls)(u.DT((e=>e.length>=2&&e.every((e=>e.length>=2))),(()=>new T("Incomplete multi-remove",e))),u.UI((e=>({type:n.Type.RemoveOr,removes:e}))))))}function S(e){return(0,s.pipe)(g.vM((()=>(0,s.pipe)(e,d.UI((t=>{const r=[];return y({insertString(e,{type:t}){b(r,{type:l.JU.isOptionalType(t)?f.GP.Text:f.GP.Insert,text:e})},insertGap(){throw new T("Insert transform contains gap insert",e)},retain(e,{type:t}){(!l.JU.isOptionalType(t)||r.length>0)&&b(r,{type:f.GP.Text,text:e})},remove(t,{type:r}){if(r===l.JU.Type.Main)throw new T("Insert transform contains main delete",e)}},t),r}))))),u.tS((0,a.ls)(d.nI,u.Yo((()=>new T("Incomplete insert",e))),u.UI((e=>({type:n.Type.Insert,inserts:e}))))))}function I(e){const{substitutions:t,longestSubstitution:r,inserts:a}=e.reduce(((e,[t,r])=>{const n=t.map((e=>e.text)).join("");return e.substitutions.push(n),e.inserts.push(r),n.length>e.longestSubstitution.length&&(e.longestSubstitution=n),e}),{substitutions:[],inserts:[],longestSubstitution:""}),o=(0,s.pipe)(t,d.UI((e=>r.split(e).join(""))));return(0,s.pipe)(i.yL(a,o,((e,t)=>(t&&e.push({type:f.GP.Text,text:t}),e))),d.nI,u.Yo((()=>new Error("Substitution processing error"))),u.UI((e=>({type:n.Type.Substitution,remove:[{type:f.GP.Delete,text:r}],inserts:e}))))}function k(e){if(!("list"in e))return c.none;switch(e.list){case"bullet":case"dashed":case"ordered":return c.some({kind:e.list,indent:"number"==typeof e.indent&&Number.isInteger(e.indent)?e.indent:0});default:return c.none}}function x(e){return(0,s.pipe)(e,u.DT((e=>1===e.length),(()=>new T("Expected full-sentence transform to have 1 alternative",e))),u.UI((0,a.ls)(d.YM,(t=>{let r={blockStart:0,ops:[],kind:f._k.PlainText};return y({insertString(e,t){const n=e.split("\n");if(1===n.length)r.ops.push({type:f.GP.Insert,text:e});else{const e=(0,s.pipe)(t.attributes,k,c.fold((()=>a.Q1),(({kind:e,indent:t})=>()=>{r.ops.splice(r.blockStart,1,{type:f.GP.List,kind:e,indent:t}),r={kind:f._k.WithFormatting,ops:r.ops,blockStart:r.blockStart}})));for(let t=0,i=n.length-1;t<=i;t++){const a=n[t];a&&r.ops.push({type:f.GP.Insert,text:a}),t<i&&(e(),r.blockStart=r.ops.length,r.ops.push({type:f.GP.Insert,text:"\n"}))}}},insertGap(){throw new T("Full sentence transform contains gap insert",e)},retain(e,t){t.type===l.JU.Type.Optional&&e.length>3?r.ops.push({type:f.GP.Text,text:e,shouldBeCollapsed:!0}):r.ops.push({type:f.GP.Text,text:e})},remove(e){r.ops.push({type:f.GP.Delete,text:e})}},t),r}))),u.tS((0,a.ls)(c.fromPredicate((e=>e.ops.length>0)),u.Yo((()=>new T("Got empty full sentence transform",e))),u.UI((({ops:e,kind:t})=>({type:n.Type.FullSentence,ops:e,kind:t}))))))}function A(e){return(0,s.pipe)(g.vM((()=>(0,s.pipe)(e,d.UI((t=>{const r=o.s.normalizeDelta(new h.i(t.ops));if(2!==r.ops.length)throw new T("SmartPhrases transform must contain exactly 2 operations",e);if(!o.s.isRetain(r.ops[0]))throw new T("SmartPhrases transform first operation must be a retain",e);if(!o.s.isInsertString(r.ops[1]))throw new T("SmartPhrases transform second operation must be an insert",e);const n=[];return y({insertString(t,{type:r}){if(r!==l.JU.Type.Main)throw new T("SmartPhrases transform insert operation must be of type MAIN",e);b(n,{type:f.GP.Insert,text:t})},insertGap(){throw new T("SmartPhrases transform contains gap insert",e)},retain(){},remove(){throw new T("SmartPhrases transform contains delete",e)}},t),n}))))),u.tS((0,a.ls)(d.nI,u.Yo((()=>new T("Incomplete SmartPhrases transform",e))),u.UI((e=>({type:n.Type.SmartPhrases,inserts:e}))))))}function E(e){return(0,s.pipe)(g.vM((()=>((0,m.kG)(1===e.length,"One gap transform does not contain exactly one alternative"),(0,s.pipe)(e,d.YM,(e=>{const t=[],r=[];let n=!1;return y({insertString(e,{type:i}){b(n?r:t,{type:l.JU.isOptionalType(i)?f.GP.Text:f.GP.Insert,text:e})},insertGap(){(0,m.kG)(!n,"One gap transform does not contain exactly one gap insert"),n=!0},retain(e,{type:i}){const a=n?r:t;(!l.JU.isOptionalType(i)||a.length>0)&&b(a,{type:f.GP.Text,text:e})},remove:a.Q1},e),(0,m.kG)(n,"One gap transform does not contain exactly one gap insert"),(0,m.kG)(t.length>0||r.length>0,"One gap transform does not contain at least one text insert"),{left:t,right:r}}))))),u.Pd(T.fromError(e),(({left:e,right:t})=>({type:n.Type.OneGap,left:e,right:t}))))}!function(e){let t;!function(e){e[e.Remove=0]="Remove",e[e.RemoveOr=1]="RemoveOr",e[e.Insert=2]="Insert",e[e.Substitution=3]="Substitution",e[e.FullSentence=4]="FullSentence",e[e.SmartPhrases=5]="SmartPhrases",e[e.OneGap=6]="OneGap"}(t=e.Type||(e.Type={})),function(e){e.parse=function(t){const r=t[0];if(r.isFullSentence)return e.FullSentence;if(r.isSmartPhrases)return e.SmartPhrases;switch(r.type){case l.r3.Type.Insert:return e.Insert;case l.r3.Type.Remove:return t.length>1?e.RemoveOr:e.Remove;case l.r3.Type.Substitution:return r.ops.find(l.JU.isInsertGap)?e.OneGap:e.Substitution;default:return(0,m.vE)(r.type)}}}(t=e.Type||(e.Type={})),e.create=function(t){const r=e.Type.parse(t);switch(r){case e.Type.Remove:return w(t);case e.Type.RemoveOr:return C(t);case e.Type.Insert:return S(t);case e.Type.Substitution:return function(e){return(0,s.pipe)(g.vM((()=>(0,s.pipe)(e,d.UI((t=>{const r=[[],[]];return y({insertString(e,{type:t}){l.JU.isOptionalContextType(t)||b(r[1],{type:f.GP.Insert,text:"\n"===e?"Â¶ ":e})},insertGap(){throw new T("Substitution transform contains gap insert",e)},remove(e){b(r[0],{type:f.GP.Delete,text:e})},retain(e,{type:t}){if(!l.JU.isOptionalType(t)||0!==r[0].length){const t={type:f.GP.Text,text:e};r[0].push(t),r[1].push(t)}}},t),(0,m.kG)(r[0].length>0,"Substituted part is empty"),(0,m.kG)(r[1].length>0,"Inserts are empty"),r}))))),u.tS(I),u.Vn(T.fromError(e)))}(t);case e.Type.FullSentence:return x(t);case e.Type.SmartPhrases:return A(t);case e.Type.OneGap:return E(t);default:return(0,m.vE)(r)}}}(n||(n={}));class T extends m.sH{constructor(e,t){super(e),this.alternatives=t}static fromError(e){return t=>{const r=new T(t.message,e);return r.stack=t.stack,r}}toString(){return`Hydration error: ${this.message}\n  ops: ${this.alternatives.map((e=>e.ops.map(l.JU.anonymize)))}`}}var _=r(8125),L=r(81531);const R=(e,t)=>{switch(e.kind){case"replacement":return function(e,t){(0,m.kG)((0,_.Dw)(e),"transforms should have at least one element");const[r]=e;return P(r)>-1?f.nV.create(O(r),e.map(M),t,!0):f.zE.create(e,t)}(e.content.map((e=>[{type:f.GP.Insert,text:e}])),t);case"transform":return function(e,t){(0,m.kG)((0,_.Dw)(e),"transforms should have at least one element");const[r]=e;return P(r)>-1?f.nV.create(O(r),e.map(M),t):function(e){return 2===e.length&&N(e)}(e)?f.fi.create(e[0],e[1],t):N(e)?f.zE.create(e,t):f.n6.create(e,t)}(e.content.map(U),t);default:return(0,m.vE)(e.kind)}};function P(e){return e.findIndex((e=>"arrow"===e.type))}function O(e){return e.slice(0,P(e))}function M(e){return e.slice(P(e)+1)}function F(e){return e.every((e=>"delete"!==e.type))}function N(e){return e.every(F)}function D(e,t){return{re:new RegExp(`^(${e})([\\s\\S]*)$`),createResult:t}}const $=[D("(?:\\<span class='gr_grammar_del'\\>([\\S\\s]*?)\\</span\\>)",(e=>({type:f.GP.Delete,text:e[2]}))),D("(?:\\<span class='gr_grammar_ins'\\>([\\S\\s]*?)\\</span\\>)",(e=>({type:f.GP.Insert,text:e[2]}))),D("(â†’)",(e=>({type:f.GP.Arrow}))),D("([^<>â†’]+)",(e=>({type:f.GP.Text,text:e[1]})))];function U(e){function t(e){for(const t of $){const r=e.match(t.re);if(null!==r)return[t.createResult(r),r[r.length-1]]}}function r(t){let r=["<span class='gr_grammar_del'>","<span class='gr_grammar_ins'>","â†’"].map((e=>t.indexOf(e)));if(r.findIndex((e=>0===e))>0)throw new Error(`Couldn't parse transform: ${e}`);if(r=r.filter((e=>e>0)),(0,_.Dw)(r)){const e=Math.min(...r);return[{type:f.GP.Text,text:t.substring(0,e)},t.substring(e)]}return[{type:f.GP.Text,text:t},""]}const n=[];let i,a=e,s=!1,o=0;for(;(0,_.Dw)(a);){const e=t(a);void 0===e&&(s=!0);const[l,c]=e||r(a);i&&i.type===f.GP.Text&&l.type===f.GP.Text?i.text+=l.text:(i&&i.type===f.GP.Delete&&l.type===f.GP.Insert&&(n.push({type:f.GP.Arrow}),o++),n.push(l)),l.type===f.GP.Arrow&&o++,i=n[n.length-1],a=c}return(s||!(0,_.Dw)(n)||o>1)&&L.C8.Logging.getLogger("model.editor.alert_replacement").warn("Bad parsing of transform",{transformHtml:e,transformPartCount:n.length,arrowCount:o}),n}const B=(0,a.ls)((function(e){return(0,a.ls)((t=>j(e,p.eT.isFullSentence(t.cardType),p.eT.isSmartPhrases(t.cardType))(t.alternatives)),u.tS(n.create))}),(e=>t=>(0,s.pipe)(t.content,u.g_((e=>u.F2(R(e,t.todo))),(0,a.ls)(e,u.UI((e=>function(e,t){switch(e.type){case n.Type.Substitution:return f.nV.create(e.remove,e.inserts,t);case n.Type.Insert:return 2===e.inserts.length?f.fi.create(e.inserts[0],e.inserts[1],t):f.zE.create(e.inserts,t);case n.Type.Remove:return f.n6.create([e.remove],t);case n.Type.RemoveOr:return f.fz.create(e.removes,t);case n.Type.FullSentence:return function(e,t){switch(e.kind){case f._k.WithFormatting:return f.i3.createWithFormatting(e.ops,t);case f._k.PlainText:return f.i3.createPlainText(e.ops,t);default:return(0,m.vE)(e)}}(e,t);case n.Type.SmartPhrases:return f.zE.create(e.inserts,t);case n.Type.OneGap:return f.G7.create(e,t);default:return(0,m.vE)(e)}}(e,t.todo))))))));function j(e,t,r){const n=(0,a.ls)(e,(e=>e.delta.reduce(((e,t)=>o.s.isInsertString(t)?e+t.insert:e),"")));return(0,a.ls)(function(e,t,r){return n=>(0,s.pipe)(n,i.DZ((n=>(0,s.pipe)(n.type,c.map((i=>{if(l.r3.hasOptionalContext(n.ops)){const[a,...s]=n.ops,o=l.JU.length(a);return{text:e(o,n.lengthAffected-o),ops:s,type:i,isFullSentence:t,isSmartPhrases:r}}return{text:e(0,n.lengthAffected),ops:n.ops,type:i,isFullSentence:t,isSmartPhrases:r}}))))),d.nI)}(n,t,r),u.Yo((()=>new Error("Alternative array is empty"))))}},98637:(e,t,r)=>{"use strict";r.d(t,{GP:()=>n,b$:()=>i,zE:()=>a,n6:()=>s,fz:()=>o,fi:()=>l,nV:()=>c,_k:()=>u,i3:()=>d,G7:()=>p});var n,i,a,s,o,l,c,u,d,p,m=r(73975),h=r(8125);!function(e){e.Delete="delete",e.Insert="insert",e.Text="text",e.List="list",e.Arrow="arrow"}(n||(n={})),function(e){let t;!function(e){e[e.InsertList=0]="InsertList",e[e.DeleteList=1]="DeleteList",e[e.DeleteOr=2]="DeleteOr",e[e.InsertOr=3]="InsertOr",e[e.Arrow=4]="Arrow",e[e.FullSentence=5]="FullSentence",e[e.OneGap=6]="OneGap"}(t=e.Type||(e.Type={})),e.eq=m.f7(((e,t)=>e.type===t.type&&e.tooltipText===t.tooltipText&&JSON.stringify(e.labels)===JSON.stringify(t.labels))),e.isFullSentence=t=>t.type===e.Type.FullSentence,e.isOneGap=t=>t.type===e.Type.OneGap,e.isRegular=t=>!(e.isFullSentence(t)||e.isOneGap(t))}(i||(i={})),function(e){e.create=(e,t)=>({labels:e,tooltipText:t,type:i.Type.InsertList})}(a||(a={})),function(e){e.create=(e,t)=>({labels:e,tooltipText:t,type:i.Type.DeleteList})}(s||(s={})),function(e){e.create=(e,t)=>({labels:e,tooltipText:t,type:i.Type.DeleteOr})}(o||(o={})),function(e){e.create=(e,t,r)=>({type:i.Type.InsertOr,labels:[e,t],tooltipText:r})}(l||(l={})),function(e){function t(e,t){return[...e,...t].map((e=>e.text.length)).reduce(h.Sm,0)>30}e.create=function(e,r,n,a){return{type:i.Type.Arrow,original:e,labels:r,tooltipText:n,onlyReplacements:a||t(e,r[0])}}}(c||(c={})),function(e){e.WithFormatting="WithFormatting",e.PlainText="PlainText"}(u||(u={})),function(e){e.createPlainText=function(e,t){return{type:i.Type.FullSentence,labels:e,tooltipText:t,kind:u.PlainText}},e.createWithFormatting=function(e,t){return{type:i.Type.FullSentence,labels:e,tooltipText:t,kind:u.WithFormatting}}}(d||(d={})),function(e){e.create=function(e,t){return{type:i.Type.OneGap,labels:{left:e.left.map((e=>Object.assign(Object.assign({},e),{type:n.Text}))),right:e.right.map((e=>Object.assign(Object.assign({},e),{type:n.Text})))},tooltipText:t}}}(p||(p={}))},26027:(e,t,r)=>{"use strict";r.d(t,{X:()=>I});var n=r(35214),i=r(57050),a=r(40327),s=r(5114),o=r(22232),l=r(95195),c=r(45701),u=r(73975),d=r(8125),p=r(81531),m=r(40018),h=r(98637),g=r(77176),f=r(28043),y=r(19751),v=r(85985),b=r(17594),w=r(55567),C=r(77610),S=r(4890);class I{constructor(e,t,r,n,i,o,l,c,u,d,p,m,h,g,f){this.id=e,this.alerts=t,this.activeAlertIndex=r,this.activeHighlightIndex=n,this.positionState=i,this.visualState=o,this.meta=l,this.lensId=c,this.renderOptions=u,this.muteCategory=d,this.order=p,this.initialAlertId=m,this.removedAlertsIds=h,this.cachedTransform=g,this.userInput=f,this.kind=I.Kind,this.activeAlert=C.C.getActiveAlert(this),this.transform=(0,a.pipe)(this.cachedTransform,s.map((e=>e.labels)))}get activeAlertRemoved(){return C.C.activeAlertRemoved(this)}get scheduledToDispose(){return C.C.willBeDisposed(this,this.removedAlertsIds)}hashCode(){return I.hashCode(this)}equals(e){return I.eq.equals(this,e)}toJSON(){return Object.assign(Object.assign({},this),{renderOptions:S.j.toJSON(this.renderOptions)})}}!function(e){let t,r;function S(e){return e.activeAlert.type===b.$.Type.default}e.Kind="AlertCard",e.isPriority=e=>b.$.isPriority(e.activeAlert),e.updateAlerts=(t,r,n,i)=>a=>new e(a.id,t,n,i,a.positionState,a.visualState,a.meta,a.lensId,a.renderOptions,a.muteCategory,a.order,a.initialAlertId,r,a.cachedTransform,a.userInput),e.updateUserInput=t=>r=>new e(r.id,r.alerts,r.activeAlertIndex,r.activeHighlightIndex,r.positionState,r.visualState,r.meta,r.lensId,r.renderOptions,r.muteCategory,r.order,r.initialAlertId,r.removedAlertsIds,r.cachedTransform,t),e.changeVisualState=t=>r=>new e(r.id,r.alerts,r.activeAlertIndex,r.activeHighlightIndex,r.positionState,t,r.meta,r.lensId,r.renderOptions,r.muteCategory,r.order,r.initialAlertId,r.removedAlertsIds,r.cachedTransform,r.userInput),e.changePosition=t=>r=>new e(r.id,r.alerts,r.activeAlertIndex,r.activeHighlightIndex,t,r.visualState,r.meta,r.lensId,r.renderOptions,r.muteCategory,r.order,r.initialAlertId,r.removedAlertsIds,r.cachedTransform,r.userInput),e.changeMeta=t=>r=>new e(r.id,r.alerts,r.activeAlertIndex,r.activeHighlightIndex,r.positionState,r.visualState,t,r.lensId,r.renderOptions,r.muteCategory,r.order,r.initialAlertId,r.removedAlertsIds,r.cachedTransform,r.userInput),e.changeTransform=t=>r=>new e(r.id,r.alerts,r.activeAlertIndex,r.activeHighlightIndex,r.positionState,r.visualState,r.meta,r.lensId,r.renderOptions,r.muteCategory,r.order,r.initialAlertId,r.removedAlertsIds,t,r.userInput),e.canHydrate=e=>!(e.meta.checking!==w.n.CheckingState.Idle||C.C.activeAlertRemoved(e)),e.getId=function(e){return e.id},function(e){e.getRemoveAlerts=(e,t)=>(r,n)=>o=>{const l=new Set(r.map((e=>e.id)));return C.C.hasAnyOfAlerts(l)(o)?e.remove(o,[o.activeAlert],(0,a.pipe)(n,s.map((e=>t.compare(o,e)>0)),s.getOrElse(i.W8))):o},e.getChangePosition=function(e){return{changePosition:t=>r=>e.changePosition(r,t)}},e.getTransitionTo=function(e){return{transitionTo:t=>r=>e.transitionTo(r,t)}},e.getCompleteTransition=function(e){return{completeTransition:t=>r=>e.completeTransition(r,t)}},e.getRemove=function(e){return{remove:(t,r)=>n=>t(n)?e.remove(n,[n.activeAlert],r(n)):n}},e.getUpdateWithAlert=function(e){return{updateWithAlerts:t=>r=>e.updateWith(r,t)}},e.getSelect=function(e){return{select:(t,r)=>n=>e.selectFirstAlert(n,t,r),selectByAlert:(t,r,n)=>i=>e.select(i,r,t,n),unselect:(t,r)=>n=>e.unselect(n,t,r)}}}(t=e.Capabilities||(e.Capabilities={})),function(e){e.default="default",e.super="super",e.takeaway="takeaway"}(r=e.Type||(e.Type={})),(0,o.L0)(null),e.isDefaultView=S,e.match=function(e){return t=>{if(function(e){return e.activeAlert.type===b.$.Type.super}(t))return l.F2(e.super(t));if(function(e){return e.activeAlert.type===b.$.Type.smartPhrases}(t))return l.F2(e.smartPhrases(t));if(function(e){return e.activeAlert.type===b.$.Type.takeaway}(t))return l.F2(e.takeaway(t));if(function(e){return e.activeAlert.type===b.$.Type.sentenceLevelBrandTones}(t))return l.F2(e.sentenceLevelBrandTones(t));if(S(t))return l.F2(e.default(t));const r={lensId:t.activeAlert.lensId,lensType:t.activeAlert.lensType};return l.t$(new Error(`Cannot render unknown card type with alert: [${JSON.stringify(r,null,2)}]`))}},e.eq=C.C.eq,e.hashCode=e=>C.C.hashCode(e);const I=c.getMonoid();let k;e.ord=(0,n.fold)(I)([(0,a.pipe)(c.ordNumber,c.contramap((e=>e.order))),(0,a.pipe)(c.ordString,c.contramap((e=>e.initialAlertId)))]),e.isCardOpen=function(e){return"expanded"===e.transition.type||(0,a.pipe)(e.from,s.exists((t=>"expanded"===t&&"rendered"===e.transition.type)))},e.isCardPresuccess=function(e){return"presuccess"===e.transition.type},function(e){e.eq=u.f7(((e,t)=>e.type===t.type&&e.clockwise===t.clockwise))}(k=e.Transition||(e.Transition={})),e.hasTransform=function(e){return s.isSome(e.transform)},e.hasFullSentenceTransform=function(e){return m.eT.isFullSentence(e.activeAlert.extraProperties.cardType)},e.hasOneGapTransform=function(e){return(0,a.pipe)(e.transform,s.exists(h.b$.isOneGap))},e.isSmartPhrases=function(e){return b.$.isSmartPhrases(e.activeAlert)},e.isTakeaway=function(e){return b.$.isTakeaway(e.activeAlert)},e.isSimple=function(e){return m.eT.isSimple(e.activeAlert.extraProperties.cardType)},e.isEligibleForDismissSurvey=function(e){return e.activeAlert.dismissSurvey},e.miniTitle=function(e,t){return b.$.isTakeaway(e.activeAlert)&&s.isNone(e.activeAlert.takeawayFeedback)?t.card.takeaway.defaultTitle:e.activeAlert.miniCardTitle},e.useCardStates=e=>({isChecking:e.pipe(g.U((e=>e.meta.checking===w.n.CheckingState.Checking)),f.x(),y.d({bufferSize:1,refCount:!0})),isCheckingGlobal:e.pipe(g.U((e=>e.meta.checking===w.n.CheckingState.Full)),f.x(),y.d({bufferSize:1,refCount:!0})),transform:e.pipe(g.U((({transform:e})=>e)),v.h(s.isSome),y.$f(s.getEq(h.b$.eq)))}),e.foldCard=l.fS((e=>(x("CardComponent").error("Got an unexpected card type",e),null)));const x=(0,d.HP)(p.C8.Logging.getLogger)}(I||(I={}))},55567:(e,t,r)=>{"use strict";r.d(t,{n:()=>n});var n,i=r(26653),a=r(36156);!function(e){let t;!function(e){e.Idle="idle",e.Checking="checking",e.Full="full"}(t=e.CheckingState||(e.CheckingState={}));class r{constructor(e,t,r,n,i){this.percentile=e,this.explanation=t,this.checking=r,this.ranges=n,this.showMuteQuotedAdvice=i}equals(e){return this.hashCode()===e.hashCode()}hashCode(){return(0,a.NO)({percentile:i.g.prism.reverseGet(this.percentile),explanation:this.explanation,checking:this.checking,ranges:this.ranges.map((e=>e.meta.id)).join(),showMuteQuotedAdvice:this.showMuteQuotedAdvice})}}e.Impl=r,e.empty=(e="",n=i.g.MIN,a=t.Idle,s=[])=>new r(n,e,a,s,!1),e.create=({explanation:e="",percentile:n=i.g.MIN,checking:a=t.Idle,ranges:s=[]})=>new r(n,e,a,s,!1)}(n||(n={}))},91549:(e,t,r)=>{"use strict";r.d(t,{R:()=>n});var n,i=r(57050),a=r(40327),s=r(45701),o=r(5114),l=r(22232),c=r(73975),u=r(40018),d=r(17594),p=r(26027),m=r(55567),h=r(20594),g=r(77610),f=r(48521);!function(e){let t;e.Kind="AlertsBundle",e.getId=function(e){return e.id},e.bundleTitle=function(e){return e.bundleInfo.title},e.ord=(0,a.pipe)(s.ordNumber,s.contramap((0,i.ls)((e=>e.activeAlert.bundleInfo),o.fold((()=>Number.MAX_SAFE_INTEGER),(e=>e.rank))))),e.isExtendableWithAlerts=e=>{switch(e.visualState.transition.type){case"added":case"expanded":case"focused":case"hidden":case"rendered":return!0;case"feedback_form":case"removed":case"presuccess":case"success":return!1;default:return(0,l.vE)(e.visualState.transition.type)}},e.getAlertOutcomeBundle=e=>(0,a.pipe)(e.bundleInfo,o.fold((()=>({id:"other",title:"Other"})),(e=>({id:e.title.toLowerCase().split(" ").join("_"),title:e.title})))),e.eq={equals:(e,t)=>g.C.eq.equals(e,t)&&o.getEq(c.yv).equals(e.lensId,t.lensId)},function(t){const i=t=>(r,n)=>Object.assign({id:r,kind:e.Kind,bundleInfo:t,activeAlert:g.C.getAlertByIndex(n.activeAlertIndex,n.alerts),transform:(0,a.pipe)(n.cachedTransform,o.map((e=>e.labels))),equals(t){return e.eq.equals(this,t)},hashCode(){return g.C.hashCode(this)}},n);t.create=function(e,t,s,c){const p=n(e),m=e=>h.Mq.getCreate(i(e),t,p,c,s),y=r(s);return{create:e=>(t,r,n,i,a,l,c)=>m(a)(t,r,n,i,h.Mq.getApplicableCardMeta(r[n],l,s),e,o.some(l),c),createAdded:e=>(t,r,n,i)=>{const a=f.o.VisualState.initial({type:"added",clockwise:!0},!0);return m(r)(t,n,0,0,h.Mq.getApplicableCardMeta(n[0],a,s),e,o.some(a),i)},createFocused:e=>(t,r,n,i,a)=>{const l=f.o.VisualState.initial({type:"focused",clockwise:!0},!0);return m(r)(t,n,i,0,h.Mq.getApplicableCardMeta(n[i],l,s),e,o.some(l),a)},createRendered:e=>(t,r,n,i)=>{const a=f.o.VisualState.initial({type:"rendered",clockwise:!0},!1);return m(r)(t,n,0,0,h.Mq.getApplicableCardMeta(n[0],a,s),e,o.some(a),i)},updateWith:(e,t)=>r=>{(0,l.kG)(e.every((e=>u.bZ.isRegistered(e))),"cannot add non registered alerts");const n=new Set(e.map((e=>e.id))),i=new Set(r.removedAlertsIds);n.forEach((e=>{i.delete(e)}));const s=r.alerts.filter((e=>!n.has(e.id))).concat(e.map(d.$.fromModel)).sort(t.compare);return(0,a.pipe)(r,y(s,i,g.C.getIndexByAlert(r.activeAlert.id,s)))}}}}(t=e.ItemFactory||(e.ItemFactory={}));const r=e=>(t,r,n)=>i=>{const a=g.C.getAlertByIndex(n,t),s=d.$.isApplicableAlert(a)?h.Mq.getApplicableCardMeta(a,i.visualState,e):m.n.empty(void 0);return Object.assign(Object.assign({},i),{alerts:t,activeAlert:a,meta:s,removedAlertsIds:r,activeAlertIndex:n})};e.changePosition=e=>t=>Object.assign(Object.assign({},t),{positionState:e}),e.changeVisualState=e=>t=>Object.assign(Object.assign({},t),{visualState:e}),e.getCardHydrator=e=>h.Mq.getCardHydrator((e=>e.cachedTransform),p.X.canHydrate,y,e);const n=t=>h.Mq.getChangeVisualState(e.changeVisualState,e.getCardHydrator(t));e.changeUserInput=e=>t=>Object.assign(Object.assign({},t),{userInput:e});const y=e=>t=>Object.assign(Object.assign({},t),{cachedTransform:e,transform:(0,a.pipe)(e,o.map((e=>e.labels)))});e.transitionTo=h.Mq.getTransitionTo(e.changeVisualState,e.changePosition),e.completeTransition=t=>r=>e.changeVisualState(f.o.VisualState.complete(r.visualState,t))(r),e.getRemove=t=>h.Mq.getRemove(r(t),e.transitionTo);const v=e=>t=>Object.assign(Object.assign({},t),{meta:e});e.unselect=h.Mq.getUnselect(e.changeVisualState,e.changePosition),e.getSelectByAlert=(t,n,i)=>h.Mq.getSelect(r(n),e.changeUserInput,e.changeVisualState,e.changePosition,v,i,t,n),e.getSelect=(t,r,n)=>h.Mq.getSelectFirstAlert(e.getSelectByAlert(t,r,n)),e.getRemoveAlertsCapability=(t,r,n,s)=>(l,c)=>{const u=e.getSelectByAlert(t,r,e.getCardHydrator(n)),d=h.Mq.getSelectNextAlert(h.Mq.getCardSelections(t),u);return t=>{const n=new Set(l.map((e=>e.id)));if(!g.C.hasAnyOfAlerts(n)(t))return t;const u=e.getRemove(r)(l,(0,a.pipe)(c,o.map((e=>s.compare(t,e)>0)),o.getOrElse(i.W8)))(t);return(0,a.pipe)(c,o.exists((e=>e.id===t.id)))?d(s)(u):u}},e.getUpdatableWithAlertsCapability=t=>r=>(0,i.ls)(t.updateWith(r,u.h$.ord),(t=>e.isExtendableWithAlerts(t)?t:e.transitionTo({type:"added",clockwise:!0})(t)))}(n||(n={}))},83167:(e,t,r)=>{"use strict";r.d(t,{Dv:()=>L,VC:()=>R,u0:()=>P,vM:()=>M,Py:()=>F});var n=r(35214),i=r(57050),a=r(40327),s=r(38983),o=r(5114),l=r(22232),c=r(8125),u=r(83078),d=r(95195),p=r(81531),m=r(40018),h=r(66896),g=r(16118),f=r(50628),y=r(77176),v=r(93508),b=r(85985),w=r(66310),C=r(19751),S=r(45586),I=r(24209),k=r(2834),x=r(98403),A=r(41398),E=r(79471),T=r(93494),_=r(73841);const L=(e,t,r,n=(()=>o.none))=>i=>{if(!e(i))return t(i);const{currentLens:s}=i;return s.kind===E._L.abstract?o.none:(0,a.pipe)(o.fromPredicate(E.nL.hasItems)(i),o.chain((e=>r.findNextAlert(e.currentLens))),o.alt((()=>n(i))),o.map(_.l.toLensAlert))},R=(e,t,r,n,i,s=T.v.WithSuccess.State.isInGlobalSuccess(i),l=(()=>!0))=>c=>{const{currentLens:u}=c;return u.kind===E._L.abstract?o.none:u.kind===E._L.persistent?(0,a.pipe)(E.nL.getActiveAlertHighlight(n)(c),o.fold((()=>E.nL.hasItems(c)?i.findNextAlert(c.currentLens):o.none),(t=>e.findNextAlertInTextByLens(t,u.id,T.v.WithPriority.nonPriorityAlertsVisible(c)))),o.alt((()=>l()&&(s(c)||h.R.isOutcomeId(c.currentLens.id)&&e.hasZeroFreeAlerts(r))?e.findPremiumAlert():o.none)),o.map(_.l.toLensAlert)):(0,a.pipe)((s=>(0,a.pipe)(o.fromPredicate(E.nL.hasItems)(s),o.chain((e=>i.findNextAlert(e.currentLens))),o.map(_.l.toLensAlert),o.alt((()=>(0,a.pipe)(E.nL.getActiveAlertHighlight(n)(s),o.fold((()=>t(m.bZ.isRegisteredApplicableAlert,"cursor")),(t=>e.findNextAlertInText(t,m.bZ.isApplicableAlert))),o.map((({alert:e,highlightIndex:t})=>({alert:e,highlightIndex:t,lensId:r.get()}))))))))(c),o.alt((()=>(0,a.pipe)(e.findPremiumAlert(),o.map(_.l.toLensAlert)))))};function P(e,t){return(r,n)=>t.findClosestAlertHighlight(e(n),r)}const O=e=>e.pipe(g.G(),f.P((([e,t])=>"idle"!==e&&"idle"===t)),y.U((()=>{})));class M{constructor(e,t){this._subs=new S.w.Keeper,this.firstOpeningOfDocumentWithAlerts=s.h.create(!1);const r=O(e),n=(e=>(0,a.pipe)(e,b.h((e=>E.nL.hasCards(e)&&o.isSome(E.In.getActiveItem(e.currentLens)))),y.U((()=>{}))))(t);this._subs.push((0,a.pipe)(t,f.P((e=>E.nL.hasCards(e))),w.w((()=>(0,a.pipe)(I.T(n,r),y.U(i.jv),v.O(!0)))),k.b(x.wW(this.firstOpeningOfDocumentWithAlerts))).subscribe())}dispose(){this._subs.dispose()}}var F;!function(e){const t=(0,c.HP)(p.C8.Logging.getLogger);e.focusFirstCardAfterBigCheck=(e,r,n,i,s)=>{const l=O(r),c=r.pipe(v.O("idle"),g.G(),f.P((([e,t])=>"idle"===t)),b.h((([e])=>"full"===e)),y.U((()=>{})));const u=((e,t)=>{const r=O(e);return t.bigPaste.pipe(w.w((()=>r)),y.U((()=>{})),C.d({bufferSize:1,refCount:!0}))})(r,i);return(0,a.pipe)(I.T(l,c,u),A.M(e,s,n),b.h((([e,t,r,n])=>n&&!r&&E.nL.hasCards(t)&&o.isNone(E.In.getActiveItem(t.currentLens)))),y.U((()=>E.nL.Effect.FocusBehavior.focusFirst)),k.b((e=>t("AutoFocus.sideEffects.focusFirstCardAfterBigCheck").trace("emit: ",e))))},e.getSideEffect=(e,t)=>{const r=(0,a.pipe)(e,y.U((e=>t=>r=>{switch(t.kind){case E.nL.Effect.FocusBehaviorType.noFocus:return r;case E.nL.Effect.FocusBehaviorType.unFocus:return E.nL.Prism.getLensWithItems().modify(e.unselectItem(),r);case E.nL.Effect.FocusBehaviorType.focusFirst:return(0,a.pipe)(e.findFirstAlert(r.currentLens),o.fold((()=>r),(t=>E.nL.Prism.getLensWithItems().modify(e.selectItemByAlert(t),r))));case E.nL.Effect.FocusBehaviorType.focusNext:return(0,a.pipe)(e.findNextAlert(r.currentLens),o.fold((()=>r),(t=>E.nL.Prism.getLensWithItems().modify(e.selectItemByAlert(t),r))));case E.nL.Effect.FocusBehaviorType.focusAlert:return E.nL.Prism.getLensWithItems().modify(e.selectItemByAlert(t.alertHighlight),r);default:(0,l.vE)(t)}})(t)));return{id:"autoFocusEffect",when:h.R.isWithAlertsId,what:E.nL.Effect.ItemsApplicator.create(r)}},e.whenFirstOpeningDocumentWithAlerts=e=>()=>e.firstOpeningOfDocumentWithAlerts.get(),e.whenShouldVerifyCurrentLens=(e,r)=>n=>{const i="AutoFocus.stateValidator.whenShouldVerifyCurrentLens";return!(!E.nL.hasItems(n)||!r.shouldVerify(n.currentLens))&&((0,a.pipe)(E.nL.getActiveAlert(e)(n),o.filter(m.bZ.isInDuplicatedState),o.fold((()=>t(i).debug("Current alert removed, should verify current lens...")),(e=>t(i).info("Current alert removed as it's a duplicate, should verify current lens...",e.toString())))),!0)},e.whenNoActiveCard=e=>e.currentLens.items.size>0&&o.isNone(E.In.getActiveItem(e.currentLens)),e.behaviorToEffect=e=>r=>n=>(0,a.pipe)(r(n)?e(n):o.none,u.bw((e=>t("AutoFocus.stateValidator").debug(`'behavior triggered: ${e.kind}`)))),e.getDefaultBehavior=(t,r)=>(0,a.pipe)([(0,a.pipe)(e.whenShouldVerifyCurrentLens(t,r),e.behaviorToEffect((()=>o.some(E.nL.Effect.FocusBehavior.focusNext))))],(0,n.fold)((0,n.getFunctionMonoid)(o.getFirstMonoid())())),e.getFocusFromCacheBehavior=(t,r,s,l,u,d)=>(0,a.pipe)([(0,a.pipe)(e.whenShouldVerifyCurrentLens(l,u),e.behaviorToEffect((()=>o.some(E.nL.Effect.FocusBehavior.focusNext)))),(0,a.pipe)((0,c.W9)((()=>r.get()),(0,c.W9)((0,c.W9)((0,c.W9)(e.whenFirstOpeningDocumentWithAlerts(s),(()=>t)),e.whenNoActiveCard),(0,a.pipe)(d,o.map((e=>(0,i.ff)(e.willShowBulkAccept))),o.getOrElse((()=>i.W8))))),e.behaviorToEffect((()=>o.some(E.nL.Effect.FocusBehavior.focusFirst))))],(0,n.fold)((0,n.getFunctionMonoid)(o.getFirstMonoid())())),e.getFirstApiAlignmentOverride=function(){const e=s.h.create(!0);return(t,r)=>{let n=r;return e.get()&&r===m.l$.api&&(n=m.l$.text),e.set(!1),n}},e.getStateTransformer=(e,r,n,i,s,c,u)=>({state:p,metadata:m})=>{const h=t("AutoFocus.stateTransformer");if(!E.nL.hasCards(p)||!E.nL.hasItems(p))return h.trace("state has no items, returning original state"),d.t$({state:p,metadata:m});const g=e(p);if(h.trace("effect: ",{state:p,metadata:m,effect:g}),o.isNone(g))return h.trace("no effect selected, returning original state"),d.t$({state:p,metadata:m});if(c(g.value),g.value.kind===E.nL.Effect.FocusBehaviorType.unFocus||g.value.kind===E.nL.Effect.FocusBehaviorType.noFocus)return d.t$({state:E.nL.Prism.getLensWithItems().modify(i.unselectItem(),p),metadata:m});const f=s.get()&&"text"!==p.alertSource;return h.trace("shouldAutoFocus",{autoJumpEnabled:s,alertSource:p.alertSource,shouldAutoFocus:f}),(0,a.pipe)(g,o.chain((e=>{switch(e.kind){case E.nL.Effect.FocusBehaviorType.noFocus:case E.nL.Effect.FocusBehaviorType.unFocus:return o.none;case E.nL.Effect.FocusBehaviorType.focusFirst:return(0,a.pipe)(i.findFirstAlert(p.currentLens),o.map((e=>Object.assign(Object.assign({},e),{lensId:p.currentLens.id}))));case E.nL.Effect.FocusBehaviorType.focusNext:return r(p);case E.nL.Effect.FocusBehaviorType.focusAlert:return o.some(Object.assign(Object.assign({},e.alertHighlight),{lensId:p.currentLens.id}));default:(0,l.vE)(e)}})),o.map((e=>((0,l.kG)(o.isSome(n.getRegistered(e.alert.id)),"lens alert should be in registered state",(()=>e.alert.toString())),e))),o.fold((()=>p.currentLens.kind===E._L.active?d.F2(d.F2({lensId:u.get(),alertSource:p.alertSource,options:{order:p.switchOrder,toFocus:E.nL.Effect.FocusBehavior.noFocus}})):d.t$({state:p,metadata:m})),(({alert:e,highlightIndex:t,lensId:r})=>p.currentLens.meta.filter(e)?d.t$(f?{state:E.nL.Prism.getLensWithItems().modify(i.selectItemByAlert({alert:e,highlightIndex:t}),p),metadata:{sourceId:"LSM.updateActiveState"}}:{state:p,metadata:m}):d.F2(f?d.t$({alertHighlight:{alert:e,highlightIndex:t},alertSource:p.alertSource,options:{lensId:r,order:p.switchOrder,toFocus:E.nL.Effect.FocusBehavior.focusFirst}}):d.F2({lensId:r,alertSource:p.alertSource,options:{order:p.switchOrder,toFocus:E.nL.Effect.FocusBehavior.noFocus}})))))}}(F||(F={}))},20594:(e,t,r)=>{"use strict";r.d(t,{Ls:()=>I,IG:()=>n,Mq:()=>A});var n,i=r(57050),a=r(40327),s=r(51996),o=r(5114),l=r(22232),c=r(83078),u=r(95195),d=r(89943),p=r(81531),m=r(40018),h=r(66896),g=r(26653),f=r(17594),y=r(26027),v=r(55567),b=r(48521),w=r(77610),C=r(16892),S=r(4890);function I(e,t,r,n,i){const a=A.getCardSelections(t),s=A.getCardHydrator((e=>e.cachedTransform),y.X.canHydrate,y.X.changeTransform,e),c=A.getChangeVisualState(y.X.changeVisualState,s),u=A.getSelect(y.X.updateAlerts,y.X.updateUserInput,c,y.X.changePosition,y.X.changeMeta,s,t,r),d=A.getUnselect(c,y.X.changePosition),p=A.getTransitionTo(c,y.X.changePosition),h=A.getRemove(y.X.updateAlerts,p);const g=A.getCreate(x,i,c,n,r);const w=A.getSelectFirstAlert(u);return Object.assign(Object.assign({shouldAnimateAlertApply:r.shouldAnimateAlertApply,create:g,createFromAlert:e=>t=>g(t.id,[t],0,0,v.n.empty(m.bZ.isApplicableAlert(t)?t.explanation:void 0),e,o.none),createFocused:function(e){const t=b.o.VisualState.initial({type:"focused",clockwise:!0},!0);return(n,i,a)=>g(n,[i],0,a,A.getApplicableCardMeta(i,t,r),e,o.some(t))},createRendered:function(e){const t=b.o.VisualState.initial({type:"rendered",clockwise:!0},!1);return(n,i)=>g(n,[i],0,0,A.getApplicableCardMeta(i,t,r),e,o.some(t))},createAdded:function(e){const t=b.o.VisualState.initial({type:"added",clockwise:!0},!0);return(n,i)=>g(n,[i],0,0,A.getApplicableCardMeta(i,t,r),e,o.some(t))}},a),{select:(e,t,r,n)=>u(t,r,n)(e),selectFirstAlert:(e,t,r)=>w(t,r)(e),selectNextAlert:(e,t)=>A.getSelectNextAlert(a,u)(t)(e),unselect:(e,t,r)=>d(t,r)(e),remove:(e,t,r)=>h(t,r)(e),updateWith(e,t){(0,l.kG)(1===t.length,"AlertCard can only handle update with a single alert");const n=t[0];(0,l.kG)(void 0!==e.alerts.find((e=>e.id===n.id)),"can not receive updates for unknown alert",(()=>n.toString()));const i=function(e,t){const n=A.getApplicableCardMeta(t,e.visualState,r);return new y.X(e.id,e.alerts.map((e=>e.id===t.id?f.$.fromModel(t):e)),e.activeAlertIndex,A.getAHI(e,n),e.positionState,e.visualState,n,e.lensId,e.renderOptions,e.muteCategory,e.order,e.initialAlertId,e.removedAlertsIds,e.cachedTransform,e.userInput)}(e,n);switch(n.state.type){case m.bZ.State.Type.REGISTERED:{const e="focused"===i.visualState.transition.type||"expanded"===i.visualState.transition.type?s(i):i;return"success"===i.visualState.transition.type||"presuccess"===i.visualState.transition.type?p({type:"focused",clockwise:i.visualState.transition.clockwise})(e):e}case m.bZ.State.Type.REMOVED:return"focused"!==i.visualState.transition.type&&"expanded"!==i.visualState.transition.type||!i.alerts.every((e=>m.bZ.isCapiDone(e)&&e.allowUpdate&&m.bZ.isRated(i.activeAlert)))?h(t,!0)(i):p({type:"presuccess",clockwise:i.visualState.transition.clockwise})(i);case m.bZ.State.Type.APPLIED:case m.bZ.State.Type.BEING_APPLIED:return h(t,!0)(i);default:return(0,l.vE)(n.state)}},changePosition:(e,t)=>y.X.changePosition(t)(e),changeVisualState:(e,t)=>c(t)(e),transitionTo:(e,t)=>p(t)(e),completeTransition:(e,t)=>c(b.o.VisualState.complete(e.visualState,t))(e),hideMuteQuotedAdvice:e=>new y.X(e.id,e.alerts,e.activeAlertIndex,e.activeHighlightIndex,e.positionState,e.visualState,new v.n.Impl(e.meta.percentile,e.meta.explanation,e.meta.checking,e.meta.ranges,!1),e.lensId,e.renderOptions,e.muteCategory,e.order,e.initialAlertId,e.removedAlertsIds,e.cachedTransform,e.userInput),updateUserInput:(e,t)=>y.X.updateUserInput(t)(e),updateSmartPhrasesAlert:(e,t)=>new y.X(e.id,e.alerts.map(((r,n)=>n===e.activeAlertIndex&&f.$.isSmartPhrases(r)?f.$.updateSmartPhrasesAlert(r,t):r)),e.activeAlertIndex,e.activeHighlightIndex,e.positionState,e.visualState,e.meta,e.lensId,e.renderOptions,e.muteCategory,e.order,e.initialAlertId,e.removedAlertsIds,e.cachedTransform,e.userInput)})}function k(e){return m.bZ.isOneGap(e)&&""!==e.gapValue?o.some(e.gapValue):o.none}!function(e){let t;e.toCardRenderOptions=function(e,r,n){const i=new Set;return(h.R.isMainLens(r)||e.features.has(t.showCardLabelInOutcomes)&&r!==h.R.SpecialId.Plagiarism)&&i.add(S.j.Features.showLabel),e.features.has(t.enableMuteQuotedAdvice)&&i.add(S.j.Features.enableMuteQuotedAdvice),e.features.has(t.showAnonymousUserFooters)&&i.add(S.j.Features.showAnonymousUserFooters),e.features.has(t.showPremiumTrialFooters)&&i.add(S.j.Features.showPremiumTrialFooters),e.features.has(t.showPremiumTrialFooters)&&i.add(S.j.Features.showPremiumTrialFooters),e.features.has(t.showNewPremiumCardLabels)&&i.add(S.j.Features.showNewPremiumCardLabels),e.features.has(t.showPersistentPremiumCardLabels)&&i.add(S.j.Features.showPersistentPremiumCardLabels),{features:i,layoutDensity:e.cardLayoutDensityMode,isNew:n}},function(e){e.showCardLabelInOutcomes="showCardLabelInOutcomes",e.enableMuteQuotedAdvice="enableMuteQuotedAdvice",e.showAnonymousUserFooters="showAnonymousUserFooters",e.showPremiumTrialFooters="showPremiumTrialFooters",e.showNewPremiumCardLabels="showNewPremiumCardLabels",e.showPersistentPremiumCardLabels="showPersistentPremiumCardLabels"}(t=e.Features||(e.Features={})),e.Default={features:new Set([t.showCardLabelInOutcomes]),cardLayoutDensityMode:S.j.Density.cozy,shouldAnimateAlertApply:m.bZ.isAccepted}}(n||(n={}));const x=(e,t)=>new y.X(e,t.alerts,t.activeAlertIndex,t.activeHighlightIndex,t.positionState,t.visualState,t.meta,t.lensId,t.renderOptions,t.muteCategory,t.order,t.initialAlertId,t.removedAlertsIds,t.cachedTransform,t.userInput);var A;!function(e){function t(e,t,r){let i;i=m.bZ.getCheckingState(e)===m.bZ.CheckingState.CHECKING?"focused"===t.transition.type||"expanded"===t.transition.type?v.n.CheckingState.Checking:v.n.CheckingState.Full:v.n.CheckingState.Idle;const a=r.features.has(n.Features.enableMuteQuotedAdvice)&&e.extraProperties.isInQuotes;return new v.n.Impl(g.g.fromRatio(e.progress),e.explanation,i,e.getHighlightRanges(),a)}e.getApplicableCardMeta=t,e.getRemove=(e,t)=>(r,n=!0)=>i=>{const s=new Set(r.map((e=>e.id))),o=new Set(i.removedAlertsIds);s.has(i.activeAlert.id)&&o.add(i.activeAlert.id);const{remainingAlerts:l,activeAlertIndex:c}=i.alerts.reduce(((e,t,r)=>!s.has(t.id)||b.o.isFocused(i)&&t.id===i.activeAlert.id?{remainingAlerts:e.remainingAlerts.concat([t]),activeAlertIndex:e.activeAlertIndex}:{remainingAlerts:e.remainingAlerts,activeAlertIndex:e.activeAlertIndex+(r<i.activeAlertIndex?-1:0)}),{remainingAlerts:[],activeAlertIndex:i.activeAlertIndex}),u=(0,a.pipe)(i,w.C.willBeDisposed(i,s)?e(i.alerts,s,i.activeAlertIndex,i.activeHighlightIndex):e(l,o,c,0));return w.C.willBeDisposed(u,u.removedAlertsIds)?t({type:"removed",clockwise:n})(u):u},e.getTransitionTo=(e,t)=>r=>n=>{const i=b.o.VisualState.to(n.visualState,r);return(0,a.pipe)(n,e(i),(e=>r.type===n.visualState.transition.type||"expanded"!==r.type&&"focused"!==r.type?e:t(C.s.PositionState.invalidateHeight(n.positionState))(e)))};const r=e=>t=>{const r=t.alerts;return o.fromNullable(r.slice(t.activeAlertIndex+1).find(e))};e.getPrevAlert=e=>t=>{const r=t.alerts;return o.fromNullable(r.slice(0,t.activeAlertIndex).reverse().find(e))},e.getAnyRegisteredAlert=e=>t=>{const r=t.alerts;return(0,a.pipe)(r.filter((t=>e.isRegistered(t.id))),(e=>e[e.length-1]),o.fromNullable)},e.getCardSelections=t=>{const n=(e=>t=>e.isRegistered(t.id))(t);return{nextAlert:r(n),prevAlert:e.getPrevAlert(n),anyRegisteredAlert:e.getAnyRegisteredAlert(t)}},e.getSelect=(e,r,n,s,u,d,p,h)=>({alert:g,highlightIndex:f},S,I)=>x=>{(0,l.kG)(!x.removedAlertsIds.has(g.id),"Cannot select removed alert");const A=p.getById(g.id);(0,l.kG)(o.isSome(A),"Cannot select not registered alert");const E=c.MH(A),T=x.alerts.filter((e=>!x.removedAlertsIds.has(e.id))),_=(0,a.pipe)(S,o.map((e=>I.compare(x,e)>0)),o.getOrElse(i.W8)),L=(0,a.pipe)(S,o.exists((e=>e.id===x.id))),R=L?x.positionState:C.s.PositionState.invalidateHeight(x.positionState),P=L&&y.X.isCardOpen(x.visualState)?"expanded":"focused",O=k(E),M=w.C.getIndexByAlert(g.id,T),F=(0,a.pipe)(S,o.fold((()=>b.o.VisualState.initial({type:P,clockwise:_})),(e=>b.o.VisualState.to(x.visualState,{type:P,clockwise:_})))),N=m.bZ.isApplicableAlert(E)?t(E,F,h):v.n.empty(void 0);return(0,a.pipe)(x,s(R),n(F),e(T,x.removedAlertsIds,M,f),r(O),u(N),d)},e.getSelectNextAlert=(e,t)=>r=>n=>w.C.activeAlertRemoved(n)&&!w.C.willBeDisposed(n,n.removedAlertsIds)?(0,a.pipe)(e.nextAlert(n),c.vx(e.prevAlert(n)),o.map((e=>t({alert:e,highlightIndex:0},o.none,r)(n))),o.getOrElse((()=>n))):n,e.getSelectFirstAlert=e=>(t,r)=>n=>{const i=n.alerts.filter((e=>!n.removedAlertsIds.has(e.id)));(0,l.kG)(i.length>0,"Selectable card must have at least one not removed alert");const a=i[0];return e({alert:a,highlightIndex:0},t,r)(n)},e.getUnselect=(e,t)=>(r,n)=>s=>{const l=(0,a.pipe)(r,o.map((e=>n.compare(s,e)>0)),o.getOrElse(i.W8)),c=(0,a.pipe)(r,o.exists((e=>e.id===s.id)))?s.positionState:C.s.PositionState.invalidateHeight(s.positionState);return(0,a.pipe)(s,t(c),w.C.willBeDisposed(s,s.removedAlertsIds)||b.o.isHidden(s)?i.yR:e(b.o.VisualState.to(s.visualState,{type:"rendered",clockwise:l})))},e.getCardHydrator=(e,t,r,n)=>i=>{const s=i.activeAlert.type===f.$.Type.super||i.activeAlert.type===f.$.Type.plagiarism||i.activeAlert.type===f.$.Type.premium||i.activeAlert.type===f.$.Type.takeaway||i.activeAlert.type===f.$.Type.sentenceLevelBrandTones||m.eT.isSimple(i.activeAlert.extraProperties.cardType)?o.none:function(e,t,r){const i=p.C8.Logging.getLogger("CardFactory");return(0,a.pipe)(t,o.filter((t=>!r||(0,a.pipe)(e,o.exists((e=>t.id===e.id&&t.rev===e.revision))))),o.alt((()=>(0,a.pipe)(e,o.chain((e=>(0,a.pipe)(n(e),u.g_((r=>(i.error("Could not hydrate transform",r,{alertId:e.id}),t)),(t=>o.some({id:e.id,rev:e.revision,labels:t}))))))))))}(i.activeAlert.getTransform(),e(i),t(i));return r(s)(i)},e.getChangeVisualState=(e,t)=>r=>n=>{const i=e(r)(n);return"focused"===r.transition.type||"expanded"===r.transition.type?t(i):i},e.getCreate=(e,t,r,i,s)=>(c,u,d,p,h,g,y,S=m.h$.ord)=>{const I=w.C.getAlertByIndex(d,u),x=k(I),A=[...u].sort(S.compare).map(f.$.fromModel),E=A[0];(0,l.kG)(!!E,"The card must contain at least 1 alert");const T=(0,a.pipe)(t,o.chain((e=>e.getAlertMuteCategory(u[0].id)))),_=e(c,{alerts:A,activeAlertIndex:w.C.getIndexByAlert(I.id,A),activeHighlightIndex:p,positionState:C.s.PositionState.empty,visualState:b.o.VisualState.initial({type:"rendered",clockwise:!0}),meta:new v.n.Impl(h.percentile,h.explanation,h.checking,h.ranges,s.features.has(n.Features.enableMuteQuotedAdvice)&&f.$.isInQuotes(E)),lensId:o.some(g),renderOptions:n.toCardRenderOptions(s,g,i(E)),muteCategory:T,order:E.getHighlightRanges()[0].end,initialAlertId:E.id,removedAlertsIds:new Set,cachedTransform:o.none,userInput:x});return(0,a.pipe)(y,o.fold((()=>_),(e=>r(e)(_))))},e.getAHI=function(e,t){if((0,l.kG)(t.ranges.length>0,`Incorrect card meta: rangeIds empty. Card ID ${e.id}, activeAlert: ${e.activeAlert.toString()}`),0===e.activeHighlightIndex||e.meta.ranges.length===t.ranges.length)return e.activeHighlightIndex;{const r=e.meta.ranges[e.activeHighlightIndex];return(0,l.kG)(void 0!==r,"AHI not found in rangeIds"),(0,a.pipe)(o.some(t.ranges.findIndex((e=>e.meta.id===r.meta.id))),o.filter((e=>-1!==e)),o.alt((()=>d.OI(t.ranges,r,s.SV.ordEnd))),o.getOrElse((()=>t.ranges.length-1)))}},e.snapshot=e=>({cardId:e.id,vs:{incomplete:e.visualState.incomplete,tr:e.visualState.transition},as:(0,a.pipe)(e.alerts&&e.alerts.map((e=>e.id))),aai:e.activeAlertIndex,ahi:e.activeHighlightIndex})}(A||(A={}))},20291:(e,t,r)=>{"use strict";if(r.d(t,{R7:()=>b,XU:()=>w}),75==r.j)var n=r(40327);var i=r(5114),a=r(66896),s=r(15646),o=r(48521),l=r(98403),c=r(77176);if(75==r.j)var u=r(66310);if(75==r.j)var d=r(85985);if(75==r.j)var p=r(2834);if(75==r.j)var m=r(24209);if(75==r.j)var h=r(598);if(75==r.j)var g=r(83401);var f=r(79471),y=r(99116);const v={cardsBeyondViewport:5,cardsAroundActive:100},b=(e,t,r,n,u=v,d=l.b2.rafScheduler)=>{const p=e=>!e.positionState.visible&&o.o.isAnimatable(e)&&e.visualState.incomplete?(n.next({type:s.eI.Kind.completeTransitionTo,id:e.id,transitionId:e.visualState.transitionId}),r.completeTransition(e.visualState.transitionId)(e)):e,m=e.pipe(c.U(f.nL.mapper((({currentLens:e,alertSource:t})=>i.some({currentLens:e,alertSource:t}))))),h=(0,y.nM)(r)(m,t.viewport,t.scrollTop,t.paddingTop,d).pipe(c.U((({viewport:e,scrollTop:t,paddingTop:r})=>({viewport:e,scrollTop:t,paddingTop:r,completeTransition:p}))),c.U((0,y.GC)({cardsBeyondViewport:u.cardsBeyondViewport,cardsAroundActive:u.cardsAroundActive,changePosition:r})));return{id:"manageCardsVisibility",when:a.R.isWithAlertsId,what:f.nL.Effect.Applicator.create(h)}},w=(e,t,r)=>{const s=(0,n.pipe)(e,c.U(f.nL.mapper((({currentLens:e,alertSource:t})=>i.some({currentLens:e,alertSource:t})))),(0,y.SW)(r),u.w(l.b2.rafScheduler),d.h((e=>0!==e)),p.b((e=>t.moveCardsBy(e,"freezeActiveCardOnCardsListUpdate"))));return{id:"freezeActiveCardOnCardsListUpdate",when:a.R.isWithAlertsId,what:f.nL.Effect.Applicator.create(m.T(m.T(s).pipe(h.c(g.C))))}}},71841:(e,t,r)=>{"use strict";r.d(t,{i$:()=>m,YA:()=>h});var n=r(57050),i=r(40327),a=r(5114),s=r(98403),o=r(55935),l=r(93508),c=r(19751),u=r(79471),d=r(74238),p=r(14990);const m=e=>s.Hl(e.scrollTop.pipe(o.T(1)),100,!0).pipe(l.O(!1),c.d({bufferSize:1,refCount:!0})),h=(e,t)=>{const r=new p.Db.Impl(t.scrollTop.get(),t.viewport.get(),t.paddingTop.get());return(0,i.pipe)(e.view(u.nL.getLens).get(),a.chain((({items:e,cardsHeight:t})=>(0,i.pipe)(e.getAt(0),a.map((e=>{const i=(0,n.ls)(d.L.AbsTop.ISO.wrap,r.converters.absTopToViewportTop,r.converters.viewportToWindow)(e.positionState.absTop);return{top:i,bottom:d.r.FromWindowTop.ISO.modify(d.L.concatC(t))(i)}}))))))}},35607:(e,t,r)=>{"use strict";r.d(t,{o:()=>f});var n=r(40327),i=r(38983),a=r(95195),s=r(8125),o=r(81531),l=r(32952),c=r(44586),u=r(70134),d=r(16118),p=r(77176),m=r(93508),h=r(2834),g=r(74238);class f{constructor(e){this._validateOffset=e,this._log=o.C8.Logging.getLogger("CardsListScrollManager"),this.scrollTop=i.h.create(0),this.paddingTop=i.h.create(0),this.viewport=i.h.create({top:g.r.FromWindowTop.ISO.wrap(0),height:0}),this.scrollOffset=new l.xQ,this.moveCardsBy=(e,t)=>(this._log.debug(`Cards list moved by ${e}, from: ${t}`),this.scrollOffset.next(e),a.F2(void 0)),this.moveCardsByAnimated=(e,t)=>(this._log.debug(`Cards list moved by ${e}, from: ${t}`),c.y.create((t=>(0,n.pipe)(this._validateOffset(e,this),a.g_((e=>(t.thrownError(e),s.ZT)),(()=>{const r=2*this.viewport.get().height,n=Math.abs(e)>r?(e>0?1:-1)*r:e,i=e-n,a=u.f.createAnimationObservable(0,n,200).pipe(d.G(),p.U((([e,t])=>t-e)),m.O(i),h.b((e=>this.scrollOffset.next(e)))).subscribe({error:e=>t.error(e),complete:()=>t.complete()});return()=>a.unsubscribe()}))))))}}},74238:(e,t,r)=>{"use strict";r.d(t,{r:()=>n,L:()=>i});var n,i,a=r(73975),s=r(50479),o=r(64681);!function(e){let t;!function(e){e.ISO=(0,o.k4)()}(t=e.FromWindowTop||(e.FromWindowTop={}))}(n||(n={})),function(e){let t,r,n;!function(e){e.ISO=(0,o.k4)(),e.equals=(0,o.Eh)(a.lr).equals}(t=e.FromViewportTop||(e.FromViewportTop={})),function(e){e.ISO=(0,o.k4)()}(r=e.AbsTop||(e.AbsTop={})),function(e){e.ISO=(0,o.k4)()}(n=e.CardTop||(e.CardTop={})),e.concatC=e=>t=>e+t;const i=e=>new s.aD(e);e.converters=function(t,r,n){const a=i(e.concatC(n)).get,s=i(e.concatC(-t)).get;return{windowToViewport:i(e.concatC(-r)).get,viewportToWindow:i(e.concatC(r)).get,cardTopToViewport:s,viewportToCardTop:i(e.concatC(t)).get,absTopToViewportTop:e=>s(a(e)),absTopToCardTop:a}}}(i||(i={}))},14990:(e,t,r)=>{"use strict";r.d(t,{Db:()=>i});var n,i,a,s=r(73975),o=r(74238);!function(e){e.above="above",e.below="below",e.hidden="hidden"}(n||(n={})),function(e){e.Impl=class{constructor(e,t,r){this.scrollTop=e,this.viewport=t,this.converters=o.L.converters(e,o.r.FromWindowTop.ISO.unwrap(t.top),r)}}}(i||(i={})),function(e){const t=(0,s.MW)({top:s.lr,height:s.lr});e.eqDimensionsTuple=(0,s.IP)(t,t)}(a||(a={}))},99116:(e,t,r)=>{"use strict";if(r.d(t,{Bk:()=>I,v_:()=>x,SW:()=>A,Sd:()=>E,nM:()=>T,GC:()=>_}),75==r.j)var n=r(17771);if(75==r.j)var i=r(29909);var a=r(57050),s=r(40327),o=r(83078),l=r(5114),c=r(73975),u=r(89943),d=r(95983),p=r(77176);if(75==r.j)var m=r(16118);var h=r(85985),g=r(28043),f=r(66310),y=r(98403),v=r(2844),b=r(16892),w=r(79471),C=r(93494),S=r(74238);const I=e=>t=>t.isCardsHeightValid&&(0,s.pipe)(w.In.getActiveItem(t),o.wo((t=>!e.isScheduledToDispose(t)))),k=e=>t=>t.isCardsHeightValid&&(0,s.pipe)(w.In.getActiveItem(t),o.wo((t=>!e.isScheduledToDispose(t))));function x({cardTop:e,cardHeight:t,viewportHeight:r,padding:n}){const i=S.L.FromViewportTop.ISO.unwrap(e),a=i+t;return t>r?i:i<0?t+n.before<r?i-n.before:i:a>r?t+n.after<r?a-r+n.after:a-r:i<n.before?t+n.after+n.before<r?i-n.before:t+n.after<r?i-n.after:n.before:r-a<n.after&&t+n.after<r?n.after-(r-a):0}const A=e=>t=>t.pipe(E(e),p.U(l.map((e=>e.currentLens))),m.G(),h.h((([e,t])=>(0,s.pipe)((0,a.bc)(e,t),(0,a.og)(o.vB(((e,t)=>e.id===t.id&&(0,s.pipe)((0,a.bc)(w.In.getActiveItem(e),e.cardIndex,w.In.getActiveItem(t),t.cardIndex),(0,a.og)(n.g(l.option)),l.map((([e,t,r,n])=>e.id===r.id&&t!==n)))))),l.getOrElse((()=>!1))))),p.U((0,a.ls)(i.Pd(l.chain(w.In.getActiveItem),l.chain(w.In.getActiveItem)),(0,a.og)(o.vB(((e,t)=>t.positionState.absTop-e.positionState.absTop))),l.getOrElse((()=>0))))),E=e=>t=>t.pipe(p.U(l.filter((({currentLens:t})=>k(e)(t))))),T=e=>(t,r,n,i,a)=>{const o=(e=>l.getEq(c.f7(((t,r)=>{const n=w.In.getActiveItem(t),i=w.In.getActiveItem(r);return l.getEq(e.visualStateEq).equals(n,i)&&t.items.size===r.items.size&&u.Hx(t.items.keys(),r.items.keys(),((e,t)=>e===t))}))))(e);return t.pipe(p.U(l.map((e=>e.currentLens.id))),g.x(c.w4.equals),p.U(l.isSome),f.w(y.Ft(v.aj(r,n,i,E(e)(t).pipe(p.U(l.map((e=>e.currentLens))),g.x(o.equals),f.w(a))))),h.h((([t,r,n,i])=>(0,s.pipe)(i,l.exists(k(e))))),p.U((([e,t,r])=>({viewport:e,scrollTop:t,paddingTop:r}))))},_=({cardsBeyondViewport:e,cardsAroundActive:t,changePosition:r})=>({viewport:n,scrollTop:i,paddingTop:c,completeTransition:u})=>p=>{const m=p.currentLens,h=((e,t,r,n)=>e.size<2||Math.floor(t.height/Math.min(o.MH(e.getAt(0)).positionState.height,o.MH(e.getAt(1)).positionState.height))>=e.size?{from:0,to:e.size}:{from:Math.max(0,d.aW.lowerBound(e,(e=>e.positionState.absTop+e.positionState.height<r))-n),to:Math.min(e.size,d.aW.lowerBound(e,(e=>e.positionState.absTop<r+t.height))+n)})(m.items,n,i-c,e);let g=!1;const f=m.items.map(((e,n,i)=>{const o=(0,a.ls)((c=r,d=e.positionState.watched||(e=>h.from<=e&&h.to>e||(0,s.pipe)(m.cardIndex,l.exists((r=>e>=r-t&&e<=r+t))))(i),e=>e.positionState.visible!==d?c.changePosition(b.s.PositionState.changeVisible(e.positionState,d))(e):e),(e=>t=>!t.positionState.visible&&t.positionState.animationInProgress?e.changePosition(b.s.PositionState.changeAnimationInProgress(t.positionState,!1))(t):t)(r),u)(e);var c,d;return o!==e?(g=!0,o):e}));return g?w.nL.Prism.getLens().compose(C.v.Prism.items).set(f,p):p}},34383:(e,t,r)=>{"use strict";r.d(t,{D:()=>n,T:()=>i});var n,i,a=r(17889),s=r(40327),o=r(43675),l=r(45701),c=r(73975),u=r(5114),d=r(40018),p=r(86718);!function(e){e.empty=()=>new Map,e.diff=function(e,t){return o.yi(i.eq)(e,t)}}(n||(n={})),function(e){let t,r,n;e.ordAlert=l.fromCompare(((e,t)=>d.bZ.isTakeaway(e)&&d.bZ.isTakeaway(t)?d.h$.ord.compare(e,t):d.bZ.isTakeaway(e)?-1:d.bZ.isTakeaway(t)?1:d.h$.ord.compare(e,t))),function(e){e.create=function(e){return e}}(t=e.Id||(e.Id={})),function(e){e.eq=c.MW({title:c.yv,miniTitle:u.getEq(c.yv),miniLabel:u.getEq(c.yv),alertIds:a.Eh(c.yv)})}(r=e.AlertsView||(e.AlertsView={})),function(e){e.eq=c.MW({title:c.yv,miniTitle:u.getEq(c.yv),miniLabel:u.getEq(c.yv),checked:c.vD,card:p.f.eq})}(n=e.EmptyView||(e.EmptyView={})),e.eq=c.MW({id:c.yv,rank:c.lr,suggestionsView:u.getEq(r.eq),successView:u.getEq(r.eq),emptyView:n.eq}),e.hasAlerts=function(e){return u.isSome(e.suggestionsView)||u.isSome(e.successView)},e.removeAlerts=function(e,t){return Object.assign(Object.assign({},e),{suggestionsView:(0,s.pipe)(e.suggestionsView,u.chain((e=>(0,s.pipe)(a.nI(e.alertIds.filter((e=>!t.has(e)))),u.map((t=>Object.assign(Object.assign({},e),{alertIds:t}))))))),successView:(0,s.pipe)(e.successView,u.chain((e=>(0,s.pipe)(a.nI(e.alertIds.filter((e=>!t.has(e)))),u.map((t=>Object.assign(Object.assign({},e),{alertIds:t})))))))})}}(i||(i={}))},33806:(e,t,r)=>{"use strict";r.d(t,{c:()=>i,E:()=>a});var n=r(86775);class i{constructor(e,t,r,n,i,a){this._checklistItemFactory=e,this._checklistItems=t,this._alertsReader=r,this._lensPredicate=n,this._inner=i,this._itemEq=a}create(e,t,r,i){return this._lensPredicate(t)?n.G.create(this._checklistItemFactory,this._checklistItems.get(),this._alertsReader,e,t,this._itemEq):this._inner.create(e,t,r,i)}}const a=(e,t,r,i,a,s)=>o=>i(o)?n.G.getAlertsHandler(e,t,r,s):a(o)},86775:(e,t,r)=>{"use strict";r.d(t,{G:()=>n});var n,i=r(17889),a=r(57050),s=r(40327),o=r(5114),l=r(71249),c=r(83078),u=r(95195),d=r(92843),p=r(40018),m=r(77610),h=r(16892),g=r(48521),f=r(15215),y=r(70100),v=r(79471),b=r(93494),w=r(95983),C=r(93508),S=r(16118),I=r(77176),k=r(85985),x=r(34383);!function(e){function t(e,t){return`${e}_${t}`}function r(e,t,r){return f.d.isChecklistItemEmpty(t)?y.X.changePositionState(r)(t):e.changePositionState(r)(t)}function n(e,r,n,i){const a=t(r,n.id),s={rank:n.rank,checked:n.emptyView.checked,title:n.emptyView.title,miniTitle:n.emptyView.miniTitle,miniLabel:n.emptyView.miniLabel,miniChecked:o.none};return i?e.createFocusedDefault(r,a,s,n.emptyView.card):e.createRenderedDefault(r,a,s,n.emptyView.card)}function A(e,r,n,a,u,d){return(0,s.pipe)(a.suggestionsView,o.chain((c=>(0,s.pipe)(c.alertIds.map(r),l.oA,i.nI,o.map((r=>function(e,r,n,i,a,l,c){const u=t(r,n),d={id:u,title:i.title};return(0,s.pipe)(l,o.map((e=>a.findIndex((t=>t.id===e)))),o.filter((e=>e>-1)),o.fold((()=>c?e.createFocusedBundle(r,u,i,d,a,o.none):e.createRenderedBundle(r,u,i,d,a)),(t=>e.createFocusedBundle(r,u,i,d,a,o.some(t)))))}(e,n,a.id,{rank:a.rank,checked:!1,miniChecked:o.none,title:c.title,miniTitle:c.miniTitle,miniLabel:c.miniLabel},r,u,d)))))),o.alt((()=>(0,s.pipe)(a.successView,o.chain((i=>{const p=(0,s.pipe)(u,o.filter((e=>i.alertIds.includes(e))),o.chain(r));return(0,s.pipe)(p,c.vx((0,s.pipe)(i.alertIds.map(r),l.oA,l.YM)),o.map((r=>function(e,r,n,i,a,l){const c=t(r,n);return(0,s.pipe)(l,o.filter((e=>e===a.id)),o.fold((()=>e.createRenderedSingle(r,c,i,a)),(t=>e.createFocusedSingle(r,c,i,a))))}(e,n,a.id,{rank:a.rank,checked:!0,miniChecked:o.none,title:i.title,miniTitle:i.miniTitle,miniLabel:i.miniLabel},r,d?o.some(r.id):u))))}))))))}function E(e,t,r){return e.updateMeta(Object.assign(Object.assign({},t.itemMeta),{miniChecked:o.some(r.emptyView.checked),miniTitle:(0,s.pipe)(r.emptyView.miniTitle,c.vx(o.some(r.emptyView.title))),miniLabel:r.emptyView.miniLabel}))(t)}function T(e,t,r,n,i,l,c){if(i.every((e=>!m.C.hasAlert(e.id)(r)))||m.C.willBeDisposed(r,r.removedAlertsIds))return r;const u=x.T.removeAlerts(n,new Set(i.map((e=>e.id)).concat(Array.from(r.removedAlertsIds)))),d=m.C.willBeDisposed(r,new Set(i.map((e=>e.id)))),h=d&&!x.T.hasAlerts(u),g=(0,s.pipe)(l,o.exists((e=>e.id===r.id)));if(!d||h){const t=(0,s.pipe)(h?E(e,r,n):r,e.removeAlerts(i,(0,s.pipe)(l,o.map((e=>c.itemsOrd.compare(r,e)>0)),o.getOrElse(a.W8))));return!!i.find((e=>e.id===r.activeAlert.id))?e.selectNextAlert(c.itemsOrd)(t):t}return(0,s.pipe)(A(e,(0,a.ls)(t.getRegistered,o.filter(p.bZ.isApplicableAlert)),c.id,n,(0,s.pipe)(l,o.filter((e=>e.id===r.id)),o.map((e=>e.activeAlert.id))),g),o.map((t=>g?t:e.changePositionState(r.positionState)(t))),o.getOrElse((()=>r)))}e.create=function(e,t,r,i,l,c){const u=w.aW.create(Array.from(t.values()).map((t=>(0,s.pipe)(A(e,(0,a.ls)(r.getRegistered,o.filter(p.bZ.isApplicableAlert)),i,t,o.none,!1),o.getOrElse((()=>n(e,i,t,!1)))))),(e=>e.id),f.d.ord.compare);return{id:i,type:v.Nm.lensview,kind:v._L.persistent,meta:l,withPriorityList:!1,cardIndex:o.none,items:u,itemsOrd:f.d.ord,animation:v.wj.skip,isCardsHeightValid:!1,cardsHeight:0,hashCode(){return b.v.lensHash.hashCode(this)},equals(e){return b.v.getEq(c).equals(this,e)}}};const _=(e,r,n)=>i=>a=>{if(0===i.length)return a;const o=v.In.getActiveItem(a),l=r.reduce(((r,l)=>(0,s.pipe)(r.update(t(a.id,l.id),(t=>f.d.isChecklistItemWithAlerts(t)?T(e,n,t,l,i,o,a):t)),u.fS((()=>r)))),a.items);return Object.assign(Object.assign({},a),{items:l,animation:v.wj.force})};function L(e,t,i,l,c,u,d){if(f.d.isChecklistItemWithAlerts(i)&&m.C.willBeDisposed(i,i.removedAlertsIds))return i;const p=(0,s.pipe)(c,o.exists((e=>e.id===i.id)));return(0,s.pipe)(A(e,d,t.id,l,u,p),o.alt((()=>p&&f.d.isChecklistItemWithAlerts(i)?o.none:o.some(n(e,t.id,l,p)))),o.map((t=>r(e,t,p?h.s.PositionState.invalidateHeight(i.positionState):i.positionState))),o.map((t=>{return function(e,t,r){return f.d.isChecklistItemEmpty(t)?y.X.changeVisualState(r)(t):e.changeVisualState(r)(t)}(e,t,(r=i,n=t,f.d.isChecklistItemEmpty(r)&&f.d.isChecklistItemEmpty(n)||f.d.isChecklistItemWithAlerts(r)&&f.d.isChecklistItemWithAlerts(n)&&r.viewKind===n.viewKind||!p?i.visualState:g.o.VisualState.initial({type:"focused",clockwise:!0},!0)));var r,n})),o.getOrElse((()=>f.d.isChecklistItemWithAlerts(i)?e.removeAlerts(i.alerts,(0,s.pipe)(c,o.map((e=>t.itemsOrd.compare(i,e)>0)),o.getOrElse(a.W8)))(E(e,i,l)):i)))}e.getAlertsHandler=function(e,r,n,i){return(o,c)=>d=>{const h=b.v.ApplyDiff.applyWithFilter(c,b.v.ApplyDiff.apply);return(0,s.pipe)(d,h(o,(()=>a.yR),((e,r,n,i)=>a=>o=>{if(0===a.length)return o;const{left:c,right:d}=(0,s.pipe)(a,b.v.filterAlertInLens(o,i),l.uK(p.bZ.isRegistered)),h=_(e,r,n)(c)(o),g=r.reduce(((r,n)=>(0,s.pipe)(r.update(t(o.id,n.id),(t=>f.d.isChecklistItemWithAlerts(t)?e.updateWith(d.filter((e=>m.C.hasAlert(e.id)(t))))(t):t)),u.fS((()=>r)))),h.items);return Object.assign(Object.assign({},h),{items:g,animation:v.wj.force})})(e,Array.from(r.get().values()),n,i),_(e,Array.from(r.get().values()),n)))}},e.getChecklistHandlerSideEffect=(e,r,i,l,c)=>{const m=r.pipe(C.O(x.D.empty()),S.G(),I.U((([e,t])=>({entries:t,latestChangeDiff:x.D.diff(e,t)}))),k.h((e=>!d.v.isEmpty(e.latestChangeDiff))),I.U((r=>c=>{const m=c.currentLens,h=v.In.getActiveItem(m),g=(0,s.pipe)(l(m),o.map((e=>e.activeAlert.id))),y=(0,a.ls)(i.getRegistered,o.filter(p.bZ.isApplicableAlert)),b=(0,s.pipe)(r.latestChangeDiff,d.v.reduce(m.items,((e,r,n)=>e.has(t(m.id,n))?e.remove(t(m.id,n)):e),((r,n,i)=>(0,s.pipe)(r.update(t(m.id,i.id),(t=>f.d.isChecklistItem(t)?L(e,m,t,i,h,g,y):t)),u.fS((()=>r)))),((t,r)=>(0,s.pipe)(A(e,y,m.id,r,g,!1),o.getOrElse((()=>n(e,m.id,r,!1))),(e=>t.add(e))))));return v.nL.Prism.getLens().modify((e=>Object.assign(Object.assign({},e),{items:b,cardIndex:(0,s.pipe)(h,o.chain((e=>b.get(e.id))),o.map((e=>e.index))),animation:v.wj.force})),c)})));return{id:"checklistHandlerSideEffect",when:c,what:v.nL.Effect.Applicator.create(m)}},e.getHasAlertsQuery=function(e,t,r){return b.v.WithBundles.getHasAlerts(e,t,r)},e.getItemReleaser=(e,i,l,c)=>({removeItemById:u=>d=>{const m=(0,s.pipe)(d.items.get(u),o.map((e=>e.value)),o.chain(o.fromPredicate(f.d.isChecklistItemWithAlerts)));if(o.isNone(m))return c?c.removeItemById(u)(d):d;const y=v.In.getActiveItem(d),b=(0,s.pipe)(y,o.exists((e=>e.id===u))),w=(0,a.ls)(l.getRegistered,o.filter(p.bZ.isApplicableAlert)),C=(0,s.pipe)(m,o.fold((()=>d.items),(l=>(0,s.pipe)(d.items.remove(u),(c=>(0,s.pipe)(o.fromNullable(Array.from(i.get().values()).find((e=>t(d.id,e.id)===l.id))),o.map((t=>c.add((0,a.MZ)((0,s.pipe)(A(e,w,d.id,t,o.none,b),o.map((t=>b?e.changeVisualState(g.o.VisualState.initial({type:"focused",clockwise:!0},!0))(t):t)),o.getOrElse((()=>n(e,d.id,t,!1))),(t=>r(e,t,b?h.s.PositionState.invalidateHeight(l.positionState):l.positionState))))))),o.getOrElse((()=>c)))))))),S=(0,s.pipe)(y,o.exists((e=>e.id===u&&(0,s.pipe)(C.get(u),o.fold(a.W8,(({value:e})=>f.d.isChecklistItemEmpty(e)))))));return Object.assign(Object.assign({},d),{cardIndex:S?o.none:d.cardIndex,animation:b?v.wj.force:v.wj.proceed,items:C})}}),e.getRemoveAlert=(e,r,n)=>({removeAlertFromItem:(i,a)=>l=>{const c=new Set(i.map((e=>e.id)));return(0,s.pipe)(o.fromPredicate(f.d.isChecklistItemWithAlerts)(l),o.filter(m.C.hasAnyOfAlerts(c)),o.chain((e=>o.fromNullable(Array.from(r.get().values()).find((r=>t(a.id,r.id)===e.id))))),o.map((t=>T(e,n,l,t,i,v.In.getActiveItem(a),a))),o.getOrElse((()=>l)))}})}(n||(n={}))},48521:(e,t,r)=>{"use strict";r.d(t,{o:()=>n});var n,i=r(40966);!function(e){function t(e){return"visualState"in e}e.Transition=i.u,e.VisualState=i.t,e.eq={equals:(r,n)=>!t(r)||t(n)&&e.VisualState.eq.equals(r.visualState,n.visualState)},e.isAnimatable=t,e.isFocused=e=>{switch(e.visualState.transition.type){case"expanded":case"focused":case"presuccess":case"success":case"feedback_form":return!0;default:return!1}},e.isHidden=e=>"hidden"===e.visualState.transition.type}(n||(n={}))},86718:(e,t,r)=>{"use strict";r.d(t,{t:()=>n,f:()=>i});var n,i,a=r(22690),s=r(73975),o=r(5114),l=r(45701),c=r(22232),u=r(36156);!function(e){e.eq=s.MW({rank:s.lr,checked:s.vD,title:s.yv,miniTitle:o.getEq(s.yv),miniChecked:o.getEq(s.vD),miniLabel:o.getEq(s.yv)}),e.hash=e=>(0,u.NO)({rank:e.rank,title:e.title,miniTitle:m.show(e.miniTitle),miniChecked:g.show(e.miniChecked),miniLabel:p.show(e.miniLabel),checked:e.checked}),e.ord=l.contramap((e=>e.rank))(l.ordNumber)}(n||(n={})),function(e){let t;!function(e){e.simple="simple",e.textLength="textLength"}(t=e.Kind||(e.Kind={})),e.eqSimple=s.MW({explanation:s.yv,details:o.getEq(s.yv)}),e.eqTextLength=s.MW({explanation:s.yv,details:o.getEq(s.yv),wordCount:s.lr}),e.hashSimple=e=>(0,u.NO)({kind:e.kind,explanation:e.explanation,details:h.show(e.details)}),e.hashTextLength=e=>(0,u.NO)({kind:e.kind,explanation:e.explanation,details:h.show(e.details),wordCount:e.wordCount}),e.isTextLengthCard=function(t){return t.kind===e.Kind.textLength},e.eq=s.f7(((t,r)=>{switch(t.kind){case e.Kind.simple:return r.kind===e.Kind.simple&&e.eqSimple.equals(t,r);case e.Kind.textLength:return r.kind===e.Kind.textLength&&e.eqTextLength.equals(t,r);default:(0,c.vE)(t)}})),e.hash=t=>{switch(t.kind){case e.Kind.simple:return e.hashSimple(t);case e.Kind.textLength:return e.hashTextLength(t);default:(0,c.vE)(t)}}}(i||(i={}));const d=o.getShow(a._3),p=d,m=d,h=d,g=o.getShow(a.R)},70100:(e,t,r)=>{"use strict";r.d(t,{X:()=>n});var n,i=r(40327),a=r(73975),s=r(5114),o=r(83078),l=r(69345),c=r(40966),u=r(36156),d=r(48521),p=r(86718);!function(e){function t(t,r,n,i,a,s){return{kind:e.kind,id:t,itemMeta:r,cardMeta:n,positionState:i,visualState:a,renderOptions:s,equals(t){return e.eq.equals(this,t)},hashCode(){return e.hash(this)}}}e.kind="ChecklistItemEmpty",e.eq=a.f7(((e,t)=>e.id===t.id&&p.f.eq.equals(e.cardMeta,t.cardMeta)&&p.t.eq.equals(e.itemMeta,t.itemMeta)&&l.Z.eq.equals(e.positionState,t.positionState)&&c.t.eq.equals(e.visualState,t.visualState))),e.hash=e=>(0,u.NO)({id:e.id,checklistItemMeta:p.t.hash(e.itemMeta),card:p.f.hash(e.cardMeta)}),e.create=t,e.updateMeta=e=>r=>t(r.id,e,r.cardMeta,r.positionState,r.visualState,r.renderOptions),e.updateCardMeta=e=>r=>t(r.id,r.itemMeta,e,r.positionState,r.visualState,r.renderOptions),e.changeVisualState=e=>r=>t(r.id,r.itemMeta,r.cardMeta,r.positionState,e,r.renderOptions),e.changePositionState=e=>r=>t(r.id,r.itemMeta,r.cardMeta,e,r.visualState,r.renderOptions),e.completeTransition=e=>r=>t(r.id,r.itemMeta,r.cardMeta,r.positionState,c.t.complete(r.visualState,e),r.renderOptions),e.transitionTo=e=>r=>t(r.id,r.itemMeta,r.cardMeta,r.positionState,c.t.to(r.visualState,e),r.renderOptions),e.select=e=>r=>(0,i.pipe)(e,s.filter((e=>e.id===r.id)),o.vx((0,i.pipe)(r,s.fromPredicate((e=>"focused"===e.visualState.transition.type)))),s.fold((()=>{const n=l.Z.invalidateHeight(r.positionState),a={type:"focused",clockwise:!0},o=(0,i.pipe)(e,s.fold((()=>c.t.initial(a)),(()=>c.t.to(r.visualState,a))));return t(r.id,r.itemMeta,r.cardMeta,n,o,r.renderOptions)}),(()=>r))),e.unselect=e=>r=>(0,i.pipe)(e,s.filter((e=>e.id===r.id)),o.vx((0,i.pipe)(r,s.fromPredicate((e=>"rendered"===e.visualState.transition.type)))),s.fold((()=>{const e=l.Z.invalidateHeight(r.positionState),n=d.o.isHidden(r)?r.visualState:c.t.to(r.visualState,{type:"rendered",clockwise:!0});return t(r.id,r.itemMeta,r.cardMeta,e,n,r.renderOptions)}),(()=>r)))}(n||(n={}))},11245:(e,t,r)=>{"use strict";r.d(t,{U:()=>w});var n=r(17889),i=r(40327),a=r(5114),s=r(22232),o=r(40018),l=r(17594),c=r(26027),u=r(55567),d=r(91549),p=r(20594),m=r(48521),h=r(77610),g=r(69345),f=r(40966),y=r(76974),v=r(70100),b=r(47306);function w(e,t,r,b){const w=p.Mq.getCardSelections(t),I=e=>t=>Object.assign(Object.assign({},t),{positionState:e}),k=e=>t=>Object.assign(Object.assign({},t),{visualState:e}),x=p.Mq.getTransitionTo(k,I),A=(e,t,n)=>i=>{const a=h.C.getAlertByIndex(n,e),s=l.$.isApplicableAlert(a)?p.Mq.getApplicableCardMeta(a,i.visualState,r):u.n.empty(void 0);return Object.assign(Object.assign({},i),{meta:s,alerts:e,activeAlert:a,removedAlertsIds:t,activeAlertIndex:n})},E=p.Mq.getCardHydrator((e=>e.cachedTransform),c.X.canHydrate,(e=>t=>Object.assign(Object.assign({},t),{cachedTransform:e,transform:(0,i.pipe)(e,a.map((e=>e.labels)))})),e),T=p.Mq.getSelect(A,(e=>t=>Object.assign(Object.assign({},t),{userInput:e})),k,I,(e=>t=>Object.assign(Object.assign({},t),{meta:e})),E,t,r),_=p.Mq.getSelectFirstAlert(T),L=p.Mq.getSelectNextAlert(p.Mq.getCardSelections(t),T),R=p.Mq.getUnselect(k,I),P=p.Mq.getRemove(A,x),O=p.Mq.getChangeVisualState(k,E),M=e=>p.Mq.getCreate(S(e),a.none,O,(()=>y.of(a.none)),r),F=(e,t)=>p.Mq.getCreate(C(e,t),a.none,O,(()=>y.of(a.none)),r),N=(e,t,n,s,o)=>{const l=v.X.create(e,t,n,g.Z.empty,f.t.initial({type:"rendered",clockwise:!0},!1),p.IG.toCardRenderOptions(r,s,y.of(a.none)));return(0,i.pipe)(o,a.fold((()=>l),(e=>v.X.changeVisualState(e)(l))))};return Object.assign({changePositionState:I,changeVisualState:k,completeTransition:e=>t=>k(m.o.VisualState.complete(t.visualState,e))(t),transitionTo:x,selectByAlert:T,selectFirstAlert:_,selectNextAlert:L,unselect:R,removeAlerts:P,updateWith:e=>t=>{(0,s.kG)(e.every((e=>o.bZ.isRegistered(e))),"cannot add non registered alerts");const r=new Set(e.map((e=>e.id))),n=new Set(t.removedAlertsIds);r.forEach((e=>{n.delete(e)}));const a=t.alerts.filter((e=>!r.has(e.id))).concat(e.map(l.$.fromModel)).sort(b.compare);return(0,i.pipe)(t,A(a,n,h.C.getIndexByAlert(t.activeAlert.id,a)))},updateMeta:e=>t=>Object.assign(Object.assign({},t),{itemMeta:e}),createDefault:N,createWithAlerts:(e,t,r,n,a,s,o,l)=>(0,i.pipe)(l?F(t,d.R.getAlertOutcomeBundle(r[0])):M(t),(t=>t(e,r,n,0,a,s,o,b))),createRenderedDefault:(e,t,r,n)=>N(t,r,n,e,a.some(f.t.initial({type:"rendered",clockwise:!0},!1))),createRenderedSingle:(e,t,n,i)=>{const s=m.o.VisualState.initial({type:"rendered",clockwise:!0},!1);return M(n)(t,[i],0,0,p.Mq.getApplicableCardMeta(i,s,r),e,a.some(s),b)},createRenderedBundle:(e,t,n,i,s)=>{const o=m.o.VisualState.initial({type:"rendered",clockwise:!0},!1);return F(n,i)(t,s,0,0,p.Mq.getApplicableCardMeta(s[0],o,r),e,a.some(o),b)},createFocusedDefault:(e,t,r,n)=>N(t,r,n,e,a.some(f.t.initial({type:"focused",clockwise:!0},!0))),createFocusedSingle:(e,t,n,i)=>{const s=m.o.VisualState.initial({type:"focused",clockwise:!0},!0);return M(n)(t,[i],0,0,p.Mq.getApplicableCardMeta(i,s,r),e,a.some(s),b)},createFocusedBundle:(e,t,s,o,l,c)=>(0,i.pipe)(c,a.fold((()=>(0,i.pipe)(l,n.DY(b),(e=>({alerts:e,activeAlertIdx:0})))),(e=>({alerts:l,activeAlertIdx:e}))),(n=>{const i=m.o.VisualState.initial({type:"focused",clockwise:!0},!0);return F(s,o)(t,n.alerts,n.activeAlertIdx,0,p.Mq.getApplicableCardMeta(n.alerts[n.activeAlertIdx],i,r),e,a.some(i),b)}))},w)}const C=(e,t)=>(r,n)=>Object.assign(Object.assign({},I("bundle",e,r,n)),{bundleInfo:t,viewKind:"bundle"}),S=e=>(t,r)=>Object.assign(Object.assign({},I("single",e,t,r)),{viewKind:"single"}),I=(e,t,r,n)=>{const i=new u.n.Impl(n.meta.percentile,n.meta.explanation,n.meta.checking,n.meta.ranges,n.meta.showMuteQuotedAdvice);return b.J.create(r,e,t,n.alerts,n.activeAlertIndex,n.activeHighlightIndex,n.positionState,n.visualState,i,n.lensId,n.renderOptions,n.muteCategory,n.order,n.initialAlertId,n.removedAlertsIds,n.cachedTransform,n.userInput)}},47306:(e,t,r)=>{"use strict";r.d(t,{J:()=>n});var n,i=r(40327),a=r(73975),s=r(22232),o=r(5114),l=r(26027),c=r(36156),u=r(86718);!function(e){e.kind="ChecklistItemWithAlerts",e.eq=a.f7(((e,t)=>l.X.eq.equals(e,t)&&u.t.eq.equals(e.itemMeta,t.itemMeta)&&e.viewKind===t.viewKind)),e.isBundle=function(e){return"bundle"===e.viewKind},e.isSingle=function(e){return"single"===e.viewKind},e.create=function(t,r,n,a,d,p,m,h,g,f,y,v,b,w,C,S,I){const k=a[d];return(0,s.kG)(!!k,"Active alert index should point to an alert"),{kind:e.kind,id:t,viewKind:r,itemMeta:n,alerts:a,activeAlertIndex:d,activeHighlightIndex:p,positionState:m,visualState:h,meta:g,lensId:f,renderOptions:y,muteCategory:v,order:b,initialAlertId:w,removedAlertsIds:C,cachedTransform:S,userInput:I,activeAlert:k,transform:(0,i.pipe)(S,o.map((e=>e.labels))),activeAlertRemoved:C.has(k.id),hashCode(){return(0,c.NO)({alertCard:l.X.hashCode(this),itemMeta:u.t.hash(n),viewKind:r})},equals(t){return e.eq.equals(this,t)}}}}(n||(n={}))},15215:(e,t,r)=>{"use strict";r.d(t,{d:()=>n});var n,i=r(40327),a=r(45701),s=r(73975),o=r(5114),l=r(86718),c=r(70100),u=r(47306);!function(e){function t(e){return e.kind===c.X.kind}function r(e){return e.kind===u.J.kind}e.ord=a.contramap((e=>e.itemMeta))(l.t.ord),e.eq=s.f7(((e,n)=>t(e)&&t(n)?c.X.eq.equals(e,n):!(!r(e)||!r(n))&&u.J.eq.equals(e,n))),e.isChecklistItemEmpty=t,e.isChecklistItemWithAlerts=r,e.isChecklistItem=function(e){return t(e)||r(e)},e.getAlertsCount=function(e){return(0,i.pipe)(e,o.fromPredicate(r),o.map((e=>e.alerts.length)))}}(n||(n={}))},16892:(e,t,r)=>{"use strict";r.d(t,{s:()=>n});var n,i=r(73975),a=r(69345);!function(e){e.PositionState=a.Z,e.eqById=i.f7(((e,t)=>e.id===t.id)),e.positionStateEq={equals:(t,r)=>e.PositionState.eq.equals(t.positionState,r.positionState)},e.verticalPositionEq={equals:(t,r)=>e.PositionState.verticalEq.equals(t.positionState,r.positionState)}}(n||(n={}))},69345:(e,t,r)=>{"use strict";r.d(t,{Z:()=>n});var n,i=r(57050),a=r(73975),s=r(55415);!function(e){e.eq=a.MW({absTop:a.lr,height:a.lr,animationInProgress:a.vD,visible:a.vD,isHeightValid:a.vD,watched:a.vD}),e.verticalEq=a.MW({absTop:a.lr,height:a.lr}),e.empty={absTop:0,height:0,animationInProgress:!1,visible:!1,isHeightValid:!1,watched:!1},e.create=i.yR,e.dimensionEquals=function(e,t){return e.absTop===t.absTop&&e.height===t.height},e.changeTop=function(e,t){return s.Vx(e,{absTop:t})},e.changeHeight=function(e,t){return s.Vx(e,{height:t,isHeightValid:!0})},e.changeAnimationInProgress=function(e,t){return s.Vx(e,{animationInProgress:t})},e.changeVisible=function(e,t){return s.Vx(e,{visible:t})},e.invalidateHeight=function(e){return s.Vx(e,{isHeightValid:!1})},e.changeWatched=function(e,t){return s.Vx(e,{watched:t})}}(n||(n={}))},4890:(e,t,r)=>{"use strict";r.d(t,{j:()=>n});var n,i=r(11064),a=r(5114),s=r(22232),o=r(76974);!function(e){let t,r;e.toJSON=function(e){return Object.assign(Object.assign({},e),{isNew:e.isNew._value})},function(e){e.cozy="cozy",e.compact="compact",e.minimal="minimal"}(t=e.Density||(e.Density={})),e.defaultOptions={features:new Set,layoutDensity:t.cozy,isNew:o.of(a.none)},function(e){function t(t,r,n){return i=>{switch(i){case e.cozy:return t();case e.compact:return r();case e.minimal:return n();default:return(0,s.vE)(i)}}}e.match=function(e,r,n){return t(i.of(e),i.of(r),i.of(n))},e.matchL=t,e.matchOrDefault=function(e){return(t,r)=>n=>n===e?t():r()}}(t=e.Density||(e.Density={})),function(e){e.showLabel="showLabel",e.enableMuteQuotedAdvice="enableMuteQuotedAdvice",e.showAnonymousUserFooters="showAnonymousUserFooters",e.showPremiumTrialFooters="showPremiumTrialFooters",e.showPersistentPremiumCardLabels="showPersistentPremiumCardLabels",e.showNewPremiumCardLabels="showNewPremiumCardLabels"}(r=e.Features||(e.Features={}))}(n||(n={}))},40966:(e,t,r)=>{"use strict";r.d(t,{u:()=>n,t:()=>i});var n,i,a=r(73975),s=r(5114),o=r(22232),l=r(55415);!function(e){let t;e.eq=a.MW({type:a.yv,clockwise:a.vD}),t=e.nominal||(e.nominal={})}(n||(n={})),function(e){e.initial=(e,t=!0)=>({from:s.none,transitionId:0,transition:e,incomplete:t}),e.eq=a.MW({from:s.getEq(a.w4),transitionId:a.w4,transition:n.eq,incomplete:a.w4}),e.to=(e,t)=>({from:s.some(e.transition.type),transitionId:e.transitionId+1,transition:t,incomplete:!0}),e.complete=(e,t)=>((0,o.kG)(t===e.transitionId,"unexpected transitionId"),l.Vx(e,{incomplete:!1}))}(i||(i={}))},77610:(e,t,r)=>{"use strict";r.d(t,{C:()=>n});var n,i=r(64015),a=r(22690),s=r(40327),o=r(5114),l=r(73975),c=r(8125),u=r(22232),d=r(95195),p=r(40018),m=r(17594),h=r(36156),g=r(69345),f=r(40966);!function(e){let t;!function(e){e.show=o.getShow(a._3)}(t=e.UserInput||(e.UserInput={}));const r=o.getShow(a._3);function n(e){return e.activeAlert.type===m.$.Type.super}function y(e){return e.activeAlert.type===m.$.Type.smartPhrases}function v(e){return m.$.isTakeaway(e.activeAlert)}function b(e){return e.activeAlert.type===m.$.Type.sentenceLevelBrandTones}function w(e){return e.activeAlert.type===m.$.Type.default}e.hashCode=e=>(0,h.NO)({id:e.id,activeAlertId:e.activeAlert.id,metaHashCode:e.meta.hashCode(),alertsCount:e.alerts.length,takeawayFeedback:(0,s.pipe)(e.activeAlert,o.fromPredicate(m.$.isTakeaway),o.chain((e=>e.takeawayFeedback)),r.show),removedAlertsIdsCount:e.removedAlertsIds.size,activeHighlightIndex:e.activeHighlightIndex,userInput:t.show.show(e.userInput),smartPhrasesAlertHashCode:m.$.isSmartPhrases(e.activeAlert)?p.Xi.calculateHashCode(e.activeAlert):void 0}),e.eq=l.f7(((e,t)=>e.hashCode()===t.hashCode()&&g.Z.eq.equals(e.positionState,t.positionState)&&f.t.eq.equals(e.visualState,t.visualState)&&e.meta.equals(t.meta)&&i.Eh(m.$.eq).equals(e.alerts,t.alerts)&&(0,c.As)(e.removedAlertsIds,t.removedAlertsIds))),e.hasAlert=e=>t=>void 0!==t.alerts.find((t=>t.id===e)),e.hasAnyOfAlerts=e=>t=>t.alerts.some((t=>e.has(t.id))),e.willBeDisposed=(e,t)=>e.alerts.every((e=>t.has(e.id))),e.activeAlertRemoved=e=>e.removedAlertsIds.has(e.activeAlert.id),e.getAlertByIndex=(e,t)=>{const r=t[e];return(0,u.kG)(!!r,"Active alert index should point to an alert",(()=>JSON.stringify({alerts:t,alertIndex:e}))),r},e.getIndexByAlert=(e,t)=>{const r=t.findIndex((t=>t.id===e));return(0,u.kG)(-1!==r,"Alert must exist"),r},e.getActiveAlert=t=>e.getAlertByIndex(t.activeAlertIndex,t.alerts),e.isSuperItem=n,e.isSmartPhrasesItem=y,e.isTakeawayItem=v,e.isSentenceLevelBrandTonesItem=b,e.isDefaultItem=w,e.match=function(e){return t=>{if(n(t))return d.F2(e.super(t));if(y(t))return d.F2(e.smartPhrases(t));if(v(t))return d.F2(e.takeaway(t));if(b(t))return d.F2(e.sentenceLevelBrandTones(t));if(w(t))return d.F2(e.default(t));const r={lensId:t.activeAlert.lensId,lensType:t.activeAlert.lensType};return d.t$(new Error(`Cannot render unknown card type with alert: [${JSON.stringify(r,null,2)}]`))}}}(n||(n={}))},79471:(e,t,r)=>{"use strict";r.d(t,{CX:()=>C,wj:()=>F,h8:()=>y,Zz:()=>R,nL:()=>L,_L:()=>b,FS:()=>O,Nm:()=>v,In:()=>w,Tl:()=>P,yi:()=>_});var n=r(35214),i=r(57050),a=r(40327),s=r(20817),o=r(8125),l=r(22232),c=r(55415),u=r(5114),d=r(66896),p=r(59312),m=r(98036),h=r(44586),g=r(57655),f=r(72500);var y,v,b,w,C,S=function(){function e(e){this.delayDurationSelector=e}return e.prototype.call=function(e,t){return t.subscribe(new I(e,this.delayDurationSelector))},e}(),I=function(e){function t(t,r){var n=e.call(this,t)||this;return n.delayDurationSelector=r,n.completed=!1,n.delayNotifierSubscriptions=[],n.index=0,n}return p.ZT(t,e),t.prototype.notifyNext=function(e,t,r,n,i){this.destination.next(e),this.removeSubscription(i),this.tryComplete()},t.prototype.notifyError=function(e,t){this._error(e)},t.prototype.notifyComplete=function(e){var t=this.removeSubscription(e);t&&this.destination.next(t),this.tryComplete()},t.prototype._next=function(e){var t=this.index++;try{var r=this.delayDurationSelector(e,t);r&&this.tryDelay(r,e)}catch(e){this.destination.error(e)}},t.prototype._complete=function(){this.completed=!0,this.tryComplete(),this.unsubscribe()},t.prototype.removeSubscription=function(e){e.unsubscribe();var t=this.delayNotifierSubscriptions.indexOf(e);return-1!==t&&this.delayNotifierSubscriptions.splice(t,1),e.outerValue},t.prototype.tryDelay=function(e,t){var r=(0,f.D)(this,e,t);r&&!r.closed&&(this.destination.add(r),this.delayNotifierSubscriptions.push(r))},t.prototype.tryComplete=function(){this.completed&&0===this.delayNotifierSubscriptions.length&&this.destination.complete()},t}(g.L),k=function(e){function t(t,r){var n=e.call(this)||this;return n.source=t,n.subscriptionDelay=r,n}return p.ZT(t,e),t.prototype._subscribe=function(e){this.subscriptionDelay.subscribe(new x(e,this.source))},t}(h.y),x=function(e){function t(t,r){var n=e.call(this)||this;return n.parent=t,n.source=r,n.sourceSubscribed=!1,n}return p.ZT(t,e),t.prototype._next=function(e){this.subscribeToSource()},t.prototype._error=function(e){this.unsubscribe(),this.parent.error(e)},t.prototype._complete=function(){this.unsubscribe(),this.subscribeToSource()},t.prototype.subscribeToSource=function(){this.sourceSubscribed||(this.sourceSubscribed=!0,this.unsubscribe(),this.source.subscribe(this.parent))},t}(m.L),A=r(40151),E=r(76974),T=r(36156);!function(e){e.forceText="forceText",e.forceSidebar="forceSidebar"}(y||(y={})),function(e){e.lensview="lensview",e.advanced="advanced",e.plagiarism="plagiarism",e.draftAI="draftAI",e.closed="closed"}(v||(v={})),function(e){e.active="active",e.persistent="persistent",e.abstract="abstract"}(b||(b={})),function(e){function t(e){return(0,a.pipe)(e.cardIndex,u.chain((t=>e.items.getAt(t))))}e.getActiveItem=t,e.getActiveItemOfType=function(e){return(0,i.ls)(t,u.filter(e))}}(w||(w={})),function(e){e.withFilter=e=>t=>(r,n)=>t(r,(0,o.W9)(e,n)),e.compose=function(e){return(t,r)=>(0,n.fold)((0,n.getEndomorphismMonoid)())(e.map((e=>e(t,r))))}}(C||(C={}));const _=e=>"withPriorityList"in e&&e.withPriorityList;class L{constructor(e){this._data=e}static create(e){return new L(e)}get alertSource(){return this._data.alertSource}get switchOrder(){return this._data.switchOrder}get currentLens(){return this._data.currentLens}patch(e){return new L(Object.assign(Object.assign({},this._data),e))}hashCode(){let e=7;return e=31*e+(0,T.AC)(this.alertSource),e=31*e+(0,T.AC)(this.switchOrder),e=31*e+this.currentLens.hashCode(),e}equals(e){return this.alertSource===e.alertSource&&this.switchOrder===e.switchOrder&&this.currentLens.equals(e.currentLens)}}var R;!function(e){function t(e,t,r){return n=>{switch(n.currentLens.kind){case b.active:return e(n);case b.persistent:return t(n);case b.abstract:return r(n);default:return(0,l.vE)(n.currentLens)}}}let r,n,o,p;function m(e){return e.currentLens.kind===b.persistent}function h(e){return d.R.isOutcomeId(e.currentLens.id)||d.R.isMainLens(e.currentLens.id)||e.currentLens.id===d.R.SpecialId.PredictionTakeaways||e.currentLens.id===d.R.SpecialId.PredictionEmogenie}e.withCardLensSnapshot=(e,t)=>r=>{const n=r.currentLens.items.size>50,i=(0,a.pipe)(r.currentLens.cardIndex,u.getOrElse((()=>0))),[s,o]=n?[Math.max(i-25,0),i+25]:[0,50];return{alertSource:r.alertSource,switchOrder:r.switchOrder,lens:{id:r.currentLens.id,card:(0,a.pipe)(t(r.currentLens),u.map(e)),items:r.currentLens.items.values().slice(s,o).map(e),sample:n}}},e.snapshot=(r,n)=>t(e.withCardLensSnapshot(r,n),e.withCardLensSnapshot(r,n),(e=>({alertSource:e.alertSource,switchOrder:e.switchOrder,lens:{id:e.currentLens.id,kind:e.currentLens.kind}}))),e.genericMapper=t,e.mapper=e=>t(e,e,(()=>u.none)),e.getActiveItem=t=>e.mapper((({currentLens:e})=>t(e))),e.getActiveAlertHighlight=t=>(0,i.ls)(e.getActiveItem(t),u.map((e=>({alert:e.activeAlert,highlightIndex:e.activeHighlightIndex})))),e.getActiveAlert=t=>(0,i.ls)(e.getActiveItem(t),u.map((e=>e.activeAlert))),e.getLens=e.mapper((({currentLens:e})=>u.some(e))),function(e){e.mapper=function(e,t){return r=>t[e(r)](r)}}(r=e.Items||(e.Items={})),e.is=function(e){return t=>t.currentLens.id===e},e.isLensview=function(e){return e.currentLens.type===v.lensview},e.isPersistent=m,e.hasCards=function(e){return e.currentLens.kind===b.active||m(e)},e.hasItems=function(e){return e.currentLens.kind===b.active||e.currentLens.kind===b.persistent},e.hasSuccess=h,e.isWithPriorityList=function(e){return h(e)&&_(e.currentLens)},e.isForceSidebar=t=>(e.isLensview(t)||t.currentLens.type===v.plagiarism)&&t.alertSource===y.forceSidebar,e.isSidebarOpened=t=>!e.is(d.R.SpecialId.Closed)(t),function(e){e.defaultFilter=c.ei("alertHighlight")}(n=e.FocusFirstFilter||(e.FocusFirstFilter={})),function(e){e.getLens=()=>s.Ri.create((e=>e.currentLens),((e,t)=>t.patch({currentLens:e}))),e.getLensWithItems=()=>s.Ri.create((e=>e.currentLens),((e,t)=>t.patch({currentLens:e})))}(o=e.Prism||(e.Prism={})),function(e){let t,r,n,i,a,s,o,l;!function(e){e.SwitchLens="SwitchLens",e.SwitchAlert="SwitchAlert",e.Applicator="Applicator",e.ItemsApplicator="ItemsApplicator"}(t=e.Type||(e.Type={})),function(e){let r;e.create=function(e){return{type:t.Applicator,source:e}},function(e){e.identity=e=>e,e.override=e=>()=>e,e.empty=A.E}(r=e.Source||(e.Source={}))}(r=e.Applicator||(e.Applicator={})),function(e){let r;e.create=function(e){return{type:t.ItemsApplicator,source:e}},function(e){e.identity=()=>e=>e,e.override=e=>()=>e,e.empty=A.E}(r=e.Source||(e.Source={}))}(n=e.ItemsApplicator||(e.ItemsApplicator={})),function(e){e.create=function(e){return{type:t.SwitchAlert,source:e}}}(i=e.SwitchAlert||(e.SwitchAlert={})),function(e){e.create=function(e){return{type:t.SwitchLens,source:e}}}(a=e.SwitchLens||(e.SwitchLens={})),function(e){e.delayed=e=>t=>{const r=(n=()=>E.of(void 0),(i=e)?function(e){return new k(e,i).lift(new S(n))}:function(e){return e.lift(new S(n))});var n,i;const a=Object.assign(Object.assign({},t.what),{source:r(t.what.source)});return Object.assign(Object.assign({},t),{what:a})}}(s=e.Producer||(e.Producer={})),function(e){e.noFocus="noFocus",e.unFocus="unFocus",e.focusFirst="focusFirst",e.focusNext="focusNext",e.focusAlert="focusAlert"}(o=e.FocusBehaviorType||(e.FocusBehaviorType={})),function(e){e.noFocus={kind:o.noFocus},e.unFocus={kind:o.unFocus},e.focusNext={kind:o.focusNext},e.focusFirst={kind:o.focusFirst},e.focusAlert=e=>({kind:o.focusAlert,alertHighlight:e})}(l=e.FocusBehavior||(e.FocusBehavior={}))}(p=e.Effect||(e.Effect={}))}(L||(L={})),function(e){e.defaultOptions={focusBehavior:L.Effect.FocusBehavior.focusFirst}}(R||(R={}));const P=e=>t=>t.id===e.id;var O,M,F;!function(e){e[e.allAlerts=0]="allAlerts",e[e.priorityAlertsOnly=1]="priorityAlertsOnly"}(O||(O={})),function(e){e.getDefault=()=>O.allAlerts}(M||(M={})),function(e){e.skip=i.jv,e.force=i.W8,e.proceed=e=>e.positionState.animationInProgress}(F||(F={}))},93494:(e,t,r)=>{"use strict";r.d(t,{v:()=>G});var n,i,a,s=r(17771),o=r(57050),l=r(40327),c=r(20817),u=r(83078),d=r(55415),p=r(92843),m=r(22232),h=r(89943),g=r(5114),f=r(71249),y=r(95195),v=r(73975),b=r(40018),w=r(66896),C=r(36156),S=r(5920),I=r(48521),k=r(16892),x=r(79471);!function(e){let t,r,n,i;e.filterAlertInLens=(e,t)=>f.hX((r=>b.bZ.isNotRemoved(r)||g.isSome(e.items.find((e=>t.hasAlert(r.id)(e)))))),function(e){e.setVisibleItems=e=>t=>Object.assign(Object.assign({},t),{cardIndex:(0,l.pipe)(x.In.getActiveItem(t),g.chain((t=>(0,l.pipe)(e.get(t.id),g.map((e=>e.index)))))),items:e}),e.getActiveItemIndex=e=>(0,o.ls)(x.In.getActiveItem,g.chain((t=>e.get(t.id))),g.map((e=>e.index))),e.hideItem=function(e,t){return I.o.isAnimatable(e)&&"removed"!==e.visualState.transition.type&&"hidden"!==e.visualState.transition.type?t.transitionTo({type:"hidden",clockwise:!1})(e):e},e.calculateCardsHeight=e=>(0,l.pipe)(e.getAt(e.size-1),g.map((e=>e.positionState.absTop+e.positionState.height)),g.getOrElse((()=>0)));e.getItemsPositionsUpdateTransformer=t=>({state:r,metadata:n})=>{if(!x.nL.hasCards(r))return y.t$({state:r,metadata:n});const i=x.nL.Prism.getLens();return y.t$({state:i.modify(e.updateItemsPositions(t),r),metadata:n})};const t=e=>t=>(0,l.pipe)(t.items.find((e=>t=>r=>r.positionState.watched&&!e.isHidden(r)&&(0,l.pipe)(t,u.wo((e=>e.id!==r.id))))(e)(x.In.getActiveItem(t))),g.map((({value:t,index:r})=>({index:r,value:(0,l.pipe)(t,g.fromPredicate((t=>t.positionState.isHeightValid&&!e.isScheduledToDispose(t))))}))));e.updateItemsPositions=r=>n=>{const i=x.In.getActiveItem(n),a=t(r)(n),s=(0,l.pipe)(a,g.chain(d.ei("value")),g.map((e=>e.positionState.height)));let o=0;const c=(0,l.pipe)(i,u.wo((e=>e.positionState.isHeightValid))),p=(0,l.pipe)(a,g.map(d.ei("index")),g.getOrElse((()=>{return e=n.cardIndex,(0,l.pipe)(e,g.map((e=>0===e?1:0)),g.getOrElse((()=>0)));var e}))),m=n.items.map(((e,t,i)=>{const a=u.FX(i)(n.cardIndex),d=a||i===p,m=r.isScheduledToDispose(e)||(a?e.positionState.isHeightValid:g.isSome(s)),h=r.isScheduledToDispose(e)?r.useReferenceHeightOnRemove(e)?(0,l.pipe)(s,g.getOrElse((()=>e.positionState.height))):0:a?e.positionState.height:(0,l.pipe)(s,g.getOrElse((()=>e.positionState.height))),f={absTop:a||c?o:e.positionState.absTop,height:h,animationInProgress:n.animation(e,i),visible:e.positionState.visible,isHeightValid:m,watched:d};return o+=h,k.s.PositionState.eq.equals(e.positionState,f)?e:r.changePosition(f)(e)})),h=e.calculateCardsHeight(m),f=(0,l.pipe)(i,u.wo((e=>e.positionState.isHeightValid)))&&(0,l.pipe)(m.getAt(p),u.wo((e=>e.positionState.isHeightValid)));return Object.assign(Object.assign({},n),{items:m,cardsHeight:h,isCardsHeightValid:f})}}(t=e.Items||(e.Items={})),function(e){e.apply=(e,t,r,n)=>i=>(0,l.pipe)(e,p.v.reduce(i,((e,{alert:t})=>n([t])(e)),((e,t,{alert:n})=>r([n])(e)),((e,{alert:r})=>t([r])(e)))),e.applyWithFilter=(e,t)=>(r,n,i,a)=>{const s=(0,o.ls)(f.uK(e),(e=>(0,o.ls)(a(e.left),i(e.right))));return t(r,(t=>n(t.filter(e))),s,a)}}(r=e.ApplyDiff||(e.ApplyDiff={})),function(e){e.items=c.Ri.create((e=>e.items),((e,r)=>t.setVisibleItems(e)(r))),e.getFeedItems=()=>c.Ri.create((e=>e.items),((e,r)=>t.setVisibleItems(e)(r)))}(n=e.Prism||(e.Prism={})),e.getEq=e=>v.f7(((t,r)=>{if(t.kind===x._L.abstract||r.kind===x._L.abstract)return t.id===r.id;{const n=t,i=r;return t.id===r.id&&g.getEq(e).equals(x.In.getActiveItem(n),x.In.getActiveItem(i))&&n.meta.equals(r.meta)&&n.items.equals(i.items)}})),e.lensHash={hashCode:e=>{if(e.kind===x._L.abstract)return(0,C.AC)(e.id);{const r=e;let n=7;return n=31*n+(0,C.AC)(e.id),n=31*n+(t=x.In.getActiveItem(r),(0,l.pipe)(t,g.fold((()=>2433880),(e=>null==e?9735524:e.hashCode()<<2)))),31*n+e.meta.count}var t}},function(e){e.getAlertReleaser=e=>({release:t=>r=>{const n=r.items.map(e.removeAlertFromItem([t],r)),i=(0,l.pipe)(r.cardIndex,g.chain((t=>(0,l.pipe)(n.findRightFrom(e.isScheduledToDispose,t),g.map((e=>e.index))))),g.isSome)?x.wj.skip:x.wj.force;return Object.assign(Object.assign({},r),{animation:i,items:n})}}),e.getUnselectable=(e,t)=>({unselectItem:()=>r=>{const n=(0,l.pipe)(r,e,g.map((e=>r.items.add((0,l.pipe)(e,t.unselect(g.none,r.itemsOrd))))),g.getOrElse((()=>r.items)));return Object.assign(Object.assign({},r),{items:n,animation:x.wj.force,cardIndex:g.none})}}),e.getSelectableByAlert=(e,t)=>({selectItemByAlert:r=>n=>{const i=e(n),a=n.items.find(t.isSelectableByAlert(r));(0,m.kG)(g.isSome(a),"Can not find card for provided alert. Unknown card or it is already disposed.",(()=>r.alert.toString()));const{value:s,index:o}=u.MH(a),c=(0,l.pipe)(i,g.map((e=>n.items.add((0,l.pipe)(e,t.unselect(g.some(s),n.itemsOrd))))),g.getOrElse((()=>n.items))).add((0,l.pipe)(s,t.selectByAlert(i,r,n.itemsOrd)));return Object.assign(Object.assign({},n),{items:c,animation:x.wj.force,cardIndex:g.some(o)})}}),e.getSelectableById=(e,t)=>({selectItemById:r=>n=>{const i=e(n),a=n.items.get(r),{value:s,index:o}=u.MH(a),c=(0,l.pipe)(i,g.map((e=>n.items.add((0,l.pipe)(e,t.unselect(g.some(s),n.itemsOrd))))),g.getOrElse((()=>n.items))).add((0,l.pipe)(s,t.select(i,n.itemsOrd)));return Object.assign(Object.assign({},n),{items:c,animation:x.wj.force,cardIndex:g.some(o)})}}),e.getItemReleaser=()=>({removeItemById:t=>r=>e.setVisibleItems(r.items.remove(t))(r)}),e.getMetaUpdatable=function(){return{updateMeta:e=>t=>Object.assign(Object.assign({},t),{meta:w.R.WithAlerts.setMeta(e)(t.meta)})}},e.getAnimatable=function(e,t){return{finishApplyAnimation:r=>n=>{(0,m.kG)(r.every(e.shouldAnimateAlertApply),"Tried to finish animation on non-animated state");const i=n.id,a=e=>{const n=e.items.map(t.removeAlertFromItem(r,e));return Object.assign(Object.assign({},e),{items:n})};if(w.R.isOutcomeId(i))return a(n);switch(i){case w.R.SpecialId.Priority:case w.R.SpecialId.AllAlerts:case w.R.SpecialId.PredictionTakeaways:case w.R.SpecialId.PredictionEmogenie:case w.R.SpecialId.RealTimeProofit:return a(n);case w.R.SpecialId.Premium:throw new Error("It's not possible to animate premium alerts");case w.R.SpecialId.Plagiarism:return(0,m.kG)(r.every(b.bZ.isPlagiarism),"tried to finish animation on non plagiarism alert in plagiarism lens"),a(n);default:return(0,m.vE)(i)}}}},e.getVerifiable=function(e){return{shouldVerify:t=>(0,l.pipe)(x.In.getActiveItem(t),g.exists((t=>e.isScheduledToDispose(t))))||g.isNone(t.items.find((t=>!e.isScheduledToDispose(t))))}},e.getHasAlerts=function(e,t,r){const n=e=>e.id===w.R.SpecialId.Premium||e.id===w.R.SpecialId.Plagiarism?e.meta.count:(0,l.pipe)(x.In.getActiveItem(e),g.chain(t.hasActiveAlert),g.exists(b.bZ.isCapiDone))&&1===e.items.size?0:e.meta.count;return{getVisibleAlertsCount:n,getActiveAlertsCount:n,findFirstAlert:e=>(0,l.pipe)(e.items.filter(r(e)).find((e=>g.isSome(t.hasActiveAlert(e)))),g.map((({value:e})=>({alert:e.activeAlert,highlightIndex:e.activeHighlightIndex})))),findNextAlert:t=>((0,m.kG)(g.isSome(x.In.getActiveItem(t))===g.isSome(t.cardIndex),"Lens is in wrong state"),(0,l.pipe)((0,s.g)(g.option)(x.In.getActiveItem(t),t.cardIndex),g.chain((([n,i])=>(0,l.pipe)(e.nextAlert(n),g.alt((()=>e.prevAlert(n))),g.alt((()=>(0,l.pipe)(h.dn(t.items.values(),i,r(t)),g.map((e=>e.value.activeAlert)))))))),u.vx((0,l.pipe)(S.l.find(t.items,r(t)),g.map((({value:e})=>e.activeAlert)))),g.map((e=>({alert:e,highlightIndex:0})))))}},e.setVisibleItems=e=>t=>Object.assign(Object.assign({},t),{cardIndex:(0,l.pipe)(x.In.getActiveItem(t),g.chain((t=>(0,l.pipe)(e.get(t.id),g.map((e=>e.index)))))),items:e})}(i=e.Capabilities||(e.Capabilities={}))}(n||(n={})),function(e){let t;e.create=function(e,r){return t||(t={id:w.R.SpecialId.Closed,kind:x._L.abstract,type:x.Nm.closed,meta:w.R.createStaticLens({id:w.R.SpecialId.Closed,title:"Closed"},w.R.Meta.group.empty,e),hashCode(){return n.lensHash.hashCode(this)},equals(e){return n.getEq(r).equals(this,e)}}),t}}(i||(i={})),function(e){e.create=()=>({id:w.R.SpecialId.DraftAI,type:x.Nm.draftAI,kind:x._L.abstract,meta:w.R.createStaticLens({id:w.R.SpecialId.DraftAI,title:"Draft AI"},w.R.Meta.group.empty,o.jv),transitionSource:g.none,hashCode(){return(0,C.AC)(this.id)},equals(e){return this.id===e.id}}),e.createFromTransitionSource=t=>Object.assign(Object.assign({},e.create()),{transitionSource:g.some(t)})}(a||(a={}));var A,E,T=r(95983),_=r(17594);!function(e){function t(e){return T.vM("cardId",e)}e.create=function(e,r,i,a,s,o){(0,m.kG)(e.id===w.R.SpecialId.Plagiarism,"Cannot create plagiarism lens vm on non-plagiarism lens",e.id);const c=T.aW.empty((e=>e.id),o.compare),u=t(r),d=(0,l.pipe)(i,g.map((({alertIndex:e})=>((0,m.kG)(void 0!==r[e],"Can not find alert for provided alertIndex"),r[e]))));let p=g.none;const h=Array.from(u.entries()).reduce(((e,[t,r])=>(0,l.pipe)(d,g.map((e=>r.indexOf(e))),g.filter((e=>e>-1)),g.fold((()=>e.add(a.createRendered(t,r))),(n=>{const i=a.createFocused(t,r,n);return p=g.some(t),e.add(i)})))),c),f=(0,l.pipe)(p,g.chain((e=>(0,l.pipe)(h.get(e),g.map((e=>e.index))))));return{id:w.R.SpecialId.Plagiarism,kind:x._L.persistent,type:x.Nm.plagiarism,meta:e,cardIndex:f,items:h,itemsOrd:o,animation:x.wj.skip,isCardsHeightValid:!1,cardsHeight:0,hashCode(){return n.lensHash.hashCode(this)},equals(e){return n.getEq(s).equals(this,e)}}},e.updateCardsWithLensMeta=function(e){return t=>t.id===w.R.SpecialId.Plagiarism?Object.assign(Object.assign({},t),{items:t.items.map((t=>_.$.isPlagiarism(t.activeAlert)?e.changePlagiarismMetaWithAlerts(t,t.alerts.filter(_.$.isPlagiarism)):t))}):t},e.add=e=>r=>n=>{const i=t(r),a=Array.from(i.entries()).reduce(((t,[r,n])=>(0,l.pipe)(t.update(r,(t=>e.addPlagiarismAlerts(t,n))),y.g_((()=>t.add(e.createAdded(r,n))),o.yR))),n.items),s=(0,l.pipe)(x.In.getActiveItem(n),g.map((({id:e})=>u.MH(a.get(e)).index))),c=g.getEq(v.lr).equals(s,n.cardIndex)?x.wj.force:x.wj.skip;return Object.assign(Object.assign({},n),{cardIndex:s,items:a,animation:c})},e.remove=e=>r=>n=>{const i=t(r),a=x.In.getActiveItem(n),s=Array.from(i.entries()).reduce(((t,[r,i])=>(0,l.pipe)(t.update(r,(t=>{const r=(0,l.pipe)(e.remove(t,i,(0,l.pipe)(a,g.map((e=>n.itemsOrd.compare(t,e)>0)),g.getOrElse(o.W8))),(t=>e.changePlagiarismMetaWithAlerts(t,t.alerts.filter(_.$.isPlagiarism))));return(0,l.pipe)(a,g.exists((e=>e.id===r.id)))?e.selectNextAlert(r,n.itemsOrd):r})),y.g_((()=>t),o.yR))),n.items);return Object.assign(Object.assign({},n),{items:s,animation:x.wj.force})},e.update=t=>r=>n=>e.updateWithAlerts(t)(r.filter((0,o.ff)(t.shouldAnimateAlertApply)))(n),e.updateWithAlerts=r=>n=>i=>{const[a,s]=h.uK(n,b.bZ.isRegistered),c=t(a),u=Array.from(c.entries()).reduce(((e,[t,n])=>(0,l.pipe)(e.update(t,(e=>r.changePlagiarismMetaWithAlerts(e,e.alerts.filter(_.$.isPlagiarism)))),y.g_((()=>e.add(r.createAdded(t,n))),o.yR))),e.remove(r)(s)(i).items),d=(0,l.pipe)(x.In.getActiveItem(i),g.map((({id:e})=>(0,l.pipe)(u.get(e),g.map((({index:e})=>e)),g.getOrElse((()=>0))))));return Object.assign(Object.assign({},i),{cardIndex:d,items:u,animation:x.wj.proceed})},e.getAlertsHandler=function(t){return r=>n.ApplyDiff.apply(r,e.add(t),e.update(t),e.remove(t))}}(A||(A={})),function(e){e.create=function(e,t,r,i,a){const s=T.aW.create(t.map(r.createFromAlert(w.R.SpecialId.Premium)),(e=>e.id),a.compare);return(0,m.kG)(s.size>0,"PremiumLensView should have at least one card"),{id:w.R.SpecialId.Premium,kind:x._L.active,type:x.Nm.advanced,meta:e,items:s,itemsOrd:a,cardIndex:g.none,animation:x.wj.skip,isCardsHeightValid:!1,cardsHeight:0,hashCode(){return n.lensHash.hashCode(this)},equals(e){return n.getEq(i).equals(this,e)}}},e.getAlertsHandler=function(t,r){return i=>n.ApplyDiff.apply(i,e.add(t),e.update(t,r),e.remove(r))},e.add=e=>t=>r=>{const i=t.map(e.createFromAlert(r.id)),a=r.items.add(i),s=n.Items.getActiveItemIndex(a)(r);return Object.assign(Object.assign({},r),{cardIndex:s,items:a,animation:x.wj.proceed})},e.remove=e=>t=>r=>{const i=new Set(t.map((e=>e.id))),a=r.items.filter((0,o.ls)(e.hasActiveAlert,g.exists((e=>i.has(e.id))))).reduce(((e,t)=>e.remove(t.id)),r.items),s=n.Items.getActiveItemIndex(a)(r);return Object.assign(Object.assign({},r),{cardIndex:s,items:a})},e.update=(t,r)=>n=>i=>{const[a,s]=h.uK(n,b.bZ.isRegistered);return(0,o.zG)(i,e.remove(r)(s),e.add(t)(a))}}(E||(E={}));var L,R=r(8125),P=r(91549);!function(e){const t=b.h$.ord;function r(e){return e.id}function i(e){const t=e.map((e=>[P.R.getAlertOutcomeBundle(e),e]));return T.vM((([e,t])=>r(e)),t)}function a(e,r,n,a,s){(0,m.kG)((0,l.pipe)(n,u.wo((({alertIndex:e})=>void 0!==r[e]))),"Can not find alert for provided alertIndex");const o=i(r),c=(0,l.pipe)(n,g.map((({alertIndex:e})=>((0,m.kG)(void 0!==r[e],"Can not find alert for provided alertIndex"),r[e]))));let d=g.none;const p=T.aW.empty(P.R.getId,s.compare),h=Array.from(o.entries()).reduce(((r,[n,i])=>{const s=i.map((([e,t])=>t)),o=i[0][0];return(0,l.pipe)(c,g.map((e=>s.indexOf(e))),g.filter((e=>e>-1)),g.fold((()=>r.add(a.createRendered(e)(n,o,s,t))),(i=>{const l=a.createFocused(e)(n,o,s,i,t);return d=g.some(n),r.add(l)})))}),p);return{cardIndex:(0,l.pipe)(d,g.chain((e=>(0,l.pipe)(h.get(e),g.map((e=>e.index)))))),cards:h}}e.getCardId=r,e.initCardsHash=a,e.create=function(e,t,r,i,s,o,l){const{cards:c,cardIndex:u}=a(e,r,i,s,l);return{id:e,type:x.Nm.lensview,kind:x._L.persistent,meta:t,withPriorityList:!1,cardIndex:u,items:c,itemsOrd:l,animation:x.wj.skip,isCardsHeightValid:!1,cardsHeight:0,hashCode(){return n.lensHash.hashCode(this)},equals(e){return n.getEq(o).equals(this,e)}}},e.add=(e,r)=>a=>s=>{if(0===a.length)return s;const c=i(a),u=Array.from(c.entries()).reduce(((n,[i,a])=>{const c=a.map((([e,t])=>t)),u=a[0][0];return(0,l.pipe)(n.update(i,(e=>r.updateWithAlerts(c)(e))),y.g_((()=>n.add(e.createAdded(s.id)(i,u,c,t))),o.yR))}),s.items),d=(0,l.pipe)(s,n.Items.getActiveItemIndex(u)),p=g.getEq(v.lr).equals(d,s.cardIndex)?x.wj.force:x.wj.skip;return Object.assign(Object.assign({},s),{cardIndex:d,items:u,animation:p})},e.remove=e=>t=>r=>{const a=i(t),s=Array.from(a.entries()).reduce(((t,[n,i])=>(0,l.pipe)(t.update(n,(t=>e.removeAlertFromItem(i.map((([e,t])=>t)),r)(t))),y.g_((()=>t),o.yR))),r.items),c=(0,l.pipe)(r,n.Items.getActiveItemIndex(s));return Object.assign(Object.assign({},r),{cardIndex:c,items:s,animation:x.wj.force})},e.update=(t,r,n)=>i=>a=>e.updateWithAlerts(t,n)(i.filter((0,R.ff)(r.shouldAnimateAlertApply)))(a),e.updateWithAlerts=(r,a)=>s=>c=>{if(0===s.length)return c;const{left:u,right:d}=(0,l.pipe)(s,n.filterAlertInLens(c,a),f.uK(b.bZ.isRegistered)),p=i(d),m=Array.from(p.entries()).reduce(((e,[n,i])=>{const s=i.map((([e,t])=>t)),u=i[0][0];return(0,l.pipe)(e.update(n,(e=>a.updateWithAlerts(s)(e))),y.g_((()=>e.add(r.createAdded(c.id)(n,u,s,t))),o.yR))}),e.remove(a)(u)(c).items),h=(0,l.pipe)(c,n.Items.getActiveItemIndex(m));return Object.assign(Object.assign({},c),{cardIndex:h,items:m,animation:x.wj.proceed})},e.getAlertsHandler=function(t,r,i){return(a,s)=>o=>{const c=n.ApplyDiff.applyWithFilter(s,n.ApplyDiff.apply);return(0,l.pipe)(o,c(a,e.add(t,i),e.update(t,r,i),e.remove(i)))}},e.getHasAlerts=function(e,t,r){const i=n.Capabilities.getHasAlerts(e,t,r);return Object.assign(Object.assign({},i),{findNextAlert:t=>(0,l.pipe)((0,s.g)(g.option)(x.In.getActiveItem(t),t.cardIndex),g.chain((([n,i])=>(0,l.pipe)(e.nextAlert(n),g.alt((()=>e.prevAlert(n))),g.alt((()=>(0,l.pipe)(h.XT(t.items.values(),i+1,r(t)),g.alt((()=>h.XT(t.items.values(),0,r(t)))),g.chain((e=>g.fromNullable(e.value.alerts))),g.map((e=>e[0])))))))),u.vx((0,l.pipe)(S.l.find(t.items,r(t)),g.chain((({value:e})=>g.fromNullable(e.alerts))),g.map((e=>e[0])))),g.map((e=>({alert:e,highlightIndex:0}))))})}}(L||(L={}));var O=r(35214),M=r(45701),F=r(26027),N=r(69345),D=r(4890);const $=v.f7(((e,t)=>e.id===t.id&&e.visibilityState===t.visibilityState&&N.Z.eq.equals(e.positionState,t.positionState))),U=e=>(0,C.NO)({itemId:e.id,visibilityState:e.visibilityState,positionState:(0,C.NO)(e.positionState)});var B,j,W,H,G;!function(e){e.id="PriorityToggleHintId",e.Kind="PriorityToggleHint",e.create=(e,r)=>new t(e,r,D.j.defaultOptions),e.hidden="hidden",e.visible="visible",e.isVisible=t=>t.visibilityState===e.visible,e.changePosition=(t,r)=>e.create(t.visibilityState,r),e.isPriorityToggleHint=t=>t.id===e.id,e.transitionTo=(t,r)=>t.visibilityState!==r?e.create(r,t.positionState):t;class t{constructor(t,r,n){this.visibilityState=t,this.positionState=r,this.renderOptions=n,this.kind=e.Kind,this.scheduledToDispose=!1,this.id=e.id}equals(e){return $.equals(this,e)}hashCode(){return U(this)}}}(B||(B={})),function(e){e.id="PriorityToggleId",e.Kind="PriorityToggle",e.isCollapsed=e=>"collapsed"===e.visibilityState,e.isExpanded=e=>"expanded"===e.visibilityState,e.isHidden=e=>"hidden"===e.visibilityState,e.create=(e,r)=>new t(e,r,D.j.defaultOptions),e.changePosition=(t,r)=>e.create(t.visibilityState,r),e.transitionTo=(t,r)=>t.visibilityState!==r?e.create(r,t.positionState):t,e.isPriorityToggle=t=>t.id===e.id,e.isPriorityItem=(0,R.Kg)(e.isPriorityToggle,B.isPriorityToggleHint);class t{constructor(t,r,n){this.visibilityState=t,this.positionState=r,this.renderOptions=n,this.kind=e.Kind,this.scheduledToDispose=!1,this.id=e.id}equals(e){return $.equals(this,e)}hashCode(){return U(this)}}}(j||(j={})),function(e){let t;function r(e,t){return`${e.id}_${t.id}`}function i(e,t,n,i,a,s){(0,m.kG)((0,l.pipe)(i,u.wo((({alertIndex:e})=>void 0!==n[e]))),"Can not find alert for provided alertIndex");const o=T.aW.create(n.map(((n,s)=>(0,l.pipe)(i,g.exists((({alertIndex:e})=>s===e)))?a.createFocused(e)(r(t,n),n,(0,l.pipe)(i,g.fold((()=>0),(({highlightIndex:e})=>e)))):a.createRendered(e)(r(t,n),n))),F.X.getId,s.compare);return{cardIndex:(0,l.pipe)(i,g.chain((({alertIndex:e})=>o.find((t=>t.activeAlert.id===n[e].id)))),g.map((e=>e.index))),hash:o}}e.isInSuccess=function(e,t,r=o.W8){return 0===e.meta.count&&(0===e.items.filter(r).size||g.isNone(e.items.filter(r).find((e=>!t.isScheduledToDispose(e)))))},function(t){t.isInSuccess=t=>r=>x.nL.hasSuccess(r)&&x.nL.hasItems(r)&&e.isInSuccess(r.currentLens,t),t.isInGlobalSuccess=e=>r=>(x.nL.is(w.R.SpecialId.AllAlerts)(r)||x.nL.is(w.R.SpecialId.Priority)(r))&&t.isInSuccess(e)(r)}(t=e.State||(e.State={})),e.getCardId=r,e.initCardsHash=i,e.create=function(e,t,r,a,s,o,l){const{hash:c,cardIndex:u}=i(e,t,r,a,s,l);return{id:e,type:x.Nm.lensview,kind:x._L.persistent,withPriorityList:!1,meta:t,cardIndex:u,items:c,itemsOrd:l,animation:x.wj.skip,isCardsHeightValid:!1,cardsHeight:0,hashCode(){return n.lensHash.hashCode(this)},equals(e){return n.getEq(o).equals(this,e)}}},e.add=(e,t,i)=>a=>s=>{const o=a.map((a=>{const o=t.createAdded(s.id)(r(s.meta,a),a);return e(s,a)?o:n.Items.hideItem(o,i)})),l=s.items.add(o),c=n.Items.getActiveItemIndex(l)(s),u=g.getEq(v.lr).equals(c,s.cardIndex)?x.wj.force:x.wj.skip;return Object.assign(Object.assign({},s),{cardIndex:c,items:l,animation:u})},e.remove=e=>t=>r=>{const i=new Set(t.map((e=>e.id))),a=r.items.map(e.remove((0,o.ls)(e.hasActiveAlert,g.fold(o.jv,(e=>i.has(e.id)))),(e=>(0,l.pipe)(x.In.getActiveItem(r),g.map((t=>r.itemsOrd.compare(e,t)>0)),g.getOrElse(o.W8))))),s=(0,l.pipe)(r.cardIndex,g.chain((t=>(0,l.pipe)(a.findRightFrom((t=>e.isScheduledToDispose(t)),t),g.map((e=>e.index))))),g.isSome)?x.wj.skip:x.wj.force,c=(0,l.pipe)(r,n.Items.getActiveItemIndex(a));return Object.assign(Object.assign({},r),{cardIndex:c,items:a,animation:s})},e.update=(t,r,n)=>i=>a=>e.updateWithAlerts(r,t,n)(i.filter((0,R.ff)(r.shouldAnimateAlertApply)))(a),e.updateWithAlerts=(e,t,i)=>a=>s=>{if(0===a.length)return s;const c=(0,l.pipe)(a,n.filterAlertInLens(s,i),f.UI((e=>[r(s.meta,e),e])),f.u4(s.items,((r,[a,c])=>(0,l.pipe)(r.update(a,i.updateWithAlerts([c])),y.g_((()=>{const o=e.createAdded(s.id)(a,c);return r.add(t(s,c)?o:n.Items.hideItem(o,i))}),o.yR))))),u=n.Items.getActiveItemIndex(c)(s);return Object.assign(Object.assign({},s),{cardIndex:u,items:c,animation:x.wj.proceed})},e.getAlertHandler=function(t,r,i=o.W8){return(a,s)=>{const o=n.ApplyDiff.applyWithFilter(s,n.ApplyDiff.apply);return n=>(0,l.pipe)(n,o(a,e.add(i,t,r),e.update(i,t,r),e.remove(r)))}}}(W||(W={})),function(e){function t(e,t){return(0,l.pipe)(x.In.getActiveItem(e),g.chain(t.hasActiveAlert),g.map((e=>!_.$.isPriority(e))),g.getOrElse((()=>!1)))}function r(e){return(0,l.pipe)(e.items.get(j.id),g.map((({value:e})=>j.isPriorityToggle(e)&&j.isExpanded(e))),g.getOrElse((()=>!1)))}function i(e,t,r){return 0!==e.meta.count&&0===e.meta.priorityCount&&0===e.items.filter((0,R.W9)(t,(e=>!r.isScheduledToDispose(e)))).size}let a;function s(e,t){return n=>x.nL.hasSuccess(n)&&W.isInSuccess(n.currentLens,t)||x.nL.isWithPriorityList(n)&&(W.isInSuccess(n.currentLens,t,(0,R.ff)(j.isPriorityItem))||i(n.currentLens,e,t)&&!r(n.currentLens))}e.ord=(0,O.fold)(M.getMonoid())([(0,l.pipe)(M.ordBoolean,M.contramap(B.isPriorityToggleHint)),(0,l.pipe)(M.ordBoolean,M.contramap(j.isPriorityToggle)),F.X.ord]),e.create=function(e,t,r,i,a,s,d,p){const m=(0,l.pipe)(i,g.map((({alertIndex:e})=>r[e])),g.chain(g.fromNullable),g.map((e=>"all"===e.view)),g.getOrElse((()=>!1))),{hash:h}=W.initCardsHash(e,t,r,i,a,p);let f=c(h);f=u(f,m,m,s);const y=(0,l.pipe)(i,g.chain((({alertIndex:e})=>f.find((0,o.ls)(s.hasActiveAlert,g.exists((t=>t.id===r[e].id)))))),g.map((e=>e.index)));return{id:e,type:x.Nm.lensview,kind:x._L.persistent,itemsOrd:p,meta:t,cardIndex:y,items:f,animation:x.wj.skip,withPriorityList:!0,isCardsHeightValid:!1,cardsHeight:0,hashCode(){return n.lensHash.hashCode(this)},equals(e){return n.getEq(d).equals(this,e)}}},e.getHasPriorityToggle=function(e){return{toggleNonPriorityList:n=>i=>{const a=r(i);if("collapsed"===n&&!a||"expanded"===n&&a)return i;const s=t(i,e),o=u(i.items,!a,!a&&s,e);return Object.assign(Object.assign({},i),{items:o,cardIndex:s&&a?g.none:i.cardIndex,animation:x.wj.proceed})}}},e.focusedCardIsNonPriority=t,e.isNonPriorityListOpened=r,e.onlyNonPriorityAlertsLeft=i,e.nonPriorityAlertsVisible=function(e){return!x.nL.isWithPriorityList(e)||r(e.currentLens)},function(e){e.fromLensState=e=>t=>e.currentLens.id!==t||x.nL.isWithPriorityList(e)&&!r(e.currentLens)?x.FS.priorityAlertsOnly:x.FS.allAlerts}(a=e.LensViewMode||(e.LensViewMode={})),e.isInSuccess=s,e.isInGlobalSuccess=function(e,t){return r=>(x.nL.is(w.R.SpecialId.AllAlerts)(r)||x.nL.is(w.R.SpecialId.Priority)(r))&&s(e,t)(r)},e.getSyncVisibleCardsHandler=function(e){return i=>{if(!w.R.isWithSuccessId(i.id))return i;let a=c(i.items);const s=t(i,e);a=u(a,r(i)||s,s,e);const o=n.Items.getActiveItemIndex(a)(i);return Object.assign(Object.assign({},i),{cardIndex:o,items:a,animation:x.wj.proceed})}};function c(e){return e.has(j.id)||0===e.size?e:e=(e=e.add(j.create("expanded",k.s.PositionState.empty))).add(B.create("visible",k.s.PositionState.empty))}function u(e,t,r,i){const a=(e=>({transitionTo:t=>r=>I.o.isAnimatable(r)&&r.visualState.transition.type!==t.type?e.transitionTo(t)(r):r}))(i),s=0===e.filter((e=>!i.isScheduledToDispose(e)&&(0,l.pipe)(i.hasActiveAlert(e),g.exists((0,R.ff)(_.$.isPriority))))).size;return e.map((e=>(0,l.pipe)(i.hasActiveAlert(e),g.fold((()=>j.isPriorityItem(e)?s?j.isPriorityToggle(e)?j.transitionTo(e,"hidden"):B.transitionTo(e,"hidden"):j.isPriorityToggle(e)?t||r?j.transitionTo(e,"expanded"):j.transitionTo(e,"collapsed"):t||r?B.transitionTo(e,"visible"):B.transitionTo(e,"hidden"):e),(r=>t||_.$.isPriority(r)?I.o.isAnimatable(e)&&I.o.isHidden(e)?a.transitionTo({type:"rendered",clockwise:!0})(e):e:n.Items.hideItem(e,i))))))}e.isAlertVisible=function(e,t){return"priority"===t.view||r(e)},e.ensureExpandCardIsPresent=c,e.syncVisibleCards=u,e.getHasAlerts=function(e,t,i){return Object.assign(Object.assign({},n.Capabilities.getHasAlerts(e,t,i)),{getVisibleAlertsCount:e=>(0,l.pipe)(x.In.getActiveItem(e),g.chain(t.hasActiveAlert),g.exists(b.bZ.isCapiDone))&&1===e.items.size?0:r(e)?e.meta.count:e.meta.priorityCount})}}(H||(H={})),function(e){e.Prism=n.Prism,e.Items=n.Items,e.Capabilities=n.Capabilities,e.ApplyDiff=n.ApplyDiff,e.filterAlertInLens=n.filterAlertInLens,e.lensHash=n.lensHash,e.getEq=n.getEq,e.Closed=i,e.DraftAI=a,e.Plagiarism=A,e.Premium=E,e.WithBundles=L,e.WithPriority=H,e.WithSuccess=W}(G||(G={}))},73841:(e,t,r)=>{"use strict";r.d(t,{l:()=>P});var n=r(31542),i=r(11064),a=r(57050),s=r(40327),o=r(95195),l=r(5114),c=r(22232),u=r(8125),d=r(81531),p=r(46680),m=r(66896),h=r(32952),g=r(77176),f=r(76974),y=r(95300),v=r(24209),b=r(66310),w=r(98403),C=r(69935),S=r(91224),I=r(41398),k=r(2834),x=r(28043),A=r(598),E=r(83401),T=r(17594),_=r(48521),L=r(79471),R=r(89770);class P{constructor(e,t,r,c,u,A,E){this._state=e,this._stateProvider=t,this._alertsReader=r,this._alertsService=c,this._stateSideEffects=u,this._getActiveAlert=A,this._stateTransformer=E,this.focusLens=(e,t,r={toFocus:L.Zz.defaultOptions.focusBehavior})=>{this._log.debug("focusLens "+e),this._switchLensActions.next({lensId:e,alertSource:t,options:r})},this.focusAlert=(e,t,r)=>{this._switchAlertActions.next({alertHighlight:e,alertSource:t,options:{order:r}})},this._log=d.C8.Logging.getLogger("FocusedLensManagerImpl"),this._ts=d.C8.TimeSeries.root.getMetric("lens_state.manager"),this._switchLensActions=new h.xQ,this._switchAlertActions=new h.xQ,this._addMetadata=e=>t=>t.pipe(g.U((t=>({source:t,metadata:e})))),this._focusLensEffect=({lensId:e,alertSource:t,options:{toFocus:r=L.Zz.defaultOptions.focusBehavior,order:n}})=>{if(this._log.debug("_focusLensEffect ",{alertSource:t,lensId:e}),m.R.isClosedId(e))return(0,s.pipe)(f.of(L.nL.Effect.Applicator.Source.override((0,R.T)())),this._addMetadata({sourceId:"LSM.focusLensEffect"}));if(m.R.isDraftAIId(e))return(0,s.pipe)(f.of(L.nL.Effect.Applicator.Source.override((0,R.zc)())),this._addMetadata({sourceId:"LSM.focusLensEffect"}));const i=this._state.get(),a=i.patch({switchOrder:n||i.switchOrder,alertSource:t});return(0,s.pipe)(this._stateProvider.getLensEventsByLensId(a,e,{focusBehavior:r}),this._addMetadata({sourceId:"LSM.focusLensEffect"}))},this._focusAlertEffect=({alertHighlight:e,alertSource:t,options:r})=>{this._log.isEnabled(p.i.TRACE)&&this._log.trace(`focusAlert(${e.alert})`);const n=this._state.get(),i=n.patch({switchOrder:r.order||n.switchOrder,alertSource:t});return(0,s.pipe)(this._stateProvider.getLensEventsByAlert(i,function(e,t,r){if(e===m.R.SpecialId.Priority||e===m.R.SpecialId.PredictionTakeaways||e===m.R.SpecialId.PredictionEmogenie||e===m.R.SpecialId.RealTimeProofit)return e;if(void 0!==r)return r;if(e===m.R.SpecialId.Closed||e===m.R.SpecialId.AllAlerts)return m.R.SpecialId.AllAlerts;return t}(n.currentLens.id,e.alert.lensId,r.lensId),e),this._addMetadata({sourceId:"LSM.focusAlertEffect"}))};const _=this._state.get(),P=this._stateTransformer,O=new y.X(_);this._effects=v.T(...this._stateSideEffects.map((({when:e,what:t,id:r})=>this._state.view("currentLens","id").view(e).pipe(b.w(w.Ft((0,s.pipe)(this._effectToApplicator(t),this._addMetadata({sourceId:r}))))))),v.T(this._switchAlertActions.pipe(g.U(this._focusAlertEffect)),this._switchLensActions.pipe(g.U(this._focusLensEffect))).pipe(C.B()));const M=this._ts.getTimer("batched.long_state_change");this._subs=[this._effects.pipe(S.K(((e,t)=>(this._log.error("Got error from effects: ",e),t))),I.M(O,(({source:e,metadata:t},r)=>({state:e(r),metadata:t}))),S.K(((e,t)=>(this._log.error("Got error while applying new state: ",e),t))),g.U(P),S.K(((e,t)=>(this._log.error("Got error while transforming state: ",e),t)))).subscribe((e=>(0,s.pipe)(e,o.g_((({state:e,metadata:t})=>{this._log.isEnabled(p.i.TRACE)&&this._log.trace(`lens state from: ${t.sourceId}`,e),(0,s.pipe)(this._checkState(e),o.g_((t=>this._log.error("incorrect state transition detected",{error:t,state:e})),(()=>O.next(e))))}),o.g_((e=>this._switchAlertActions.next(e)),(e=>this._switchLensActions.next(e))))))),(0,s.pipe)(O,g.U(L.nL.getActiveAlert(this._getActiveAlert)),k.b((e=>this._log.trace("active alert: ",e))),x.x(l.getEq(T.$.eq).equals),b.w(w.aI((e=>(0,s.pipe)(this._alertsService.takeReference(e,"activeCard"),o.Vn((e=>this._log.error("can not take alertRef",e))),o.g_(i.of(a.Q1),(e=>e.dispose))))))).subscribe(),(0,s.pipe)(O,g.U((e=>{const t=performance.now();n.unstable_batchedUpdates((()=>{this._state.set(e)}));const r=performance.now()-t;r>16&&M.recordTime(r)}))).subscribe()],L.nL.hasCards(_)&&(0,s.pipe)(L.nL.getActiveAlertHighlight(this._getActiveAlert)(_),l.filter((e=>this._alertsReader.isRegistered(e.alert.id))),l.fold((()=>this._switchLensActions.next({lensId:_.currentLens.id,alertSource:_.alertSource,options:{order:_.switchOrder,toFocus:L.nL.Effect.FocusBehavior.noFocus}})),(e=>this._switchAlertActions.next({alertHighlight:e,alertSource:_.alertSource,options:{lensId:_.currentLens.id,order:_.switchOrder}}))))}dispose(){this._subs.forEach((e=>e.unsubscribe())),this._subs=[]}_effectToApplicator(e){switch(e.type){case L.nL.Effect.Type.Applicator:case L.nL.Effect.Type.ItemsApplicator:return e.source;case L.nL.Effect.Type.SwitchLens:return e.source.pipe(k.b((e=>this._switchLensActions.next(e))),A.c(E.C));case L.nL.Effect.Type.SwitchAlert:return e.source.pipe(k.b((e=>this._switchAlertActions.next(e))),A.c(E.C));default:return(0,c.vE)(e)}}_checkState(e){try{if(L.nL.hasCards(e)){const t=e.currentLens.items.filter((0,u.W9)(_.o.isAnimatable,_.o.isFocused));(0,c.kG)(t.size<=1,"cannot have more than one focused card",(()=>JSON.stringify(t)))}}catch(e){return o.t$(e)}return o.F2(void 0)}}P.toLensAlert=({alert:e,highlightIndex:t})=>({alert:e,highlightIndex:t,lensId:e.lensId})},89770:(e,t,r)=>{"use strict";r.d(t,{T:()=>T,zc:()=>_,oq:()=>L});var n=r(57050),i=r(40327),a=r(73975),s=r(22232),o=r(92843),l=r(5114),c=r(8125),u=r(83078),d=r(81531),p=r(51374),m=r(40018),h=r(66896),g=r(4390),f=r(89772),y=r(76974),v=r(85985),b=r(28043),w=r(77176),C=r(24209),S=r(16118),I=r(66310),k=r(93508),x=r(17594),A=r(79471),E=r(93494);const T=()=>A.nL.create({alertSource:m.l$.api,switchOrder:"lensOrder",currentLens:E.v.Closed.create(n.jv,a.f7(n.jv))}),_=()=>A.nL.create({alertSource:m.l$.api,switchOrder:"lensOrder",currentLens:E.v.DraftAI.create()});class L{constructor(e,t,r,a,s,o,l,c,u,p=A.nL.FocusFirstFilter.defaultFilter){this._checkingState=e,this._alertsReader=t,this._lenses=r,this._positionManager=a,this._lensPreviewVM=s,this._lensViewFactory=o,this._alertsHandlerFactory=l,this._capabilities=c,this._alertsFilterService=u,this._focusFirstFilter=p,this._transformAlertsDiffToApplicator=e=>t=>r=>A.nL.hasItems(r)?r.patch({currentLens:e(t,(0,n.ff)(m.bZ.isMuted))(r.currentLens)}):r,this._log=d.C8.Logging.getLogger("FocusedLensManagerImpl"),this._updateMetaSource=e=>t=>r=>e===r.currentLens.id&&A.nL.hasItems(r)?A.nL.Prism.getLensWithItems().modify(this._capabilities.updateMeta(t),r):r,this._lensAlerts=e=>{const t=this._alertsFilterService.alertVisibleInSidebar(e.id);return(0,i.pipe)(this._checkingState.get(),g.p.reduce([],((e,{alert:r})=>t(r)?[...e,r]:e)),(e=>e.sort(m.h$.ord.compare)))}}static _mapByActiveLensId(e,t,r,n){if(h.R.isOutcomeId(e))return n();switch(e){case h.R.SpecialId.Plagiarism:return t();case h.R.SpecialId.Premium:return r();case h.R.SpecialId.AllAlerts:case h.R.SpecialId.Priority:case h.R.SpecialId.PredictionTakeaways:case h.R.SpecialId.PredictionEmogenie:case h.R.SpecialId.RealTimeProofit:return n();default:return(0,s.vE)(e)}}_conditionedApplicator(e,t){return r=>n=>e(n,r)?t(r)(n):n}static _filterALEvents(e){return t=>y.of((0,i.pipe)(t,g.p.Diff.filter((t=>e(t.alert))))).pipe(v.h((0,n.ff)(o.v.isEmpty)))}emptyState(e=h.R.SpecialId.AllAlerts){return A.nL.create({currentLens:this._createLens({lensId:e,initialLens:this._lensPreviewVM.getLens(e).get(),visibleAlerts:[],alertHighlight:l.none,alertSource:m.l$.api}),alertSource:m.l$.api,switchOrder:"lensOrder"})}getLensEventsByLensId(e,t,r={}){const n=this._getActiveLensMeta(t),a=this._lensAlerts(n),s=this._createState(e,l.none,n,t,a),o=r.focusBehavior?this._getAlertToFocus(r.focusBehavior,s):l.none;e.currentLens.id===t&&A.nL.hasItems(e)&&this._capabilities.getActiveAlertsCount(e.currentLens)!==a.length&&this._log.warn("Lens contains inconsistent number of alerts",n.id);const c=A.nL.hasItems(s)?(0,i.pipe)(o,l.fold((()=>s),(r=>this._createState(e,l.some(r),n,t,a)))):s;return this._generateEventsFromState(c,this._alertsHandlerFactory(t))}getLensEventsByAlert(e,t,r){(0,s.kG)(l.isSome(this._alertsReader.getById(r.alert.id)),"Can't focus non existing alert",r.alert.id);const n=this._getActiveLensMeta(t),i=e.currentLens.meta.id===t&&e.currentLens.meta.filter(r.alert)&&A.nL.hasItems(e)?A.nL.Prism.getLensWithItems().modify(this._capabilities.selectItemByAlert(r),e):this._createState(e,l.some(r),n,t,this._lensAlerts(n));return this._generateEventsFromState(i,this._alertsHandlerFactory(t))}findClosestAlertHighlight(e,t){return(0,i.pipe)(this._positionManager.findClosestToPosition(e,(e=>p.P.is(e)&&p.x.isVisible(e)&&!p.x.isApplied(e)&&(0,i.pipe)(this._alertsReader.getRegistered(e.meta.alertId),l.exists((r=>this._alertsFilterService.alertCanBeDisplayed(r)&&t(r)&&r.getHighlightRanges().some((t=>t.meta.id===e.meta.id))))))),l.chain((e=>(0,i.pipe)(this._alertsReader.getRegistered(e.meta.alertId),l.map((t=>{const r={alert:x.$.fromModel(t),highlightIndex:t.getHighlightRanges().findIndex((t=>t.meta.id===e.meta.id))};return r.highlightIndex<0&&(this._log.error("findClosestAlertRange returned a range which doesn't exist in alert.highlightRanges",{alert:r.alert.toString(),range:JSON.stringify(e),positionManagerRanges:JSON.stringify(this._positionManager.findRanges((e=>p.P.is(e)&&e.meta.alertId===t.id))),hasPendingRanges:t.hasNewRangesForUpdate}),r.highlightIndex=0),r}))))))}findNextAlertInText({alert:e,highlightIndex:t},r){const n=e.getHighlightRanges();return(0,s.kG)(t<n.length,"AHI is out of highlightRanges length",`hr length: ${n.length}, ahi: ${t}`),this.findClosestAlertHighlight(n[t].end,r)}findNextAlertInTextByLens(e,t,r){return this.findNextAlertInText(e,this._alertsFilterService.alertVisibleInText(t,r))}findPremiumAlert(){return this._lensPreviewVM.getLens(h.R.SpecialId.Premium).get().count>0?(0,i.pipe)(this._checkingState.get(),g.p.find((0,n.ls)(m.bZ.fromAlertModel,(0,c.W9)(m.bZ.isRegistered,m.bZ.isPremium))),l.map((e=>({alert:x.$.fromModel(e.alert),highlightIndex:0})))):l.none}hasZeroFreeAlerts(e){return 0===this._lensPreviewVM.getLens(e.get()).get().priorityCount}_getMetaChangesObservable(e){return A.nL.hasItems(e)&&e.currentLens.kind===A._L.persistent?this._lensPreviewVM.getLens(e.currentLens.id).view(this._updateMetaSource(e.currentLens.id)):A.nL.hasItems(e)&&e.currentLens.type===A.Nm.lensview?this._lenses.pipe(b.x(f.w.eq.equals),w.U((0,n.ls)(f.w.lookup(e.currentLens.id),l.map(this._updateMetaSource(e.currentLens.id)),l.getOrElse((()=>A.nL.Effect.Applicator.Source.identity))))):A.nL.Effect.Applicator.Source.empty}_generateEventsFromState(e,t){return C.T(this._checkingState.pipe(S.G(),w.U((([e,t])=>g.p.diff(e,t))),I.w(L._filterALEvents(e.currentLens.meta.filter)),w.U(this._conditionedApplicator(((e,t)=>{const r=this._alertsFilterService.getLensesFilter(e.currentLens.id),a=(0,i.pipe)(t,g.p.Diff.filter((0,n.ff)((({alert:e})=>r(e)))));return o.v.isEmpty(a)||this._log.info("tried to send event with alerts that do not fit current lens, skipping",{diff:g.p.Diff.show.show(a)}),o.v.isEmpty(a)}),this._transformAlertsDiffToApplicator(t)))),this._getMetaChangesObservable(e)).pipe(k.O(A.nL.Effect.Applicator.Source.override(e)))}_getActiveLensMeta(e){const t=L._mapByActiveLensId(e,(()=>this._lensPreviewVM.getLens(h.R.SpecialId.Plagiarism).get()),(()=>this._lensPreviewVM.getLens(h.R.SpecialId.Premium).get()),(()=>this._lensPreviewVM.getLens(e).get()));return(0,s.kG)(void 0!==t,`unknown lensId:${e}`),t}_createState({alertSource:e,switchOrder:t},r,n,a,o){(0,s.kG)(u.wo((({alert:e})=>l.isSome(this._alertsReader.getInteractable(e.id))))(r),"we can create state only with alert in registered state",(()=>(0,i.pipe)(r,l.fold((()=>"null"),(e=>e.toString())))));const c=this._createLens({lensId:a,initialLens:n,visibleAlerts:o,alertHighlight:r,alertSource:e});return A.nL.create({currentLens:c,alertSource:e,switchOrder:t})}_createLens(e){const t=(0,i.pipe)(this._focusFirstFilter(e),l.map((({alert:t,highlightIndex:r})=>({alertIndex:e.visibleAlerts.findIndex((0,A.Tl)(t)),highlightIndex:r}))));return this._lensViewFactory.create(e.lensId,e.initialLens,e.visibleAlerts,t)}_getAlertToFocus(e,t){switch(e.kind){case A.nL.Effect.FocusBehaviorType.noFocus:case A.nL.Effect.FocusBehaviorType.unFocus:return l.none;case A.nL.Effect.FocusBehaviorType.focusFirst:return A.nL.hasItems(t)?this._capabilities.findFirstAlert(t.currentLens):l.none;case A.nL.Effect.FocusBehaviorType.focusNext:return A.nL.hasItems(t)?this._capabilities.findNextAlert(t.currentLens):l.none;case A.nL.Effect.FocusBehaviorType.focusAlert:return l.some(e.alertHighlight);default:(0,s.vE)(e)}}}},39920:(e,t,r)=>{"use strict";r.d(t,{is:()=>l,kn:()=>c,ad:()=>u,gi:()=>d});var n,i=r(22232),a=r(66896),s=r(79471),o=r(93494);!function(e){e.compose=function(e){return t=>s.CX.compose(e.map((e=>e(t))))},e.map=function(e,t){return r=>t(e(r))}}(n||(n={}));const l=(e,t)=>r=>{if(a.R.isOutcomeId(r))return o.v.WithSuccess.getAlertHandler(e,t);switch(r){case a.R.SpecialId.Premium:return o.v.Premium.getAlertsHandler(e,t);case a.R.SpecialId.AllAlerts:case a.R.SpecialId.Priority:case a.R.SpecialId.PredictionTakeaways:case a.R.SpecialId.PredictionEmogenie:case a.R.SpecialId.RealTimeProofit:return o.v.WithSuccess.getAlertHandler(e,t);default:return(0,i.vE)(r)}},c=(e,t,r,n,i)=>a=>r(a)?o.v.WithBundles.getAlertsHandler(e,t,i):n(a);class u{constructor(e,t,r,n,i,a){this._cardFactory=e,this._alertsFilterService=t,this._lensPredicate=r,this._inner=n,this._itemEq=i,this._itemOrd=a}create(e,t,r,n){return this._lensPredicate(t)?o.v.WithBundles.create(e,t,r.filter(this._alertsFilterService.alertVisibleInSidebar(e)),n,this._cardFactory,this._itemEq,this._itemOrd):this._inner.create(e,t,r,n)}}class d{constructor(e,t,r,n){this._cardFactory=e,this._alertsFilterService=t,this._itemEq=r,this._itemOrd=n}create(e,t,r,n){const s=()=>o.v.WithSuccess.create(e,t,r.filter(this._alertsFilterService.alertVisibleInSidebar(e)),n,this._cardFactory,this._itemEq,this._itemOrd);if(a.R.isOutcomeId(e))return s();switch(e){case a.R.SpecialId.Premium:return o.v.Premium.create(t,r,this._cardFactory,this._itemEq,this._itemOrd);case a.R.SpecialId.AllAlerts:case a.R.SpecialId.Priority:case a.R.SpecialId.PredictionTakeaways:case a.R.SpecialId.PredictionEmogenie:case a.R.SpecialId.RealTimeProofit:return s();default:return(0,i.vE)(e)}}}},88772:(e,t,r)=>{"use strict";r.d(t,{t:()=>n});var n,i=r(95195),a=r(79471);!function(e){e.nothing=i.t$,e.liftLensState=function(e){return t=>i.t$(Object.assign(Object.assign({},t),{state:e(t.state)}))},e.liftWithItemsState=function(e){return t=>i.t$(Object.assign(Object.assign({},t),{state:a.nL.hasItems(t.state)?a.nL.Prism.getLensWithItems().modify(e,t.state):t.state}))},e.liftLensView=function(e){return t=>i.t$(Object.assign(Object.assign({},t),{state:a.nL.hasCards(t.state)?a.nL.Prism.getLens().modify(e,t.state):t.state}))}}(n||(n={}))},17372:(e,t,r)=>{"use strict";var n,i;r.d(t,{K:()=>n,z:()=>i}),function(e){e.isPriorityMode=e=>e===i.priority}(n||(n={})),function(e){e.priority="priority",e.all="all"}(i||(i={}))},74364:(e,t,r)=>{"use strict";r.d(t,{EQ:()=>L,tn:()=>T,$A:()=>_});var n,i=r(57050),a=r(40327),s=r(8125),o=r(95574),l=r(22232),c=r(83078),u=r(5114),d=r(95195),p=r(40018),m=r(66896),h=r(98403),g=r(19751),f=r(32952),y=r(28043),v=r(66310),b=r(40151),w=r(44586),C=r(78674),S=r(77176),I=r(598),k=r(83401),x=r(2834),A=r(73975),E=r(71249);!function(e){e.eq=(0,A.MW)({alert:(0,A.Uz)((e=>e.id))(A.w4),highlightIndex:A.w4}),e.getEq=()=>e.eq,e.getHighlightRange=e=>E.P5(e.highlightIndex)(e.alert.getHighlightRanges())}(n||(n={}));var T,_,L,R=r(79471);!function(e){let t;!function(e){e.AppliedAlertAnimationFinished="AppliedAlertAnimationFinished"}(t=e.Type||(e.Type={}))}(T||(T={})),function(e){e.Mock=class{constructor(){this.events=new f.xQ,this.focusAlertHighlight=()=>d.t$(new Error("Method not implemented.")),this.highlightAlertHighlight=()=>d.t$(new Error("Method not implemented.")),this.moveCursorToHighlight=s.ZT}ensureAlertHighlightInViewport(){throw new Error("Method not implemented.")}getMarkByAlert(e){throw new Error("Method not implemented.")}getAlertByMark(e){throw new Error("Method not implemented.")}},e.getHighlightIndex=function(e,t){return(0,a.pipe)(t,d.Vn((()=>new Error("Mark is collapsed"))),d.tS((t=>o.vM((()=>{const r=e.getHighlightRanges(),n=r.length>1?r.findIndex((e=>e.start===t.start&&e.end===t.end)):0;return(0,l.kG)(-1!==n,"Could not find highlight index by Range for provided Alert",(()=>JSON.stringify({alertRanges:r,targetRange:t}))),n})))))}}(_||(_={})),function(e){e.getHighlightSubscribtion=(e,t,r)=>e.pipe(y.x(u.getEq(p.h$.ord).equals),v.w((e=>(0,a.pipe)(e,u.fold((()=>b.E),(e=>w.y.create((()=>(r.debug(`highlight mark: ${e.id}`),(0,a.pipe)(t.highlightAlertHighlight(e),d.g_((t=>(r.error(`Cannot highlight mark: ${e.id}`,t),s.ZT)),(t=>()=>{r.debug(`unhighlight mark: ${e.id}`),t.dispose()})))))))))))),e.highlightMarkByHighlightedCard=(t,r,n,s,o,l)=>{const c=e.getHighlightSubscribtion(t.hovered.pipe(C.b(100),S.U((0,i.ls)(u.chain((e=>{const t=r.get();return R.nL.hasCards(t)?t.currentLens.items.find((t=>(0,a.pipe)(o.hasActiveAlert(t),u.exists((r=>t.id===e&&s.isRegistered(r.id)))))):u.none})),u.chain((({value:e})=>o.hasActiveAlert(e)))))),n,l);return{id:"highlightMarkByHighlightedAlert",when:m.R.isWithAlertsId,what:R.nL.Effect.Applicator.create(c.pipe(I.c(k.C)))}},e.focusMarkByActiveAlert=(e,t,r,i,o)=>{const l=e.view(R.nL.mapper((({currentLens:e,alertSource:t})=>(0,a.pipe)(i(e),u.map((e=>({alert:e.activeAlert,source:t,highlightIndex:e.activeHighlightIndex}))))))).pipe(v.w(h.b2.rafScheduler),g.$f(u.getEq(n.getEq())),S.U(u.filter((e=>u.isSome(r.getRegistered(e.alert.id))))),x.b(c.bw((e=>o.trace("new alert highlight: ",e)))),v.w(u.fold((()=>(o.debug("Nothing to focus"),b.E)),(e=>w.y.create((()=>(o.debug(`Focus mark: ${e.alert.id} | ${e.highlightIndex}`),e.source===p.l$.sidebar&&t.moveCursorToHighlight(e,"start"),(0,a.pipe)(t.focusAlertHighlight(e),d.g_((t=>(o.error("Cannot focus mark",t,{alertId:e.alert.id,highlightIndex:e.highlightIndex}),s.ZT)),(t=>()=>{o.debug(`Unfocus mark: ${e.alert.id} | ${e.highlightIndex}'`),t.dispose()}))))))))));return{id:"focusMarkByActiveAlert",when:m.R.isWithAlertsId,what:R.nL.Effect.Applicator.create(l.pipe(I.c(k.C)))}}}(L||(L={}))},43637:(e,t,r)=>{"use strict";r.d(t,{Bo:()=>m,eh:()=>p,TV:()=>d});var n,i=r(38983),a=r(8125),s=r(5114),o=r(32952),l=r(22232),c=r(66896);!function(e){e.Mock=class{constructor(e={}){this._previewConfig=e}get lensPreviews(){return Object.entries(this._previewConfig).reduce(((e,[t,r])=>{const n=this.getLens(t).get();return e[t]=Object.assign(Object.assign({},c.R.Info.base),{logo:s.none,id:t,title:n.title,description:n.description,status:r.status,progress:r.progress,isUnavailable:r.isUnavailable}),e}),{})}getLens(e){const t=t=>t.lensId===e;if(c.R.isOutcomeId(e))return i.h.create(new c.R.LensImpl(c.R.Info.createOutcome(e),c.R.Meta.group.empty,t));switch(e){case c.R.SpecialId.AllAlerts:return i.h.create(new c.R.LensImpl(c.R.Info.allAlerts,c.R.Meta.group.empty,t));case c.R.SpecialId.Premium:return i.h.create(new c.R.LensImpl(c.R.Info.premium,c.R.Meta.group.empty,t));case c.R.SpecialId.Plagiarism:return i.h.create(new c.R.LensImpl(c.R.Info.plagiarism,c.R.Meta.group.empty,t));case c.R.SpecialId.Priority:return i.h.create(new c.R.LensImpl(c.R.Info.priority,c.R.Meta.group.empty,t));case c.R.SpecialId.PredictionTakeaways:return i.h.create(new c.R.LensImpl(c.R.Info.predictionTakeaways,c.R.Meta.group.empty,t));case c.R.SpecialId.PredictionEmogenie:return i.h.create(new c.R.LensImpl(c.R.Info.predictionEmogenie,c.R.Meta.group.empty,t));case c.R.SpecialId.RealTimeProofit:return i.h.create(new c.R.LensImpl(c.R.Info.realTimeProofit,c.R.Meta.group.empty,t));default:return(0,l.vE)(e)}}findLens(){return s.none}}}(n||(n={}));var u,d,p,m,h=r(17372);!function(e){e[e.EngagementHook=0]="EngagementHook",e[e.DeliveryHook=1]="DeliveryHook",e[e.PlagiarismHook=2]="PlagiarismHook",e[e.ProofitHook=3]="ProofitHook",e[e.GbVoxHook=4]="GbVoxHook",e[e.GbEnableVoxHook=5]="GbEnableVoxHook"}(u||(u={})),function(e){e.NotAvailable="NotAvailable",e.EmptyDocument="EmptyDocument"}(d||(d={})),function(e){e.NotAvailable="NotAvailable",e.EmptyDocument="EmptyDocument"}(p||(p={})),function(e){let t;!function(e){e.default="default",e.priority="priority"}(t=e.LensTitleType||(e.LensTitleType={})),e.documentActionAvailable={kind:"available"},e.proofitDisabled=e=>({kind:"disabled",reason:e}),e.plagiarismDisabled=e=>({kind:"disabled",reason:e});e.Mock=class{constructor(r={}){this.documentActions=i.h.create({proofit:e.documentActionAvailable,plagiarism:e.documentActionAvailable}),this.popover=i.h.create(s.none),this.showMuteControl=i.h.create(!1),this.isDocumentActionsDisabled=i.h.create(!1),this.lensMode=i.h.create(h.z.all),this.defaultLensMode=h.z.all,this.events=new o.xQ,this.lensModeEvents=new o.xQ,this.lensTitleType=t.default,this.dispose=a.ZT;const l=new n.Mock(r);this.lensPreviews=i.h.create(l.lensPreviews)}}}(m||(m={}))},64992:(e,t,r)=>{"use strict";r.d(t,{x:()=>f,O:()=>y});var n=r(45701),i=r(18208),a=r(68983),s=r(66896),o=r(26653);function l(e){return`${e} ${i._6(e,"alert","alerts")}`}const c=(e,t)=>(r,n,i,a)=>{const s=a?r.count:r.priorityCount;return s>0?l(s):i&f.IsDocumentEmpty?e:t},u={description:"Improves spelling, grammar, and punctuation.",stateMessage:c("No alerts","Looking good")},d={description:"Helps make your writing easier to understand.",stateMessage(e,t,r){const i=(0,a.W)(n.lt(o.g.ord))(t);if(r&f.IsDocumentEmpty)return"So far so good";if(e.count>0){if(o.g.isMin(t))return l(e.count);if(i(o.g.fromNumber(20)))return"Unclear";if(i(o.g.fromNumber(70)))return"A bit unclear";if(i(o.g.fromNumber(85)))return"Mostly clear";if(i(o.g.fromNumber(95)))return"Clear"}return"Very clear"}},p={description:"Helps make your writing more interesting and effective.",stateMessage(e,t,r){const i=r&f.IsFreeUser,s=o.g.isMin(t),c=(0,a.W)(n.lt(o.g.ord))(t);if(r&f.IsDocumentEmpty||i&&s)return"Nothing yet";if(i||e.count>0){if(s)return l(e.count);if(c(o.g.fromNumber(20)))return"Bland";if(c(o.g.fromNumber(80)))return"A bit bland";if(c(o.g.fromNumber(95)))return"Engaging"}return"Very engaging"}},m={description:"Helps you make the right impression on your reader.",stateMessage(e,t,r){const i=r&f.IsFreeUser,s=o.g.isMin(t),c=(0,a.W)(n.lt(o.g.ord))(t);if(r&f.IsDocumentEmpty||i&&s)return"Nothing yet";if(i||e.count>0){if(s)return l(e.count);if(c(o.g.fromNumber(20)))return"Serious issues";if(c(o.g.fromNumber(40)))return"Very off";if(c(o.g.fromNumber(95)))return"Slightly off"}return"Just right"}},h={description:"Your organizationâ€™s writing guidelines.",stateMessage:c("Nothing yet","All good")},g={[s.R.SpecialId.Correctness]:u,[s.R.SpecialId.CorrectnessPriority]:u,[s.R.SpecialId.Clarity]:d,[s.R.SpecialId.ClarityPriority]:d,[s.R.SpecialId.Engagement]:p,[s.R.SpecialId.EngagementPriority]:p,[s.R.SpecialId.Delivery]:m,[s.R.SpecialId.DeliveryPriority]:m,[s.R.SpecialId.Vox]:h,[s.R.SpecialId.VoxPriority]:h,[s.R.SpecialId.Plagiarism]:{description:"Checks for similarities to published writing.",stateMessage:(e,t,r)=>r&f.IsLensVisited&&!(r&f.IsDocumentEmpty)?r&f.IsLensActive?o.g.isMin(t)?"100% original":`${t}% unoriginal`:"Recheck":"Not checked yet"},[s.R.SpecialId.Premium]:{description:"Offers more suggestions on how to improve your writing.",stateMessage:(e,t,r)=>r&f.IsDocumentEmpty?"Advanced checks":`${e.count} more ${i._6(e.count,"alert","alerts")}`}};var f;function y(e){return g[e]}!function(e){e[e.IsDocumentEmpty=1]="IsDocumentEmpty",e[e.IsLensActive=2]="IsLensActive",e[e.IsLensVisited=4]="IsLensVisited",e[e.IsFreeUser=8]="IsFreeUser"}(f||(f={}))},25970:(e,t,r)=>{"use strict";r.d(t,{g:()=>o});var n,i=r(57050),a=r(5114),s=r(38983);!function(e){let t,r;!function(e){e[e.CHECKED=0]="CHECKED",e[e.NOT_CHECKED=1]="NOT_CHECKED"}(t=e.PlagiarismCheckingState||(e.PlagiarismCheckingState={})),function(e){e.Mock=class{constructor(){this.downloadStarted=s.h.create(!1),this.beginDownload=i.Q1,this.tryToInterrupt=i.Q1,this.generateReport=()=>{throw new Error("Method not implemented.")},this.reportData=s.h.create(a.none),this.dedHTML="",this.dispose=i.Q1}}}(r=e.ViewModel||(e.ViewModel={}))}(n||(n={}));var o,l=r(76974);!function(e){let t,r;!function(e){let t;!function(e){e[e.ERROR=0]="ERROR",e[e.EMPTY=1]="EMPTY",e[e.LOADING=2]="LOADING",e[e.SHORT_CONTENT=3]="SHORT_CONTENT",e[e.READY=4]="READY"}(t=e.Type||(e.Type={}))}(t=e.State||(e.State={})),function(e){e.Mock=class{constructor(e={type:t.Type.EMPTY},r=a.some(new n.ViewModel.Mock)){this.statisticsState=e,this.reportViewModel=r,this.state=l.of(this.statisticsState),this.onModalClose=i.Q1}}}(r=e.ViewModel||(e.ViewModel={}))}(o||(o={}))},27125:(e,t,r)=>{"use strict";if(r.d(t,{L:()=>I,g:()=>i}),75==r.j)var n=r(40327);var i,a=r(38983);if(75==r.j)var s=r(84966);if(75==r.j)var o=r(5114);if(75==r.j)var l=r(66896);if(75==r.j)var c=r(79471);if(75==r.j)var u=r(32952);if(75==r.j)var d=r(85985);if(75==r.j)var p=r(77176);if(75==r.j)var m=r(66310);if(75==r.j)var h=r(98403);if(75==r.j)var g=r(93508);if(75==r.j)var f=r(16118);if(75==r.j)var y=r(76974);if(75==r.j)var v=r(50628);if(75==r.j)var b=r(17343);if(75==r.j)var w=r(60797);if(75==r.j)var C=r(2834);if(75==r.j)var S=r(93494);class I{constructor(e,t,r,y,v,b,w,C=S.v.WithSuccess.State.isInSuccess(y)){this._state=e,this._documentModel=t,this._trackSuccessStateChanged=r,this._capabilities=y,this.nonPriorityOptions=v,this.mutedAlertsOptions=b,this.hasNonPriorityAlerts=w,this.isInSuccess=C,this._getTextAmount=e=>0===e?i.TextAmount.zero:e<=s.hD?i.TextAmount.small:i.TextAmount.large,this._subs=[],this.successState=a.h.create({type:i.SuccessType.zero}),this.textAmount=a.h.create(this._getTextAmount(this._documentModel.documentLength.get().trimmed)),this.actionEvents=new u.xQ,this.applicatorEffects={id:"successViewModel.effects",when:l.R.isWithAlertsId,what:c.nL.Effect.Applicator.create(this.actionEvents.pipe(d.h((({type:e})=>e===i.ActionType.More)),p.U((()=>e=>{const t=e.patch({currentLens:c.nL.hasItems(e)&&(0,c.yi)(e.currentLens)?this._capabilities.toggleNonPriorityList("expanded")(e.currentLens):e.currentLens});return(0,n.pipe)(c.nL.hasItems(t)?this._capabilities.findFirstAlert(t.currentLens):o.none,o.fold((()=>t),(e=>t.patch({currentLens:c.nL.hasItems(t)?this._capabilities.selectItemByAlert(e)(t.currentLens):t.currentLens}))))}))))},this._currentLens=this._state.view((e=>({isSuccess:this.isInSuccess(e),type:e.currentLens.type,nonPriorityAlertsLeft:c.nL.isLensview(e)&&c.nL.hasItems(e)&&0!==this._capabilities.getActiveAlertsCount(e.currentLens),isAllAlerts:l.R.isMainLens(e.currentLens.id)}))),this._listenTextSize=()=>this._currentLens.view((e=>e.isSuccess)).pipe(m.w(h.Ft(this._documentModel.documentLength.view("trimmed"))),p.U(this._getTextAmount)).subscribe(h.wW(this.textAmount)),this._lensSwitch=this._currentLens.pipe(g.O(this._currentLens.get()),f.G(),p.U((([e,t])=>t.isSuccess?o.some({prevLensType:e.type,nonPriorityAlertsLeft:t.nonPriorityAlertsLeft,isAllAlerts:t.isAllAlerts}):o.none))),this._textAmountToSuccessType=e=>e===i.TextAmount.zero?{type:i.SuccessType.zero}:e===i.TextAmount.large?{type:i.SuccessType.large}:{type:i.SuccessType.small},this._subs.push(this._listenTextSize(),this._listenSuccessStateChange()),this.priorityList=(0,n.pipe)(v,o.map((e=>({hasNonPriorityAlerts:this._state.view(w),reviewNonPriorityAlerts:()=>{e.trackNonPriorityToggle(),this.actionEvents.next({type:i.ActionType.More})}})))),this.mutedAlerts=(0,n.pipe)(b,o.map((()=>({reviewMutedSuggestions:()=>{},mutedSuggestionsCount:this._state.view((e=>e.currentLens.meta.mutedCount))}))))}dispose(){this._subs.forEach((e=>e.unsubscribe())),this._subs=[]}_listenSuccessStateChange(){const e=e=>e.type===i.SuccessType.applied||e.type===i.SuccessType.zero?y.of(e):this._documentModel.checkingState.pipe(d.h((e=>"checking"!==e)),v.P(),b.h(e));return this._lensSwitch.pipe(w.cp((t=>this.textAmount.pipe(p.U(this._textAmountToSuccessType),g.O(t.prevLensType===c.Nm.lensview?{type:i.SuccessType.applied,nonPriorityAlertsLeft:t.nonPriorityAlertsLeft,isAllAlerts:t.isAllAlerts}:this._textAmountToSuccessType(this.textAmount.get())),f.G(),p.U((([e,t])=>e.type===i.SuccessType.applied&&t.type!==i.SuccessType.zero?e:t)),m.w(((t,r)=>0===r?y.of(t):e(t))),C.b((e=>{this._trackSuccessStateChanged(e.type===i.SuccessType.applied?"applied":e.type===i.SuccessType.zero?"nothingToCheck":"noIssues")})))))).subscribe(h.wW(this.successState))}}!function(e){let t,r,n;!function(e){e.More="More"}(t=e.ActionType||(e.ActionType={})),function(e){e.zero="zero",e.small="small",e.large="large"}(r=e.TextAmount||(e.TextAmount={})),function(e){e.zero="zero",e.small="small",e.large="large",e.applied="applied"}(n=e.SuccessType||(e.SuccessType={}));e.Mock=class{constructor(){this.textAmount=a.h.create(r.zero),this.successState=a.h.create({type:n.zero}),this.mutedSuggestionsCount=a.h.create(0),this.hasNonPriorityAlerts=a.h.create(!1)}reviewMutedSuggestions(){throw new Error("Method not implemented.")}reviewNonPriorityAlerts(){throw new Error("Method not implemented.")}dispose(){throw new Error("Method not implemented.")}}}(i||(i={}))},85287:(e,t,r)=>{"use strict";r.d(t,{Dn:()=>s,AP:()=>l,rD:()=>S,IY:()=>A,$4:()=>N,bb:()=>D});var n=r(63969),i=r(40219),a=r(50224);const s="linear",o=n.u.keyframes({"0%":{opacity:0},"100%":{opacity:1}}),l=n.u.keyframes({from:{opacity:1,transform:"scaleY(1)"},to:{opacity:0,transform:"scaleY(.5)"}}),c=n.u.keyframes({from:{opacity:1,transform:"translateY(0) scaleY(1)"},to:{opacity:0,transform:"translateY(-75%) scaleY(.5)"}}),u=n.u.keyframes({"0%":{opacity:0,transform:"scaleY(0)"},"100%":{opacity:1,transform:"scaleY(1)"}}),d=n.u.keyframes({"0%":{opacity:0,transform:"scaleY(.2) translateY(-50%)"},"80%":{opacity:1,transform:"scaleY(.8) translateY(0%)"},"100%":{opacity:1,transform:"scaleY(1)"}}),p=n.u.keyframes({"0%":{opacity:1,transform:"scaleY(1)"},"100%":{opacity:0,transform:"scaleY(0)"}}),m=n.u.keyframes({"0%":{opacity:0,transform:"scale(.8)"},"100%":{opacity:1,transform:"scale(1)"}}),h=n.u.keyframes({"0%, 100%":{opacity:0}}),g=n.u.keyframes({"0%, 59%":{opacity:0},"60%, 100%":{opacity:1}}),f=n.u.keyframes({"0%":{opacity:0},"80%":{opacity:0},"100%":{opacity:1}}),y=n.u.keyframes({"0%":{opacity:1,transform:"scaleY(1)"},"59%":{opacity:1},"60%":{opacity:0},"100%":{opacity:0,transform:"scaleY(0)"}}),v=n.u.keyframes({"0%":{opacity:1},"30%, 100%":{opacity:0}}),b=n.u.keyframes({"0%":{transform:"scaleY(.3)"},"100%":{transform:"scaleY(1)"}}),w=n.u.keyframes({"0%, 20%":{opacity:0},"100%":{opacity:1}}),C={position:"relative",margin:`${n.u.rem(.5)} ${n.u.rem(2)} ${n.u.rem(.5)} 0`,userSelect:"none"},S={position:"absolute",width:n.u.percent(100),pointerEvents:"none"},I={opacity:0,animation:`${o} ${n.u.seconds(i.v4/4/1e3)} ${s} ${n.u.seconds(i.v4/1e3)} forwards`},k={transformOrigin:"top",animation:`${l} ${n.u.seconds(i.v4/1e3)} ${s} forwards`},x={transformOrigin:"bottom",animation:`${c} ${n.u.seconds(i.v4/1e3)} ${s} forwards`},A={transformOrigin:"top",willChange:"contents"},E={animation:`${u} ${n.u.seconds(i.v4/1e3)} ${s} forwards`},T={animation:`${d} ${n.u.seconds(i.v4/1e3)} ${s} forwards`},_={animation:`${p} ${n.u.seconds(i.v4/1e3)} ${s} reverse forwards`},L={animation:`${p} ${n.u.seconds(i.v4/1e3)} ${s} forwards`},R={animation:`${m} ${n.u.seconds(i.v4/1e3)} ${s} forwards`},P={animation:`${m} ${n.u.seconds(i.v4/1e3)} ${s} reverse forwards`},O={transformOrigin:"top",animation:`${g} ${n.u.seconds(i.v4/1e3)} ${s} forwards`,willChange:"contents",$nest:{[`& .${a.g.successWrapperSelector} > *`]:{animation:`${f} ${n.u.seconds(i.v4/1e3)} ${s} forwards`}}},M={position:"absolute",width:n.u.percent(100),transformOrigin:"top",animation:`${y} ${n.u.seconds(i.v4/1e3)} ${s} forwards`,pointerEvents:"none",$nest:{[`& .${a.g.fullCardSelector} > :not(.${a.g.alignButtonHiddenSelector})`]:{animation:`${v} ${n.u.seconds(i.v4/1e3)} ${s} forwards`},[`& .${a.g.fullCardSelector} > .${a.g.alignButtonHiddenSelector}`]:{animation:`${h} ${n.u.seconds(i.v4/1e3)} ${s} none`},[`& .${a.g.fullCardSelector}`]:{transform:`translateY(${n.u.rem(-1)})`}}},F={transformOrigin:"top",animation:`${b} ${n.u.seconds(i.v4/1e3)} ${s} forwards`,willChange:"contents",$nest:{[`& .${a.g.fullCardSelector} > :not(.${a.g.alignButtonHiddenSelector})`]:{animation:`${w} ${n.u.seconds(i.v4/1e3)} ${s} forwards`},[`& .${a.g.fullCardSelector} > .${a.g.alignButtonHiddenSelector}`]:{animation:`${h} ${n.u.seconds(i.v4/1e3)} ${s} none`}}},N=n.u.stylesheet({wrapper:[C],animationWrapper:[{position:"relative"}],shade:[S],focused2renderedMain:[I],focused2renderedShade:[S,k],focused2renderedShadeClockwise:[S,x],rendered2focusedMainBase:[A],rendered2focusedMain:[A,E],rendered2focusedMainClockwise:[A,T],addedMain:[_],rendered2removedShade:[S,L],openedMain:[R],closedMain:[P],focused2successMain:[O],focused2successShade:[M],success2FocusedMain:[F]}),D=new Map([[l,N.focused2renderedShade],[c,N.focused2renderedShadeClockwise],[p,N.rendered2removedShade],[y,N.focused2successShade]])},22800:(e,t,r)=>{"use strict";r.d(t,{S:()=>k,c:()=>x});var n=r(63969),i=r(40219),a=r(85287),s=r(50224);const o=n.u.keyframes({from:{opacity:0,transform:"translateY(50%)"},to:{opacity:1,transform:"translateY(0)"}}),l=n.u.keyframes({from:{opacity:1,transform:"translateY(0)"},to:{opacity:0,transform:"translateY(-25%)"}}),c=n.u.keyframes({from:{transform:"translateY(0)"},to:{transform:"translateY(100%)"}}),u=n.u.keyframes({from:{transform:"translateY(0)"},to:{transform:"translateY(150%)"}}),d=n.u.keyframes({from:{opacity:1,transform:"scaleY(1)"},to:{opacity:0,transform:"scaleY(.5)"}}),p=n.u.keyframes({from:{opacity:0,transform:"scaleY(.2)"},to:{opacity:1,transform:"scaleY(1)"}}),m=n.u.keyframes({from:{transform:"translateY(-10%)"},to:{transform:"translateY(0)"}}),h=n.u.keyframes({from:{transform:"translateY(100%)"},to:{transform:"translateY(0)"}}),g=n.u.keyframes({from:{transform:"translateY(150%)"},to:{transform:"translateY(0)"}}),f=n.u.keyframes({from:{opacity:0,transform:"scaleY(.2)"},to:{opacity:1,transform:"scaleY(1)"}}),y=n.u.keyframes({from:{opacity:1,transform:"translateY(0)"},to:{opacity:0,transform:"translateY(125%)"}}),v={opacity:0,animation:`${o} ${n.u.seconds(i.v4/1e3)} ${a.Dn} forwards`},b={transformOrigin:"top",animation:`${a.AP} ${n.u.seconds(i.v4/1e3)} ${a.Dn} forwards`,$nest:{[`& .${s.g.bundleInnerContainerSelector}`]:{animation:`${l} ${n.u.seconds(i.v4/1e3)} ${a.Dn} forwards`,$nest:{[`& .${s.g.bundleFakeCard1Selector}`]:{animation:`${c} ${n.u.seconds(i.v4/1e3)} ${a.Dn} forwards`},[`& .${s.g.bundleFakeCard2Selector}`]:{animation:`${u} ${n.u.seconds(i.v4/1e3)} ${a.Dn} forwards`}}}}},w={transformOrigin:"top",animation:`${d} ${n.u.seconds(i.v4/1500)} ${a.Dn} forwards`,$nest:{[`& .${s.g.bundleInnerContainerSelector}`]:{animation:`${l} ${n.u.seconds(i.v4/1e3)} ${a.Dn} forwards`,$nest:{[`& .${s.g.bundleFakeCard1Selector}`]:{animation:`${c} ${n.u.seconds(i.v4/1e3)} ${a.Dn} forwards`},[`& .${s.g.bundleFakeCard2Selector}`]:{animation:`${u} ${n.u.seconds(i.v4/1e3)} ${a.Dn} forwards`}}}}},C={animation:`${p} ${n.u.seconds(i.v4/1e3)} ${a.Dn} forwards`,$nest:{[`& .${s.g.bundleInnerContainerSelector}`]:{animation:`${m} ${n.u.seconds(i.v4/1e3)} ${a.Dn} forwards`,$nest:{[`& .${s.g.bundleFakeCard1Selector}`]:{animation:`${h} ${n.u.seconds(i.v4/1e3)} ${a.Dn} forwards`},[`& .${s.g.bundleFakeCard2Selector}`]:{animation:`${g} ${n.u.seconds(i.v4/1e3)} ${a.Dn} forwards`}}}}},S={animation:`${f} ${n.u.seconds(i.v4/1e3)} ${a.Dn} forwards`,$nest:{[`& .${s.g.bundleInnerContainerSelector}`]:{animation:`${m} ${n.u.seconds(i.v4/1e3)} ${a.Dn} forwards`,$nest:{[`& .${s.g.bundleFakeCard1Selector}`]:{animation:`${h} ${n.u.seconds(i.v4/1e3)} ${a.Dn} forwards`},[`& .${s.g.bundleFakeCard2Selector}`]:{animation:`${g} ${n.u.seconds(i.v4/1e3)} ${a.Dn} forwards`}}}}},I={animation:`${y} ${n.u.seconds(i.v4/1e3)} ${a.Dn} forwards`},k=n.u.stylesheet({focused2renderedBundleMain:[v],focused2renderedBundleShade:[a.rD,b],focused2renderedBundleShadeClockwise:[a.rD,w],rendered2focusedBundleMain:[a.IY,C],rendered2focusedBundleMainClockwise:[a.IY,S],rendered2focusedBundleShade:[a.rD,I]}),x=new Map([[a.AP,k.focused2renderedBundleShade],[d,k.focused2renderedBundleShadeClockwise],[y,k.rendered2focusedBundleShade]])},32338:(e,t,r)=>{"use strict";r.d(t,{C:()=>m,B:()=>k});var n=r(27378),i=r(5739),a=r(12187),s=r(90351),o=r(63969),l=r(24588),c=r(40219),u=r(15646),d=r(94793),p=r(3656);class m extends n.Component{constructor(){super(...arguments),this._createCardToggler=e=>()=>this.props.actions.next({type:u.lY.Type.hover,kind:e,id:this.props.cardId})}componentWillUnmount(){this._createCardToggler("unhover")()}render(){const{getActiveAlert:e,cardId:t,actions:r,children:s,counter:o,className:l,hideActivateButton:c}=this.props;return n.createElement(i.F.div,Object.assign({"data-aid":t,onClick:t=>{const n=e();r.next({type:u.lY.Type.alertMinicardButtonClick,alertHighlight:{highlightIndex:0,alert:n},clickPoint:{x:t.clientX,y:t.clientY}})},onMouseEnter:this._createCardToggler("hover"),onMouseLeave:this._createCardToggler("unhover")},(0,a.Sh)(l,k.wrapper,k.miniCard)),n.createElement(p.XY,{className:k.contentWrapper},s),n.createElement("div",{className:k.iconContainer},o&&n.createElement("div",{className:g},o),c?null:n.createElement("div",{className:y},n.createElement(d.JO.Arrow,{className:k.activeTopIcon}),n.createElement(d.JO.Arrow,{className:k.activeBottomIcon}))))}}const h="baseMiniCounterContainer",g=o.u.joinClasses([h,o.u.style({position:"absolute",height:o.u.percent(100),top:0,right:0,zIndex:c.VN,margin:"auto 0",background:s.Il.CoreNeutral0,opacity:1})]),f="baseMiniActivateBtnSelector",y=o.u.joinClasses([f,o.u.style({position:"absolute",top:0,right:0,height:o.u.percent(100),zIndex:c.VN,display:"flex",flexDirection:"column",margin:"auto 0",background:s.Il.CoreNeutral0,opacity:0,justifyContent:"center"})]),v={position:"relative",display:"flex",overflow:"hidden",borderRadius:o.u.rem(c.fx),background:s.Il.CoreNeutral0,boxShadow:"0 1px 8px rgba(109, 117, 141, .18)",cursor:"pointer",alignItems:"center",$nest:{"&:hover":{background:s.Il.CoreNeutral0,boxShadow:"0 1px 12px 0 rgba(129, 137, 169, .2)",transitionDuration:o.u.seconds(.2)},[`&:hover .${f}`]:{opacity:1},"&:hover .baseMiniCounterContainer":{opacity:0}}},b={overflow:"hidden",margin:`0 ${o.u.rem(3)} 0 ${o.u.rem(2)}`,color:l.UE,textOverflow:"ellipsis",whiteSpace:"nowrap",lineHeight:o.u.rem(1.5)},w={position:"absolute",top:0,right:o.u.rem(.5),bottom:0,display:"flex"},C={display:"flex",margin:`${o.u.rem(.1)} 0 ${o.u.rem(-1.25)}`,transform:"rotate(180deg)"},S={$nest:{"&:before":{position:"absolute",width:o.u.px(10),height:o.u.px(10),borderRadius:o.u.percent(50),content:"''",transform:"scale(.5)"}}},I={$nest:{"&:before":{margin:`auto 0 auto ${o.u.rem(.75)}`}}},k=o.u.stylesheet({wrapper:[v],contentWrapper:[b],iconContainer:[w],activeTopIcon:[C],activeBottomIcon:[{display:"flex",height:"auto"}],dotBase:[S],miniCard:[S,I]})},50225:(e,t,r)=>{"use strict";r.d(t,{b:()=>U});var n=r(27378),i=r(57050),a=r(40327),s=r(5739),o=r(38983),l=r(5114),c=r(54338),u=r(15646),d=r(85287),p=r(22800),m=r(35108);const h=({children:e})=>n.createElement(s.F.div,{role:"animation-wrapper",className:d.$4.animationWrapper},e),g=e=>(0,a.pipe)(l.fromNullable(e.activeAlert),l.fold((()=>e.id),(e=>e.id)));class f extends n.Component{constructor(){super(...arguments),this._elementState=c.f.emptyWithName("card")}_stateToElement(e){switch(e){case"added":case"rendered":return this.props.miniCard;case"focused":case"expanded":case"presuccess":return this.props.fullCard;case"success":return this.props.successCard;case"feedback_form":return this.props.feedbackForm;case"removed":return this.props.removedCard;default:return null}}componentWillUnmount(){const{card:e,actions:t}=this.props;t.next({type:u.eI.Kind.completeTransitionTo,id:e.id,transitionId:e.visualState.transitionId})}render(){const{actions:e,card:t,transitionClassMapper:r}=this.props;if(!t.visualState.incomplete)return n.createElement(h,null,n.createElement(s.F.div,{key:t.visualState.transition.type},this._stateToElement(t.visualState.transition.type)));const f=r||m.SA,{main:y,shade:v}=f(t.visualState),b=o.h.create(void 0===v?l.none:(0,a.pipe)(t.visualState.from,l.map((e=>({state:e,className:v})))));return!y&&l.isNone(b.get())&&requestAnimationFrame((()=>e.next({type:u.eI.Kind.completeTransitionTo,id:t.id,transitionId:t.visualState.transitionId}))),n.createElement(c.f.Context.Provider,{value:this._elementState},n.createElement(h,null,b.view((0,i.ls)(l.map((({state:r,className:i})=>n.createElement(s.F.div,{className:i,key:"shade"+r+g(t),onAnimationEnd:r=>{p.c.get(r.animationName)!==i&&d.bb.get(r.animationName)!==i||(e.next({type:u.eI.Kind.completeTransitionTo,id:t.id,transitionId:t.visualState.transitionId}),requestAnimationFrame((()=>b.set(l.none))))}},this._stateToElement(r)))),l.toUndefined)),n.createElement(s.F.div,{className:y,key:"expanded"===t.visualState.transition.type?"focused":t.visualState.transition.type,onAnimationEnd:()=>e.next({type:u.eI.Kind.completeTransitionTo,id:t.id,transitionId:t.visualState.transitionId}),onTransitionEnd:()=>{"presuccess"===t.visualState.transition.type&&e.next({type:u.eI.Kind.startTransitionTo,id:t.id,transition:{type:"success",clockwise:t.visualState.transition.clockwise}})}},this._stateToElement(t.visualState.transition.type))))}}var y,v=r(32338),b=r(8125),w=r(90351),C=r(63969),S=r(24588),I=r(40219),k=r(30763),x=r(7046),A=r(94793),E=r(3656),T=r(57091),_=r(50224);!function(e){e[e.stage0=0]="stage0",e[e.stage1=1]="stage1",e[e.stage2=2]="stage2"}(y||(y={}));const L=({actions:e,isLastCard:t})=>{const r=n.useContext(k.m.Context).successLens.fixedText.titles,i=o.h.create(y.stage0),a=()=>e.next({type:u.lY.Type.switchToNext});return n.createElement(s.F.div,{className:$.successWrapper},n.createElement(E.P1,{className:$.successText,onAnimationEnd:()=>{i.set(y.stage1)}},r[(0,b.TN)(r.length)]),n.createElement(s.F.span,null,i.view((e=>e>=y.stage1&&n.createElement("span",{onAnimationEnd:()=>i.set(y.stage2)},n.createElement(A.JO.CheckmarkAnimated,{className:$.successCheckMark}))))),n.createElement(s.F.span,{className:$.successBtnHolder},t.pipe(T.a(i,((e,t)=>t<y.stage2?null:e?n.createElement(x.zx.Caps,{className:$.doneBtn,name:"done",key:"done-btn",onClick:a},"Done"):n.createElement(x.zx.Caps,{className:$.successBtn,name:"next",key:"next-card",onClick:a},"Next"))))))},R=C.u.keyframes({"0%":{opacity:0},"100%":{opacity:1}}),P={fontWeight:"bold",lineHeight:C.u.rem(2),animation:`${R} ${C.u.seconds(.2)} linear forwards`},O={position:"relative",borderRadius:C.u.rem(I.Jr),background:w.Il.CoreNeutral0,boxShadow:`0 ${C.u.rem(.625)} ${C.u.rem(I.mJ)} 0 rgba(198, 203, 222, .45)`},M={display:"flex",padding:`${C.u.rem(1.5)} ${C.u.rem(2)}`,alignItems:"center"},F={marginLeft:C.u.rem(1),minWidth:0,minHeight:0,width:C.u.rem(1.325),height:C.u.rem(1.325),animation:`${R} ${C.u.seconds(.2)} linear forwards`},N={float:"right",width:C.u.rem(4),textAlign:"center",animation:`${R} ${C.u.seconds(.2)} linear forwards`},D={backgroundColor:w.Il.CoreGreen50,color:w.Il.CoreNeutral0,$nest:{"&:not([data-disabled='true'])[data-hovered='true']":{background:S.mb}}},$=Object.assign(Object.assign({},C.u.stylesheet({successText:[P],successCheckMark:[F],successBtnHolder:[{marginLeft:"auto",fontWeight:"bold"}],successBtn:[N],doneBtn:[N,D]})),{fullCard:C.u.joinClasses([_.g.fullCardSelector,C.u.style(O)]),successWrapper:C.u.joinClasses([_.g.successWrapperSelector,C.u.style(O,M)])});var U;!function(e){e.Mini=v.C,e.Card=f,e.Success=L}(U||(U={}))},50224:(e,t,r)=>{"use strict";r.d(t,{g:()=>f,m:()=>y});var n=r(90351),i=r(63969),a=r(24588),s=r(40219);const o={position:"relative",borderRadius:i.u.rem(s.Jr),background:n.Il.CoreNeutral0,boxShadow:`0 ${i.u.rem(.625)} ${i.u.rem(s.mJ)} 0 rgba(198, 203, 222, .45)`},l={$nest:{"&:before":{position:"absolute",width:i.u.px(10),height:i.u.px(10),borderRadius:i.u.percent(50),content:"''",transform:"scale(.5)"}}},c={$nest:{"&:before":{backgroundColor:a.kl}}},u={$nest:{"&:before":{backgroundColor:a.AX}}},d={$nest:{"&:before":{backgroundColor:n.Il.CoreRed50}}},p={$nest:{"&:before":{backgroundColor:n.Il.CoreBlue50}}},m={$nest:{"&:before":{backgroundColor:n.Il.CoreGreen50}}},h={$nest:{"&:before":{backgroundColor:n.Il.CorePurple50}}},g={$nest:{"&:before":{backgroundColor:n.Il.CoreNeutral50}}},f={fullCardSelector:"fullCard",bundleInnerContainerSelector:"bundleInnerContainer",bundleFakeCard1Selector:"bundleFakeCard1",bundleFakeCard2Selector:"bundleFakeCard2",alignButtonHiddenSelector:"alignButtonHidden",cozyCardContainerSelector:"cozyCardContainer",successWrapperSelector:"successWrapper"},y=Object.assign(Object.assign({},i.u.stylesheet({dot:[l],dotAdvanced:[u],dotCritical:[c],dotCorrectness:[d],dotClarity:[p],dotEngagement:[m],dotDelivery:[h],dotVox:[g]})),{fullCard:i.u.joinClasses([f.fullCardSelector,i.u.style(o)])})},35108:(e,t,r)=>{"use strict";r.d(t,{SA:()=>u,a:()=>d});var n,i=r(40327),a=r(5114),s=r(8125),o=r(81531),l=r(85287),c=r(22800);function u({from:e,transition:t,incomplete:r}){if(!r)return{};const n=p("transitionClassMapper");return(0,i.pipe)(e,a.map((e=>{switch(e){case"added":case"rendered":switch(t.type){case"added":return n.error(`Impossible transition: ${e} -> ${t.type}`),{main:l.$4.addedMain};case"focused":return{main:t.clockwise?l.$4.rendered2focusedMainClockwise:l.$4.rendered2focusedMain};case"removed":return{shade:l.$4.rendered2removedShade};default:return{}}case"expanded":case"focused":switch(t.type){case"rendered":return{main:l.$4.focused2renderedMain,shade:t.clockwise?l.$4.focused2renderedShadeClockwise:l.$4.focused2renderedShade};case"removed":return{main:"",shade:t.clockwise?l.$4.focused2renderedShadeClockwise:l.$4.focused2renderedShade};default:return{}}case"success":switch(t.type){case"removed":return{main:"",shade:t.clockwise?l.$4.focused2renderedShadeClockwise:l.$4.focused2renderedShade};case"focused":return{main:l.$4.success2FocusedMain};default:return{}}case"presuccess":switch(t.type){case"success":return{main:l.$4.focused2successMain,shade:l.$4.focused2successShade};default:return{}}case"removed":switch(t.type){case"added":return n.error(`Impossible transition: ${e} -> ${t.type}`),{main:l.$4.addedMain};default:return{}}default:return{}}})),a.getOrElse((()=>{switch(t.type){case"added":return{main:l.$4.addedMain};case"focused":return{main:l.$4.openedMain};default:return{}}})))}function d({from:e,transition:t,incomplete:r}){return r?(0,i.pipe)(e,a.map((e=>{switch(e){case"added":case"rendered":switch(t.type){case"added":return p("bundleTransitionClassMapper").error(`Impossible transition: ${e} -> ${t.type}`),{main:l.$4.addedMain};case"focused":return{main:t.clockwise?c.S.rendered2focusedBundleMainClockwise:c.S.rendered2focusedBundleMain,shade:c.S.rendered2focusedBundleShade};case"removed":return{shade:l.$4.rendered2removedShade};default:return{}}case"expanded":case"focused":switch(t.type){case"rendered":return{main:c.S.focused2renderedBundleMain,shade:t.clockwise?c.S.focused2renderedBundleShadeClockwise:c.S.focused2renderedBundleShade};case"removed":return{main:"",shade:t.clockwise?l.$4.focused2renderedShadeClockwise:l.$4.focused2renderedShade};default:return{}}case"success":switch(t.type){case"removed":return{main:"",shade:t.clockwise?l.$4.focused2renderedShadeClockwise:l.$4.focused2renderedShade};case"focused":return{main:l.$4.success2FocusedMain};default:return{}}case"presuccess":switch(t.type){case"success":return{main:l.$4.focused2successMain,shade:l.$4.focused2successShade};default:return{}}case"removed":switch(t.type){case"added":return p("bundleTransitionClassMapper").error(`Impossible transition: ${e} -> ${t.type}`),{main:l.$4.addedMain};default:return{}}default:return{}}})),a.getOrElse((()=>{switch(t.type){case"added":return{main:l.$4.addedMain};case"focused":return{main:l.$4.openedMain};default:return{}}}))):{}}!function(e){e.toOption=function(e){return t=>{const{main:r,shade:n}=e(t);return{main:a.fromNullable(r),shade:a.fromNullable(n)}}}}(n||(n={}));const p=(0,s.HP)(o.C8.Logging.getLogger)},97734:(e,t,r)=>{"use strict";r.d(t,{A:()=>n});var n,i=r(27378),a=r(57050),s=r(40327),o=r(5739),l=r(77176),c=r(15825),u=r(66310),d=r(28043),p=r(19751),m=r(76974),h=r(5114),g=r(8125),f=r(90351),y=r(81531),v=r(63969),b=r(40219),w=r(26027),C=r(77610),S=r(29847),I=r(50224),k=r(86531),x=r(28522),A=r(19157),E=r(76720);!function(e){e.Mini=({card:e,actions:t})=>i.createElement(o.F.Fragment,null,e.pipe(l.U((e=>i.createElement(A.P.Bundle,{card:e,actions:t}))))),e.Full=({card:e,actions:r,renderCard:h})=>{const{isChecking:g,isCheckingGlobal:y,transform:v}=w.X.useCardStates(e),b=e=>(f("CardBundle").error("card type not supported:",e),null),I=e.pipe((e=>e.lift(new c.G((e=>e.activeAlert.id)))),u.w((e=>e.pipe(d.x(((e,t)=>e.activeAlertIndex===t.activeAlertIndex)),l.U((t=>({activeAlertIndex:t.activeAlertIndex,activeAlertId:t.activeAlert.id,card:(0,s.pipe)(e,d.x(((e,t)=>e.hashCode()===t.hashCode()&&e.visualState.transitionId===t.visualState.transitionId)),p.d({bufferSize:1,refCount:!0}))}))))))),k=(e,t)=>{const n=t.alerts.length,a=1===n?Z.bundleInnerContainer:2===n?Z.bundleInnerContainer2Cards:Z.bundleInnerContainerNCards;return i.createElement(o.F.div,{className:a},h?h({card:t,actions:r,isChecking:g,isCheckingGlobal:y,transform:e}):C.C.isTakeawayItem(t)?i.createElement(E.o1.Full,{card:t,actions:r}):i.createElement(x.J,{card:t,actions:r,isChecking:g,transform:e,isCheckingGlobal:y}))};return i.createElement(n,{card:e,actions:r},i.createElement(t,{state:I,stateToClassMapper:(e,t)=>{if(!e)return{prev:(0,S.EJ)(""),next:(0,S.EJ)("")};if(e.activeAlertId===t.activeAlertId)return{prev:(0,S.EJ)(Z.inBundleToUpdatedCardOld),next:(0,S.EJ)(Z.inBundleToUpdatedCardNew)};if(e.activeAlertIndex===t.activeAlertIndex)return{prev:(0,S.EJ)(Z.inBundleToUpdatedCardOld),next:(0,S.EJ)(Z.inBundleToUpdatedCardNew)};return e.activeAlertIndex<t.activeAlertIndex?{prev:(0,S.EJ)(Z.inBundleToNextCardOld),next:(0,S.EJ)(Z.inBundleToNextCardNew)}:{prev:(0,S.EJ)(Z.inBundleToPrevCardOld),next:(0,S.EJ)(Z.inBundleToPrevCardNew)}}},(e=>i.createElement(o.F.div,{className:e.view,onAnimationEnd:"prev"===e.type?e.done:a.Q1},(0,s.pipe)(e.state.card,l.U((0,a.ls)(C.C.match({super:b,smartPhrases:t=>k("prev"===e.type?m.of(t.transform):v,t),takeaway:t=>k("prev"===e.type?m.of(t.transform):v,t),sentenceLevelBrandTones:e=>k(v,e),default:t=>k("prev"===e.type?m.of(t.transform):v,t)}),w.X.foldCard)))))))};class t extends S.l5{}const r=({alertCount:e})=>1===e?i.createElement(i.Fragment,null):2===e?i.createElement("div",{className:Z.bundleFakeCard1}):i.createElement(i.Fragment,null,i.createElement("div",{className:Z.bundleFakeCard1}),i.createElement("div",{className:Z.bundleFakeCard2})),n=({children:e,card:t,actions:n})=>i.createElement(o.F.div,{className:Z.bundleCardWrapper},i.createElement(k.PS,{card:t,actions:n}),i.createElement(o.F.div,{className:Z.cardBundleContainer},e,(0,s.pipe)((e=>(0,s.pipe)(e,l.U((e=>h.some(e.alerts.length)))))(t),l.U(h.map((e=>i.createElement(r,{key:e,alertCount:e})))),l.U(h.toNullable)))),f=(0,g.HP)(y.C8.Logging.getLogger)}(n||(n={}));const T=.25,_="0 1px 8px rgba(109, 117, 141, .18)",L=v.u.keyframes({"0%":{transform:"scale(1)"},"100%":{transform:"scale(1)"}}),R=v.u.keyframes({from:{transform:"translateX(0)",opacity:1},to:{transform:"translateX(-100px)",opacity:0}}),P=v.u.keyframes({from:{transform:"translateX(-100px)",opacity:0},to:{transform:"translateX(0)",opacity:1}}),O=v.u.keyframes({from:{opacity:0,transform:"scale(.95) translateY(-15px)"},to:{opacity:1,transform:"scale(1) translateY(0)"}}),M=v.u.keyframes({from:{opacity:1,transform:"scale(1) translateY(0)"},to:{opacity:0,transform:"scale(.95) translateY(-15px)"}}),F={position:"relative",borderRadius:v.u.rem(b.Jr),background:f.Il.CoreNeutral0,boxShadow:_,zIndex:2},N={marginTop:v.u.rem(.75)},D={marginTop:v.u.rem(1.25)},$={position:"absolute",top:v.u.px(-5),right:v.u.rem(.5),left:v.u.rem(.5),zIndex:-1,display:"block",height:v.u.percent(100),borderRadius:v.u.rem(b.Jr),backgroundColor:f.Il.CoreNeutral1,boxShadow:_,content:"' '"},U={position:"absolute",top:v.u.px(-10),right:v.u.rem(1),left:v.u.rem(1),zIndex:-2,display:"block",height:v.u.rem(2),borderRadius:v.u.rem(b.Jr),backgroundColor:f.Il.CoreNeutral10,boxShadow:_,content:"' '"},B={borderRadius:v.u.rem(.75),background:f.Il.CoreNeutral20,margin:`${v.u.rem(-.25)} ${v.u.rem(-.25)}`,padding:`${v.u.rem(.25)} ${v.u.rem(.25)}`,$nest:{[`& .${I.g.cozyCardContainerSelector}`]:{margin:0,boxShadow:"none"},[`& .${I.g.fullCardSelector}`]:{padding:`${v.u.rem(.75)} ${v.u.rem(.5)} ${v.u.rem(.5)} ${v.u.rem(1)}`},"& [role=dropdown-list]":{transform:`translateY(${v.u.rem(-.5)})`}}},j={position:"absolute",top:v.u.rem(.8),right:v.u.rem(1),margin:0},W={borderRadius:v.u.rem(b.Jr),background:f.Il.CoreNeutral0,boxShadow:_},H={display:"block",position:"absolute",top:0,$nest:{[`& .${I.g.bundleInnerContainerSelector}`]:{margin:0}}},G={animation:`${M} ${v.u.seconds(T)} ease-out`},z={animation:`${P} ${v.u.seconds(T)} ease-out`},Y={animation:`${R} ${v.u.seconds(T)} ease-in`},V={animation:`${O} ${v.u.seconds(T)} ease-in`},q={display:"none",animation:`${L} ${v.u.seconds(T)} ease-in`},X={animation:`${L} ${v.u.seconds(T)} ease-in`},Z=Object.assign(Object.assign({},v.u.stylesheet({bundleInnerContainer:[F],bundleCardWrapper:[B],minimalBetaLabel:[j],compactCardContainer:[W],cardBundleContainer:[{position:"relative",zIndex:2}],inBundleMovingCard:[H],inBundleToPrevCardOld:[H,G],inBundleToPrevCardNew:[z],inBundleToNextCardOld:[H,Y],inBundleToNextCardNew:[V],inBundleToUpdatedCardOld:[q],inBundleToUpdatedCardNew:[X]})),{bundleInnerContainer:v.u.joinClasses([I.g.bundleInnerContainerSelector,v.u.style(F)]),bundleInnerContainer2Cards:v.u.joinClasses([I.g.bundleInnerContainerSelector,v.u.style(F,N)]),bundleInnerContainerNCards:v.u.joinClasses([I.g.bundleInnerContainerSelector,v.u.style(F,D)]),bundleFakeCard1:v.u.joinClasses([I.g.bundleFakeCard1Selector,v.u.style($)]),bundleFakeCard2:v.u.joinClasses([I.g.bundleFakeCard2Selector,v.u.style(U)])})},28584:(e,t,r)=>{"use strict";r.d(t,{a0:()=>n,$x:()=>I,Im:()=>k,oL:()=>O});var n,i=r(27378),a=r(57050),s=r(40327),o=r(49524),l=r(12187),c=r(5114),u=r(83078),d=r(30763),p=r(66896),m=r(40018),h=r(17594),g=r(4890),f=r(7046),y=r(29245),v=r(94793),b=r(16951),w=r(3656),C=r(50224),S=r(36642);!function(e){e.none="none",e.persistent="persistent",e.new="new"}(n||(n={}));const I=({className:e,vox:t,isMinimalCard:r})=>{const{vox:{styleGuide:n}}=i.useContext(d.m.Context);return i.createElement("div",Object.assign({},(0,l.Sh)(e,S.h.voxTitle,r?S.h.minimalTitle:void 0)),i.createElement("span",null,t.companyName," ",n))},k=({logoUrl:e,className:t})=>i.createElement("img",Object.assign({src:e},(0,l.Sh)(t,S.h.voxLogo))),x=({title:e,layoutDensity:t})=>i.createElement(w.XY,{className:(0,s.pipe)(t,g.j.Density.matchOrDefault(g.j.Density.minimal)((()=>S.h.minimalTitle),(()=>S.h.toneTitle)))},i.createElement(y.d,{emojiClassName:S.h.toneLogo},e));function A(e){return p.R.outcomeTypeMatch(e.lensType)({correctness:C.m.dotCorrectness,clarity:C.m.dotClarity,premium:C.m.dotAdvanced,engagement:C.m.dotEngagement,delivery:C.m.dotDelivery,vox:C.m.dotVox})}const E=({companyLogoUrl:e})=>{const t=i.useContext(d.m.Context).card.sentenceLevelBrandTones;return i.createElement(w.x4,{className:S.h.sentenceLevelBrandTonesLabel},e&&i.createElement("img",{src:e,className:S.h.toneLogo}),i.createElement("span",{className:S.h.sentenceLevelBrandTonesOffBrand},t.offBrandCardTitle)," ",t.detected)};function T(e,t,r,n,d){const{extraProperties:p}=e;return h.$.isTakeaway(e)?function(e,t,r){return{style:"",description:i.createElement("div",{className:(0,s.pipe)(t,g.j.Density.matchOrDefault(g.j.Density.minimal)((()=>S.h.minimalTitle),(()=>{})))},(u.FX(m.TO.correctlyDetected)(e.takeawayFeedback)||u.FX(m.TO.correctlyDetectedAndDone)(e.takeawayFeedback))&&e.takeawayIsLikelyToBeRead?i.createElement(v.JO.ValidationOk,Object.assign({width:16},(0,l.Sh)(S.h.cardLogo,S.h.takeawayIcon))):i.createElement(v.JO.Megaphone,Object.assign({width:16},(0,l.Sh)(S.h.cardLogo,S.h.takeawayIcon))),t===g.j.Density.minimal?r:e.lensName)}}(e,r,d):h.$.isSmartPhrases(e)?function(e){return{style:"",description:i.createElement("div",null,i.createElement(v.JO.SmartPhrases.HeaderCirclePlus,Object.assign({},(0,l.Sh)(S.h.cardLogo))),i.createElement(w.x4,{className:S.h.smartPhrasesLabel},e.miniCardTitle))}}(e):h.$.isSentenceLevelBrandTones(e)?function(e){const t=(0,s.pipe)(e.extraProperties.sentenceLevelBrandTones,c.chain((e=>e.companyLogoUrl)),c.fold(a.gn,o.y));return{style:"",description:i.createElement(E,{companyLogoUrl:t})}}(e):c.isSome(p.tone)?function(e,t){return{style:A(e),description:i.createElement(x,{title:e.title,layoutDensity:t})}}(e,r):t?c.isSome(p.vox)?function(e,t){return{style:C.m.dotVox,description:i.createElement(i.Fragment,null,(0,s.pipe)(e.logoUrl,c.fold((()=>null),(e=>i.createElement(k,{logoUrl:e,className:S.h.cardLogo})))),i.createElement(I,{vox:e,isMinimalCard:t===g.j.Density.minimal}))}}(p.vox.value,r):h.$.isFree(e)?(0,s.pipe)(r,g.j.Density.matchOrDefault(g.j.Density.minimal)((()=>function(e,t){return{style:A(e),description:t||i.createElement(w.XY,{className:S.h.minimalTitle},e.miniCardTitle)}}(e,d)),(()=>function(e){return{style:A(e),description:e.lensName}}(e)))):function(e,t,r){return{style:A(e),description:i.createElement("div",Object.assign({},(0,l.Sh)(S.h.dualItemLabel,(0,s.pipe)(r,g.j.Density.matchOrDefault(g.j.Density.minimal)((()=>S.h.minimalTitle),(()=>{}))))),i.createElement("span",{className:S.h.dualItemLabel},e.lensName,i.createElement(R,{highlightStyle:t})))}}(e,n,r):null}const _=({label:e})=>i.createElement("span",{className:S.h.fluencyLabel},e,i.createElement(f.RZ,{iconWidth:10,buttonClass:S.h.fluencyInfo,iconClass:S.h.fluencyInfo,title:i.useContext(d.m.Context).card.fluency.tooltip})),L=({style:e,description:t})=>i.createElement("span",Object.assign({},(0,l.Sh)(S.h.lens,S.h.dot,e)),t),R=({highlightStyle:e})=>{const t=i.useContext(d.m.Context);if(e===n.none)return null;const r=e===n.new?i.createElement("div",{className:S.h.newPremiumLabel},t.premiumAlertLabel.new,i.createElement(v.JO.Paid,{className:S.h.newPremiumLabelIcon,width:12})):i.createElement(v.JO.Paid,{className:S.h.premiumPersistentTooltipIcon,width:10});return i.createElement(b.u,{align:"topCenter",title:t.premiumAlertLabel.tooltip.includedWithPaid},r)},P=({style:e,description:t,extraStyle:r})=>i.createElement("span",Object.assign({},(0,l.Sh)(r,S.h.lensMinimal,S.h.lens,S.h.dot,e)),t),O=e=>(0,s.pipe)(T(e.activeAlert,e.showCardLabel,e.layoutDensity,e.premiumAlertLabelHighlight,e.children),c.fromNullable,c.map((t=>i.createElement("div",{className:e.className},(0,s.pipe)(e.activeAlert.extraProperties.fluencyMessage,c.fold((()=>(0,s.pipe)(e.layoutDensity,g.j.Density.matchOrDefault(g.j.Density.minimal)((()=>i.createElement(P,Object.assign({},t))),(()=>i.createElement(L,Object.assign({},t)))))),(r=>(0,s.pipe)(e.layoutDensity,g.j.Density.match(i.createElement(i.Fragment,null,i.createElement(L,Object.assign({},t)),i.createElement(_,{label:r})),i.createElement(L,Object.assign({},t)),i.createElement(P,{style:t.style,extraStyle:S.h.minimalTitle,description:e.activeAlert.miniCardTitle}))))))))),c.fold((()=>i.createElement("div",{"data-purpose":"label-placeholder"})),(t=>i.createElement(M,null,t,e.badge)))),M=({children:e})=>i.createElement("div",{className:S.h.labelContainer},e)},74754:(e,t,r)=>{"use strict";r.d(t,{y:()=>a});var n=r(28706);const i=["b","i","br","ul","li"];var a;!function(e){e.renderToHtml=function(e,t){const r=t?{allowedTags:i.concat(["a"]),linkRegExp:t}:{allowedTags:i};return n.yG(e,r)}}(a||(a={}))},66346:(e,t,r)=>{"use strict";r.d(t,{Vh:()=>p,G3:()=>m,hC:()=>h});var n=r(27378),i=r(84966),a=r(30763),s=r(26027),o=r(15646),l=r(7046),c=r(94793),u=r(28706),d=r(36642);const p=({card:{activeAlert:e,id:t,visualState:r},actions:p,mode:m,className:g})=>{const f=n.useContext(a.m.Context);return n.createElement(l.zx.Tertiary,{key:"toggle-more",name:h(r,f),title:"mini"===m?h(r,f):"",className:g,onClick:u.hz((()=>{const n=s.X.isCardOpen(r);p.next({type:o.eI.Kind.startTransitionTo,id:t,transition:{type:n?"focused":"expanded",clockwise:!0}}),n||p.next({type:o.lY.Type.alertFeedback,alertId:e.id,feedbackType:i.PZ.EXPANDED})}))},s.X.isCardOpen(r)?n.createElement(c.JO.Arrow,{key:"more",className:d.h.lessIcon}):n.createElement(c.JO.QuestionMark,{key:"expand"}),"default"===m&&h(r,f))},m=({visualState:e,children:t,className:r})=>n.createElement("div",{className:(s.X.isCardOpen(e)?d.h.more:d.h.moreHidden)+" "+r},t);function h(e,t){const r=t.card;return s.X.isCardOpen(e)?r.less:r.more}},36642:(e,t,r)=>{"use strict";r.d(t,{h:()=>x});var n=r(90351),i=r(63969),a=r(40219);const s={$nest:{"&:before":{position:"absolute",width:i.u.px(10),height:i.u.px(10),borderRadius:i.u.percent(50),content:"''",transform:"scale(.5)"}}},o={opacity:1,transition:"opacity .3s"},l={color:n.Il.CoreNeutral50,textTransform:"uppercase",letterSpacing:n.xv.SubheadingLetterSpacing,fontSize:i.u.rem(n.xv.SubheadingSize),lineHeight:i.u.rem(n.xv.SubheadingLineHeight),$nest:{"&:not(:last-child)":{marginRight:i.u.rem(.25)}}},c={position:"relative",display:"inline-block",$nest:{"&:before":{top:0,bottom:i.u.px(2),left:i.u.rem(-1.1),margin:"auto 0"}}},u={$nest:{"&:before":{top:0,bottom:0,left:i.u.rem(-1.1),margin:`${i.u.rem(.25)} 0 auto 0`}}},d={margin:`0 ${i.u.rem(.4)} 0 ${i.u.rem(.2)}`,width:i.u.rem(.85),height:i.u.rem(.85),objectFit:"contain"},p={position:"absolute",top:0,bottom:0,left:i.u.rem(-1),margin:"auto",background:n.Il.CoreNeutral0,transform:"translateX(-50%)"},m={minWidth:"initial",minHeight:"initial",padding:`${i.u.rem(.3)} ${i.u.rem(.25)}`,cursor:"pointer",borderRadius:i.u.percent(100),marginLeft:i.u.rem(.5),$nest:{"&:hover":{background:n.Il.CoreNeutral10}}},h={display:"flex",alignItems:"center",padding:`0 ${i.u.rem(.25)}`,borderRadius:i.u.rem(a.fx),cursor:"pointer",background:n.Il.CoreYellow20,color:n.Il.CoreYellow80,marginLeft:i.u.rem(.5),$nest:{"&:hover":{background:n.Il.CoreYellow10}}},g={minWidth:"initial",minHeight:"initial",fill:n.Il.CoreYellow80,marginLeft:i.u.rem(.3)},f={display:"flex",alignItems:"flex-start",top:i.u.rem(.125),minWidth:"initial",minHeight:"initial",background:n.Il.CoreNeutral0},y={color:n.Il.CoreNeutral90,textTransform:"none",letterSpacing:n.xv.SmallLetterSpacing,fontWeight:n.xv.SmallWeight,fontSize:i.u.rem(n.xv.SmallSize),lineHeight:i.u.rem(n.xv.SmallLineHeight),$nest:{"&:first-letter":{textTransform:"uppercase"}}},v={color:n.Il.CoreNeutral50,textTransform:"none"},b={width:i.u.rem(1),height:i.u.rem(1)},w={display:"inline-flex",padding:`0 ${i.u.rem(.25)}`,borderRadius:i.u.rem(a.fx),background:"linear-gradient(269.73deg, rgba(215, 248, 240, .8) .02%, rgba(202, 235, 250, .8) 99.98%)",textTransform:"uppercase"},C={display:"inline-flex",marginLeft:i.u.rem(.1),minWidth:0,minHeight:0},S={color:n.Il.CoreNeutral80,textTransform:"none"},I={width:i.u.rem(1),height:i.u.rem(1),marginRight:i.u.rem(.375)},k={color:n.Il.CoreRed60},x=i.u.stylesheet({lessIcon:[{transform:"rotate(180deg)"}],more:[o],moreHidden:[o,{position:"absolute",overflow:"hidden",height:0,opacity:0,transition:"none"}],commonLabel:[l],labelContainer:[{display:"flex",flexDirection:"row",justifyContent:"space-between",alignItems:"center"}],lens:[l,c],lensMinimal:[u],voxLogo:[d],cardLogo:[p],dualItemLabel:[{display:"inline-flex",alignItems:"center"}],premiumPersistentTooltipIcon:[m],newPremiumLabel:[h],newPremiumLabelIcon:[g],takeawayIcon:[f],minimalTitle:[y],voxTitle:[{display:"flex",alignItems:"center"}],toneTitle:[v],toneLogo:[p,b],fluencyLabel:[l,w],fluencyInfo:[C],dot:[s],smartPhrasesLabel:[{textTransform:"none"}],sentenceLevelBrandTonesLabel:[S],sentenceLevelBrandTonesLabelImage:[I],sentenceLevelBrandTonesOffBrand:[k]})},1883:(e,t,r)=>{"use strict";r.d(t,{Z:()=>c});var n=r(27378),i=r(5739),a=r(12187),s=r(63969),o=r(35108),l=r(50224);const c=e=>{const{shade:t}=(0,o.SA)(e.visualState);n.useEffect((()=>{t||e.onFocus()}),[]);const r=e.theme||{};return n.createElement(i.F.div,{className:r.container},e.header,n.createElement(i.F.div,{className:r.innerContainer},n.createElement(i.F.div,Object.assign({},(0,a.Sh)(b.wrapper,r.wrapper),{onMouseOver:e.onMouseOver,onMouseOut:e.onMouseOut}),n.createElement(i.F.div,Object.assign({},(0,a.Sh)(b.grid,r.content)),n.createElement(i.F.div,Object.assign({},(0,a.Sh)(b.mainContent,r.contentBody)),e.body),n.createElement("div",{className:b.footerContent},e.footer),n.createElement("div",{className:b.actions},e.subActions,n.createElement("div",{className:b.spacerOne}),e.navigation,n.createElement("div",{className:b.spacerFloat}),e.mainActions))),e.extra))},u="& > * + *",d=.75,p={position:"relative"},m={padding:`${s.u.rem(1)} ${s.u.rem(.5)} ${s.u.rem(d)} ${s.u.rem(1)}`},h={padding:`0 ${s.u.rem(.5)} 0 ${s.u.rem(1)}`,$nest:{[u]:{marginTop:s.u.rem(d)}}},g={padding:`0 ${s.u.rem(.5)} 0 ${s.u.rem(1)}`,$nest:{[u]:{marginTop:s.u.rem(d)}}},f={display:"flex",marginLeft:s.u.rem(.5),justifyContent:"space-between",$nest:{"& > *":{flexShrink:0}}},y={width:s.u.rem(1),flexShrink:1},v={$nest:{[u]:{marginTop:s.u.rem(d)}}},b=Object.assign(Object.assign({},s.u.stylesheet({mainContent:[h],footerContent:[g],actions:[f],spacerOne:[y],spacerFloat:[{flex:1}],grid:[v]})),{fullCard:s.u.joinClasses([l.g.fullCardSelector,s.u.style(p)]),wrapper:s.u.joinClasses([l.g.fullCardSelector,s.u.style(p,m)])})},86531:(e,t,r)=>{"use strict";r.d(t,{PS:()=>nt,mQ:()=>tt,o:()=>Qe,jt:()=>et,UK:()=>pt,Kg:()=>Fe,dk:()=>Re,U4:()=>Me,lJ:()=>We,hl:()=>Ze,__:()=>Xe,M9:()=>it,ko:()=>Pe,hT:()=>ze,Eq:()=>gt,oE:()=>ht,g8:()=>mt,q4:()=>He,Dx:()=>Ye,jg:()=>Ve,Ot:()=>qe,Nm:()=>je,LM:()=>ft,Gq:()=>yt,IH:()=>vt});var n,i=r(27378),a=r(40327),s=r(97329),o=r(12187),l=r(5739),c=r(6322),u=r(84966),d=r(8125),p=r(83078),m=r(18208),h=r(5114),g=r(90351),f=r(81531),y=r(63969),v=r(24588),b=r(40219),w=r(71284),C=r(30763),S=r(40018),I=r(17594),k=r(26027),x=r(91549),A=r(15646),E=r(77610),T=r(4890);!function(e){let t;!function(e){e.Step1="step1",e.Step2="step2",e.Step3="step3",e.Step4="step4",e.Step5="step5",e.Step6="step6",e.Step7="step7",e.Step8="step8",e.Step9="step9",e.Step10="step10",e.Step11="step11",e.Step12="step12",e.Step13="step13",e.Step14="step14",e.Step15="step15",e.Step16="step16",e.DocumentTitle="documentTitle"}(t=e.StepId||(e.StepId={})),e.isValid=function(e){return!(e===t.Step2||e===t.Step3||e===t.Step5||e===t.Step6||e===t.Step7)}}(n||(n={}));var _=r(8313),L=r(34685);const R=y.u.keyframes({from:{backgroundPosition:"0 0"},to:{backgroundPosition:`0 ${y.u.px(5096)}`}}),P={width:56,height:56,backgroundImage:`url(${L.yr}ai.png)`,animation:`${R} ${y.u.seconds(1)} steps(91) ${y.u.seconds(0)} reverse infinite`},O=Object.assign(Object.assign({},P),{transform:"scale(.5)"}),M=Object.assign(Object.assign({},P),{transform:"scale(.8)"}),F=y.u.style(P),N=y.u.style(O),D=y.u.style(M),$=({size:e="large"})=>i.createElement("div",Object.assign({},(0,o.Sh)("large"===e?F:void 0,"medium"===e?D:void 0,"small"===e?N:void 0)));var U=r(29847),B=r(62310),j=r(7046),W=r(24811),H=r(95286),G=r(29245),z=r(94793),Y=r(50790),V=r(63847),q=r(42329),X=r(16951),Z=r(97528),J=r(3656),K=r(85255),Q=r(60797),ee=r(26653),te=r(28706),re=r(66310),ne=r(49708),ie=r(2834),ae=r(95093),se=r(17343),oe=r(40151),le=r(77176),ce=r(50224),ue=r(28584),de=r(74754),pe=r(66346),me=r(26662),he=r(14532);const ge=({examples:e,layoutDensity:t})=>i.createElement(J.ZT,{nodeType:"table",styleType:J.ZT.Type.Base,className:Ae.wrapper},e.map(((e,r)=>i.createElement("tbody",{key:r,className:Ae.group},e.map((({text:e,title:r,color:n,hasItalic:s},o)=>i.createElement("tr",{key:o,className:(0,a.pipe)(t,T.j.Density.matchL((()=>Ae.item),(()=>Ae.itemCompact),(()=>Ae.itemMinimal)))},(0,a.pipe)(r,h.map((e=>i.createElement("td",{className:he.J.colorMatch(n)(Ae)},(e=>e.split("/").reduce(((e,t,r)=>(0!==r&&e.push(i.createElement("br",{key:r})),e.push(t),e)),[]))(e)))),h.toNullable),i.createElement("td",Object.assign({colSpan:h.isNone(r)?2:void 0,className:s?Ae.content:Ae.contentItalic},te.yG(e)))))))))),fe={$nest:{"&:not(:last-child):after":{display:"block",height:y.u.rem(1.75),content:"''"}}},ye={$nest:{"&:not(:last-child)":{borderBottom:`${y.u.rem(.5)} solid transparent`}}},ve={display:"flex",flexDirection:"column",lineHeight:y.u.rem(1.3125)},be={padding:0,verticalAlign:"top",lineHeight:y.u.rem(1.25)},we={paddingRight:y.u.rem(2),verticalAlign:"top",whiteSpace:"nowrap"},Ce={color:g.Il.CoreNeutral50,fontFeatureSettings:`${b.g_}, ${b.xL}`},Se={color:g.Il.CoreRed50},Ie={color:g.Il.CoreGreen60},ke={color:g.Il.CoreNeutral90},xe={color:g.Il.CoreNeutral90},Ae=y.u.stylesheet({wrapper:[{borderCollapse:"collapse",userSelect:"initial"}],group:[fe],item:[ye],itemCompact:[ye,{display:"flex",flexDirection:"column"}],itemMinimal:[ye,ve],baseBlock:[be],title:[be,we],content:[be,Ce],contentItalic:[be,Ce,{fontStyle:"italic"}],red:[be,we,Se],green:[be,we,Ie],yellow:[be,we,ke],fallback:[be,we,xe]});var Ee=r(98210);const Te=s.default||s,_e=(0,d.HP)(f.C8.Logging.getLogger);var Le;!function(e){e.actionRegex=/^#([\w\d_-]+)$/,e.parse=t=>(0,a.pipe)(h.fromNullable(t.match(e.actionRegex)),h.chain((e=>{switch(e[1]){case"set-goals":return h.some(A.lY.Type.openSetGoals);default:return h.none}})))}(Le||(Le={}));const Re=({description:e,actions:t,layoutDensity:r,className:n})=>{const s=i.useContext(C.m.Context),l=i.useContext(Z.G.Context),{ref:c,onMount:u}=K.P.useElWatcher();K.P.useSubscriptionTo(c.pipe(Q.oA,re.w((e=>Array.from(e.getElementsByTagName("a")).reduce(((e,r)=>{const n=ne.R(r,"click").pipe(ie.b((e=>e.preventDefault())));return(0,a.pipe)(h.fromNullable(r.getAttribute("href")),h.chain(Le.parse),h.fold((()=>(_e("Description").error("Invalid action",r),e.pipe(ae.T(n)))),(i=>e.pipe(ae.T(l.getTooltipObservable(r,s.card.actionDescription[i],"auto",h.none),n.pipe(se.h({type:i}),ie.b(t)))))))}),oe.E)))));const d=(0,a.pipe)(r,T.j.Density.matchOrDefault(T.j.Density.minimal)((()=>nr.minimalDescription),(()=>nr.description)));return i.createElement(J.XY,Object.assign({mount:u},(0,o.Sh)(d,n),de.y.renderToHtml(e,Le.actionRegex)))},Pe=({card:e,isChecking:t})=>S.bZ.isRated(e.activeAlert)?i.createElement(W.B,{value:k.X.isCardPresuccess(e.visualState)?ee.g.MAX:e.meta.percentile,initValue:k.X.isCardPresuccess(e.visualState)?e.meta.percentile:ee.g.MIN,isLoading:t}):null,Oe=({card:e})=>{const t=(0,W.N)(k.X.isCardPresuccess(e.visualState)?ee.g.MAX:e.meta.percentile,k.X.isCardPresuccess(e.visualState)?e.meta.percentile:ee.g.MIN);return i.createElement(l.F.Fragment,null,t.pipe(le.U(ee.g.prism.reverseGet),le.U((e=>i.createElement(V.P,{percentage:e,colorType:V.P.ColorType.neoBlue,iconSize:V.P.IconSize.extraSmall,theme:{radialProgressBar:nr.circleProgress,radialProgressText:nr.circleText}})))))},Me=({card:e,feedbackActions:t,onClick:r,disabled:n})=>{const a=i.useContext(C.m.Context);return i.createElement(j.zx.Ghost,{name:"ignore",title:a.dismiss,onClick:te.hz((()=>{t.next({type:A.lY.Type.alertIgnore,alertId:e.activeAlert.id,id:e.id,eligibleForDismissSurvey:k.X.isEligibleForDismissSurvey(e)}),r&&r()})),disabled:n},i.createElement(z.JO.Ignore,null))},Fe=({card:e,feedbackActions:t})=>i.createElement(i.Fragment,null,i.createElement(Me,{card:e,feedbackActions:t}),i.createElement(Ue,{activeAlert:e.activeAlert,onMute:(0,a.pipe)(e.muteCategory,h.map((e=>te.hz((()=>t.next({type:A.lY.Type.muteAlertCategory,categoryId:e})))))),onWrong:te.hz(te.hz((()=>t.next({type:A.lY.Type.alertFeedback,alertId:e.activeAlert.id,feedbackType:u.PZ.WRONG_SUGGESTION})))),onOffensive:te.hz(te.hz((()=>t.next({type:A.lY.Type.alertFeedback,alertId:e.activeAlert.id,feedbackType:u.PZ.OFFENSIVE_CONTENT})))),onVisibilityChange:e=>t.next({type:A.lY.Type.moreActionsButtonToggle,mode:e?"open":"closed"})})),Ne=({onClick:e})=>{const t=i.useContext(C.m.Context);return i.createElement(j.zx.Flat,{name:"mute",onClick:e},i.createElement(z.JO.Mute,null),t.card.mute)},De=({onClick:e})=>{const t=i.useContext(C.m.Context);return i.createElement(j.zx.Flat,{name:"incorrect",onClick:e},i.createElement(z.JO.Report,null),t.card.wrong)},$e=({activeAlert:e,onClick:t})=>{const r=i.useContext(C.m.Context);return(0,a.pipe)(e.extraProperties.vox,p.dH((()=>null),i.createElement(j.zx.Flat,{name:"offensive",onClick:t},i.createElement(z.JO.Report,null),r.card.offensive)))},Ue=({activeAlert:e,onMute:t,onWrong:r,onOffensive:n,onVisibilityChange:s})=>{const o=e.getTransform(),l=h.isSome(t);return l||h.isSome(o)?i.createElement(H.L,{label:i.createElement(j.zx.Ghost,{name:"moreActions"},i.createElement(z.T1.MoreVertical,null)),align:"right",theme:{dropdownContainer:nr.dropdownContainer},name:"moreActions",onVisibilityChange:s},(0,a.pipe)(t,h.map((e=>i.createElement(Ne,{onClick:e}))),p.QP),(0,a.pipe)(o,h.map((()=>i.createElement(i.Fragment,null,l&&i.createElement(H.L.Delimiter,null),i.createElement(De,{onClick:r}),i.createElement($e,{activeAlert:e,onClick:n})))),p.QP)):null},Be=({card:e,onClick:t,mode:r="default"})=>{const n=i.useContext(C.m.Context),a=i.useContext(w.a.Context),s=i.useCallback((e=>{a.has(w.a.Flag.onlyTrustedEvents)&&!e.isTrusted||t()}),[]),o=e.renderOptions.features.has(T.j.Features.showAnonymousUserFooters)?{disabled:!0,title:n.card.disabledForAnonymous}:{title:"mini"===r?n.card.addToDict:""};return e.activeAlert.extraProperties.hasAddToDictionary?i.createElement(j.zx.Tertiary,Object.assign({},o,{name:"add-to-dict",onClick:s}),i.createElement(z.JO.Dict,null),n.card.addToDict):null},je=({title:e,checkingInProgress:t,checkingMessage:r,applyMessage:n,onClick:a})=>i.createElement(j.zx.Primary,{key:"update-all",name:"update-all",title:e,className:t.pipe(le.U((0,d.RN)(me.V.updateAllBtnLoading,me.V.updateAllBtn))),disabled:t,children:t.pipe(le.U((0,d.RN)(i.createElement(i.Fragment,{key:"update-all-checking"},m.kC(r),i.createElement(q.$,{size:18,strokeWidth:2,wrapperClassName:me.V.updateBtnSpinner,variation:"white"})),i.createElement(i.Fragment,{key:"update-all-checked"},m.kC(n))))),onClick:te.hz(a)}),We=({card:e})=>(0,a.pipe)(Ke(e.activeAlert,e.renderOptions.layoutDensity),h.map((t=>i.createElement(pe.G3,{key:"card-actions-details",visualState:e.visualState,className:nr.more},t))),h.toNullable),He=({card:e,actions:t})=>Je(e.activeAlert,e.renderOptions.layoutDensity)?i.createElement(pe.Vh,{key:"card-actions-button",mode:"default",actions:t,card:e}):i.createElement(Be,{key:"card-actions-button",card:e,mode:"default",onClick:te.hz((()=>t.next({type:A.lY.Type.alertFeedback,alertId:e.activeAlert.id,feedbackType:u.PZ.ADD_TO_DICTIONARY})))}),Ge=e=>i.createElement(_.TG,{alignment:"bottom",eventType:"onclick",stepId:n.StepId.Step4,title:"Accept a correction",message:"Click on a suggestion to apply it to your text.",dotPosition:{kind:"findFirstButton",position:_.E2.rightTop},themes:{containerWrapperClassName:nr.onboardingNotification}},e.children),ze=({onClick:e,rl:t,layoutDensity:r})=>i.createElement(Ge,null,i.createElement(Ee.zO,{replacementsLabels:t,onClick:e,layoutDensity:r})),Ye=({text:e})=>i.createElement(J.P1,Object.assign({className:nr.title},de.y.renderToHtml(e))),Ve=({text:e})=>i.createElement(J.P1,Object.assign({className:nr.titleMinimal},de.y.renderToHtml(e))),qe=({alert:e})=>i.createElement(J.H4,Object.assign({className:nr.title},de.y.renderToHtml(e.title))),Xe=({alert:e,options:t,children:r,className:n,badge:a})=>i.createElement(ue.oL,Object.assign({activeAlert:e,showCardLabel:t.features.has(T.j.Features.showLabel),premiumAlertLabelHighlight:t.features.has(T.j.Features.showNewPremiumCardLabels)?ue.a0.new:t.features.has(T.j.Features.showPersistentPremiumCardLabels)?ue.a0.persistent:ue.a0.none,layoutDensity:t.layoutDensity},(0,o.Sh)(nr.label,n),{badge:a}),r),Ze=({text:e,layoutDensity:t})=>i.createElement("div",{className:nr.highlightedTextBox},i.createElement(J.XY,{className:(0,a.pipe)(t,T.j.Density.matchOrDefault(T.j.Density.minimal)((()=>nr.minimalHighlightedTextInnerBox),(()=>nr.highlightedTextInnerBox)))},e));function Je(e,t){return!e.extraProperties.hasAddToDictionary&&(!I.$.isSentenceLevelBrandTones(e)&&(!(!h.isSome(e.examples)&&!h.isSome(e.details))||!(t!==T.j.Density.minimal||!h.isSome(e.getTransform())||void 0===e.explanation||null===e.explanation||""===e.explanation)))}const Ke=(e,t)=>{if(!Je(e,t))return p.cS();const r=(0,a.pipe)(t,T.j.Density.matchOrDefault(T.j.Density.minimal)((()=>nr.minimalDescription),(()=>nr.description)));return h.some(i.createElement(i.Fragment,null,(0,a.pipe)(t,T.j.Density.matchOrDefault(T.j.Density.minimal)((()=>h.isNone(e.details)?i.createElement(J.XY,Object.assign({className:r},de.y.renderToHtml(e.explanation,Le.actionRegex))):null),(()=>null))),(0,a.pipe)(e.details,h.map((e=>i.createElement(J.XY,Object.assign({className:r},de.y.renderToHtml(e))))),h.toNullable),(0,a.pipe)(e.examples,h.map((e=>i.createElement(ge,{layoutDensity:t,examples:e}))),h.toNullable)))},Qe=({isChecking:e})=>i.createElement(l.F.Fragment,null,e.pipe(le.U((e=>i.createElement(q.$,{className:e?nr.spinner:nr.spinnerInvisible,variation:"blue",isIdle:!e,size:32,strokeWidth:2}))))),et=e=>{const[t,r]=i.useState(!0);return t?i.createElement(at,{type:e.type,actions:e.actions,onClose:()=>r(!1)}):null},tt=({card:e,actions:t})=>E.C.isSmartPhrasesItem(e)||E.C.isSentenceLevelBrandTonesItem(e)?null:(0,a.pipe)(e.activeAlert.extraProperties.freePremium,p.FX("unlocked"))?i.createElement(ct,null):!I.$.isFree(e.activeAlert)&&e.renderOptions.features.has(T.j.Features.showPremiumTrialFooters)?i.createElement(lt,{actions:t}):e.renderOptions.features.has(T.j.Features.showAnonymousUserFooters)?i.createElement(ot,{actions:t,card:e}):(0,a.pipe)(e.renderOptions.layoutDensity,T.j.Density.matchOrDefault(T.j.Density.cozy)((()=>i.createElement(st,{card:e,actions:t})),(()=>(0,a.pipe)(e.activeAlert.extraProperties.fluencyMessage,h.fold((()=>i.createElement(st,{card:e,actions:t})),(e=>i.createElement(ut,{fluencyLabel:e})))))));function rt(e,t,r){r.next({type:A.lY.Type.cardMatchesNavigationButtonClick,transitionTo:{kind:"anotherAlert",card:t},direction:e})}const nt=({card:e,actions:t})=>{const r=i.useContext(C.m.Context).card.matchesNavigation;return i.createElement(l.F.Fragment,null,(0,a.pipe)(e,le.U((e=>i.createElement("div",{key:e.activeAlert.id,className:nr.bundleNavWrapper},i.createElement(J.XY,{className:nr.bundleTitle},x.R.bundleTitle(e)),i.createElement("div",{className:nr.bundleNavMatchesRow},i.createElement(j.zx.Ghost,{title:0!==e.activeAlertIndex?"Previous suggestion":void 0,className:nr.bundleNavButtonGhost,disabled:0===e.activeAlertIndex,name:"left",onClick:()=>rt("left",e,t)},i.createElement(z.JO.Arrow,{className:nr.bundleNavLeftButtonIcon})),i.createElement(J.ck,{className:nr.bundleNavCount},r.currentMatchPosition(e.activeAlertIndex+1,e.alerts.length)),i.createElement(j.zx.Ghost,{title:e.activeAlertIndex!==e.alerts.length-1?"Next suggestion":void 0,className:nr.bundleNavButtonGhost,disabled:e.activeAlertIndex===e.alerts.length-1,name:"right",onClick:()=>rt("right",e,t)},i.createElement(z.JO.Arrow,{className:nr.bundleNavRightButtonIcon}))))))))},it=({card:e,actions:t,isChecking:r})=>i.createElement(i.Fragment,null,(0,a.pipe)(e.renderOptions.layoutDensity,T.j.Density.matchOrDefault(T.j.Density.minimal)((()=>S.bZ.isRated(e.activeAlert)?i.createElement(i.Fragment,null,i.createElement(Oe,{card:e}),i.createElement(Ve,{text:e.activeAlert.miniCardTitle})):i.createElement(Xe,{alert:e.activeAlert,options:e.renderOptions},i.createElement(Ve,{text:e.activeAlert.miniCardTitle}))),(()=>i.createElement(i.Fragment,null,i.createElement(Xe,{alert:e.activeAlert,options:e.renderOptions}),i.createElement(Ye,{text:e.activeAlert.title}),i.createElement(Pe,{card:e,isChecking:r}))))),i.createElement(Re,{description:e.meta.explanation,actions:t,layoutDensity:e.renderOptions.layoutDensity})),at=e=>{const t=i.useContext(C.m.Context),{title:r,content:n}=t.card.onboarding[e.type];return i.useLayoutEffect((()=>()=>e.actions.next({type:A.lY.Type.onboardingClose,value:e.type}))),i.createElement(Y.DI.AdHoc,{key:"new-notification",title:i.createElement(i.Fragment,null,r,i.createElement(B.C.Regular,{className:nr.newLabel},t.new)),className:nr.newCheckNotification,onClose:e.onClose},n)},st=({actions:e,card:t})=>{const r=i.useContext(C.m.Context);return K.P.useEffectOnDidMount((()=>{t.meta.showMuteQuotedAdvice&&e.next({type:A.lY.Type.muteQuotedAdviceShow})})),t.meta.showMuteQuotedAdvice?i.createElement(dt.Base,{className:Pt},i.createElement("span",null,r.card.muteCitedText(i.createElement("a",{"data-name":"open-preferences-link",onClick:()=>e.next({type:A.lY.Type.openPreferences})},r.documentSettings.editorSettings))),i.createElement(j.zx,{name:"dismiss-mute-quoted-advice",onClick:()=>e.next({type:A.lY.Type.dismissMuteQuotedAdvice})},i.createElement(z.JO.Close,null))):null},ot=({actions:e,card:t})=>{const r=i.useContext(C.m.Context),n=t.activeAlert.extraProperties.hasAddToDictionary?r.anonymousUserAddToDictionarySignInPrompt:r.anonymousUserGenericSignInPrompt;return i.createElement(dt.Base,{className:nr.anonymousUserNotice},n((()=>{e.next({type:A.lY.Type.toSignIn})})))},lt=({actions:e})=>i.createElement(dt.Small,{className:Mt},i.createElement(z.JO.PaidLink,{className:nr.iconWrapper,width:12}),i.useContext(C.m.Context).premiumFreeTrial((()=>{e.next({type:A.lY.Type.premiumTrialFooterCtaClick})}))),ct=()=>{const{beforeIcon:e,afterIcon:t}=i.useContext(C.m.Context).freePremiumAlertFooter;return i.createElement(dt.Small,{className:Nt},e,i.createElement(z.JO.PaidLink,{width:12}),t)},ut=({fluencyLabel:e})=>{const t=i.useContext(C.m.Context).card.fluency,r=Object.keys(c.n5.PrimaryLanguage).filter((e=>e!==c.n5.PrimaryLanguage.Other)).map((e=>e.toLowerCase())),n=e.toLowerCase(),s=(0,a.pipe)(h.fromNullable(r.find((e=>n.includes(e)))),h.map(m.kC),h.getOrElse((()=>"multilingual")),t.cardFooter);return i.createElement(J.x4,{className:nr.fluencyNotice},s,i.createElement(X.u,{title:t.tooltip},i.createElement(z.JO.Info,{width:10,className:nr.fluencyInfo})))};var dt;!function(e){function t(e){return({children:t,className:r})=>i.createElement(e,Object.assign({},(0,o.Sh)(nr.cardFooter,r)),t)}e.Small=t(J.x4),e.Base=t(J.XY)}(dt||(dt={}));const pt=({title:e,children:t})=>i.createElement("div",{className:nr.cardWrapper},i.createElement("div",{className:nr.cardWrapperTitle},e),t),mt=({className:e,title:t,emoji:r,hideBetaBadge:n})=>{const a=i.useContext(C.m.Context);return i.createElement("div",Object.assign({},(0,o.Sh)(nr.smartPhrasesTitle,e)),i.createElement("div",null,i.createElement(G.d,{className:nr.smartPhrasesTitleEmoji},r),t),n?null:i.createElement(B.C.Regular,null,a.beta))},ht=({card:e,actions:t,isLoading:r,transform:n,classes:a})=>{const[s,o]=i.useState(null),[c,u]=i.useState(null),[d,p]=i.useState(200),[m,g]=i.useState(null);i.useEffect((()=>{const e=new Te((e=>{e[0]&&u(e[0].contentRect.height)}));return o(e),()=>e.disconnect()}),[]);const y=i.useCallback((e=>{m&&(null==s||s.unobserve(m)),e&&(g(e),null==s||s.observe(e))}),[m,s]);return i.useEffect((()=>{!e.activeAlert.hideReplacements&&c&&p(c)}),[c]),r?i.createElement("div",{className:nr.smartPhrasesLoadingContainer,style:{height:null!=d?d:void 0}},i.createElement("div",{className:nr.smartPhrasesLoadingContainerInner},i.createElement($,{size:"medium"}))):e.activeAlert.hideReplacements?i.createElement("div",{className:nr.smartPhrasesSuccessLabel},i.createElement(z.JO.SmartPhrases.HeaderCheckmark,{className:nr.smartPhrasesSuccessLabelIcon}),e.activeAlert.phraseAddedTitle):i.createElement("div",{ref:y,className:nr.smartPhrasesReplacementsContainer},i.createElement(Xe,{alert:e.activeAlert,options:e.renderOptions,className:nr.smartPhrasesReplacementsLabel}),i.createElement(l.F.div,{className:a.transformContainer},i.createElement(U.T9,{classes:{rendered:a.renderedReplacement,removing:a.hiddenReplacement},timeout:250,content:n.pipe(le.U(h.fold((()=>(f.C8.Logging.getLogger("SmartPhrasesReplacements").error("No replacements available for SmartPhrases card.",{cardId:e.id}),null)),(r=>{const n=Object.assign(Object.assign({},r),{labels:r.labels.filter(((t,r)=>!e.activeAlert.usedReplacementsIndexes.includes(r))).slice(e.activeAlert.replacementsStartIndex,e.activeAlert.replacementsEndIndex)});return i.createElement(Ee.GP,{replacementsLabels:n,onClick:r=>te.hz((()=>{const n=e.activeAlert.originalReplacementsIndexes.get(r+e.activeAlert.replacementsStartIndex)||r;t.next({type:A.lY.Type.alertApply,alertId:e.activeAlert.id,alternativeIndex:n,cardType:A.lY.getCardType(e)}),t.next({type:A.lY.Type.smartPhrasesApply,alertId:e.activeAlert.id,cardId:e.id,replacementIndex:r+e.activeAlert.replacementsStartIndex,originalReplacementIndex:n})}))})}))))})))},gt=({card:e,actions:t})=>{const r=i.useContext(C.m.Context);return i.createElement(j.zx.Flat,{className:nr.smartPhrasesFooter,name:`smart-phrases-${e.activeAlert.intent}-open-feedback-form`,onClick:()=>t.next({type:A.lY.Type.smartPhrasesOpenFeedbackForm,alertId:e.activeAlert.id,cardId:e.id})},i.createElement("span",null,r.card.smartPhrases.openFeedbackFormQuestion),i.createElement(z.JO.SmartPhrases.OpenFeedbackFormArrow,null))},ft={wordWrap:"break-word",overflowWrap:"break-word",$nest:{"& a":{borderBottom:"1px solid",textDecoration:"none",$nest:{"&:link, &:visited":{color:g.Il.CoreBlue50}}},"& b":{fontStyle:"italic",fontFeatureSettings:`${b.g_}, ${b.xL}`},"& ul":{margin:`${y.u.rem(.75)} 0 0`,padding:0,listStyle:"none"},"& li":{position:"relative",paddingLeft:y.u.rem(1.5),$nest:{"&:before":{position:"absolute",left:0,content:"'\\2022'"}}},"& li + li":{marginTop:y.u.rem(.5)}}},yt={lineHeight:y.u.rem(1.3125)},vt={$nest:{"& i":{color:g.Il.CoreNeutral50},"& > * + *":{marginTop:y.u.rem(.75)}}},bt={fontWeight:"bold",textTransform:"none",$nest:{"&:first-letter":{textTransform:"uppercase"},"& i":{color:v.kl}}},wt={marginTop:y.u.important(0),lineHeight:y.u.rem(1.125)},Ct={fontSize:y.u.rem(g.xv.SubheadingSize),lineHeight:y.u.rem(g.xv.SubheadingLineHeight)},St={width:y.u.rem(2),height:y.u.rem(2)},It={position:"absolute",top:`calc(50% - ${y.u.rem(1)})`,left:`calc(50% - ${y.u.rem(1)})`,width:y.u.rem(2),height:y.u.rem(2),transition:"opacity .2s"},kt={marginLeft:y.u.rem(.5),backgroundColor:g.Il.CoreGreen50,color:g.Il.CoreNeutral0,fontWeight:600},xt={position:"absolute",marginTop:y.u.rem(-8.5),marginLeft:y.u.rem(-2),$nest:{"&:after":{position:"absolute",bottom:y.u.rem(-.525),left:y.u.rem(.7),borderTop:`${y.u.rem(.625)} solid ${g.Il.BackgroundNotification}`,borderRight:`${y.u.rem(.5)} solid transparent`,borderLeft:`${y.u.rem(.5)} solid transparent`,content:"' '"}}},At={background:"linear-gradient(269.88deg, rgba(228, 244, 247, .6) .02%, rgba(215, 248, 240, .6) 50.81%, rgba(202, 227, 250, .6) 99.98%)"},Et={position:"absolute",top:y.u.rem(.75),left:y.u.rem(.4)},Tt={color:g.Il.CoreNeutral90,$nest:{"& a":{fontWeight:800,color:g.Il.CoreBlue50,$nest:{"&:link, &:visited":{color:g.Il.CoreBlue50},"&:hover":{borderBottom:`1px solid ${g.Il.CoreBlue40}`,color:g.Il.CoreBlue40}}}}},_t={display:"flex",borderRadius:`${b.LB} ${b.LB} ${y.u.rem(b.Jr)} ${y.u.rem(b.Jr)}`,color:g.Il.CoreNeutral50,padding:`${y.u.rem(.5)} ${y.u.rem(.75)} ${y.u.rem(.5)} ${y.u.rem(1)}`,fontSize:y.u.rem(.6875),lineHeight:y.u.rem(1.125)},Lt={padding:`0 ${y.u.rem(.6)}`,minWidth:y.u.rem(.625),minHeight:y.u.rem(.625)},Rt="muteQuotedAdvice",Pt=y.u.joinClasses([Rt,y.u.style({$nest:{"& a":{borderBottom:`1px solid ${g.Il.CoreBlue50}`,color:g.Il.CoreBlue50,$nest:{"&:link, &:visited":{color:g.Il.CoreBlue50},"&:hover":{borderBottom:`1px solid ${g.Il.CoreBlue40}`,color:g.Il.CoreBlue40}}},"& i:hover":{strokeWidth:y.u.px(2)}}})]),Ot="premiumFreeTrial",Mt=y.u.joinClasses([Ot,y.u.style({$nest:{"& svg":{fill:g.Il.CoreYellow80},"& a":{fontWeight:800,color:g.Il.CoreYellow70,$nest:{"&:link, &:visited":{color:g.Il.CoreYellow80},"&:hover":{borderBottom:`1px solid ${g.Il.CoreYellow60}`,color:g.Il.CoreYellow60}}}}})]),Ft="freePremiumAlertFooter",Nt=y.u.joinClasses([Ft,y.u.style({$nest:{"& svg":{margin:`0 ${y.u.rem(.25)}`,fill:g.Il.CoreYellow80}}})]),Dt={display:"block",boxSizing:"border-box",padding:`${y.u.rem(1)} ${y.u.rem(1)} ${y.u.rem(1)} ${y.u.rem(1.5)}`,width:y.u.percent(100),borderRadius:`${b.LB} ${b.LB} ${y.u.rem(b.Jr)} ${y.u.rem(b.Jr)}`,$nest:{"& a":{cursor:"pointer",transition:"color .2s"},"&.muteQuotedAdvice":{display:"flex",padding:`${y.u.rem(1)} ${y.u.rem(1)} ${y.u.rem(1)} ${y.u.rem(2)}`,background:g.Il.CoreNeutral10,color:g.Il.CoreNeutral90,justifyContent:"space-between",alignItems:"center"},"&.premiumFreeTrial":{padding:`${y.u.rem(1)} ${y.u.rem(1)} ${y.u.rem(1)} ${y.u.rem(2)}`,position:"relative",background:g.Il.CoreYellow20,color:g.Il.CoreNeutral90},"&.freePremiumAlertFooter":{display:"flex",justifyContent:"center",alignItems:"center",padding:`${y.u.rem(.5)}`,background:g.Il.CoreYellow20,color:g.Il.CoreYellow80}}},$t={position:"absolute",top:y.u.rem(.8),left:y.u.rem(.5),minWidth:y.u.rem(1),minHeight:y.u.rem(1)},Ut={fontWeight:"bold",fontSize:y.u.rem(.875),lineHeight:y.u.rem(1.125),flex:2},Bt={padding:`${y.u.rem(.625)} 0 ${y.u.rem(.1875)} ${y.u.rem(.5)}`,marginBottom:y.u.rem(.25),display:"flex",justifyContent:"space-between",alignItems:"center"},jt={fontSize:y.u.rem(.75),lineHeight:y.u.rem(1.125),color:g.Il.CoreNeutral90},Wt={display:"flex",justifyContent:"flex-end",alignItems:"center",height:y.u.rem(1.5),$nest:{"& > * + *":{marginLeft:y.u.rem(.25)},"& > *":{borderRadius:y.u.rem(b.fx)}}},Ht={height:y.u.rem(2),minHeight:y.u.rem(2),width:y.u.rem(2),fill:g.Il.CoreNeutral90,$nest:{"&:not([data-disabled='true'])[data-hovered='true']":{cursor:"pointer",fill:g.Il.CoreBlue50},"&[data-disabled='true']":{fill:g.Il.CoreNeutral30}}},Gt={borderRadius:y.u.rem(.75),background:g.Il.CoreNeutral20,margin:`${y.u.rem(-.25)} ${y.u.rem(-.25)}`,padding:`${y.u.rem(.25)} ${y.u.rem(.25)}`,$nest:{[`& .${ce.g.cozyCardContainerSelector}`]:{margin:0,boxShadow:"none"},[`& .${ce.g.fullCardSelector}`]:{padding:`${y.u.rem(.75)} ${y.u.rem(.5)} ${y.u.rem(.5)} ${y.u.rem(1)}`},"& [role=dropdown-list]":{transform:`translateY(${y.u.rem(-.5)})`}}},zt={paddingTop:y.u.rem(.25),paddingBottom:y.u.rem(.5),paddingLeft:y.u.rem(.5),paddingRight:y.u.rem(.5),fontWeight:"bold",fontSize:y.u.rem(.875),lineHeight:y.u.rem(1.125)},Yt={marginRight:y.u.rem(.5)},Vt={display:"flex",alignItems:"center",justifyContent:"space-between",background:g.Il.CoreNeutral10,borderRadius:`${b.LB} ${b.LB} ${y.u.rem(.5)} ${y.u.rem(.5)}`,padding:`${y.u.rem(.6875)} ${y.u.rem(.5)} ${y.u.rem(.6875)} ${y.u.rem(1)}`,color:g.Il.CoreNeutral50,fontSize:y.u.rem(.6875),lineHeight:y.u.rem(1.125),height:y.u.rem(2.5),boxSizing:"border-box"},qt={fontSize:y.u.rem(.75),lineHeight:y.u.rem(1.125),color:g.Il.CoreNeutral90,display:"flex",alignItems:"center",marginLeft:y.u.rem(-1.5)},Xt={marginRight:y.u.rem(.5)},Zt={display:"flex",flexDirection:"column",justifyContent:"center",animation:`${y.u.keyframes({from:{opacity:0,transform:"scale(0)"}})} .3s ease-in-out`},Jt={marginBottom:y.u.rem(.75)},Kt={animation:`${y.u.keyframes({from:{opacity:0}})} .3s ease-in-out`};function Qt(e,t){return{display:["block","-webkit-box"],maxHeight:y.u.rem(e*t),overflow:"hidden",overflowWrap:"anywhere",whiteSpace:"pre-wrap",textOverflow:"ellipsis","-webkit-line-clamp":t,WebkitBoxOrient:"vertical"}}const er=Object.assign(Object.assign({},Qt(1.5,3)),{lineHeight:y.u.rem(1.5)}),tr=Object.assign(Object.assign({},Qt(1.3125,3)),{lineHeight:y.u.rem(1.3125)}),rr={padding:y.u.rem(.5),borderRadius:y.u.rem(b.fx),background:g.Il.CoreNeutral10,color:g.Il.CoreNeutral90,fontWeight:400,fontStyle:"italic",fontFeatureSettings:`${b.g_}, ${b.xL}`},nr=y.u.stylesheet({description:[ft],minimalDescription:[ft,yt],more:[vt],onboardingNotification:[{display:"block"}],title:[bt],titleMinimal:[bt,wt],label:[Ct],dropdownContainer:[St],spinner:[It],spinnerInvisible:[It,{opacity:0,pointerEvents:"none"}],newLabel:[kt],newCheckNotification:[xt],baseNotice:[At],iconWrapper:[Et],anonymousUserNotice:[At,Tt],fluencyNotice:[At,_t],fluencyInfo:[Lt],cardFooter:[Dt],circleProgress:[$t],circleText:[{display:"none"}],bundleTitle:[Ut],bundleNavWrapper:[Bt],bundleNavCount:[jt],bundleNavMatchesRow:[Wt],bundleNavButtonGhost:[{$nest:{"&:not([data-disabled='true'])[data-hovered='true']":{background:"rgba(198, 203, 222, .5)"}}}],bundleNavButton:[Ht],bundleNavLeftButtonIcon:[Ht,{transform:"rotate(90deg)"}],bundleNavRightButtonIcon:[Ht,{transform:"rotate(270deg)"}],cardWrapper:[Gt],cardWrapperTitle:[zt],smartPhrasesTitle:[{display:"flex",justifyContent:"space-between"}],smartPhrasesTitleEmoji:[Yt],smartPhrasesFooter:[Vt],smartPhrasesSuccessLabel:[qt],smartPhrasesSuccessLabelIcon:[Xt],smartPhrasesLoadingContainer:[Zt],smartPhrasesLoadingContainerInner:[{width:"100%",display:"flex",justifyContent:"center"}],smartPhrasesReplacementsLabel:[Jt],smartPhrasesReplacementsContainer:[Kt],highlightedTextBox:[rr],highlightedTextInnerBox:[er],minimalHighlightedTextInnerBox:[tr]})},28522:(e,t,r)=>{"use strict";r.d(t,{J:()=>X});var n=r(27378),i=r(57050),a=r(40327),s=r(38983),o=r(5739),l=r(5114),c=r(8125),u=r(90351),d=r(81531),p=r(63969),m=r(30763),h=r(26027),g=r(15646),f=r(77610),y=r(4890),v=r(29847),b=r(62310),w=r(7046),C=r(77797),S=r(94793),I=r(3656),k=r(28706),x=r(85255),A=r(55935),E=r(2834),T=r(57091),_=r(77176),L=r(32952),R=r(24209),P=r(41398),O=r(85985),M=r(95300),F=r(13444),N=r(93508),D=r(1883),$=r(61221),U=r(86531),B=r(98210),j=r(19025);const W=({card:e,actions:t,isChecking:r,isCheckingGlobal:a})=>{const s=n.useContext(m.m.Context);return n.createElement(Y,{card:e,actions:t,isChecking:r,isCheckingGlobal:a,cardBody:(0,i.a9)(n.createElement(U.M9,{card:e,actions:t,isChecking:r})),cardFooter:r=>n.createElement(n.Fragment,null,n.createElement(U.lJ,{card:e}),n.createElement("div",{className:ie.fullSentenceCardFooterBtns},n.createElement(U.Nm,{title:s.card.todoAction(e.activeAlert.todoAction),applyMessage:e.activeAlert.todoAction,checkingMessage:e.activeAlert.todoAction,checkingInProgress:r,onClick:k.hz((()=>{t.next({type:g.lY.Type.alertApply,alertId:e.activeAlert.id,alternativeIndex:0,cardType:g.lY.getCardType(e)})}))})))})},H=({card:e,actions:t,isChecking:r,isCheckingGlobal:c,transform:u})=>{const p=n.useContext(m.m.Context),h=s.h.create(!0);return x.P.useSubscriptionTo((0,a.pipe)(h,A.T(1),E.b((e=>t.next({type:g.lY.Type.fullSentenceHighlightChangesToggle,showChanges:e}))))),n.createElement(Y,{card:e,actions:t,isChecking:r,isCheckingGlobal:c,cardBody:(0,i.a9)(n.createElement(o.F.Fragment,null,n.createElement(U.__,{alert:e.activeAlert,options:e.renderOptions,badge:n.createElement(b.C.Regular,null,p.beta)}),n.createElement(Z,{isNew:e.renderOptions.isNew,actions:t}),(0,a.pipe)(e.renderOptions.layoutDensity,y.j.Density.matchOrDefault(y.j.Density.minimal)((()=>null),(()=>n.createElement(U.dk,{description:e.meta.explanation,actions:t,layoutDensity:e.renderOptions.layoutDensity})))),n.createElement(v.T9,{classes:{rendered:ie.replacement,removing:ie.replacementHidden},timeout:250,content:h.pipe(T.a(u,((t,r)=>(0,a.pipe)(r,l.fold((()=>(d.C8.Logging.getLogger("WithTransformsCard").error("Transforms are unavailable in full-sentence card",{cardId:e.id}),null)),(r=>n.createElement(B.n4,{replacements:r,showDiff:t,layoutDensity:e.renderOptions.layoutDensity})))))))}),n.createElement(U.ko,{card:e,isChecking:r}))),cardFooter:r=>n.createElement(n.Fragment,null,n.createElement(U.lJ,{card:e}),n.createElement(o.F.div,{className:ie.fullSentenceCardFooterBtns},n.createElement(U.Nm,{title:u.pipe(_.U(l.fold((()=>""),(e=>p.card.todoAction(e.tooltipText))))),applyMessage:e.activeAlert.todoAction,checkingMessage:e.activeAlert.todoAction,checkingInProgress:r,onClick:k.hz((()=>{t.next({type:g.lY.Type.alertApply,alertId:e.activeAlert.id,alternativeIndex:0,cardType:g.lY.getCardType(e)})}))}),n.createElement(C.Ys,{className:ie.fullSentenceCardCheckbox,checked:h,name:"set-goals"},p.card.showChangesToggle)))})},G=({card:e,actions:t,isChecking:r,isCheckingGlobal:s,transform:u})=>{const p=n.useContext(m.m.Context),h=(0,a.pipe)(e.userInput,l.getOrElse((0,i.a9)("")));return n.createElement(Y,{card:e,actions:t,isChecking:r,isCheckingGlobal:s,cardBody:i=>n.createElement(n.Fragment,{key:"content"},n.createElement(U.__,{alert:e.activeAlert,options:e.renderOptions}),n.createElement(Z,{isNew:e.renderOptions.isNew,actions:t}),n.createElement(o.F.div,{className:i.pipe(_.U((0,c.RN)(ie.transformContainerInvisible,ie.transformContainer)))},n.createElement(v.T9,{classes:{rendered:ie.replacement,removing:ie.replacementHidden},timeout:250,content:u.pipe(_.U(l.fold((()=>(d.C8.Logging.getLogger("WithTransformsCard").error("Transforms are unavailable",{cardId:e.id}),null)),(r=>n.createElement(B.$s,{key:"label",gapValue:h,replacements:r,layoutDensity:e.renderOptions.layoutDensity,onFocus:()=>t.next({type:g.lY.Type.focusUserInput,id:e.id,kind:"focus"}),onChange:r=>t.next({type:g.lY.Type.changeUserInput,alertId:e.activeAlert.id,cardId:e.id,userInput:r}),onApply:k.hz((()=>t.next({type:g.lY.Type.alertApply,alertId:e.activeAlert.id,alternativeIndex:0,cardType:g.lY.getCardType(e)})))})))))})),n.createElement(I.Xk,{className:i.pipe(_.U((0,c.RN)(ie.transformHint,ie.transformHintInvisible)))},p.card.updatingSuggestion),n.createElement(U.ko,{card:e,isChecking:r}),(0,a.pipe)(e.renderOptions.layoutDensity,y.j.Density.matchOrDefault(y.j.Density.minimal)((()=>null),(()=>n.createElement(U.dk,{description:e.meta.explanation,actions:t,layoutDensity:e.renderOptions.layoutDensity}))))),cardFooter:(0,i.a9)(n.createElement(U.lJ,{card:e}))})},z=({card:e,actions:t,isChecking:r,isCheckingGlobal:s,transform:u})=>{const p=n.useContext(m.m.Context);return n.createElement(Y,{card:e,actions:t,isChecking:r,isCheckingGlobal:s,cardBody:i=>n.createElement(n.Fragment,null,n.createElement(U.__,{alert:e.activeAlert,options:e.renderOptions}),n.createElement(o.F.div,{className:i.pipe(_.U((0,c.RN)(ie.transformContainerInvisible,ie.transformContainer)))},n.createElement(v.T9,{classes:{rendered:ie.replacement,removing:ie.replacementHidden},timeout:250,content:u.pipe(_.U(l.fold((()=>(d.C8.Logging.getLogger("WithTransformsCard").error("Transforms are unavailable",{cardId:e.id}),null)),(r=>n.createElement(U.hT,{rl:r,onClick:r=>k.hz((()=>{t.next({type:g.lY.Type.alertApply,alertId:e.activeAlert.id,alternativeIndex:r,cardType:g.lY.getCardType(e)})})),layoutDensity:e.renderOptions.layoutDensity})))))})),n.createElement(I.Xk,{className:i.pipe(_.U((0,c.RN)(ie.transformHint,ie.transformHintInvisible)))},p.card.updatingSuggestion),n.createElement(U.ko,{card:e,isChecking:r}),(0,a.pipe)(e.renderOptions.layoutDensity,y.j.Density.matchOrDefault(y.j.Density.minimal)((()=>null),(()=>n.createElement(U.dk,{description:e.meta.explanation,actions:t,layoutDensity:e.renderOptions.layoutDensity}))))),cardFooter:(0,i.a9)(n.createElement(U.lJ,{card:e}))})},Y=({card:e,actions:t,isChecking:r,isCheckingGlobal:i,cardTheme:a,cardBody:o,cardFooter:l,mainActions:u,subActions:d,cardExtra:p})=>{const{transformHidden:m,onMouseOver:h,transformHiddenObservable:f}=n.useMemo((()=>{const e=s.h.create(!1),t=new L.xQ,n=R.T(t.pipe(P.M(r),O.h((([e,t])=>t)),E.b((()=>e.set(!0)))),r.pipe(A.T(1),O.h((e=>!e)),E.b((()=>e.set(!1)))));return{transformHidden:e,onMouseOver:t,transformHiddenObservable:n}}),[]);return x.P.useSubscriptionTo(f),n.createElement(D.Z,{visualState:e.visualState,onFocus:()=>t.next({type:g.lY.Type.alertCardShow,cardType:g.lY.getCardType(e)}),onMouseOver:()=>{t.next({type:g.lY.Type.hover,kind:"hover",id:e.id}),h.next()},onMouseOut:()=>t.next({type:g.lY.Type.hover,kind:"unhover",id:e.id}),theme:Object.assign(Object.assign({content:i.pipe(_.U((0,c.RN)(ie.loadingWrapperInvisible,ie.loadingWrapper)))},(0,j.G)(e.renderOptions)),a),extra:n.createElement(n.Fragment,null,n.createElement(U.o,{isChecking:i}),p?p():n.createElement(U.mQ,{card:e,actions:t})),body:o(m),mainActions:u?u():n.createElement(U.Kg,{card:e,feedbackActions:t}),footer:l?l(m):void 0,subActions:d?d():n.createElement(U.q4,{card:e,actions:t})})},V=({card:e,actions:t,isChecking:r})=>n.createElement(D.Z,{visualState:e.visualState,onFocus:()=>t.next({type:g.lY.Type.alertCardShow,cardType:g.lY.getCardType(e)}),theme:(0,j.G)(e.renderOptions),body:n.createElement(U.M9,{card:e,actions:t,isChecking:r}),mainActions:n.createElement(U.Kg,{card:e,feedbackActions:t}),footer:n.createElement(U.lJ,{card:e}),subActions:n.createElement(U.q4,{card:e,actions:t}),extra:n.createElement(U.mQ,{card:e,actions:t})}),q=({card:e,actions:t,isChecking:r,isCheckingGlobal:a,transform:s})=>{const l=n.useContext(m.m.Context),u=n.useMemo((()=>new M.X(!0)),[]);return n.useEffect((()=>{"focused"===e.visualState.transition.type&&t.next({type:g.lY.Type.smartPhrasesShowFullCard,alertId:e.activeAlert.id})}),[t,e.activeAlert.id,e.visualState.transition.type]),x.P.useSubscriptionTo(u.pipe(O.h(Boolean),F.g(1e3),E.b((()=>u.next(!1))))),n.createElement(U.UK,{title:n.createElement(U.g8,{title:e.activeAlert.title,emoji:e.activeAlert.emoji})},n.createElement(o.F.Fragment,null,u.pipe(_.U((o=>n.createElement(Y,{card:e,actions:t,isChecking:r,isCheckingGlobal:a,cardTheme:o?{contentBody:ie.smartPhrasesCardBodyLoading}:void 0,cardBody:r=>n.createElement(U.oE,{card:e,actions:t,isLoading:o,transform:s,classes:{transformContainer:r.pipe(_.U((0,c.RN)(ie.transformContainerInvisible,ie.transformContainer))),renderedReplacement:ie.replacement,hiddenReplacement:ie.replacementHidden}}),mainActions:(0,i.a9)(e.activeAlert.usedReplacementsIndexes.length>0?n.createElement(w.zx.Ghost,{name:`smart-phrases-${e.activeAlert.intent}-done`,onClick:k.hz((()=>t.next({type:g.lY.Type.smartPhrasesDone,alertId:e.activeAlert.id,source:"user"}))),disabled:o},l.card.smartPhrases.done):n.createElement(U.U4,{card:e,feedbackActions:t,onClick:()=>t.next({type:g.lY.Type.smartPhrasesDismiss,alertId:e.activeAlert.id}),disabled:o})),subActions:()=>e.activeAlert.replacementsLength>5||e.activeAlert.hideReplacements?n.createElement(w.zx.Tertiary,{name:`smart-phrases-${e.activeAlert.intent}-show-more-ideas`,onClick:()=>{t.next({type:g.lY.Type.smartPhrasesShowMoreIdeas,cardId:e.id,alertId:e.activeAlert.id}),u.next(!0)},disabled:o},n.createElement(S.JO.SmartPhrases.ShowMore,null),l.card.smartPhrases.showMoreIdeas):null,cardExtra:()=>o?null:n.createElement(U.Eq,{card:e,actions:t})}))))))},X=({card:e,actions:t,isChecking:r,isCheckingGlobal:i,transform:a})=>f.C.isSmartPhrasesItem(e)?n.createElement(q,{card:e,actions:t,isChecking:r,isCheckingGlobal:i,transform:a}):f.C.isSentenceLevelBrandTonesItem(e)?n.createElement($.y.Full,{card:e,actions:t}):h.X.hasTransform(e)?h.X.hasFullSentenceTransform(e)?n.createElement(H,{card:e,actions:t,isChecking:r,isCheckingGlobal:i,transform:a}):h.X.hasOneGapTransform(e)?n.createElement(G,{card:e,actions:t,isChecking:r,isCheckingGlobal:i,transform:a}):n.createElement(z,{card:e,actions:t,isChecking:r,isCheckingGlobal:i,transform:a}):h.X.isSimple(e)?n.createElement(W,{card:e,actions:t,isChecking:r,isCheckingGlobal:i}):n.createElement(V,{card:e,actions:t,isChecking:r}),Z=e=>n.createElement(o.F.Fragment,null,e.isNew.pipe(_.U(l.fold(i.gn,(t=>n.createElement(U.jt,{type:t,actions:e.actions,key:"new-notification"})))),N.O(null))),J=.25,K={opacity:0,pointerEvents:"none"},Q={transition:`opacity ${p.u.seconds(J)}`},ee={transition:`opacity ${p.u.seconds(J)}`,transitionDelay:p.u.seconds(J)},te={position:"absolute",top:p.u.rem(2),color:u.Il.CoreNeutral40,lineHeight:p.u.rem(2),transition:`opacity ${p.u.seconds(J)}`,transitionDelay:p.u.seconds(J)},re={transition:`opacity ${p.u.seconds(J)}`},ne={fontSize:p.u.rem(u.xv.BodySize),lineHeight:p.u.rem(2.0625)},ie=Object.assign({},p.u.stylesheet({invisible:[K],loadingWrapper:[Q],transformContainer:[ee],loadingWrapperInvisible:[Q,K],transformContainerInvisible:[ee,K,{transitionDelay:"initial"}],transformHint:[te],transformHintInvisible:[te,K,{transitionDelay:"initial"}],replacement:[re],replacementHidden:[re,{opacity:0}],fullSentenceCardFooterBtns:[{display:"flex",flexWrap:"wrap"}],fullSentenceCardCheckbox:[ne],smartPhrasesCardBodyLoading:[{padding:0}]}))},19157:(e,t,r)=>{"use strict";r.d(t,{P:()=>N});var n=r(27378),i=r(40327),a=r(12187),s=r(5739),o=r(5114),l=r(83078),c=r(90351),u=r(63969),d=r(40219),p=r(30763),m=r(66896),h=r(40018),g=r(17594),f=r(26027),y=r(91549),v=r(15646),b=r(77610),w=r(62310),C=r(7046),S=r(29245),I=r(94793),k=r(3656),x=r(28706),A=r(77176),E=r(50225),T=r(32338),_=r(50224),L=r(28584),R=r(86531);const P=({theme:e={},action:t,hasEmoji:r})=>n.createElement("div",Object.assign({},(0,a.Sh)(e.wrapper,se.ctaText)),r?n.createElement(S.d,{emojiClassName:(0,a.Sh)(se.cardLogo,e.logo).className},t):t),O=({vox:e,theme:t={}})=>n.createElement(n.Fragment,null,(0,i.pipe)(e.logoUrl,o.map((e=>n.createElement(L.Im,Object.assign({},(0,a.Sh)(se.cardLogo,t.logo),{logoUrl:e})))),o.toNullable),n.createElement(L.$x,Object.assign({vox:e},(0,a.Sh)(se.cta,t.label),{isMinimalCard:!1}))),M=e=>[m.R.outcomeTypeMatch(e.lensType)({correctness:_.m.dotCorrectness,clarity:_.m.dotClarity,premium:_.m.dotAdvanced,engagement:_.m.dotEngagement,delivery:_.m.dotDelivery,vox:_.m.dotVox}),se.cta],F=()=>{const e=n.useContext(p.m.Context);return n.createElement(w.C.Regular,{className:se.newLabel},e.new)};var N;!function(e){e.SmartPhrases=({card:e,actions:t,useBundleContainer:r=!1,twoLined:i=!1})=>{const s=n.useContext(p.m.Context);return n.useEffect((()=>{"added"!==e.visualState.transition.type&&"rendered"!==e.visualState.transition.type||(t.next({type:v.lY.Type.smartPhrasesShowMiniCard,alertId:e.activeAlert.id}),e.activeAlert.hideReplacements&&t.next({type:v.lY.Type.smartPhrasesDone,alertId:e.activeAlert.id,source:"auto"}))}),[t,e.activeAlert.hideReplacements,e.activeAlert.id,e.visualState.transition.type]),n.createElement(E.b.Mini,Object.assign({},(0,a.Sh)(i?Y.wrapper:ee.wrapper,se.smartPhrasesWrapper,r?ee.bundleContainer:null),{actions:t,cardId:e.id,getActiveAlert:()=>e.activeAlert,hideActivateButton:!0}),n.createElement("div",{className:se.smartPhrasesContainer},n.createElement(R.g8,{className:se.smartPhrasesTitle,title:e.activeAlert.title,emoji:e.activeAlert.emoji,hideBetaBadge:!0}),n.createElement("div",{className:se.smartPhrasesIntentDetectedFeedback},n.createElement(C.zx.Ghost,{title:s.card.smartPhrases.intentDetectedFeedbackYes,name:`smart-phrases-${e.activeAlert.intent}-intent-detected-feedback-yes`,active:e.activeAlert.intentDetectedFeedback===h.cm.SMART_PHRASES_INTENT_DETECTED_ACCURATE,disabled:Boolean(e.activeAlert.intentDetectedFeedback),onClick:r=>{var n,i;t.next({type:v.lY.Type.smartPhrasesFeedback,alertId:e.activeAlert.id,cardId:e.id,feedbackType:h.cm.SMART_PHRASES_INTENT_DETECTED_ACCURATE}),t.next({type:v.lY.Type.alertMinicardButtonClick,alertHighlight:{highlightIndex:0,alert:e.activeAlert},clickPoint:{x:null!==(n=null==r?void 0:r.clientX)&&void 0!==n?n:0,y:null!==(i=null==r?void 0:r.clientY)&&void 0!==i?i:0}})}},n.createElement(I.JO.VoteYes,null)),n.createElement(C.zx.Ghost,{title:s.card.smartPhrases.intentDetectedFeedbackNo,name:`smart-phrases-${e.activeAlert.intent}-intent-detected-feedback-no`,active:e.activeAlert.intentDetectedFeedback===h.cm.SMART_PHRASES_INTENT_DETECTED_INACCURATE,disabled:Boolean(e.activeAlert.intentDetectedFeedback),onClick:x.hz((()=>{t.next({type:v.lY.Type.smartPhrasesFeedback,alertId:e.activeAlert.id,cardId:e.id,feedbackType:h.cm.SMART_PHRASES_INTENT_DETECTED_INACCURATE}),t.next({type:v.lY.Type.alertIgnore,alertId:e.activeAlert.id,id:e.id,eligibleForDismissSurvey:f.X.isEligibleForDismissSurvey(e)})}))},n.createElement(I.JO.VoteNo,null)))))},e.Bundle=({card:e,actions:t})=>{const[r]=M(e.activeAlert);return n.createElement(E.b.Mini,Object.assign({},(0,a.Sh)(ee.wrapper,ee.bundleContainer,ee.dot,r),{actions:t,cardId:e.id,getActiveAlert:()=>e.alerts[0],counter:n.createElement(k.CL,{className:ee.alertsCounter},e.alerts.length)}),n.createElement(s.F.div,{className:ee.miniContainer},n.createElement("div",{className:ee.highlightedText},y.R.bundleTitle(e))))},e.Standard=({card:r,actions:l})=>{const c=n.useContext(p.m.Context);if(b.C.isSmartPhrasesItem(r))return n.createElement(e.SmartPhrases,{card:r,actions:l});{const[e,u]=M(r.activeAlert);return n.createElement(E.b.Mini,Object.assign({},(0,a.Sh)(ee.wrapper,ee.dot,e),{actions:l,cardId:r.id,getActiveAlert:()=>r.activeAlert}),n.createElement(s.F.div,{className:ee.miniContainer},n.createElement("div",{className:ee.highlightedText},r.activeAlert.highlightTexts[0]),n.createElement("div",{className:ee.middleDot},"Â·"),(0,i.pipe)(r.activeAlert.extraProperties.vox,o.map((e=>n.createElement(O,{vox:e,theme:{logo:ee.cardLogo}}))),o.getOrElse((()=>n.createElement(n.Fragment,null,n.createElement(P,{hasEmoji:g.$.hasTone(r.activeAlert),action:f.X.miniTitle(r,c),theme:{wrapper:u,logo:ee.cardLogo}}),b.C.isTakeawayItem(r)&&n.createElement(t,{item:r,className:Y.takeawayIconStandard}))))),(0,i.pipe)(r.renderOptions.isNew,A.U((e=>o.isSome(e)?n.createElement(F,{key:"new-label"}):null)))))}};const t=({item:e,className:t})=>(l.FX(h.TO.correctlyDetected)(e.activeAlert.takeawayFeedback)||l.FX(h.TO.correctlyDetectedAndDone)(e.activeAlert.takeawayFeedback))&&e.activeAlert.takeawayIsLikelyToBeRead?n.createElement(I.JO.ValidationOk,{width:16,className:t}):n.createElement(I.JO.Megaphone,{width:16,className:t});e.TwoLined=({card:r,actions:s})=>{const l=n.useContext(p.m.Context);if(b.C.isSmartPhrasesItem(r))return n.createElement(e.SmartPhrases,{card:r,actions:s,twoLined:!0});{const[e,c]=M(r.activeAlert);return n.createElement(E.b.Mini,Object.assign({},(0,a.Sh)(Y.wrapper,Y.dot,e),{actions:s,cardId:r.id,getActiveAlert:()=>r.activeAlert}),n.createElement("div",{className:Y.miniContainer},(0,i.pipe)(r.activeAlert.extraProperties.vox,o.map((e=>n.createElement(O,{vox:e,theme:{logo:Y.cardLogo,label:Y.subTitle}}))),o.getOrElse((()=>n.createElement(n.Fragment,null,n.createElement(P,{hasEmoji:g.$.hasTone(r.activeAlert),action:f.X.miniTitle(r,l),theme:{wrapper:(0,a.Sh)(c,Y.ctaText,Y.subTitle).className,logo:Y.cardLogo}}),b.C.isTakeawayItem(r)&&n.createElement(t,{item:r,className:Y.takeawayIconMini}))))),n.createElement("div",{className:B},r.activeAlert.highlightTexts[0])))}}}(N||(N={}));const D="0 1px 8px rgba(109, 117, 141, .18)",$={$nest:{"&:before":{top:u.u.rem(.85),left:0}}},U="miniTwoLinedHighlightedText",B=u.u.joinClasses([U,u.u.style({overflow:"hidden",marginTop:u.u.rem(-.25),color:c.Il.CoreNeutral90,textOverflow:"ellipsis"})]),j={height:u.u.rem(3.25),borderRadius:u.u.rem(d.Jr),boxShadow:D,$nest:{"&:hover":{boxShadow:D},"&:hover .miniTwoLinedHighlightedText":{borderColor:"transparent"}}},W={top:u.u.rem(.7)},H={fontWeight:u.u.important(400),fontSize:u.u.rem(.75)},G={position:"absolute",left:u.u.rem(.5),minWidth:"initial",minHeight:"initial",background:c.Il.CoreNeutral0},z=Object.assign(Object.assign({},G),{top:u.u.rem(.6)}),Y=u.u.stylesheet({dot:[$],wrapper:[j],miniContainer:[{flexDirection:"column"}],cardLogo:[W],subTitle:[H],ctaText:[{overflow:"hidden",textOverflow:"ellipsis"}],takeawayIconMini:[z],takeawayIconStandard:[G]}),V={height:u.u.rem(3),$nest:{"&:hover .highlightText":{borderColor:"transparent"}}},q={$nest:{"&:before":{top:u.u.px(1),bottom:0,left:0}}},X={height:u.u.important(u.u.rem(2.5)),borderRadius:u.u.rem(d.Jr)},Z={color:c.Il.CoreNeutral50,display:"flex",width:u.u.rem(2),height:u.u.percent(100),justifyContent:"center",alignItems:"center"},J={overflow:"hidden",color:c.Il.CoreNeutral90,textOverflow:"ellipsis"},K={display:"inline-block",padding:`0 ${u.u.rem(.5)}`},Q={top:0,bottom:0,left:u.u.rem(.5),margin:"auto"},ee=u.u.stylesheet({wrapper:[V],dot:[q],miniContainer:[{display:"flex",justifyContent:"flex-end",alignItems:"center"}],bundleContainer:[X],alertsCounter:[Z],highlightedText:[J],middleDot:[K],cardLogo:[Q]}),te={color:c.Il.CoreNeutral50,fontWeight:300},re={position:"absolute",left:u.u.rem(.5),width:u.u.rem(1),height:u.u.rem(1),background:c.Il.CoreNeutral0},ne={marginLeft:u.u.rem(.5)},ie={$nest:{[`& .${T.B.contentWrapper}`]:{margin:0}}},ae={color:c.Il.CoreNeutral90,fontSize:u.u.rem(.875),lineHeight:u.u.rem(1.125),paddingLeft:u.u.rem(.75)},se=u.u.stylesheet({ctaText:[{$nest:{"&:first-letter":{textTransform:"uppercase"}}}],cta:[te],cardLogo:[re],newLabel:[ne],smartPhrasesWrapper:[ie],smartPhrasesContainer:[{display:"flex",alignItems:"center",justifyContent:"space-between"}],smartPhrasesTitle:[ae],smartPhrasesIntentDetectedFeedback:[{display:"flex",alignItems:"center",position:"absolute",right:0}]})},98210:(e,t,r)=>{"use strict";r.d(t,{n4:()=>xe,$s:()=>Ae,zO:()=>_e,GP:()=>Le});var n=r(27378),i=r(71249),a=r(57050),s=r(40327),o=r(12187),l=r(55415),c=r(22232),u=r(8125),d=r(30763),p=r(98637),m=r(4890),h=r(7046),g=r(43965),f=r(94793),y=r(90351),v=r(63969),b=r(24588),w=r(40219),C=r(54338),S=r(3656);function I(e){return e?t=>`${e}/${t}`:a.yR}function k(e){const{name:t}=n.useContext(C.f.Context);return void 0===e?e:"string"==typeof e?I(t)(e):e.view(I(t))}const x=e=>n.createElement(S.ZT,Object.assign({},E(e),{value:e.value,onChange:e.onChange})),A=e=>n.createElement(x,Object.assign({},e,{nodeType:"input"})),E=e=>{return Object.assign({"data-name":k(e.name),mount:(t=e.autofocus,t?e=>e&&requestAnimationFrame((()=>e.focus())):void 0),styleType:S.ZT.Type.P1,nodeType:e.nodeType,placeholder:e.placeholder,onFocus:e.onFocus,onBlur:e.onBlur,onKeyPress:e.onKeyPress},(0,o.Sh)(_.inputField,e.className));var t},T={width:v.u.percent(100),outline:"none",border:`1px solid ${b.xO}`,borderRadius:v.u.rem(w.fx),background:y.Il.CoreNeutral0,$nest:{"&::placeholder":{color:b.FW,opacity:1},"&:focus":{borderColor:y.Il.CoreBlue50}}},_=v.u.stylesheet({inputField:[T],textArea:[{resize:"none"}]});const L=(0,r(83171).Gd)(),R=e=>({$nest:{[`&[data-indent="${e}"]`]:{marginLeft:v.u.rem(.5*e)}}}),P=(e,t,r,n)=>({$nest:{[`&[data-indent="${t}"]`]:{counterIncrement:`card-list${t}`,counterReset:n,$nest:{"&:before":{content:`'${e}' '\\A\\00a0' counter(card-list${t}, ${r}) '. '`}}}}}),O=e=>[P(e,0,"decimal","card-list1 card-list2 card-list3 card-list4 card-list5 card-list6 card-list7 card-list8"),P(e,1,"lower-alpha","card-list2 card-list3 card-list4 card-list5 card-list6 card-list7 card-list8"),P(e,2,"lower-roman","card-list3 card-list4 card-list5 card-list6 card-list7 card-list8"),P(e,3,"decimal","card-list4 card-list5 card-list6 card-list7 card-list8"),P(e,4,"lower-alpha","card-list5 card-list6 card-list7 card-list8"),P(e,5,"lower-roman","card-list6 card-list7 card-list8"),P(e,6,"decimal","card-list7 card-list8"),P(e,7,"lower-alpha","card-list8"),P(e,8,"lower-roman","none")],M="cards-replacements_labels-",F={list:`${M}list`,item:`${M}item`,diff:`${M}diff`,columnList:`${M}columnList`,itemInsert:`${M}itemInsert`,deleteAll:`${M}deleteAll`,crossed:`${M}crossed`,deleteQuote:`${M}deleteQuote`,deletePunctuation:`${M}deletePunctuation`,deleteDoubleComma:`${M}deleteDoubleComma`,deleteApostrophe:`${M}deleteApostrophe`,deleteLetter:`${M}deleteLetter`,deletePunctuationBeforeLetter:`${M}deletePunctuationBeforeLetter`,itemOriginal:`${M}itemOriginal`,itemOriginalContent:`${M}itemOriginalContent`,removeOrContainer:`${M}removeOrContainer`,itemContext:`${M}itemContext`,itemContextShifted:`${M}itemContextShifted`,or:`${M}or`,arrowInsertsList:`${M}arrowInsertsList`,cozyArrowInsertsList:`${M}cozyArrowInsertsList`,inlineHeader:`${M}inlineHeader`,fullSentenceBackground:`${M}fullSentenceBackground`,minimalFullSentenceBackground:`${M}minimalFullSentenceBackground`,fullSentenceDelete:`${M}fullSentenceDelete`,fullSentenceHidden:`${M}fullSentenceHidden`,fullSentenceListItem:`${M}fullSentenceListItem`,fullSentenceBulletListItem:`${M}fullSentenceBulletListItem`,fullSentenceDashedListItem:`${M}fullSentenceDashedListItem`,fullSentenceOrderedListItem:`${M}fullSentenceOrderedListItem`,fullSentenceOrderedListItemWithFormatting:M+"fullSentenceOrderedListItemWithFormatting",fullSentenceDashedListItemWithFormatting:M+"fullSentenceDashedListItemWithFormatting",fullSentenceBulletListItemWithFormatting:M+"fullSentenceBulletListItemWithFormatting",fullSentenceInsert:`${M}fullSentenceInsert`,fullSentenceInsertPunctuation:`${M}fullSentenceInsertPunctuation`,itemRemove:`${M}itemRemove`,oneGapInsert:`${M}oneGapInsert`,oneGapInput:`${M}oneGapInput`,smartPhrasesInsert:`${M}smartPhrasesInsert`,smartPhrasesInsertContent:`${M}smartPhrasesInsertContent`,smartPhrasesInsertContentText:`${M}smartPhrasesInsertContentText`},N={position:"relative",overflow:"hidden",margin:`0 ${v.u.rem(.5)} ${v.u.rem(.5)} 0`,padding:`${v.u.rem(.25)} ${v.u.rem(.5)}`,borderRadius:v.u.rem(w.fx),color:y.Il.CoreNeutral0,textAlign:"left",textOverflow:"ellipsis",whiteSpace:"normal",lineHeight:v.u.rem(1.5),cursor:"pointer",transitionDuration:".2s",overflowWrap:"break-word"},D={position:"relative",fontWeight:"bolder",overflow:"clip",$nest:{"&:after":{position:"absolute",top:"-8%",left:v.u.rem(.3125),width:"1px",height:"120%",background:y.Il.CoreNeutral0,content:"''",opacity:.8}}},$={position:"relative",marginRight:v.u.rem(.5),whiteSpace:"nowrap"},U={overflowX:"hidden",overflowY:"auto",overflowWrap:"anywhere",margin:`${v.u.rem(1)} 0`,padding:v.u.rem(.5),maxHeight:v.u.rem(12),borderRadius:v.u.rem(w.fx),background:y.Il.CoreNeutral10,color:y.Il.CoreNeutral90,whiteSpace:"pre-wrap",fontWeight:400,fontStyle:"italic",fontFeatureSettings:`${w.g_}, ${w.xL}`},B={textDecoration:"line-through",position:"relative",marginRight:v.u.rem(.5),maxWidth:`calc(100% - ${v.u.rem(.5)})`,color:y.Il.CoreRed40,textDecorationLine:"line-through",overflowWrap:"break-word",$nest:{"&:after":{display:"inline-block",marginLeft:v.u.rem(.5),color:y.Il.CoreNeutral50,content:"'â†’'",verticalAlign:"middle"}}},j=[R(0),R(1),R(2),R(3),R(4),R(5),R(6),R(7),R(8)],W={display:"flex",alignItems:"flex-start",flexWrap:"wrap",fontFeatureSettings:`${w.g_}, ${w.xL}`},H={background:y.Il.BackgroundCardApply,maxWidth:"100%",$nest:{"&[data-hovered='true']":{background:y.Il.CoreGreen50},"&[data-disabled='true']":{background:y.Il.CoreGreen40}}},G={$nest:{"&:after":{transform:"rotate(-25deg)"}}},z={paddingRight:v.u.rem(.35),$nest:{"&:after":{transform:"rotate(25deg)"}}},Y={paddingRight:v.u.rem(.3125),$nest:{"&:before":{content:"' '"},"&:after":{transform:"rotate(25deg)"}}},V={textDecoration:"line-through",whiteSpace:"pre-wrap",$nest:{"&:before":{content:"' '"},"&:after":{background:"transparent !important",content:"' '"}}},q={display:"flex",flexBasis:"100%"},X={margin:`0 ${v.u.rem(.5)} ${v.u.rem(.5)} 2px`,color:y.Il.CoreNeutral60},Z={display:"flex",minWidth:"50%",flexWrap:"wrap",flexBasis:"content"},J={marginBottom:v.u.rem(.25),color:y.Il.CoreNeutral60,fontWeight:400,fontSize:v.u.rem(.8),lineHeight:v.u.rem(1.2),$nest:{"&:first-letter":{textTransform:"capitalize"}}},K={color:y.Il.CoreRed50,textDecoration:"line-through",fontWeight:600},Q={background:y.Il.CoreRed50,$nest:{"&[data-hovered='true'], &[data-disabled='true']":{background:y.Il.CoreRed40}}},ee={$nest:{"&:before":{content:"'Â¶\\A\\00a0-\\00a0'"}}},te={$nest:{"&:before":{content:"'Â¶\\A\\00a0\\2022\\00a0'"}}},re={width:"100%",marginTop:v.u.rem(.5),marginBottom:v.u.rem(.25),boxSizing:"border-box",$nest:{"&[data-disabled='true']":{background:y.Il.CoreNeutral40}}},ne={marginTop:v.u.rem(.5),lineHeight:`calc(${v.u.rem(2)} - ${v.u.px(2)})`,padding:`0 ${v.u.rem(.5)}`,border:v.u.important(`${v.u.px(1)} solid ${y.Il.CoreNeutral50}`),color:y.Il.CoreNeutral90,boxSizing:"border-box",$nest:{"&:placeholder-shown":{borderColor:v.u.important(y.Il.CoreNeutral20)}}},ie=L.style(N,H),ae={position:"relative",margin:`0 ${v.u.rem(.5)} ${v.u.rem(.5)} 0`,padding:`${v.u.rem(.25)} ${v.u.rem(.5)}`,borderRadius:v.u.rem(w.fx),cursor:"pointer",transitionDuration:".2s",backgroundColor:y.Il.CoreNeutral10,color:y.Il.CoreGreen60,fontSize:v.u.rem(.875),fontWeight:700,lineHeight:v.u.rem(1.25),width:v.u.percent(100),boxSizing:"border-box",$nest:{"&[data-hovered='true']":{background:y.Il.CoreGreen60,color:y.Il.CoreNeutral0}}},se={display:"flex",justifyContent:"space-between",alignItems:"center",width:v.u.percent(100)},oe={textAlign:"left",textOverflow:"ellipsis",whiteSpace:"normal",overflowWrap:"break-word",overflow:"hidden"},le={list:v.u.joinClasses([F.list,v.u.style(W),L.style(W)]),item:v.u.joinClasses([F.item,v.u.style(N),L.style(N)]),itemInsert:v.u.joinClasses([F.itemInsert,v.u.style(N,H),ie]),deleteAll:v.u.joinClasses([F.deleteAll,v.u.style({textDecoration:"line-through"}),L.style({textDecoration:"line-through"})]),crossed:v.u.joinClasses([F.crossed,v.u.style(D)]),deleteQuote:v.u.joinClasses([F.deleteQuote,v.u.style(D,G),L.style(D,G)]),deletePunctuation:v.u.joinClasses([F.deletePunctuation,v.u.style(D,z),L.style(D,z)]),deleteDoubleComma:v.u.joinClasses([F.deleteDoubleComma,v.u.style({textDecoration:"line-through"}),L.style({textDecoration:"line-through"})]),deleteApostrophe:v.u.joinClasses([F.deleteApostrophe,v.u.style(D,Y),L.style(D,Y)]),deleteLetter:v.u.joinClasses([F.deleteLetter,v.u.style(V),L.style(V)]),deletePunctuationBeforeLetter:v.u.joinClasses([F.deletePunctuationBeforeLetter,v.u.style({textDecoration:"line-through"}),L.style({textDecoration:"line-through"})]),itemOriginal:v.u.joinClasses([F.itemOriginal,v.u.style(B),L.style(B)]),itemOriginalContent:v.u.joinClasses([F.itemOriginalContent,v.u.style({color:y.Il.CoreNeutral90}),L.style({color:y.Il.CoreNeutral90})]),removeOrContainer:v.u.joinClasses([F.removeOrContainer,v.u.style(q),L.style(q)]),itemContext:v.u.joinClasses([F.itemContext,v.u.style($)]),itemContextShifted:v.u.joinClasses([F.itemContextShifted,v.u.style($,{marginRight:"2px"}),L.style($,{marginRight:"2px"})]),or:v.u.joinClasses([F.or,v.u.style(X),L.style(X)]),arrowInsertsList:v.u.joinClasses([F.arrowInsertsList,v.u.style(Z),L.style(Z)]),columnList:v.u.joinClasses([F.columnList,v.u.style(Z,{flexDirection:"column",alignItems:"flex-start",maxWidth:"100%"}),L.style(Z)]),cozyArrowInsertsList:v.u.joinClasses([F.arrowInsertsList,v.u.style(Z,{flex:2,flexBasis:"0%"}),L.style(Z)]),inlineHeader:v.u.joinClasses([F.inlineHeader,v.u.style(J),L.style(J)]),fullSentenceBackground:v.u.joinClasses([F.fullSentenceBackground,v.u.style(U),L.style(U)]),minimalFullSentenceBackground:v.u.joinClasses([F.minimalFullSentenceBackground,v.u.style(U,{lineHeight:v.u.rem(1.3125)}),L.style(U,{lineHeight:v.u.rem(1.3125)})]),fullSentenceDelete:v.u.joinClasses([F.fullSentenceDelete,v.u.style(K),L.style(K)]),fullSentenceHidden:v.u.joinClasses([F.fullSentenceHidden,v.u.style({display:"none"})]),fullSentenceListItem:v.u.joinClasses([F.fullSentenceListItem,v.u.style(...j),L.style(...j)]),fullSentenceBulletListItem:v.u.joinClasses([F.fullSentenceBulletListItem,v.u.style({$nest:{"&:before":{content:"'\\A\\00a0\\2022\\00a0'"}}}),L.style({$nest:{"&:before":{content:"'\\A\\00a0\\2022\\00a0'"}}})]),fullSentenceDashedListItem:v.u.joinClasses([F.fullSentenceDashedListItem,v.u.style({$nest:{"&:before":{content:"'\\A\\00a0-\\00a0'"}}}),L.style({$nest:{"&:before":{content:"'\\A\\00a0-\\00a0'"}}})]),fullSentenceOrderedListItem:v.u.joinClasses([F.fullSentenceOrderedListItem,v.u.style(...O(""),...j),L.style(...O(""),...j)]),fullSentenceOrderedListItemWithFormatting:v.u.joinClasses([F.fullSentenceOrderedListItemWithFormatting,v.u.style(...O("Â¶"),...j),L.style(...O("Â¶"),...j)]),fullSentenceBulletListItemWithFormatting:v.u.joinClasses([F.fullSentenceBulletListItemWithFormatting,v.u.style(...j,te),L.style(...j,te)]),fullSentenceDashedListItemWithFormatting:v.u.joinClasses([F.fullSentenceDashedListItemWithFormatting,v.u.style(...j,ee),L.style(...j,ee)]),fullSentenceInsert:v.u.joinClasses([F.fullSentenceInsert]),fullSentenceInsertPunctuation:v.u.joinClasses([F.fullSentenceInsertPunctuation]),diff:v.u.joinClasses([F.diff,v.u.style({fontWeight:"bolder"}),L.style({fontWeight:"bolder"})]),itemRemove:v.u.joinClasses([F.itemRemove,v.u.style(N,Q)]),oneGapInsert:v.u.joinClasses([F.oneGapInsert,v.u.style(N,H,re),ie]),oneGapInput:v.u.joinClasses([F.oneGapInput,v.u.style(ne)]),smartPhrasesInsert:v.u.joinClasses([F.smartPhrasesInsert,v.u.style(ae),L.style(ae)]),smartPhrasesInsertContent:v.u.joinClasses([F.smartPhrasesInsertContent,v.u.style(se),L.style(se)]),smartPhrasesInsertContentText:v.u.joinClasses([F.smartPhrasesInsertContentText,v.u.style(oe),L.style(oe)])};var ce;function ue(e,t){if(e.length<=4)return null;const r=function(e,t){if(e===t)return;const r=e.length,n=t.length;if(n>r){if(t.substr(0,r)===e)return{from:r,to:r,oldFragment:"",newFragment:t.substr(r)};if(t.substr(n-r)===e)return{from:0,to:0,oldFragment:"",newFragment:t.substr(0,n-r)}}if(n<r){if(e.substr(r-n)===t)return{from:0,to:r-n,oldFragment:e.substr(0,r-n),newFragment:""};if(e.substr(0,n)===t)return{from:n,to:r,oldFragment:e.substr(n),newFragment:""}}const i=n<r?n:r,a=function(e,t,r){let n=0;for(;e[n]===t[n]&&n<r;)n+=1;return n}(e,t,i);let s=function(e,t,r,n,i){let a=0;for(;e[r-a-1]===t[n-a-1]&&i-a>=0;)a+=1;return a}(e,t,r,n,i);a+s>r&&(s-=a+s-r);a+s>n&&(s-=a+s-n);return{from:a,to:r-s,oldFragment:e.substr(a,r-s-a),newFragment:t.substr(a,n-s-a)}}(e,t);if(void 0===r)return null;const{from:n,to:i,oldFragment:a,newFragment:s}=r,o=1===s.length&&n>0&&e[n-1]===s,l=1===a.length&&0===s.length&&t[n-1]===a;let c=n,u=s;return(o||l)&&(c=n-1),o&&(u=s+s),l&&(u=a),u.length>3?null:[e.substring(0,c),u,e.substring(i)]}v.u.cssRule(`.${F.fullSentenceInsert}, .${F.fullSentenceInsertPunctuation}`,{color:y.Il.CoreGreen60,fontWeight:600}),v.u.cssRule(`.${F.fullSentenceDelete} + .${F.fullSentenceInsert}`,{marginLeft:v.u.rem(.25)}),v.u.cssRule(`.${F.fullSentenceOrderedListItemWithFormatting},\n.${F.fullSentenceDashedListItemWithFormatting},\n.${F.fullSentenceBulletListItemWithFormatting}`,{color:y.Il.CoreGreen60,fontWeight:600}),function(e){e.getClass=function(e,t){return null!==(r=t)&&1===r.length&&/["'â€â€™]/.test(r)?e.deleteApostrophe:function(e){return null!==e&&null!==e.match(/["'â€][.,;]/)}(t)?e.deleteQuote:function(e){const t=e.replace(/\s/g,"");return null!==e&&null!==t.match(/^["'â€â€œ.,;:!?\\\/â€¦\-â€”()]+$/)}(t)?e.deletePunctuation:function(e){return null!==e&&null!==e.match(/,,/)}(t)?e.deleteDoubleComma:function(e){return null!==e&&1===e.length&&null!==e.match(/[a-z]/i)}(t)?e.deleteLetter:function(e){return null!==e&&e.match(/[.,;:!?\\\/-]\s*[a-z]/i)}(t)?e.deletePunctuationBeforeLetter:e.deleteAll;var r}}(ce||(ce={}));const de=({transform:e,title:t,disabled:r,boldifier:i=fe,classes:a=le,onClick:s})=>n.createElement(h.zx,{animationMode:g.m.FromClickPoint,name:"apply-insert",onClick:s,title:t,disabled:r,className:a.itemInsert},e.map(((e,t)=>n.createElement(n.Fragment,{key:t},i(e,le.diff))))),pe=({transform:e,title:t,classes:r=le,onClick:i})=>n.createElement(h.zx,Object.assign({animationMode:g.m.FromClickPoint,name:"apply-remove"},{onClick:i,title:t,className:r.itemRemove}),e.map(((e,t)=>n.createElement(be,{key:t,element:e})))),me=({transform:e,title:t,classes:r=le,onClick:i,children:a})=>n.createElement("div",{className:r.removeOrContainer},e.map(((a,s)=>"text"===a.type?n.createElement("span",{key:s,className:s===e.length-1?r.itemContextShifted:r.itemContext},a.text):n.createElement(h.zx,Object.assign({key:s,animationMode:g.m.FromClickPoint,name:"apply-remove-or"},{onClick:i,title:t,className:r.itemRemove}),n.createElement(be,{element:a})))),a),he=()=>n.createElement("span",{className:le.or},n.useContext(d.m.Context).card.or),ge=({transform:e,boldifier:t=fe})=>n.createElement("div",{className:le.itemOriginal},n.createElement("span",{className:le.itemOriginalContent},e.map(((e,r)=>n.createElement(n.Fragment,{key:r},t(e,le.diff)))))),fe=l.ei("text"),ye=({text:e,type:t},r)=>"text"===t?e:n.createElement("span",{className:r},e);function ve(e,t){return r=>n.createElement(ke,{index:t,oldText:e,newText:r.text})}const be=({element:e,strikeClass:t})=>"delete"===e.type?n.createElement("span",Object.assign({},(0,o.Sh)(ce.getClass(le,e.text),t)),e.text):n.createElement(n.Fragment,null,e.text);const we=/^\W/,Ce=e=>e.type===p.GP.Text&&e.shouldBeCollapsed?n.createElement("span",null," â€¦ "):e.text,Se=(0,a.ls)((0,u.RN)((e=>{switch(e.type){case p.GP.Delete:return le.fullSentenceDelete;case p.GP.Insert:return we.test(e.text)?le.fullSentenceInsertPunctuation:le.fullSentenceInsert;case p.GP.Text:case p.GP.List:return"";default:return(0,c.vE)(e)}}),(e=>{switch(e.type){case p.GP.Delete:return le.fullSentenceHidden;case p.GP.List:case p.GP.Text:case p.GP.Insert:return"";default:return(0,c.vE)(e)}})),(e=>t=>Object.assign({children:Ce(t)},(0,o.Sh)(e(t)))),i.UI),Ie=(0,a.ls)((0,u.RN)((e=>{switch(e.type){case p.GP.Delete:return le.fullSentenceHidden;case p.GP.List:return"bullet"===e.kind?le.fullSentenceBulletListItemWithFormatting:"dashed"===e.kind?le.fullSentenceDashedListItemWithFormatting:le.fullSentenceOrderedListItemWithFormatting;case p.GP.Insert:case p.GP.Text:return"";default:return(0,c.vE)(e)}}),(e=>{switch(e.type){case p.GP.Delete:return le.fullSentenceHidden;case p.GP.List:return"bullet"===e.kind?le.fullSentenceBulletListItem:"dashed"===e.kind?le.fullSentenceDashedListItem:le.fullSentenceOrderedListItem;case p.GP.Insert:case p.GP.Text:return"";default:return(0,c.vE)(e)}})),(e=>t=>t.type===p.GP.List?Object.assign(Object.assign({},(0,o.Sh)(e(t))),{"data-indent":t.indent}):Object.assign({children:Ce(t)},(0,o.Sh)(e(t)))),i.UI),ke=({index:e=0,oldText:t,newText:r})=>{const i=ue(t,r);return n.createElement(n.Fragment,null,i?[i[0],n.createElement("span",{key:e,className:le.diff},i[1]),i[2]]:r)},xe=e=>n.createElement(S.XY,{className:(0,s.pipe)(e.layoutDensity,m.j.Density.matchOrDefault(m.j.Density.minimal)((()=>le.minimalFullSentenceBackground),(()=>le.fullSentenceBackground)))},(0,s.pipe)(e.replacements.kind===p._k.WithFormatting?Ie(e.showDiff)(e.replacements.labels):Se(e.showDiff)(e.replacements.labels),(0,i.Su)(((e,t)=>n.createElement("span",Object.assign({key:e},t)))))),Ae=e=>{const t=n.useContext(d.m.Context).card,r=""===e.gapValue;return n.createElement(n.Fragment,null,n.createElement(A,{name:"input",placeholder:t.gapCard.placeholder,value:e.gapValue,onChange:t=>e.onChange(t.target.value),onKeyPress:e=>{"Enter"===e.key&&e.currentTarget.nextElementSibling&&e.currentTarget.nextElementSibling.click()},className:le.oneGapInput}),n.createElement(de,{title:r?"":t.todoAction(e.replacements.tooltipText),boldifier:ye,onClick:e.onApply,classes:{itemInsert:le.oneGapInsert,inlineHeader:le.inlineHeader},disabled:r,transform:Ee(e.replacements.labels.left,e.gapValue,e.replacements.labels.right)}))},Ee=(e,t,r)=>[...e,{type:p.GP.Insert,text:Te(e)+(t||"â€¦")+Te(r)},...r],Te=e=>e.length?" ":"",_e=({replacementsLabels:e,layoutDensity:t,onClick:r})=>{const i=n.useContext(d.m.Context).card.todoAction(e.tooltipText);switch(e.type){case p.b$.Type.InsertList:return n.createElement(S.Xk,{className:le.list},e.labels.map(((e,t)=>n.createElement(de,Object.assign({},{key:t,title:i,onClick:r(t)},{transform:e})))));case p.b$.Type.DeleteList:return n.createElement(S.Xk,{className:le.list},e.labels.map(((e,t)=>n.createElement(pe,Object.assign({},{key:t,title:i,onClick:r(t)},{transform:e})))));case p.b$.Type.Arrow:return function({labels:e,original:t,onlyReplacements:r},i,a,s){const o=1===t.length,[l]=o?[t[0].text,e[0][0].text].map(ve):[ye,ye];return n.createElement(S.Xk,{className:le.list},!r&&n.createElement(ge,{transform:t}),n.createElement("div",{className:a===m.j.Density.cozy?le.cozyArrowInsertsList:e.length>2?le.columnList:le.arrowInsertsList},e.map(((e,t)=>n.createElement(de,Object.assign({},{key:t,title:i,onClick:s(t)},{transform:e,boldifier:l}))))))}(e,i,t,r);case p.b$.Type.InsertOr:return n.createElement(S.Xk,{className:le.list},n.createElement(de,Object.assign({transform:e.labels[0]},{title:i,onClick:r(0)},{boldifier:ye})),n.createElement(he,null),n.createElement(de,Object.assign({transform:e.labels[1]},{title:i,onClick:r(1)},{boldifier:ye})));case p.b$.Type.DeleteOr:return n.createElement(S.Xk,{className:le.list},e.labels.map(((t,a)=>n.createElement(me,Object.assign({},{key:a,title:i,onClick:r(a)},{transform:t}),a===e.labels.length-2&&n.createElement(he,null)))));case p.b$.Type.FullSentence:case p.b$.Type.OneGap:return null;default:return(0,c.vE)(e)}},Le=({replacementsLabels:e,onClick:t})=>{const r=n.useContext(d.m.Context).card.todoAction(e.tooltipText);return n.createElement(n.Fragment,null,e.labels.map(((e,i)=>n.createElement(h.zx,{key:i,animationMode:g.m.FromClickPoint,name:"apply-smart-phrases-insert",onClick:t(i),title:r,className:le.smartPhrasesInsert},n.createElement("div",{className:le.smartPhrasesInsertContent},n.createElement("div",{className:le.smartPhrasesInsertContentText},e.map(((e,t)=>n.createElement(n.Fragment,{key:t},fe(e,le.diff))))),n.createElement(f.JO.SmartPhrases.AddPhraseCirclePlus,null))))))}},19025:(e,t,r)=>{"use strict";r.d(t,{f:()=>c,G:()=>u});var n=r(40327),i=r(90351),a=r(63969),s=r(40219),o=r(4890),l=r(50224);const c=e=>({container:(0,n.pipe)(e,o.j.Density.matchOrDefault(o.j.Density.cozy)((()=>h.cozyCardContainer),(()=>h.compactCardContainer)))}),u=e=>Object.assign(Object.assign({},c(e.layoutDensity)),{wrapper:(0,n.pipe)(e.layoutDensity,o.j.Density.matchOrDefault(o.j.Density.minimal)((()=>h.minimalCardWrapper),(()=>{})))}),d={padding:`${a.u.rem(.75)} ${a.u.rem(.5)} ${a.u.rem(.5)} ${a.u.rem(1)}`},p={margin:`${a.u.rem(1)} 0 ${a.u.rem(1.5)}`,borderRadius:a.u.rem(s.Jr),background:i.Il.CoreNeutral0,boxShadow:`0 ${a.u.rem(.625)} ${a.u.rem(s.mJ)} 0 rgba(198, 203, 222, .45)`},m={boxShadow:"0 1px 8px rgba(109, 117, 141, .18)",borderRadius:a.u.rem(s.Jr),background:i.Il.CoreNeutral0},h=Object.assign(Object.assign({},a.u.stylesheet({minimalCardWrapper:[d],compactCardContainer:[m]})),{cozyCardContainer:a.u.joinClasses([l.g.cozyCardContainerSelector,a.u.style(p)])})},33119:(e,t,r)=>{"use strict";r.d(t,{A:()=>ae});var n,i=r(27378),a=r(57050),s=r(40327),o=r(5739),l=r(26027),c=r(77610),u=r(4890),d=r(28043),p=r(77176),m=r(50225),h=r(38983),g=r(8125),f=r(5114),y=r(81531),v=r(30763),b=r(15646),w=r(7046),C=r(12187),S=r(90351),I=r(63969),k=r(24588);!function(e){e.Item=({className:e,children:t,onChange:r,checked:n,tabIndex:a,id:s})=>i.createElement(o.F.label,Object.assign({},(0,C.Sh)(T.radio,e)),n.view((e=>i.createElement(i.Fragment,{key:`radio-${s}`},i.createElement("input",{onChange:r,tabIndex:a||-1,type:"radio",checked:e,className:T.radioInputHidden}),i.createElement("span",{className:A})))),t),e.Group=({items:t,selectedItemIndex:r,itemWrapperClassName:n,onChange:a})=>i.createElement(o.F.Fragment,null,t.map(((t,s)=>i.createElement(e.Item,{id:s,key:s,onChange:()=>{r.set(s),a&&a(s)},checked:r.view((e=>s===e)),className:n},t))))}(n||(n={}));const x="radioInput",A=I.u.joinClasses([x,I.u.style({display:"inline-block",boxSizing:"border-box",minWidth:I.u.rem(1),width:I.u.rem(1),height:I.u.rem(1),border:`${I.u.rem(.125)} solid ${k.FW}`,borderRadius:I.u.percent(50),backgroundColor:S.Il.CoreNeutral0,content:"' '"})]),E={outline:"none",appearance:"none",$nest:{"&:checked + .radioInput":{border:`${I.u.rem(.25)} solid ${S.Il.CoreBlue50}`}}},T=I.u.stylesheet({radioInputHidden:[E],radio:[{display:"inline-flex",cursor:"default",alignItems:"center"}]});var _=r(3656),L=r(28706),R=r(1883),P=r(86531);const O=I.u.style({margin:`${I.u.rem(1)} 0`}),M=I.u.style({marginLeft:I.u.rem(.5),lineHeight:I.u.rem(1.3125),fontSize:I.u.rem(.875),color:S.Il.CoreNeutral90}),F=I.u.style({marginTop:"0 !important",$nest:{"&:not(:last-child)":{marginBottom:I.u.rem(1)}}}),N=I.u.style({marginTop:"0 !important",marginLeft:I.u.rem(1)}),D={color:S.Il.CoreRed60,fontSize:I.u.rem(.75),lineHeight:I.u.rem(1.125)},$=I.u.style(D),U=I.u.style(D,{visibility:"hidden"});var B=r(19025);const j=({card:e,actions:t})=>{const r=i.useContext(v.m.Context).card.feedbackForm,a=h.h.create(void 0),l=h.h.create(!1);return(0,s.pipe)(e.visualState.transition,f.fromPredicate((e=>"feedback_form"===e.type)),f.fold((()=>(y.C8.Logging.getLogger("FeedbackForm").error("Trying to render feedback form from non-feedback state",e),null)),(({options:s})=>i.createElement(R.Z,{onFocus:()=>t.next({type:b.lY.Type.alertIgnoreFeedbackFormShow,alertId:e.activeAlert.id}),theme:(0,B.G)(e.renderOptions),visualState:e.visualState,body:i.createElement(i.Fragment,null,i.createElement(P.__,{alert:e.activeAlert,options:e.renderOptions}),i.createElement(_.H4,{className:O},r.dismissReason),i.createElement(n.Group,{itemWrapperClassName:F,selectedItemIndex:a,items:s.map((e=>i.createElement("div",{className:M},e.text))),onChange:()=>l.set(!1)})),mainActions:i.createElement(i.Fragment,null),footer:i.createElement(i.Fragment,null,i.createElement(o.F.div,{"aria-hidden":l,className:l.view((0,g.RN)($,U))},r.error),i.createElement("div",null,i.createElement(w.zx.Primary,{name:"submitCardFeedbackForm",onClick:()=>{const r=a.get();return void 0===r?l.set(!0):L.hz((()=>t.next({type:b.lY.Type.alertIgnoreFormSubmit,alertId:e.activeAlert.id,reason:s[r].key})))()}},r.submit),i.createElement(w.zx.Ghost,{className:N,name:"skipCardFeedbackForm",onClick:L.hz((()=>t.next({type:b.lY.Type.alertIgnoreFormSubmit,alertId:e.activeAlert.id,reason:"skipped"})))},r.skip))),subActions:i.createElement(i.Fragment,null)}))))};var W=r(28522),H=r(19157),G=r(61221),z=r(66346),Y=r(85255),V=r(2834),q=r(94793);const X=({onLeftClick:e,onRightClick:t,currentMatch:r,totalMatch:n,replaceOneMatch:a=!0,disableOnEnd:s=!0,style:o})=>{const l=i.useContext(v.m.Context).card.matchesNavigation;return 0===n?null:1===n&&a?i.createElement("div",Object.assign({},(0,C.Sh)(K.matchesRow,o.matchesRow||!1)),i.createElement(_.ck,Object.assign({},(0,C.Sh)(K.matchesCount,o.matchesCount||!1)),l.numberOfMatches(n))):i.createElement("div",Object.assign({},(0,C.Sh)(K.matchesRow,o.matchesRow||!1)),i.createElement(w.zx.Ghost,{disabled:s&&0===r,name:"left",title:l.prev,onClick:e},i.createElement(q.JO.Arrow,Object.assign({},(0,C.Sh)(K.leftButtonIcon,o.leftButtonIcon||!1)))),i.createElement(_.ck,Object.assign({},(0,C.Sh)(K.matchesCount,o.matchesCount||!1)),l.currentMatchPosition(r+1,n)),i.createElement(w.zx.Ghost,{disabled:s&&r===n-1,name:"right",title:l.next,onClick:t},i.createElement(q.JO.Arrow,Object.assign({},(0,C.Sh)(K.rightButtonIcon,o.rightButtonIcon||!1)))))},Z={display:"inline-block",verticalAlign:"middle",$nest:{"& > * + *":{marginLeft:I.u.rem(.25)}}},J={textTransform:"uppercase",letterSpacing:I.u.px(.8),lineHeight:I.u.rem(2)},K=I.u.stylesheet({matchesRow:[Z],leftButtonIcon:[{transform:"rotate(90deg)"}],rightButtonIcon:[{transform:"rotate(270deg)"}],matchesCount:[J]});function Q(e,t,r){const{activeAlert:n,activeHighlightIndex:i}=t,a=n.getHighlightRanges(),s=(i+("left"===e?a.length-1:1))%a.length;r.next({type:b.lY.Type.cardMatchesNavigationButtonClick,transitionTo:{kind:"sameAlert",card:t,highlightIndex:s},direction:e})}const ee=({card:e,actions:t,selectedLabelIndex:r,isChecking:n})=>{const a=i.useContext(v.m.Context),s=h.h.create(!1);return Y.P.useSubscriptionTo(n.pipe(V.b((e=>s.set(e))))),i.createElement(P.Nm,{applyMessage:e.activeAlert.todoAction,checkingMessage:a.card.checking,title:a.card.todoAction(e.activeAlert.todoAction),checkingInProgress:s,onClick:()=>{t.next({type:b.lY.Type.alertApply,alertId:e.activeAlert.id,alternativeIndex:r.get(),cardType:b.lY.getCardType(e)})}})},te=({card:e,actions:t})=>i.createElement(X,{onLeftClick:()=>Q("left",e,t),onRightClick:()=>Q("right",e,t),currentMatch:e.activeHighlightIndex,totalMatch:e.activeAlert.getHighlightRanges().length,disableOnEnd:!1,style:{}});var re=r(26662);const ne=({activeAlert:e,selectedLabelIndex:t,actions:r})=>{const a=i.useContext(v.m.Context);return i.createElement("div",{className:re.V.optionsContainer},e.labels.map(((e,s)=>i.createElement(i.Fragment,{key:`option-${s}`},i.createElement(n.Item,{className:re.V.optionLabel,onChange:()=>{t.set(s),r.next({type:b.lY.Type.alternativeReplacementRadioButtonClick,index:s})},checked:t.view((e=>e===s))},i.createElement(_.XY,{className:re.V.optionRadio},e.label)),i.createElement(_.x4,{className:re.V.optionExample},e.replacementTexts.join("; ")),i.createElement(_.x4,{className:re.V.optionSecondaryAttribute},a.card.matchesNavigation.numberOfMatches(e.matches))))))},ie=({card:e,actions:t,isChecking:r,isCheckingGlobal:n})=>{const a=h.h.create(0);return i.createElement(R.Z,{visualState:e.visualState,onFocus:()=>t.next({type:b.lY.Type.alertCardShow,cardType:b.lY.getCardType(e)}),theme:Object.assign({wrapper:re.V.superWrapper,content:n.pipe(p.U((0,g.RN)(re.V.loadingWrapperInvisible,re.V.loadingWrapper)))},(0,B.f)(e.renderOptions.layoutDensity)),extra:i.createElement(P.o,{isChecking:n}),body:i.createElement(i.Fragment,null,i.createElement(P.__,{alert:e.activeAlert,options:e.renderOptions}),i.createElement(P.Ot,{alert:e.activeAlert}),i.createElement(P.ko,{card:e,isChecking:r}),i.createElement(P.dk,{description:e.meta.explanation,actions:t,layoutDensity:e.renderOptions.layoutDensity}),i.createElement(ne,{activeAlert:e.activeAlert,selectedLabelIndex:a,actions:t})),mainActions:i.createElement(P.Kg,{card:e,feedbackActions:t}),footer:i.createElement(i.Fragment,null,i.createElement(P.lJ,{card:e}),i.createElement(ee,{selectedLabelIndex:a,card:e,actions:t,isChecking:r})),navigation:i.createElement(te,{card:e,actions:t}),subActions:i.createElement(z.Vh,{actions:t,card:e,mode:"mini"})})};var ae,se=r(76720);!function(e){e.Full=({card:e,actions:t})=>{const{isChecking:r,isCheckingGlobal:n,transform:s}=l.X.useCardStates(e),u=e=>c.C.isTakeawayItem(e)?i.createElement(se.o1.Full,{card:e,actions:t}):c.C.isSentenceLevelBrandTonesItem(e)?i.createElement(G.y.Full,{card:e,actions:t}):i.createElement(W.J,{card:e,actions:t,isChecking:r,transform:s,isCheckingGlobal:n});return i.createElement(o.F.Fragment,null,e.pipe(d.x(((e,t)=>e.hashCode()===t.hashCode())),p.U((0,a.ls)(l.X.match({super:e=>i.createElement(ie,{card:e,actions:t,isChecking:r,isCheckingGlobal:n}),smartPhrases:u,takeaway:u,sentenceLevelBrandTones:u,default:u}),l.X.foldCard))))},e.Mini=({card:t,actions:r})=>i.createElement(o.F.Fragment,null,t.pipe(p.U((t=>u.j.Density.matchL((()=>i.createElement(e.MiniSingleLined,{card:t,actions:r})),(()=>i.createElement(e.MiniTwoLined,{card:t,actions:r})),(()=>i.createElement(e.MiniTwoLined,{card:t,actions:r})))(t.renderOptions.layoutDensity))))),e.MiniSingleLined=({card:e,actions:t})=>{function r(e){return i.createElement(H.P.Standard,{card:e,actions:t})}return(0,s.pipe)(e,l.X.match({smartPhrases:r,super:r,takeaway:r,sentenceLevelBrandTones:r,default:r}),l.X.foldCard)},e.MiniTwoLined=({card:e,actions:t})=>{function r(e){return i.createElement(H.P.TwoLined,{card:e,actions:t})}return(0,s.pipe)(e,l.X.match({smartPhrases:r,super:r,takeaway:r,sentenceLevelBrandTones:r,default:r}),l.X.foldCard)},e.Success=m.b.Success,e.FeedbackForm=({cardData:e,actions:t})=>{function r(e){return i.createElement(j,{card:e,actions:t})}return(0,s.pipe)(e,c.C.match({smartPhrases:r,takeaway:r,default:r,sentenceLevelBrandTones:r,super:r}),l.X.foldCard)}}(ae||(ae={}))},61221:(e,t,r)=>{"use strict";r.d(t,{y:()=>n});var n,i=r(27378),a=r(57050),s=r(40327),o=r(5114),l=r(73975),c=r(18208),u=r(90351),d=r(63969),p=r(40219),m=r(30763),h=r(40018),g=r(26027),f=r(15646),y=r(62310),v=r(7046),b=r(29245),w=r(94793),C=r(3656),S=r(1883),I=r(86531),k=r(19025);!function(e){e.Full=({card:e,actions:n})=>i.createElement(S.Z,{footer:null,visualState:e.visualState,onFocus:()=>n.next({type:f.lY.Type.alertCardShow,cardType:f.lY.getCardType(e)}),theme:(0,k.G)(e.renderOptions),body:i.createElement(r,{card:e}),mainActions:i.createElement(I.U4,{card:e,feedbackActions:n}),subActions:null,extra:i.createElement(t,{card:e,actions:n})});const t=({card:e,actions:t})=>{const r=i.useContext(m.m.Context).card.sentenceLevelBrandTones;return i.createElement(C.x4,{className:P.sentenceLevelBrandTonesFooter},r.helpfulFeedbackQuestion(e.activeAlert.emotion),i.createElement("div",{className:P.sentenceLevelBrandTonesFooterHelpfulFeedback},i.createElement(v.zx.Ghost,{name:`sentence-level-brand-tones-${e.activeAlert.emotion}-helpful-feedback-yes`,title:r.helpfulFeedbackYes,active:o.getEq(l.w4).equals(e.activeAlert.feedback,o.some(h.id.accurate)),disabled:o.isSome(e.activeAlert.feedback),onClick:()=>{t.next({type:f.lY.Type.sentenceLevelBrandTonesFeedback,alertId:e.activeAlert.id,feedbackType:h.id.accurate})}},i.createElement(w.JO.VoteYes,null)),i.createElement(v.zx.Ghost,{name:`sentence-level-brand-tones-${e.activeAlert.emotion}-helpful-feedback-no`,title:r.helpfulFeedbackNo,active:o.getEq(l.w4).equals(e.activeAlert.feedback,o.some(h.id.inaccurate)),disabled:o.isSome(e.activeAlert.feedback),onClick:()=>{t.next({type:f.lY.Type.sentenceLevelBrandTonesFeedback,alertId:e.activeAlert.id,feedbackType:h.id.inaccurate}),t.next({type:f.lY.Type.alertIgnore,alertId:e.activeAlert.id,id:e.id,eligibleForDismissSurvey:g.X.isEligibleForDismissSurvey(e)})}},i.createElement(w.JO.VoteNo,null))))},r=({card:e})=>{const t=i.useContext(m.m.Context),r=o.fromNullable(e.activeAlert.highlightTexts[0]);return i.createElement("div",null,i.createElement(I.__,{alert:e.activeAlert,options:e.renderOptions}),i.createElement("div",null,i.createElement("div",{className:P.sentenceLevelBrandTonesHeaderWrapper},i.createElement("div",{className:P.sentenceLevelBrandTonesHeader},i.createElement(b.d,{className:P.sentenceLevelBrandTonesHeaderEmoji},e.activeAlert.emoji),c.kC(e.activeAlert.emotion)),i.createElement(y.C.Regular,{className:P.offBrandBadge},t.card.sentenceLevelBrandTones.offBrandBadge)),i.createElement(C.XY,{className:P.sentenceLevelBrandTonesDescription},e.activeAlert.description),(0,s.pipe)(r,o.fold(a.gn,(t=>i.createElement(I.hl,{text:t,layoutDensity:e.renderOptions.layoutDensity}))))))}}(n||(n={}));const x={display:"flex",alignItems:"center",justifyContent:"space-between",background:u.Il.CoreNeutral10,borderRadius:`${p.LB} ${p.LB} ${d.u.rem(p.Jr)} ${d.u.rem(p.Jr)}`,padding:`${d.u.rem(.6875)} ${d.u.rem(1)} ${d.u.rem(.6875)} ${d.u.rem(1)}`,color:u.Il.CoreNeutral50},A={display:"flex",alignItems:"center",$nest:{'& div[role="button"]:first-child':{marginRight:d.u.rem(.125)}}},E={display:"flex",justifyContent:"space-between",alignItems:"center",marginTop:d.u.rem(1),marginBottom:d.u.rem(.625)},T={fontWeight:"bold",fontSize:d.u.rem(.875),lineHeight:d.u.rem(1)},_={marginRight:d.u.rem(.5),lineHeight:d.u.rem(1)},L={background:u.Il.CoreRed1,color:u.Il.CoreRed60,fontWeight:"bold",fontSize:d.u.rem(.6),lineHeight:d.u.rem(1)},R={marginBottom:d.u.rem(1)},P=d.u.stylesheet({offBrandBadge:[L],sentenceLevelBrandTonesHeaderWrapper:[E],sentenceLevelBrandTonesHeader:[T],sentenceLevelBrandTonesHeaderEmoji:[_],sentenceLevelBrandTonesFooter:[x],sentenceLevelBrandTonesFooterHelpfulFeedback:[A],sentenceLevelBrandTonesDescription:[R]})},26662:(e,t,r)=>{"use strict";r.d(t,{V:()=>v});var n=r(90351),i=r(63969),a=r(40219);const s=(e,t,r,a,s,o)=>Object.assign({position:"absolute",right:e,left:e,zIndex:t,display:"block",height:i.u.rem(2),borderRadius:s,backgroundColor:n.Il.CoreNeutral0,boxShadow:a,content:"' '"},o&&"bottom"!==o?{top:r}:{bottom:r}),o=`0 ${i.u.rem(.25)} ${i.u.rem(1.625)} 0 rgba(198, 203, 222, .25)`,l={marginRight:i.u.rem(1),flexShrink:0,maxWidth:i.u.percent(100)},c={padding:`0 ${i.u.rem(1)}`},u={padding:`0 ${i.u.rem(1.9)} 0 ${i.u.rem(1)}`},d={position:"absolute",top:i.u.rem(.27),right:i.u.rem(.5)},p={display:"grid",width:i.u.percent(100),gridGap:i.u.rem(.5),gridTemplateColumns:"fit-content(60%) auto min-content"},m={minWidth:i.u.rem(7)},h={marginLeft:i.u.rem(.5)},g={color:n.Il.CoreNeutral90,whiteSpace:"nowrap",fontWeight:300,lineHeight:i.u.rem(1.5)},f={$nest:{"&:before":s(i.u.rem(.5),-10,i.u.rem(-.5),o,i.u.rem(a.Jr)),"&:after":s(i.u.rem(1),-20,i.u.rem(-1),o,i.u.rem(a.Jr))}},y={transition:"opacity .2s"},v=i.u.prefixedStylesheet("super",{updateAllBtnCommon:[l],updateAllBtn:[l,c],updateAllBtnLoading:[l,u],updateBtnSpinner:[d],optionsContainer:[p],optionLabel:[m],optionRadio:[h],optionSecondaryAttribute:[g],optionExample:[g,{overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap",fontStyle:"italic"}],superWrapper:[f],loadingWrapper:[y],loadingWrapperInvisible:[y,{opacity:0,pointerEvents:"none"}]})},76720:(e,t,r)=>{"use strict";r.d(t,{o1:()=>A});var n=r(27378),i=r(40327),a=r(83078),s=r(5114),o=r(63969),l=r(30763),c=r(40018),u=r(15646),d=r(4890),p=r(7046),m=r(28706),h=r(66346),g=r(1883),f=r(86531),y=r(19025),v=r(57050),b=r(26027),w=r(94793);const C=({card:e,actions:t,hasHeader:r})=>{const o=n.useContext(l.m.Context),u=s.isNone(e.activeAlert.takeawayFeedback)?o.card.takeaway.defaultTitle:e.activeAlert.title,p=s.fromNullable(e.activeAlert.highlightTexts[0]),m=(0,i.pipe)(e.activeAlert,s.fromPredicate((e=>!e.takeawayIsLikelyToBeRead&&a.FX(c.TO.correctlyDetected)(e.takeawayFeedback))),s.map((()=>e.meta.explanation)));return n.createElement(n.Fragment,null,!r&&(0,i.pipe)(e.renderOptions.layoutDensity,d.j.Density.matchOrDefault(d.j.Density.minimal)((()=>n.createElement(f.__,{alert:e.activeAlert,options:e.renderOptions},n.createElement(f.jg,{text:b.X.miniTitle(e,o)}))),(()=>n.createElement(n.Fragment,null,n.createElement(f.__,{alert:e.activeAlert,options:e.renderOptions}),n.createElement(f.Dx,{text:u}))))),(0,i.pipe)(p,s.fold(v.gn,(t=>n.createElement(f.hl,{text:t,layoutDensity:e.renderOptions.layoutDensity})))),(0,i.pipe)(m,s.fold(v.gn,(r=>n.createElement(f.dk,{description:r,actions:t,layoutDensity:e.renderOptions.layoutDensity})))))},S=({card:e,feedbackActions:t})=>n.createElement(n.Fragment,null,n.createElement(p.zx.Ghost,{name:"takeaway-like",onClick:m.hz((()=>{var r;return t.next({type:u.lY.Type.takeawayCorrectlyDetected,id:e.id,alertId:e.activeAlert.id,takeawayText:null!==(r=e.activeAlert.highlightTexts[0])&&void 0!==r?r:""})}))},n.createElement(w.JO.YesCircle,null)," Yes"),n.createElement(p.zx.Ghost,{name:"takeaway-dislike",onClick:m.hz((()=>t.next({type:u.lY.Type.takeawayIncorrectlyDetected,id:e.id,alertId:e.activeAlert.id})))},n.createElement(w.JO.NoCircle,null)," No")),I=({card:e,feedbackActions:t})=>{const r=n.useContext(l.m.Context);return n.createElement(n.Fragment,null,n.createElement(p.zx.Ghost,{name:"resolve",title:r.resolve,onClick:m.hz((()=>t.next({type:u.lY.Type.takeawayResolve,id:e.id,alertId:e.activeAlert.id,isLikelyToBeRead:e.activeAlert.takeawayIsLikelyToBeRead})))},n.createElement(w.JO.YesCircle,null)),n.createElement(p.zx.Ghost,{name:"ignore",title:r.dismiss,onClick:m.hz((()=>t.next({type:u.lY.Type.takeawayDismiss,id:e.id,alertId:e.activeAlert.id,isLikelyToBeRead:e.activeAlert.takeawayIsLikelyToBeRead})))},n.createElement(w.JO.Ignore,null)))};function k(e,t){const r=a.FX(c.TO.correctlyDetected)(e.activeAlert.takeawayFeedback);return e.activeAlert.takeawayIsLikelyToBeRead&&r&&t}function x(e){return!s.isNone(e.takeawayFeedback)&&!(!s.isSome(e.examples)&&!s.isSome(e.details))}var A;!function(e){e.Full=({card:e,actions:t,cardHeader:r,isChecklistItem:o,isChecklistBundleItem:v})=>{const b=n.useContext(l.m.Context);return n.createElement(g.Z,{visualState:e.visualState,onFocus:()=>t.next({type:u.lY.Type.alertCardShow,cardType:u.lY.getCardType(e)}),theme:(E=e.renderOptions,T=!!r,Object.assign(Object.assign({},(0,y.f)(E.layoutDensity)),{wrapper:(0,i.pipe)(E.layoutDensity,d.j.Density.matchOrDefault(d.j.Density.minimal)((()=>T?_.minimalCardWrapperWithHeader:_.minimalCardWrapper),(()=>{})))})),body:n.createElement(C,{card:e,actions:t,hasHeader:!!r}),mainActions:s.isNone(e.activeAlert.takeawayFeedback)?n.createElement(S,{card:e,feedbackActions:t}):k(e,!!v)?n.createElement(p.zx.Ghost,{name:"takeaway-correctly-detected-and-done",onClick:m.hz((()=>t.next({type:u.lY.Type.takeawayCorrectlyDetectedAndDone,id:e.id,alertId:e.activeAlert.id})))},b.card.takeaway.done):(w=e,A=!!o&&!v,(a.FX(c.TO.correctlyDetected)(w.activeAlert.takeawayFeedback)||a.FX(c.TO.correctlyDetectedAndDone)(w.activeAlert.takeawayFeedback))&&w.activeAlert.takeawayIsLikelyToBeRead&&A?null:n.createElement(I,{card:e,feedbackActions:t})),header:r,footer:x(e.activeAlert)?n.createElement(f.lJ,{card:e}):null,subActions:x(e.activeAlert)?n.createElement(h.Vh,{key:"card-actions-button",mode:"default",actions:t,card:e}):null});var w,A,E,T}}(A||(A={}));const E={padding:`${o.u.rem(.75)} ${o.u.rem(.5)} ${o.u.rem(.5)} ${o.u.rem(1)}`},T={padding:`0 ${o.u.rem(.5)} ${o.u.rem(.5)} ${o.u.rem(1)}`},_=o.u.stylesheet({minimalCardWrapper:[E],minimalCardWrapperWithHeader:[T]})},18955:(e,t,r)=>{"use strict";r.d(t,{d:()=>E});var n=r(27378),i=r(5739),a=r(38983),s=r(5114),o=r(19962),l=r(81531),c=r(46680),u=r(74238),d=r(45586),p=r(77176),m=r(24209),h=r(18625),g=r(66310),f=r(40151),y=r(85089),v=r(2834),b=r(49708),w=r(93508),C=r(17343),S=r(98403),I=r(76974),k=r(19751),x=r(67434),A=r(57091);class E extends n.Component{constructor(){super(...arguments),this._log=l.C8.Logging.getLogger("CardsListConnectorView",c.i.DEBUG),this._subs=new d.w.Keeper}componentDidMount(){this.props.isMaster&&this._setMaster()}componentDidUpdate(e){const t=this.props.name;this._log.debug("lensview did update",{wasMaster:e.isMaster,nowMaster:this.props.isMaster,name:t}),this.props.isMaster?!1===e.isMaster?(this._log.info("reuse released view",t),this.forceUpdate((()=>{this._setMaster(),this._log.trace("view force update complete",t)}))):(this._log.trace("set master view",t),this._setMaster()):(this._log.trace("release master view",t),this._clearSubs())}componentWillUnmount(){this._clearSubs()}render(){const{className:e,children:t,height:r}=this.props;return n.createElement(i.F.div,{"data-purpose":"card-list-connector",style:r.pipe(p.U((e=>({height:e})))),className:e},t)}_setMaster(){this._setSubs()}_setSubs(){this._clearSubs(),this._subs.push(this.props.stateSyncListener.subscribe())}_clearSubs(){this._subs.dispose()}}!function(e){let t;!function(e){e.create=()=>a.h.create({scrollProvider:s.none,scrollConsumer:s.none,viewport:s.none,title:s.none})}(t=e.Elements||(e.Elements={})),e.boundedScrollListener=(e,t)=>m.T(h.P((()=>{e.paddingTop.set(0)})),t.view("viewport").pipe(g.w(s.fold((()=>f.E),(e=>y.YC(e).pipe(p.U((t=>Object.assign(Object.assign({},t),{top:e.offsetTop,height:e.offsetHeight}))))))),v.b((t=>e.viewport.set({top:u.r.FromWindowTop.ISO.wrap(t.top),height:t.height})))),t.view("scrollProvider").pipe(g.w(s.fold((()=>f.E),(t=>b.R(t,"scroll").pipe(p.U((()=>t.scrollTop)),w.O(t.scrollTop),v.b((t=>e.scrollTop.set(t))),C.h(S.PU)))))),t.view("title").pipe(g.w(s.fold((()=>I.of(o.UL.empty)),(e=>y.YC(e)))),p.U((e=>e.height)),k.d({bufferSize:1,refCount:!0}),v.b((t=>e.paddingTop.set(t)))),t.view("scrollConsumer").pipe(g.w(s.fold((()=>f.E),(t=>e.scrollOffset.pipe(v.b((e=>{t.scrollTop+=e})))))))).pipe(C.h(void 0)),e.superScrollListener=(e,t)=>{const r=t.view("title").pipe(g.w(s.fold((()=>I.of(o.UL.empty)),(e=>y.YC(e)))),p.U((e=>e.height)),k.d({bufferSize:1,refCount:!0}));return m.T(h.P((()=>{e.paddingTop.set(0)})),t.view("viewport").pipe(g.w(s.fold((()=>f.E),(e=>y.YC(e).pipe(p.U((t=>Object.assign(Object.assign({},t),{top:e.offsetTop,height:e.offsetHeight}))))))),v.b((t=>e.viewport.set({top:u.r.FromWindowTop.ISO.wrap(t.top),height:t.height})))),t.view("scrollProvider").pipe(g.w(s.fold((()=>f.E),(t=>b.R(t,"scroll").pipe(p.U((()=>t.scrollTop)),w.O(t.scrollTop),v.b((t=>e.scrollTop.set(t))),C.h(S.PU)))))),t.view("scrollConsumer").pipe(g.w(s.fold((()=>f.E),(t=>e.scrollOffset.pipe(x.R(((e,t)=>e-t),0),v.b((e=>{t.style.transform=`translateY(${e}px)`})))))),A.a(r),v.b((([t,r])=>e.paddingTop.set(t+r))))).pipe(C.h(void 0))}}(E||(E={}))},4948:(e,t,r)=>{"use strict";r.d(t,{J:()=>l});var n=r(27378),i=r(90351),a=r(63969),s=r(40219);if(75==r.j)var o=r(7046);const l=e=>n.createElement(o.zx.Animated,Object.assign({},(0,o.L_)(e,d.gray))),c={position:"relative",display:"inline-block",overflow:"hidden",outline:"none",border:0,verticalAlign:"middle",whiteSpace:"nowrap",cursor:"default",userSelect:"none",$nest:{"&:not([data-disabled='true'])[data-hovered='true']":{cursor:"pointer"}}},u={overflow:"hidden",padding:`0 ${a.u.rem(.5)}`,borderRadius:a.u.rem(s.fx),backgroundColor:i.Il.CoreNeutral60,color:i.Il.CoreNeutral0,textTransform:"none",letterSpacing:a.u.rem(i.xv.ButtonLetterSpacing),fontSize:a.u.rem(i.xv.ButtonSize),lineHeight:a.u.rem(i.xv.ButtonLineHeight),transitionDuration:a.u.seconds(.2),$nest:{"&[data-active='true'] > i[role='icon'] > svg, &:not([data-disabled='true']):hover > i[role='icon'] > svg, &:not([data-disabled='true'])[data-hovered='true'] > i[role='icon'] > svg":{fill:i.Il.CoreNeutral0},"&:not([data-disabled='true'])[data-hovered='true']":{backgroundColor:i.Il.CoreNeutral50,color:i.Il.CoreNeutral0},"&:not([data-disabled='true'])[data-active='true']":{backgroundColor:i.Il.CoreNeutral50,color:i.Il.CoreNeutral0,$nest:{"&:hover":{backgroundColor:i.Il.CoreNeutral50,color:i.Il.CoreNeutral0}}},"&[data-disabled='true']":{backgroundColor:i.Il.CoreNeutral60,color:i.Il.CoreNeutral50},".groupSticky &":{padding:`0 ${a.u.rem(.5)}`,borderRight:`2px solid ${i.Il.CoreNeutral0}`,borderRadius:0,backgroundColor:i.Il.CoreNeutral20,$nest:{"&:first-child":{borderRadius:`${a.u.rem(s.fx)} 0 0 ${a.u.rem(s.fx)}`},"&:last-child":{borderRight:"none",borderRadius:`0 ${a.u.rem(s.fx)} ${a.u.rem(s.fx)} 0`}}}}},d=a.u.stylesheet({button:[c],gray:[c,u]})},95403:(e,t,r)=>{"use strict";r.d(t,{s:()=>ke});var n,i=r(27378),a=r(5739),s=r(22232),o=r(90351),l=r(35407),c=r(88056),u=r(76024),d=r(19429),p=r(59312),m=r(95195),h=(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])})(e,t)},function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),g=function(){return(g=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var i in t=arguments[r])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)},f=m.t$,y=function(e,t,r){return f([{value:e,context:t,message:r}])},v=m.F2,b=function(){function e(e,t,r,n){this.name=e,this.is=t,this.validate=r,this.encode=n,this.decode=this.decode.bind(this)}return e.prototype.pipe=function(t,r){var n=this;return void 0===r&&(r="pipe("+this.name+", "+t.name+")"),new e(r,t.is,(function(e,r){var i=n.validate(e,r);return(0,m.nM)(i)?i:t.validate(i.right,r)}),this.encode===w&&t.encode===w?w:function(e){return n.encode(t.encode(e))})},e.prototype.asDecoder=function(){return this},e.prototype.asEncoder=function(){return this},e.prototype.decode=function(e){return this.validate(e,[{key:"",type:this,actual:e}])},e}(),w=function(e){return e};function C(e,t,r,n){for(var i=e.length,a=Array(i+1),s=0;s<i;s++)a[s]=e[s];return a[i]={key:t,type:r,actual:n},a}function S(e,t){for(var r=t.length,n=0;n<r;n++)e.push(t[n])}var I=Object.prototype.hasOwnProperty;function k(e){return Object.keys(e).map((function(t){return t+": "+e[t].name})).join(", ")}function x(e){for(var t=0;t<e.length;t++)if(e[t].encode!==w)return!1;return!0}function A(e){return"{ "+k(e)+" }"}function E(e){return"Partial<"+e+">"}function T(e){return"("+e.map((function(e){return e.name})).join(" | ")+")"}var _={};function L(e,t){for(var r=[],n=0,i=e;n<i.length;n++){var a=i[n];-1!==t.indexOf(a)&&r.push(a)}return r}function R(e){return"LiteralType"===e._tag}function P(e){return"InterfaceType"===e._tag}function O(e){return"UnionType"===e._tag}var M=[];function F(e){if(-1!==M.indexOf(e))return _;if(P(e)||function(e){return"StrictType"===e._tag}(e)){var t=_;for(var r in e.props){var n=e.props[r];R(n)&&(t===_&&(t={}),t[r]=[n.value])}return t}if(function(e){return"ExactType"===e._tag}(e)||function(e){return"RefinementType"===e._tag}(e))return F(e.type);if(function(e){return"IntersectionType"===e._tag}(e))return e.types.reduce((function(e,t){return function(e,t){if(e===_)return t;if(t===_)return e;var r=Object.assign({},e);for(var n in t)if(e.hasOwnProperty(n)){var i=L(e[n],t[n]);if(!(i.length>0)){r=_;break}r[n]=i}else r[n]=t[n];return r}(e,F(t))}),_);if(O(e))return e.types.slice(1).reduce((function(e,t){return function(e,t){if(e===_||t===_)return _;var r=_;for(var n in e)t.hasOwnProperty(n)&&0===L(e[n],t[n]).length&&(r===_&&(r={}),r[n]=e[n].concat(t[n]));return r}(e,F(t))}),F(e.types[0]));if(function(e){return"RecursiveType"===e._tag}(e)){M.push(e);var i=F(e.type);return M.pop(),i}return _}new(function(e){function t(){var t=e.call(this,"null",(function(e){return null===e}),(function(e,r){return t.is(e)?v(e):y(e,r)}),w)||this;return t._tag="NullType",t}return h(t,e),t}(b));var N=new(function(e){function t(){var t=e.call(this,"undefined",(function(e){return void 0===e}),(function(e,r){return t.is(e)?v(e):y(e,r)}),w)||this;return t._tag="UndefinedType",t}return h(t,e),t}(b)),D=(new(function(e){function t(){var t=e.call(this,"void",N.is,N.validate,w)||this;return t._tag="VoidType",t}return h(t,e),t}(b)),new(function(e){function t(){var t=e.call(this,"unknown",(function(e){return!0}),v,w)||this;return t._tag="UnknownType",t}return h(t,e),t}(b)),new(function(e){function t(){var t=e.call(this,"string",(function(e){return"string"==typeof e}),(function(e,r){return t.is(e)?v(e):y(e,r)}),w)||this;return t._tag="StringType",t}return h(t,e),t}(b))),$=new(function(e){function t(){var t=e.call(this,"number",(function(e){return"number"==typeof e}),(function(e,r){return t.is(e)?v(e):y(e,r)}),w)||this;return t._tag="NumberType",t}return h(t,e),t}(b)),U=(new(function(e){function t(){var t=e.call(this,"bigint",(function(e){return"bigint"==typeof e}),(function(e,r){return t.is(e)?v(e):y(e,r)}),w)||this;return t._tag="BigIntType",t}return h(t,e),t}(b)),new(function(e){function t(){var t=e.call(this,"boolean",(function(e){return"boolean"==typeof e}),(function(e,r){return t.is(e)?v(e):y(e,r)}),w)||this;return t._tag="BooleanType",t}return h(t,e),t}(b))),B=new(function(e){function t(){var t=e.call(this,"UnknownArray",Array.isArray,(function(e,r){return t.is(e)?v(e):y(e,r)}),w)||this;return t._tag="AnyArrayType",t}return h(t,e),t}(b)),j=new(function(e){function t(){var t=e.call(this,"UnknownRecord",(function(e){var t=Object.prototype.toString.call(e);return"[object Object]"===t||"[object Window]"===t}),(function(e,r){return t.is(e)?v(e):y(e,r)}),w)||this;return t._tag="AnyDictionaryType",t}return h(t,e),t}(b)),W=function(e){function t(t,r,n,i,a){var s=e.call(this,t,r,n,i)||this;return s.value=a,s._tag="LiteralType",s}return h(t,e),t}(b);function H(e,t){void 0===t&&(t=JSON.stringify(e));var r=function(t){return t===e};return new W(t,r,(function(t,n){return r(t)?v(e):y(t,n)}),w,e)}var G=function(e){function t(t,r,n,i,a){var s=e.call(this,t,r,n,i)||this;return s.keys=a,s._tag="KeyofType",s}return h(t,e),t}(b);function z(e,t){void 0===t&&(t=Object.keys(e).map((function(e){return JSON.stringify(e)})).join(" | "));var r=function(t){return D.is(t)&&I.call(e,t)};return new G(t,r,(function(e,t){return r(e)?v(e):y(e,t)}),w,e)}var Y=function(e){function t(t,r,n,i,a,s){var o=e.call(this,t,r,n,i)||this;return o.type=a,o.predicate=s,o._tag="RefinementType",o}return h(t,e),t}(b);ne($,(function(e){return Number.isInteger(e)}),"Int");var V=function(e){function t(t,r,n,i,a){var s=e.call(this,t,r,n,i)||this;return s.runDefinition=a,s._tag="RecursiveType",s}return h(t,e),t}(b);Object.defineProperty(V.prototype,"type",{get:function(){return this.runDefinition()},enumerable:!0,configurable:!0});var q=function(e){function t(t,r,n,i,a){var s=e.call(this,t,r,n,i)||this;return s.type=a,s._tag="ArrayType",s}return h(t,e),t}(b);function X(e,t){return void 0===t&&(t="Array<"+e.name+">"),new q(t,(function(t){return B.is(t)&&t.every(e.is)}),(function(t,r){var n=B.validate(t,r);if((0,m.nM)(n))return n;for(var i=n.right,a=i.length,s=i,o=[],l=0;l<a;l++){var c=i[l],u=e.validate(c,C(r,String(l),e,c));if((0,m.nM)(u))S(o,u.left);else{var d=u.right;d!==c&&(s===i&&(s=i.slice()),s[l]=d)}}return o.length>0?f(o):v(s)}),e.encode===w?w:function(t){return t.map(e.encode)},e)}var Z=function(e){function t(t,r,n,i,a){var s=e.call(this,t,r,n,i)||this;return s.props=a,s._tag="InterfaceType",s}return h(t,e),t}(b);function J(e,t){void 0===t&&(t=A(e));var r=Object.keys(e),n=r.map((function(t){return e[t]})),i=r.length;return new Z(t,(function(e){if(j.is(e)){for(var t=0;t<i;t++){var a=r[t],s=e[a];if(void 0===s&&!I.call(e,a)||!n[t].is(s))return!1}return!0}return!1}),(function(e,t){var a=j.validate(e,t);if((0,m.nM)(a))return a;for(var s=a.right,o=s,l=[],c=0;c<i;c++){var u=r[c],d=o[u],p=n[c],h=p.validate(d,C(t,u,p,d));if((0,m.nM)(h))S(l,h.left);else{var y=h.right;(y!==d||void 0===y&&!I.call(o,u))&&(o===s&&(o=g({},s)),o[u]=y)}}return l.length>0?f(l):v(o)}),x(n)?w:function(e){for(var t=g({},e),a=0;a<i;a++){var s=r[a],o=n[a].encode;o!==w&&(t[s]=o(e[s]))}return t},e)}var K=function(e){function t(t,r,n,i,a){var s=e.call(this,t,r,n,i)||this;return s.props=a,s._tag="PartialType",s}return h(t,e),t}(b);function Q(e,t){void 0===t&&(t=E(A(e)));var r=Object.keys(e),n=r.map((function(t){return e[t]})),i=r.length;return new K(t,(function(t){if(j.is(t)){for(var n=0;n<i;n++){var a=r[n],s=t[a];if(void 0!==s&&!e[a].is(s))return!1}return!0}return!1}),(function(t,n){var a=j.validate(t,n);if((0,m.nM)(a))return a;for(var s=a.right,o=s,l=[],c=0;c<i;c++){var u=r[c],d=o[u],p=e[u],h=p.validate(d,C(n,u,p,d));if((0,m.nM)(h))void 0!==d&&S(l,h.left);else{var y=h.right;y!==d&&(o===s&&(o=g({},s)),o[u]=y)}}return l.length>0?f(l):v(o)}),x(n)?w:function(e){for(var t=g({},e),a=0;a<i;a++){var s=r[a],o=e[s];void 0!==o&&(t[s]=n[a].encode(o))}return t},e)}!function(e){function t(t,r,n,i,a,s){var o=e.call(this,t,r,n,i)||this;return o.domain=a,o.codomain=s,o._tag="DictionaryType",o}h(t,e)}(b);var ee=function(e){function t(t,r,n,i,a){var s=e.call(this,t,r,n,i)||this;return s.types=a,s._tag="UnionType",s}return h(t,e),t}(b);function te(e,t){void 0===t&&(t=T(e));var r=function(e){var t=F(e[0]),r=Object.keys(t),n=e.length,i=function(r){for(var i=t[r].slice(),a=[t[r]],s=1;s<n;s++){var o=F(e[s])[r];if(void 0===o)return"continue-keys";if(o.some((function(e){return-1!==i.indexOf(e)})))return"continue-keys";i.push.apply(i,o),a.push(o)}return{value:[r,a]}};e:for(var a=0,s=r;a<s.length;a++){var o=i(s[a]);if("object"==typeof o)return o.value;switch(o){case"continue-keys":continue e}}}(e);if(void 0!==r&&e.length>0){var n=r[0],i=r[1],a=i.length,s=function(e){for(var t=0;t<a;t++)if(-1!==i[t].indexOf(e))return t};return new re(t,(function(t){if(j.is(t)){var r=s(t[n]);return void 0!==r&&e[r].is(t)}return!1}),(function(t,r){var i=j.validate(t,r);if((0,m.nM)(i))return i;var a=i.right,o=s(a[n]);if(void 0===o)return y(t,r);var l=e[o];return l.validate(a,C(r,String(o),l,a))}),x(e)?w:function(r){var i=s(r[n]);if(void 0===i)throw new Error("no codec found to encode value in union codec "+t);return e[i].encode(r)},e,n)}return new ee(t,(function(t){return e.some((function(e){return e.is(t)}))}),(function(t,r){for(var n=[],i=0;i<e.length;i++){var a=e[i],s=a.validate(t,C(r,String(i),a,t));if(!(0,m.nM)(s))return v(s.right);S(n,s.left)}return f(n)}),x(e)?w:function(r){for(var n=0,i=e;n<i.length;n++){var a=i[n];if(a.is(r))return a.encode(r)}throw new Error("no codec found to encode value in union type "+t)},e)}!function(e){function t(t,r,n,i,a){var s=e.call(this,t,r,n,i)||this;return s.types=a,s._tag="IntersectionType",s}h(t,e)}(b);!function(e){function t(t,r,n,i,a){var s=e.call(this,t,r,n,i)||this;return s.types=a,s._tag="TupleType",s}h(t,e)}(b);!function(e){function t(t,r,n,i,a){var s=e.call(this,t,r,n,i)||this;return s.type=a,s._tag="ReadonlyType",s}h(t,e)}(b);!function(e){function t(t,r,n,i,a){var s=e.call(this,t,r,n,i)||this;return s.type=a,s._tag="ReadonlyArrayType",s}h(t,e)}(b);!function(e){function t(t,r,n,i,a){var s=e.call(this,t,r,n,i)||this;return s.type=a,s._tag="ExactType",s}h(t,e)}(b);new(function(e){function t(){var t=e.call(this,"Function",(function(e){return"function"==typeof e}),(function(e,r){return t.is(e)?v(e):y(e,r)}),w)||this;return t._tag="FunctionType",t}return h(t,e),t}(b));var re=function(e){function t(t,r,n,i,a,s){var o=e.call(this,t,r,n,i,a)||this;return o.tag=s,o}return h(t,e),t}(ee);new(function(e){function t(){var t=e.call(this,"never",(function(e){return!1}),(function(e,t){return y(e,t)}),(function(){throw new Error("cannot encode never")}))||this;return t._tag="NeverType",t}return h(t,e),t}(b)),new(function(e){function t(){var t=e.call(this,"any",(function(e){return!0}),v,w)||this;return t._tag="AnyType",t}return h(t,e),t}(b)),new(function(e){function t(){var t=e.call(this,"object",(function(e){return null!==e&&"object"==typeof e}),(function(e,r){return t.is(e)?v(e):y(e,r)}),w)||this;return t._tag="ObjectType",t}return h(t,e),t}(b));function ne(e,t,r){var n;return void 0===r&&(r="("+e.name+" | "+(((n=t).displayName||n.name||"<function"+n.length+">")+")")),new Y(r,(function(r){return e.is(r)&&t(r)}),(function(r,n){var i=e.validate(r,n);if((0,m.nM)(i))return i;var a=i.right;return t(a)?v(a):y(a,n)}),e.encode,e,t)}ne($,Number.isInteger,"Integer"),function(e){function t(t,r,n,i,a){var s=e.call(this,t,r,n,i)||this;return s.props=a,s._tag="StrictType",s}h(t,e)}(b);var ie,ae,se=r(55485);!function(e){e.prod="prod",e.preprod="preprod",e.qa="qa",e.fb="fb",e.dev="dev"}(ie||(ie={})),function(e){e.american="american",e.british="british",e.canadian="canadian",e.australian="australian"}(ae||(ae={}));var oe,le=z({".grammarly.com":null,".ppgr.io":null,".qagr.io":null}),ce=(0,p.pr)(Object.keys(le.keys),["grammarly.io","sumologic.com","microsoft.com","office.com","apple.com","google.com","mozilla.org","mozilla.net"]).map((function(e){return e.startsWith(".")?e.slice(1):e})),ue=te([J({state:H("disabled")}),J({state:H("enabled")}),J({state:H("test")})]),de=(J({version:D}),new b("HttpString",D.is,(function(e,t){return m.wE.chain(D.validate(e,t),(function(r){return/^(https?|wss?):\/\/(\w|\d|-|\/|\.|\?|\=|\_|\&)+(:(\d)+)?$/.test(r)?v(r):y(e,t,"URL parsing failed ("+r+")")}))}),String)),pe=new b("MsStoreUrlString",D.is,(function(e,t){return m.wE.chain(D.validate(e,t),(function(r){return/ms-windows-store:\/\/(\w|\d|-|\/|\.|\?|\=|\_|\&)+(:(\d)+)?$/.test(r)?v(r):y(e,t,"Edge URL parsing failed ("+r+")")}))}),String),me=new b("AllowedHttpString",de.is,(function(e,t){return m.wE.chain(de.validate(e,t),(function(r){for(var n=r.split("//")[1].split("/")[0].split(":")[0],i=0,a=ce;i<a.length;i++){var s=a[i];if(n.endsWith(s))return v(r)}var o="Domain ("+n+") is not allowed in "+ce.join(", ");return y(e,t,o)}))}),de.encode),he=z({TRACE:null,DEBUG:null,INFO:null,WARN:null,ERROR:null,FATAL:null,OFF:null}),ge=(Q({env:se.D.createStringEnum(ie,"Environment"),logLevel:he,accumulateCrashLogLevel:he,sendCrashOnLogLevel:he,collectLogs:U,collectCrashLogs:U,copyLogsToConsole:U,crashLogsCacheSize:$,debugLogsCacheSize:$,tracking:ue,alertCache:Q({prefix:D,version:D}),mutedCategoriesCache:Q({prefix:D,version:D}),outcomeScoreCache:Q({prefix:D,version:D}),userSettingsPrefix:D,userSettingsVersion:D,defaultDialect:se.D.createStringEnum(ae,"DialectEnum"),notificationShowTimeMs:$,maxNotificationsOnTheScreen:$,selfUpdate:Q({versionCheckInterval:$,selfUpdateDelay:$,canReloadCheckInterval:$,blockingModalAutoReloadDelay:$,retryFailedVersionCheckInterval:$,retryFailedVersionCheckLimit:$,debugBuildVersion:D,versionFilePath:D}),pingMaybeGnarDelay:$,domains:Q({cookie:le,localServer:D}),api:Q({authUrl:me,institutionUrl:me,snippetsUrl:me,institutionAdminUrl:me,institutionVoxUrl:me,institutionStatisticsUrl:me,institutionSuggestionsUrl:me,institutionTonesUrl:me,tonesUrl:me,dapiUrl:me,doxUrl:me,irbisUrl:me,subscriptionUrl:me,discountUrl:me,capiWsUrl:me,capiApiUrl:me,gnarApi:Q({url:me}),felogUrl:me,felogDebugUrl:me,sumoUrl:me,crashLogUrl:me,onlineTestUrl:D,wsTest:me,proofitResultUrl:me,redirect:me,mailApiUrl:me,ssoUrl:me}),app:Q({nameWeb:D,nameDesktop:D}),urls:Q({free:D,account:me}),funnel:Q({base:me,resetPassword:me,accountDeleted:me,businessLanding:me,businessStyleguideLanding:me,businessUpgradeLanding:me,subscribe:me,upgrade:me,plans:me,signin:me,socialSignin:me,signup:me,mainPage:me,deleteSocialAccount:me,subscriptionCancellationSurvey:me,keyboardInstall:me,desktopAppInstall:me,claimedUserJoinFallback:me}),officeAddin:Q({installURL:me,infoURL:me}),crossPlatformOfficeAddin:Q({installURL:me,infoURL:me}),desktop:Q({windows:Q({installURL:me,infoURL:me}),mac:Q({installURL:me,infoURL:me})}),extension:Q({chrome:Q({installURL:me,infoURL:me}),firefox:Q({installURL:me,iconURL:me,infoURL:me}),safari:Q({installURL:me}),edge:Q({installURL:pe,infoURL:me}),edgeChromium:Q({installURL:me})}),edu:Q({adminPanelURL:me}),support:Q({login:me,email:D,mainPage:me,newRequest:me,contact:me,connectionTroubleshooting:me,emailExistsKBUrl:me,safariDownloadFilesKBUrl:me,rtfCompatibilityUrl:me,diagnosticTestPath:D,documentAcceptTrackedChanges:me}),privacyPolicy:me,termsOfService:me,account:Q({customize:me,subscription:me,adminSubscription:me,members:me,styleGuide:me}),preconnectLinks:X(de)}),d.VF((function(){return{env:ie.prod,logLevel:"INFO",accumulateCrashLogLevel:"DEBUG",sendCrashOnLogLevel:"ERROR",collectLogs:!0,collectCrashLogs:!0,copyLogsToConsole:!1,crashLogsCacheSize:100,debugLogsCacheSize:100,tracking:{state:"enabled"},alertCache:{prefix:"editorTsAlertCache",version:"4"},mutedCategoriesCache:{prefix:"mutedCategoriesCache",version:"0"},outcomeScoreCache:{prefix:"scoreCache",version:"0"},userSettingsPrefix:"userSettings",userSettingsVersion:"1",defaultDialect:ae.american,notificationShowTimeMs:7e3,maxNotificationsOnTheScreen:3,selfUpdate:{versionCheckInterval:59*u.wn,selfUpdateDelay:12*u.p7,canReloadCheckInterval:5*u.cK,blockingModalAutoReloadDelay:1*u.wn,retryFailedVersionCheckInterval:5*u.wn,retryFailedVersionCheckLimit:20,debugBuildVersion:"auto",versionFilePath:"/version.json"},pingMaybeGnarDelay:1*u.p7,domains:{cookie:".grammarly.com",localServer:"denali-local.grammarly.com"},api:{authUrl:"https://auth.grammarly.com/v3",institutionUrl:"https://institution.grammarly.com/api/institution",snippetsUrl:"https://institution.ppgr.io/api/snippets",institutionAdminUrl:"https://institution.grammarly.com/api/institution/admin",institutionVoxUrl:"https://institution.grammarly.com/api/institution/vox",institutionStatisticsUrl:"https://institution.grammarly.com/api/institution/statistics",institutionSuggestionsUrl:"https://institution.grammarly.com/api/institution/settings/suggestions",institutionTonesUrl:"https://institution.grammarly.com/api/institution/settings/tones",tonesUrl:"https://institution.ppgr.io/api/tones",dapiUrl:"https://data.grammarly.com",doxUrl:"https://dox.grammarly.com",irbisUrl:"https://irbis.grammarly.com",subscriptionUrl:"https://subscription.grammarly.com/api/v1",discountUrl:"https://irbis.grammarly.com/api/discounts",capiWsUrl:"wss://capi.grammarly.com/freews",capiApiUrl:"https://capi.grammarly.com/api",gnarApi:{url:"https://gnar.grammarly.com"},felogUrl:"https://f-log-editor.grammarly.io",felogDebugUrl:"https://f-log-editor-debug.grammarly.io",sumoUrl:"https://endpoint2.collection.us2.sumologic.com/receiver/v1/http/ZaVnC4dhaV0Bxac28IqT2frgzsjX7HEotu8EZEZr07YE9RWLCzrOMGwzO9aL6c_iSiidkEplFOod2igKIxz_7s2CHlXc2u-XuLpetEBK1fV6xjfN2Sw2gA==",crashLogUrl:"https://f-log-editor.grammarly.io/crash",onlineTestUrl:"/online-test.json",wsTest:"wss://wstest.grammarly.com",proofitResultUrl:"https://dox.grammarly.com/documents/_docId_/proofread",redirect:"https://redirect.grammarly.com/redirect",mailApiUrl:"https://g-mail.grammarly.com",ssoUrl:"https://sso.grammarly.com"},app:{nameWeb:"editor",nameDesktop:"desktopEditor"},urls:{free:"/free",account:"https://account.grammarly.com"},funnel:{base:"https://www.grammarly.com",resetPassword:"https://www.grammarly.com/resetpassword",accountDeleted:"https://www.grammarly.com/account-deleted",businessLanding:"https://www.grammarly.com/business/e",businessStyleguideLanding:"https://www.grammarly.com/business/styleguide",businessUpgradeLanding:"https://www.grammarly.com/upgrade/business/try",subscribe:"https://www.grammarly.com/subscribe",upgrade:"https://www.grammarly.com/upgrade",plans:"https://www.grammarly.com/plans",signin:"https://www.grammarly.com/signin",socialSignin:"https://www.grammarly.com/signin/app/desktop-editor",signup:"https://www.grammarly.com/signup",mainPage:"https://www.grammarly.com/",deleteSocialAccount:"https://www.grammarly.com/social/delete-account",subscriptionCancellationSurvey:"https://www.grammarly.com/subscription-cancellation-survey",keyboardInstall:"https://www.grammarly.com/keyboard",desktopAppInstall:"https://www.grammarly.com/native",claimedUserJoinFallback:"https://redirect.grammarly.com/redirect?business_join=1"},officeAddin:{installURL:"https://download-office.grammarly.com/latest/GrammarlyAddInSetup.exe",infoURL:"https://www.grammarly.com/office-addin/windows"},crossPlatformOfficeAddin:{installURL:"https://appsource.microsoft.com/en-us/product/office/WA200001011?tab=Overview",infoURL:"https://www.grammarly.com/office-addin/mac"},desktop:{windows:{installURL:"https://download-editor.grammarly.com/windows/GrammarlySetup.exe",infoURL:"https://www.grammarly.com/native/windows"},mac:{installURL:"https://download-editor.grammarly.com/osx/Grammarly.dmg",infoURL:"https://www.grammarly.com/native/mac"}},extension:{chrome:{installURL:"https://chrome.google.com/webstore/detail/kbfnbcaeplbcioakkpcpgfkobkghlhen",infoURL:"https://chrome.google.com/webstore/detail/grammarly-spell-checker-g/kbfnbcaeplbcioakkpcpgfkobkghlhen?hl=en"},firefox:{installURL:"https://addons.mozilla.org/firefox/downloads/latest/566314/addon-566314-latest.xpi",iconURL:"https://addons.cdn.mozilla.net/user-media/addon_icons/566/566314-32.png",infoURL:"https://addons.mozilla.org/en-US/firefox/addon/grammarly-1/"},safari:{installURL:"https://apps.apple.com/us/app/grammarly-for-safari/id1462114288?ls=1&mt=12"},edge:{installURL:"ms-windows-store://pdp?ProductId=9p59wxtbhzzm",infoURL:"https://www.microsoft.com/en-us/store/p/grammarly-for-microsoft-edge/9p59wxtbhzzm?rtc=1"},edgeChromium:{installURL:"https://microsoftedge.microsoft.com/addons/detail/grammarly-for-microsoft-e/cnlefmmeadmemmdciolhbnfeacpdfbkd"}},edu:{adminPanelURL:"https://account.grammarly.com/admin"},support:{login:"https://support.grammarly.com/login",email:"support@grammarly.com",mainPage:"https://support.grammarly.com/",newRequest:"https://support.grammarly.com/hc/en-us/requests/new",contact:"https://www.grammarly.com/contact",connectionTroubleshooting:"https://support.grammarly.com/hc/en-us/articles/115000090271-Network-configuration-blocks-Grammarly-services",emailExistsKBUrl:"https://support.grammarly.com/hc/en-us/articles/115000090791-Changing-your-email-to-an-email-that-already-exists",safariDownloadFilesKBUrl:"https://support.grammarly.com/hc/en-us/articles/360001105952",rtfCompatibilityUrl:"https://support.grammarly.com/hc/en-us/articles/115000091512-Preserve-text-formatting",diagnosticTestPath:"/diagnostic-test?origin=editor",documentAcceptTrackedChanges:"https://support.office.com/en-us/article/Accept-tracked-changes-4838d24c-d5d1-4c6c-8e39-78b44bd2b4cc"},privacyPolicy:"https://www.grammarly.com/privacy-policy",termsOfService:"https://www.grammarly.com/terms",account:{customize:"https://account.grammarly.com/customize",subscription:"https://account.grammarly.com/subscription",adminSubscription:"https://account.grammarly.com/admin/subscription",members:"https://account.grammarly.com/admin/members",styleGuide:"https://account.grammarly.com/admin/style-guide"},preconnectLinks:["https://data.grammarly.com","https://gnar.grammarly.com","https://subscription.grammarly.com","https://auth.grammarly.com","https://f-log-editor.grammarly.com","https://static.institution.grammarly.com","https://fonts.gstatic.com"]}})));!function(e){e.createFromPlatformConfig=l.Pj(ge),e.Context=i.createContext(c.Y.invariantContent("PlatformConfig"))}(oe||(oe={}));var fe=r(81531),ye=r(63969),ve=r(30763),be=r(7046),we=r(94793),Ce=r(50790),Se=r(3656),Ie=r(4948);var ke;!function(e){e.UnauthorizedError=({action:e})=>i.createElement(Ce.DI.TitledContent,{title:"You've Been Logged Out"},"This occurs due to inactivity or logging out on another device.",i.createElement("br",null),i.createElement(Ie.J,{name:"login",className:_e.footerLink,onClick:e},"Log Back In")),e.Offline=({reconnect:e,reconnectTime:t})=>i.createElement(Ce.DI.TitledContent,{title:"Lost Connection"},"Your Internet session was interrupted. Weâ€™ll try to reconnect you in"," ",i.createElement(a.F.span,null,t.view((e=>e)))," seconds.",i.createElement("br",null),i.createElement(Ie.J,{name:"reconnect",className:_e.footerLink,onClick:e},"Reconnect Now")),e.ServerError=()=>{const t=e.withReload(Ie.J,"UnknownConnectionError");return i.createElement(Ce.DI.TitledContent,{title:"Sorry, Unexpected Issue"},"A small error has occurred, causing an interruption of service.",i.createElement("br",null),i.createElement(t,{name:"reload-page",className:_e.footerLink},"Reload This Page"))},e.ConnectionWSError=()=>{const e=i.useContext(oe.Context);return i.createElement(Ce.DI.TitledContent,{title:"Canâ€™t Connect to Grammarly"},"Your network configuration currently blocks Grammarly services on this computer. ",i.createElement("br",null),i.createElement(Ie.J,{name:"troubleshoot",className:_e.footerLink,href:e.support.diagnosticTestPath,target:"_blank"},"Troubleshoot This Issue"))},e.ClientConnectionError=()=>{const t=e.withReload(Ie.J,"ClientConnectionErrorNotification");return i.createElement(Ce.DI.TitledContent,{title:"Your Internet Connection Is Unstable"},"Please check your network stability and then reload this page.",i.createElement("br",null),i.createElement(t,{name:"reload-page",className:_e.footerLink},"Reload Page Now"))},e.DocumentNotFoundError=({navigateToDocuments:e})=>i.createElement(Ce.DI.TitledContent,{title:"Canâ€™t find this document"},"It looks like this document was removed or URL is incorrect.",i.createElement("br",null),i.createElement(Ie.J,{name:"goto-docs",className:_e.footerLink,onClick:e},"Go to your documents")),e.SelfUpdate=()=>{const t=i.useContext(ve.m.Context),r=e.withReload(be.zx,"SelfUpdateBlocker");return i.createElement(Ce.DI.TitledContent,{title:"Grammarly needs to refresh this page"},"Don't worry - your documents have already been saved. Please"," ",i.createElement(r,{name:"reload-page",className:_e.link},"reload")," ","the page ",t.hotkeyLabelR,".")},e.DesktopHardUpdate=({reloadMethod:e})=>{const t=i.useContext(ve.m.Context).desktopUpdate;return i.createElement(Ce.DI.TitledContent,{title:t.hardTitle},t.hard,i.createElement("br",null),i.createElement(Ie.J,{name:"reload-desktop",className:_e.footerLink,onClick:e},t.reload))},e.DesktopHardDownload=({downloadMethod:e})=>{const t=i.useContext(ve.m.Context).desktopUpdate;return i.createElement(Ce.DI.TitledContent,{title:t.hardTitle},t.hard,i.createElement("br",null),i.createElement(Ie.J,{name:"download-desktop",className:_e.footerLink,onClick:e},t.download))},e.SlowNetworkError=()=>i.createElement(Ce.DI.TitledContent,{title:"Your Internet Connection Is Unstable"},"Grammarly may work slower than normal."),e.CheckingIsDownError=()=>i.createElement(Ce.DI.TitledContent,{title:"Text Checking Is Temporarily Unavailable"},"Grammarly is unable to check your text for errors at this time. Weâ€™re working to resolve the issue. Please check back soon."),e.Error=()=>{const e=i.useContext(oe.Context);return i.createElement(Ce.DI.TitledContent,{title:"Sorry, Something Went Wrong"},"Please try again later or"," ",i.createElement(be.zx,{name:"support",className:_e.link,href:e.support.login,target:"_blank"},"contact support")," ","now to report the issue.")},e.UndoMuteNotification=({action:e,categoryDescription:t})=>{const r=i.useContext(ve.m.Context);return i.createElement(Ce.DI.Content,null,i.createElement(Se.XY,{className:_e.muteText},r.mutedAlerts.undoNotification.text," ",i.createElement("b",null,t,".")),i.createElement(Ie.J,{name:"undoMuteButton",className:_e.muteUndoFooterLink,onClick:e},r.mutedAlerts.undoNotification.buttonText,i.createElement(we.JO.Undo,{className:_e.muteUndoIcon})))},e.ProofitPaymentDeclinedError=({paymentMethod:e,navigateToSubscription:t})=>{const r=i.useContext(ve.m.Context).proofitPayment,n=function(e,t,r){switch(e){case"creditCard":return t;case"payPal":return r;default:const n=`Unknown payment method: ${e}`;throw fe.C8.Logging.getLogger("ProofitView").warn(n),new Error(n)}}(e,r.creditCard,r.payPal);return i.createElement(Ce.DI.TitledContent,{title:"Order can not be processed"},i.createElement("div",null,n),"Please update your credit card information in the Manage Subscription section.",i.createElement("br",null),i.createElement(Ie.J,{name:"manage-subscription",className:_e.footerLink,onClick:t},"Go to Manage Subscription"))},e.PaymentSuccessMessage=()=>{const e=i.useContext(ve.m.Context).proofitOrderModal.card.paymentSuccess;return i.createElement(Ce.DI.TitledContent,{title:e.title},i.createElement("div",null,e.message))},e.PaymentErrorMessage=()=>{const e=i.useContext(ve.m.Context).proofitOrderModal.card.paymentError,t=i.useContext(oe.Context);return i.createElement(Ce.DI.TitledContent,{title:e.title},i.createElement("div",null,e.message(t.support.login)))},e.ProofitEmptyDocumentError=()=>i.createElement(Ce.DI.TitledContent,{title:"Document is empty"},"The document you are trying to submit is empty. Please write something and try again."),e.ProofitDocumentProofreadError=({navigateToDocuments:e})=>i.createElement(Ce.DI.TitledContent,{title:"This document is a recent submission"},"The text you are trying to send for human proofreading was reviewed by our team. Please edit your text or select another document before you re-submit.",i.createElement("br",null),i.createElement(Ie.J,{name:"goto-docs",className:_e.footerLink,onClick:e},"Go to your documents")),e.ProofitComplexInternalStructureError=({navigateToDocuments:e})=>i.createElement(Ce.DI.TitledContent,{title:"This document cannot be corrected"},"The text you are trying to send for human proofreading has complex internal structure. Please edit your text (e.g., remove significantly long tables) or select another document.",i.createElement("br",null),i.createElement(Ie.J,{name:"goto-docs",className:_e.footerLink,onClick:e},"Go to your documents")),e.withReload=(e,t)=>class extends i.Component{render(){return i.createElement(e,Object.assign({},this.props,{onClick:()=>{try{localStorage.setItem("pageReloadReason",JSON.stringify({source:t,location:window.location.href,timestamp:Date.now()}))}catch(e){}window.location.reload()}}))}},e.CopyToClipboardError=()=>{const e=i.useContext(ve.m.Context);return i.createElement(Ce.DI.TitledContent,{title:"Copying Is Not Supported by Your Browser"},"Please use ",e.hotkeyLabelC," instead.")},e.ProofitCancelled=()=>{const e=i.useContext(oe.Context);return i.createElement(Ce.DI.TitledContent,{title:"Your order has been cancelled"},"Your proofreading order has been cancelled and the payment refunded. Please check your email for more information, or contact"," ",i.createElement(Ie.J,{name:"support",className:_e.footerLink,href:e.support.login,target:"_blank"},"Grammarly support"))},e.ProofitCompleted=({documentTitle:e,documentDownloadUrl:t,email:r})=>i.createElement(Ce.DI.TitledContent,{title:`${e||"Your"} document has been proofread`},"A version of this document with proofreadersâ€™ marks has been emailed to you at ",r," in .docx format.",i.createElement("br",null),i.createElement(Ie.J,{name:"download",className:_e.footerLink,href:t,target:"_blank"},"Download .docx")),e.DenaliFormattingCompatibility=()=>{const e=i.useContext(ve.m.Context),t=i.useContext(oe.Context);return i.createElement(Ce.DI.TitledContent,{title:e.rtfCompatibilityModeNotificationTitle},"To preserve your documentâ€™s formatting, Grammarlyâ€™s formatting tools are temporarily disabled.",i.createElement("br",null),i.createElement(Ie.J,{name:"support",className:_e.footerLink,href:t.support.rtfCompatibilityUrl,target:"_blank"},"Learn more"))},e.DenaliDocumentUploaded=({navigateToDocuments:e})=>{const{denaliDocumentUploadNotification:t}=i.useContext(ve.m.Context);return i.createElement(Ce.DI.TitledContent,{title:t.title},t.text,"Â ",i.createElement(be.zx,{name:"goto-docs",className:_e.link,onClick:e},t.link))},e.AlertsNothingFound=()=>i.createElement(Ce.DI.Content,null,"Grammarly found no critical writing issues in this text. Keep up the great work!"),e.DesktopSoftUpdate=({reloadMethod:e})=>{const t=i.useContext(ve.m.Context).desktopUpdate;return i.createElement(Ce.DI.TitledContent,{title:t.softTitle},t.soft,i.createElement("br",null),i.createElement(Ie.J,{name:"reload-desktop",className:_e.footerLink,onClick:e},t.reload))},e.DesktopSoftDownload=({downloadMethod:e})=>{const t=i.useContext(ve.m.Context).desktopUpdate;return i.createElement(Ce.DI.TitledContent,{title:t.softTitle},t.soft,i.createElement("br",null),i.createElement(Ie.J,{name:"download-desktop",className:_e.footerLink,onClick:e},t.download))},e.ThanksForFeedbackNotification=()=>i.createElement(Ce.DI.TitledContent,{title:"Your feedback has been sent"},"Thank you for helping make Grammarly better!"),e.DownloadDocumentNotFoundError=()=>{const e=i.useContext(ve.m.Context);return i.createElement(Ce.DI.TitledContent,{"data-name":"document-not-found",title:e.downloadDocumentNotFoundError})},e.ClipboardNotSupported=({hotkey:e})=>{const t=i.useContext(ve.m.Context);return i.createElement(Ce.DI.Content,null,t.hotkeyUnsupported,i.createElement("b",null,e))},e.DocumentSizeExceeded=({os:e,officeAddinUrl:t})=>{const r=i.useContext(ve.m.Context).fileSizeExceededNotification;return i.createElement(Ce.DI.TitledContent,{title:r.title},r.body,"windows"===e&&i.createElement(Ie.J,{name:"officeAddin",className:_e.footerLink,href:t,target:"_blank"},r.link))},e.DocumentUploaded=({navigateToDocument:e})=>{const t=i.useContext(ve.m.Context).documentUploaded;return i.createElement(Ce.DI.Content,null,t.message,i.createElement("br",null),i.createElement(Ie.J,{name:"goto-doc",className:_e.footerLink,onClick:e},t.link))},e.DocumentTypeUnsupported=()=>{const e=i.useContext(ve.m.Context);return i.createElement(Ce.DI.Content,null,"Unsupported file type. ",e.notificationUploadFileText,": Microsoft Word (.doc, .docx), OpenOffice (.odt), TXT and RTF.")},e.DocumentWithTrackedChangesIsUnsupported=({link:e})=>i.createElement(Ce.DI.Content,null,"Your document contains revisions. Accept all revisions and try uploading again. Click"," ",i.createElement(be.zx,{name:"document-accept-tracked-changes",className:_e.link,href:e,target:"_blank"},"here")," ","for details.");const t=(e,t)=>{switch(e){case Le.switchToDenali:return t.switchToDenali;case Le.feedbackSend:return t.feedbackSend;case Le.statisticsError:return t.statisticsError;case Le.referenceCopied:return t.referenceCopied;case Le.documentCopied:return t.documentCopied;case Le.isTemporaryDownloadError:return t.isTemporaryDownloadError;case Le.documentUploadGeneralError:return t.documentUploadGeneralError;case Le.documentIsEmpty:return t.documentIsEmpty;case Le.noFileToUpload:return t.noFileToUpload;case Le.oneDocumentIsAllowed:return t.oneDocumentIsAllowed;default:return(0,s.vE)(e)}};e.Generic=({type:e})=>{const r=i.useContext(ve.m.Context);return i.createElement(Ce.DI.TitledContent,{title:t(e,r)})}}(ke||(ke={}));const xe={display:"inline-flex",overflow:"unset",color:o.Il.CoreNeutral0,verticalAlign:"baseline",textDecoration:"underline",fontWeight:"bold",cursor:"pointer"},Ae={marginTop:ye.u.rem(.5),textDecoration:"none"},Ee={paddingLeft:ye.u.rem(1),minWidth:"auto",minHeight:"auto",justifyContent:"space-between"},Te={color:o.Il.CoreNeutral0},_e=ye.u.stylesheet({link:[xe],footerLink:[xe,Ae],muteUndoIcon:[Ee],muteText:[Te],muteUndoFooterLink:[Ae,{fontWeight:"normal"}]});var Le;!function(e){e.switchToDenali="switchToDenali",e.feedbackSend="feedbackSend",e.statisticsError="statisticsError",e.referenceCopied="referenceCopied",e.documentCopied="documentCopied",e.isTemporaryDownloadError="isTemporaryDownloadError",e.documentUploadGeneralError="documentUploadGeneralError",e.documentIsEmpty="documentIsEmpty",e.noFileToUpload="noFileToUpload",e.oneDocumentIsAllowed="oneDocumentIsAllowed"}(Le||(Le={}))},32380:(e,t,r)=>{"use strict";r.d(t,{A:()=>v});var n=r(27378),i=r(18208),a=r(90351),s=r(63969),o=r(30763),l=r(94793),c=r(50790),u=r(4948);const d=(e,t)=>{switch(e.kind){case"ignore":return"Dismissed";case"ignoreAll":return n.createElement(n.Fragment,null,n.createElement("span",null,e.alerts)," ",i._6(e.alerts,"alert has been","alerts have been")," dismissed");case"replace":return"Corrected";case"replaceSynonym":return"Replaced";case"replaceTransform":return n.createElement(n.Fragment,null,e.transform);case"addToDictionary":return n.createElement(n.Fragment,null,n.createElement("b",{className:t&&t.addToDictionary},e.word)," has been added to dictionary");case"report":return"Your report has been sent";case"markAsHelpful":return"Marked as â€œWill addressâ€";case"markAsNotHelpful":return"Marked as â€œNot helpfulâ€";default:return""}},p={display:"flex",marginTop:s.u.rem(-1.1),marginBottom:s.u.rem(-.5),alignItems:"center",justifyContent:"space-between"},m={marginTop:s.u.rem(.6),marginRight:s.u.rem(1),color:a.Il.CoreNeutral0,flexGrow:0,flexShrink:0},h={marginTop:s.u.rem(-.25),paddingRight:s.u.rem(.5),minWidth:"auto",minHeight:"auto",justifyContent:"space-between"},g={marginTop:s.u.rem(.6),maxWidth:s.u.rem(14),wordWrap:"break-word",flexBasis:"auto",flexGrow:1},f={marginRight:s.u.rem(1.4)},y=s.u.stylesheet({alertUndoWrapper:[p],alertUndoWrapperFlexible:[p,{flexWrap:"nowrap"}],alertUndoWrapperFullWidth:[p,{flexWrap:"wrap"}],alertUndoBtn:[m],alertUndoIcon:[h],alertUndoContent:[g],alertUndoContentFlexible:[g,f],addToDictionary:[{wordBreak:"break-all"}]});var v;!function(e){const t={wrapper:y.alertUndoWrapperFlexible,content:y.alertUndoContent,icon:y.alertUndoIcon,button:y.alertUndoBtn};e.Standard=({action:r,params:i})=>n.createElement(c.DI.Content,null,n.createElement(e.Content,{action:r,content:d(i),theme:Object.assign(Object.assign({},t),{wrapper:y.alertUndoWrapperFullWidth})})),e.Flexible=({notification:r,onClose:i,action:a,params:s})=>n.createElement(c.SJ.Wrapper,{notification:r,onClose:i},n.createElement(c.DI.Content,null,n.createElement(e.Content,{action:a,content:d(s,{addToDictionary:y.addToDictionary}),theme:Object.assign(Object.assign({},t),{wrapper:y.alertUndoWrapperFlexible,content:y.alertUndoContentFlexible})}))),e.Content=({action:e,content:r,theme:i=t})=>{const a=n.useContext(o.m.Context);return n.createElement("div",{className:i.wrapper},n.createElement("div",{className:i.content},r),n.createElement(u.J,{name:"alertUndoButton",className:i.button,onClick:e},n.createElement(l.JO.Undo,{className:i.icon}),a.undo))}}(v||(v={}))},8313:(e,t,r)=>{"use strict";r.d(t,{E2:()=>ne,TG:()=>ie});var n,i=r(59312),a=r(27378),s=r(57050),o=r(40327),l=r(49524),c=r(5739),u=r(12187),d=r(38983),p=r(22232),m=r(19962),h=r(83078),g=r(5114),f=r(41046),y=r(41488),v=r(8125),b=r(81531);!function(e){e.Hidden="hidden",e.Dot="dot",e.Popup="popup",e.Passed="passed"}(n||(n={}));class w{constructor(){this.completionTrigger=d.h.create(!1),this._steps={},this.cpuAndAnimationOptsExperiment=!1}isStepEnabled(e){return void 0!==this._steps[e]}relaunchAllSteps(){b.C8.Logging.getLogger("OnboardingViewModelImpl").error("Not implemented")}setState(e,t){this.subscribeForStep(e).state.set(t)}subscribeForStep(e){const t=d.h.create(n.Hidden);return this._steps[e]||(this._steps[e]={id:e,state:t,dotShown:v.ZT,dotClicked:()=>t.set(n.Popup),popupClosed:()=>t.set(n.Passed),popupIgnored:()=>t.set(n.Hidden),actionTaken:()=>t.set(n.Passed)})}getStepCompletionCallback(e){throw new Error("Method not implemented.")}changeState(e){}}var C=r(98403),S=r(77176),I=r(24209),k=r(85985),x=r(13444),A=r(41398),E=r(66310),T=r(76974),_=r(40151),L=r(90351),R=r(63969),P=r(24588),O=r(40219);const M=L.Il.BackgroundTooltip,F=R.u.keyframes({"0%":{boxShadow:"0 0 0 0 rgba(95, 139, 250, .65)"},"70%":{boxShadow:`0 0 0 ${R.u.rem(1)} rgba(95, 139, 250, 0)`},"100%":{boxShadow:"0 0 0 0 rgba(95, 139, 250, 0)"}}),N={width:R.u.rem(1),height:R.u.rem(1),borderRadius:R.u.percent(50),background:"rgba(95, 139, 250, .65)",boxShadow:"0 0 0 rgba(95, 139, 250, .65)",animation:`${F} 2s infinite`,$nest:{"&:hover":{animation:"none"},"@media print":{visibility:"hidden"}}},D=R.u.keyframes({"0%":{opacity:1,transform:"scale(1)"},"100%":{opacity:0,transform:"scale(3)"}}),$={width:R.u.rem(1),height:R.u.rem(1),borderRadius:R.u.percent(50),background:"rgba(95, 139, 250, .65)",willChange:"transform",$nest:{"@media print":{visibility:"hidden"},"&:before":{position:"absolute",top:0,left:0,zIndex:-1,width:R.u.rem(1),height:R.u.rem(1),borderRadius:R.u.percent(100),backgroundColor:"rgba(95, 139, 250, .65)",content:"''",animation:`${D} 2s infinite`,willChange:"transform"},"&:hover:before":{animation:"none"}}},U={margin:`${R.u.rem(-1.5)} 0 0 ${R.u.rem(-1.5)}`,padding:R.u.rem(1),borderRadius:R.u.percent(50),cursor:"pointer",pointerEvents:"all"},B={margin:`0 0 ${R.u.rem(.5)}`,color:L.Il.CoreNeutral0,fontWeight:"bold"},j={color:L.Il.CoreNeutral0,lineHeight:R.u.rem(1.25)},W={display:"flex",padding:`${R.u.rem(1)} ${R.u.rem(1.5)} ${R.u.rem(1.25)} ${R.u.rem(2)}`,width:R.u.rem(23),borderRadius:R.u.rem(O.fx),background:M,color:L.Il.CoreNeutral0,textAlign:"left",letterSpacing:0,pointerEvents:"all",alignItems:"flex-start"},H={marginRight:R.u.rem(2),width:R.u.rem(2),flexShrink:0,alignSelf:"center"},G={stroke:P.FW,$nest:{"&:not([data-disabled='true'])[data-hovered='true'], &:not([data-disabled='true'])[data-active='true']":{stroke:L.Il.CoreNeutral0,fill:L.Il.CoreNeutral0}}},z={position:"absolute",top:R.u.percent(50),left:R.u.percent(50),zIndex:O.I3},Y={position:"relative",zIndex:O.VN},V={zIndex:O.w$},q={position:"absolute",zIndex:O.w$},X=R.u.prefixedStylesheet("onboarding",{pulse:[N],pulseWrapper:[U],header:[B],description:[j],stepWrapper:[W],content:[{display:"inline-block"}],alertIcon:[H],closeIconWrapper:[{position:"absolute",top:0,right:0}],closeIcon:[G],containerWrapper:[{position:"relative",display:"inline-block"}],onboardingSpot:[z],containerDiv:[{}],editor:[Y],onboardingPopup:[V],notificationContainer:[q],pulseOptimized:[$]});var Z=r(7046),J=r(94793),K=r(70920),Q=r(3656);const ee=({alignment:e,rect:t,onClose:r,className:n,children:i,icon:s,pinTargetRect:l,hideCloseButton:d,onMount:p})=>a.createElement(K.t.ByRelativeRect,Object.assign({rect:t,className:X.notificationContainer},K.t.Alignment.toSelector(e),{pinTargetRect:l,withPin:!0}),a.createElement(c.F.div,Object.assign({},(0,u.Sh)(X.stepWrapper,n),{mount:p}),(0,o.pipe)(s,g.fold((()=>a.createElement(J.JO.Grammarly,{className:X.alertIcon})),(e=>a.createElement(e,{className:X.alertIcon})))),i,!d&&a.createElement(Z.zx,{name:"onboard-close",className:X.closeIconWrapper,onClick:()=>r&&r()},a.createElement(J.JO.Close,{className:X.closeIcon,width:12})))),te=e=>{var{title:t,description:r}=e,n=(0,i._T)(e,["title","description"]);return a.createElement(ee,Object.assign({},n),a.createElement("span",{className:X.content},t&&a.createElement(Q.P1,{className:X.header},t),a.createElement(Q.XY,{className:X.description},r)))},re=({className:e,onClick:t,customStyle:r,enableOptimizations:n})=>a.createElement(c.F.div,Object.assign({},(0,u.Sh)(X.pulseWrapper,e),{style:r,onClick:()=>t&&t()}),a.createElement("div",{className:n?X.pulseOptimized:X.pulse}));var ne;function ie(e){const t=a.useContext(ie.Context),{stepId:r,onboardingViewModel:n}=e,s=(0,i._T)(e,["stepId","onboardingViewModel"]),l=n||t,c=ae(r,l),u=a.useContext(y.l.Context).pipe(S.U((e=>e.rect)));return(0,o.pipe)(c,g.fold((()=>a.Children.only(e.children)),(e=>a.createElement(se,Object.assign({},s,{onboardingStep:e,enableOptimizations:l.cpuAndAnimationOptsExperiment,viewportRect:u})))))}!function(e){e.leftTop="leftTop",e.leftCenter="leftCenter",e.leftBottom="leftBottom",e.center="center",e.rightTop="rightTop",e.rightCenter="rightCenter",e.rightBottom="rightBottom"}(ne||(ne={}));const ae=(e,t)=>((0,p.kG)(Boolean(t),"onboardingViewModel should be set either in context or in props"),t.isStepEnabled(e)?g.some(t.subscribeForStep(e)):g.none);class se extends a.Component{constructor(){super(...arguments),this._subs=[],this._wrapperElement=d.h.create(g.none),this._containerElement=d.h.create(g.none),this._exactTargetRect=d.h.create(g.none),this._visibilityState=d.h.create(!1),this._spotStyle=d.h.create({}),this._onEventActionTaken=(e,t=!0)=>r=>{var n;const i=e.state.get();if("popup"===i||t&&"dot"===i){const i=r.target;if(m.pK(i))return;const a=t||m.q_(i,X.containerDiv);if("findFirstButton"===(null===(n=this.props.dotPosition)||void 0===n?void 0:n.kind)&&!m.q2(i,"role","button"))return;a&&e.actionTaken()}else"dot"===i&&(r.preventDefault(),r.stopPropagation())}}componentWillUnmount(){const e=this.props.onboardingStep;"popup"===e.state.get()&&e.popupIgnored(),this._subs.forEach((e=>e.unsubscribe()))}componentDidMount(){const e=this.props.dotPosition;e?this._subs.push(I.T(this.context,this.props.onboardingStep.state.pipe(k.h((e=>"dot"===e||"popup"===e)))).pipe(x.g(500),A.M(this._wrapperElement,this._containerElement),E.w((([t,r,n])=>(0,o.pipe)((0,s.bc)(r,n),(0,s.og)(h.vB(((t,r)=>{switch(e.kind){case"findFirstButton":return C.Dx(e.buttonOrder).pipe(E.w((n=>T.of(void 0).pipe(x.g(500),S.U((()=>{const[i,a]=ce(t,r,e.position,n);return this._exactTargetRect.set(a),i}))))));case"dotAtPosition":return T.of(oe(e.position));default:return(0,p.vE)(e)}}))),g.fold((()=>_.E),l.y))))).subscribe((e=>{this._spotStyle.set(e),this._visibilityState.set(!0)}))):this._visibilityState.set(!0)}render(){const e=this.props.onboardingStep;return a.createElement(c.F.div,Object.assign({key:"onboarding-wrapper"},(0,u.Sh)(X.containerWrapper,this.props.themes&&this.props.themes.containerWrapperClassName),{mount:e=>this._wrapperElement.set(g.fromNullable(e))}),a.createElement("div",Object.assign({key:"container",ref:e=>this._containerElement.set(g.fromNullable(e))},(0,u.Sh)(X.containerDiv,this.props.themes&&this.props.themes.containerClassName),{onClickCapture:this._onEventActionTaken(e,"onclick"===this.props.eventType),onMouseEnter:t=>"onhover"===this.props.eventType&&this._onEventActionTaken(e,!1)(t)}),this.props.children),d.h.combine(e.state,this._visibilityState,((t,r)=>{if(!r)return null;switch(t){case"dot":const t=this.props.themes&&this.props.themes.spotClassName;return this.props.onboardingStep.dotShown(),a.createElement(re,Object.assign({customStyle:this._spotStyle,key:"spot",enableOptimizations:this.props.enableOptimizations},(0,u.Sh)(X.onboardingSpot,t),{onClick:()=>e.dotClicked()}));case"popup":return a.createElement(te,{key:"step",title:this.props.title,alignment:this.props.alignment,rect:this._containerElement.view(g.fold((()=>m.UL.empty),m.UL.fromEl)),className:this.props.themes&&this.props.themes.notificationClassName,description:this.props.message,icon:g.fromNullable(this.props.icon),onClose:()=>e.popupClosed(),pinTargetRect:this._exactTargetRect.view(h.Fc)});default:return null}})))}}se.contextType=f.u.Context,se.defaultProps={alignment:"left"};const oe=e=>{switch(e){case ne.leftTop:return{top:0,left:0};case ne.leftCenter:return{top:"50%",left:0};case ne.leftBottom:return{top:"100%",left:0};case ne.rightTop:return{top:0,left:"100%"};case ne.rightCenter:return{top:"50%",left:"100%"};case ne.rightBottom:return{top:"100%",left:"100%"};case ne.center:return{top:"50%",left:"50%"};default:return(0,p.vE)(e)}},le=(e,t,r)=>{switch(r){case ne.rightTop:return{top:0,left:e.left-t.left+e.width};case ne.center:return{top:e.top-t.top+e.height/2,left:e.left-t.left+e.width/2};default:return(0,p.vE)(r)}},ce=(e,t,r,n)=>{const i=t.querySelectorAll('[role="button"]'),a=i.length>0&&(void 0===n?i[i.length-1]:i[n]);if(a){const t=m.UL.fromEl((0,s.MZ)(a)),n=m.UL.fromEl(e);return[le(t,n,r),g.some(t)]}return[{top:"50%",left:"50%"},g.none]};!function(e){e.Context=a.createContext(null),e.ContextMock=({children:t})=>a.createElement(e.Context.Provider,{value:new w,children:t})}(ie||(ie={}))},25781:(e,t,r)=>{"use strict";var n,i;r.d(t,{R:()=>n}),function(e){e.ESC_CODE=27}(n||(n={})),function(e){e.isLeftMouseButtom=function(e){return 1===e.which||0===e.button}}(i||(i={}))},35407:(e,t,r)=>{"use strict";r.d(t,{Pj:()=>s,GG:()=>o});var n=r(17771),i=r(19429),a=r(55415),s=function(e){return function(t){return i.r1.map((0,n.g)(i.r1)(e,t),(function(e){var t=e[0],r=e[1];return(0,a.Fx)(t,r)}))}},o=(0,n.Y)(i.r1)},51072:(e,t,r)=>{"use strict";r.d(t,{Vi:()=>i});var n=r(95574);function i(e){return e().then(n.MH)}},84347:(e,t,r)=>{"use strict";e.exports=r(87612)},17123:e=>{"use strict";var t={};t.create=function(e,t){var r=document.createElement(e);return r.className=t,r},t.appendTo=function(e,t){return t.appendChild(e),e},t.css=function(e,t,r){return"object"==typeof t?function(e,t){for(var r in t){var n=t[r];"number"==typeof n&&(n=n.toString()+"px"),e.style[r]=n}return e}(e,t):void 0===r?function(e,t){return window.getComputedStyle(e)[t]}(e,t):function(e,t,r){return"number"==typeof r&&(r=r.toString()+"px"),e.style[t]=r,e}(e,t,r)},t.matches=function(e,t){return void 0!==e.matches?e.matches(t):e.msMatchesSelector(t)},t.remove=function(e){void 0!==e.remove?e.remove():e.parentNode&&e.parentNode.removeChild(e)},t.queryChildren=function(e,r){return Array.prototype.filter.call(e.childNodes,(function(e){return t.matches(e,r)}))},e.exports=t},97490:e=>{"use strict";var t=function(e){this.element=e,this.events={}};t.prototype.bind=function(e,t,r){void 0===this.events[e]&&(this.events[e]=[]);var n={capture:!1};this.events[e].push(t),this.element.addEventListener(e,t,r?Object.assign({},n,r):n)},t.prototype.unbind=function(e,t){var r=void 0!==t;this.events[e]=this.events[e].filter((function(n){return!(!r||n===t)||(this.element.removeEventListener(e,n,!1),!1)}),this)},t.prototype.unbindAll=function(){for(var e in this.events)this.unbind(e)};var r=function(){this.eventElements=[]};r.prototype.eventElement=function(e){var r=this.eventElements.filter((function(t){return t.element===e}))[0];return void 0===r&&(r=new t(e),this.eventElements.push(r)),r},r.prototype.bind=function(e,t,r,n){this.eventElement(e).bind(t,r,n)},r.prototype.unbind=function(e,t,r){this.eventElement(e).unbind(t,r)},r.prototype.unbindAll=function(){for(var e=0;e<this.eventElements.length;e++)this.eventElements[e].unbindAll()},r.prototype.once=function(e,t,r){var n=this.eventElement(e),i=function(e){n.unbind(t,i),r(e)};n.bind(t,i)},e.exports=r},48928:e=>{"use strict";e.exports=function(){function e(){return Math.floor(65536*(1+Math.random())).toString(16).substring(1)}return function(){return e()+e()+"-"+e()+"-"+e()+"-"+e()+"-"+e()+e()+e()}}()},95889:(e,t,r)=>{"use strict";var n=r(17123),i=t.toInt=function(e){return parseInt(e,10)||0};function a(e){return["ps--in-scrolling"].concat(void 0===e?["ps--x","ps--y"]:["ps--"+e])}t.isEditable=function(e){return n.matches(e,"input,[contenteditable]")||n.matches(e,"select,[contenteditable]")||n.matches(e,"textarea,[contenteditable]")||n.matches(e,"button,[contenteditable]")},t.removePsClasses=function(e){for(var t=0;t<e.classList.length;t++){var r=e.classList[t];0===r.indexOf("ps-")&&e.classList.remove(r)}},t.outerWidth=function(e){return i(n.css(e,"width"))+i(n.css(e,"paddingLeft"))+i(n.css(e,"paddingRight"))+i(n.css(e,"borderLeftWidth"))+i(n.css(e,"borderRightWidth"))},t.startScrolling=function(e,t){for(var r=a(t),n=0;n<r.length;n++)e.classList.add(r[n])},t.stopScrolling=function(e,t){for(var r=a(t),n=0;n<r.length;n++)e.classList.remove(r[n])},t.env={isWebKit:"undefined"!=typeof document&&"WebkitAppearance"in document.documentElement.style,supportsTouch:"undefined"!=typeof window&&("ontouchstart"in window||window.DocumentTouch&&document instanceof window.DocumentTouch),supportsIePointer:"undefined"!=typeof window&&null!==window.navigator.msMaxTouchPoints}},87612:(e,t,r)=>{"use strict";var n=r(81489),i=r(41835),a=r(64114);e.exports={initialize:i,update:a,destroy:n}},48300:e=>{"use strict";e.exports=function(){return{handlers:["click-rail","drag-scrollbar","keyboard","wheel","touch"],maxScrollbarLength:null,minScrollbarLength:null,scrollXMarginOffset:0,scrollYMarginOffset:0,suppressScrollX:!1,suppressScrollY:!1,swipePropagation:!0,swipeEasing:!0,useBothWheelAxes:!1,wheelPropagation:!1,wheelSpeed:1,theme:"default"}}},81489:(e,t,r)=>{"use strict";var n=r(95889),i=r(17123),a=r(6109);e.exports=function(e){var t=a.get(e);t&&(t.event.unbindAll(),i.remove(t.scrollbarX),i.remove(t.scrollbarY),i.remove(t.scrollbarXRail),i.remove(t.scrollbarYRail),n.removePsClasses(e),a.remove(e))}},3708:(e,t,r)=>{"use strict";var n=r(6109),i=r(86057),a=r(21459);e.exports=function(e){!function(e,t){function r(e){return e.getBoundingClientRect()}var n=function(e){e.stopPropagation()};t.event.bind(t.scrollbarY,"click",n),t.event.bind(t.scrollbarYRail,"click",(function(n){var s=n.pageY-window.pageYOffset-r(t.scrollbarYRail).top>t.scrollbarYTop?1:-1;a(e,"top",e.scrollTop+s*t.containerHeight),i(e),n.stopPropagation()})),t.event.bind(t.scrollbarX,"click",n),t.event.bind(t.scrollbarXRail,"click",(function(n){var s=n.pageX-window.pageXOffset-r(t.scrollbarXRail).left>t.scrollbarXLeft?1:-1;a(e,"left",e.scrollLeft+s*t.containerWidth),i(e),n.stopPropagation()}))}(e,n.get(e))}},35672:(e,t,r)=>{"use strict";var n=r(95889),i=r(17123),a=r(6109),s=r(86057),o=r(21459);function l(e,t){var r=null,a=null;var l=function(i){!function(i){var a=r+i*t.railXRatio,s=Math.max(0,t.scrollbarXRail.getBoundingClientRect().left)+t.railXRatio*(t.railXWidth-t.scrollbarXWidth);t.scrollbarXLeft=a<0?0:a>s?s:a;var l=n.toInt(t.scrollbarXLeft*(t.contentWidth-t.containerWidth)/(t.containerWidth-t.railXRatio*t.scrollbarXWidth))-t.negativeScrollAdjustment;o(e,"left",l)}(i.pageX-a),s(e),i.stopPropagation(),i.preventDefault()},c=function(){n.stopScrolling(e,"x"),t.event.unbind(t.ownerDocument,"mousemove",l)};t.event.bind(t.scrollbarX,"mousedown",(function(s){a=s.pageX,r=n.toInt(i.css(t.scrollbarX,"left"))*t.railXRatio,n.startScrolling(e,"x"),t.event.bind(t.ownerDocument,"mousemove",l),t.event.once(t.ownerDocument,"mouseup",c),s.stopPropagation(),s.preventDefault()}))}function c(e,t){var r=null,a=null;var l=function(i){!function(i){var a=r+i*t.railYRatio,s=Math.max(0,t.scrollbarYRail.getBoundingClientRect().top)+t.railYRatio*(t.railYHeight-t.scrollbarYHeight);t.scrollbarYTop=a<0?0:a>s?s:a;var l=n.toInt(t.scrollbarYTop*(t.contentHeight-t.containerHeight)/(t.containerHeight-t.railYRatio*t.scrollbarYHeight));o(e,"top",l)}(i.pageY-a),s(e),i.stopPropagation(),i.preventDefault()},c=function(){n.stopScrolling(e,"y"),t.event.unbind(t.ownerDocument,"mousemove",l)};t.event.bind(t.scrollbarY,"mousedown",(function(s){a=s.pageY,r=n.toInt(i.css(t.scrollbarY,"top"))*t.railYRatio,n.startScrolling(e,"y"),t.event.bind(t.ownerDocument,"mousemove",l),t.event.once(t.ownerDocument,"mouseup",c),s.stopPropagation(),s.preventDefault()}))}e.exports=function(e){var t=a.get(e);l(e,t),c(e,t)}},94742:(e,t,r)=>{"use strict";var n=r(95889),i=r(17123),a=r(6109),s=r(86057),o=r(21459);function l(e,t){var r=!1;t.event.bind(e,"mouseenter",(function(){r=!0})),t.event.bind(e,"mouseleave",(function(){r=!1}));t.event.bind(t.ownerDocument,"keydown",(function(a){if(!(a.isDefaultPrevented&&a.isDefaultPrevented()||a.defaultPrevented)){var l=i.matches(t.scrollbarX,":focus")||i.matches(t.scrollbarY,":focus");if(r||l){var c=document.activeElement?document.activeElement:t.ownerDocument.activeElement;if(c){if("IFRAME"===c.tagName)c=c.contentDocument.activeElement;else for(;c.shadowRoot;)c=c.shadowRoot.activeElement;if(n.isEditable(c))return}var u=0,d=0;switch(a.which){case 37:u=a.metaKey?-t.contentWidth:a.altKey?-t.containerWidth:-30;break;case 38:d=a.metaKey?t.contentHeight:a.altKey?t.containerHeight:30;break;case 39:u=a.metaKey?t.contentWidth:a.altKey?t.containerWidth:30;break;case 40:d=a.metaKey?-t.contentHeight:a.altKey?-t.containerHeight:-30;break;case 33:d=90;break;case 32:d=a.shiftKey?90:-90;break;case 34:d=-90;break;case 35:d=a.ctrlKey?-t.contentHeight:-t.containerHeight;break;case 36:d=a.ctrlKey?e.scrollTop:t.containerHeight;break;default:return}o(e,"top",e.scrollTop-d),o(e,"left",e.scrollLeft+u),s(e),function(r,n){var i=e.scrollTop;if(0===r){if(!t.scrollbarYActive)return!1;if(0===i&&n>0||i>=t.contentHeight-t.containerHeight&&n<0)return!t.settings.wheelPropagation}var a=e.scrollLeft;if(0===n){if(!t.scrollbarXActive)return!1;if(0===a&&r<0||a>=t.contentWidth-t.containerWidth&&r>0)return!t.settings.wheelPropagation}return!0}(u,d)&&a.preventDefault()}}}))}e.exports=function(e){l(e,a.get(e))}},83476:(e,t,r)=>{"use strict";var n=r(6109),i=r(86057),a=r(21459);function s(e,t){var r=!1;function n(n){var s=function(e){var t=e.deltaX,r=-1*e.deltaY;return void 0!==t&&void 0!==r||(t=-1*e.wheelDeltaX/6,r=e.wheelDeltaY/6),e.deltaMode&&1===e.deltaMode&&(t*=10,r*=10),t!=t&&r!=r&&(t=0,r=e.wheelDelta),e.shiftKey?[-r,-t]:[t,r]}(n),o=s[0],l=s[1];(function(t,r){var n=e.querySelector("textarea:hover, select[multiple]:hover, .ps-child:hover");if(n){var i=window.getComputedStyle(n);if(![i.overflow,i.overflowX,i.overflowY].join("").match(/(scroll|auto)/))return!1;var a=n.scrollHeight-n.clientHeight;if(a>0&&!(0===n.scrollTop&&r>0||n.scrollTop===a&&r<0))return!0;var s=n.scrollLeft-n.clientWidth;if(s>0&&!(0===n.scrollLeft&&t<0||n.scrollLeft===s&&t>0))return!0}return!1})(o,l)||(r=!1,t.settings.useBothWheelAxes?t.scrollbarYActive&&!t.scrollbarXActive?(a(e,"top",l?e.scrollTop-l*t.settings.wheelSpeed:e.scrollTop+o*t.settings.wheelSpeed),r=!0):t.scrollbarXActive&&!t.scrollbarYActive&&(a(e,"left",o?e.scrollLeft+o*t.settings.wheelSpeed:e.scrollLeft-l*t.settings.wheelSpeed),r=!0):(a(e,"top",e.scrollTop-l*t.settings.wheelSpeed),a(e,"left",e.scrollLeft+o*t.settings.wheelSpeed)),i(e),(r=r||function(r,n){var i=e.scrollTop;if(0===r){if(!t.scrollbarYActive)return!1;if(0===i&&n>0||i>=t.contentHeight-t.containerHeight&&n<0)return!t.settings.wheelPropagation}var a=e.scrollLeft;if(0===n){if(!t.scrollbarXActive)return!1;if(0===a&&r<0||a>=t.contentWidth-t.containerWidth&&r>0)return!t.settings.wheelPropagation}return!0}(o,l))&&(n.stopPropagation(),n.preventDefault()))}void 0!==window.onwheel?t.event.bind(e,"wheel",n):void 0!==window.onmousewheel&&t.event.bind(e,"mousewheel",n)}e.exports=function(e){s(e,n.get(e))}},15335:(e,t,r)=>{"use strict";var n=r(6109),i=r(86057);e.exports=function(e){!function(e,t){t.event.bind(e,"scroll",(function(){i(e)}))}(e,n.get(e))}},23405:(e,t,r)=>{"use strict";var n=r(6109),i=r(86057),a=r(21459);e.exports=function(e){!function(e,t){function r(r){var n=function(e){var t=e.deltaX,r=-1*e.deltaY;return void 0!==t&&void 0!==r||(t=-1*e.wheelDeltaX/6,r=e.wheelDeltaY/6),e.deltaMode&&1===e.deltaMode&&(t*=10,r*=10),t!=t&&r!=r&&(t=0,r=e.wheelDelta),e.shiftKey?[-r,-t]:[t,r]}(r),s=n[0],o=n[1];t.settings.useBothWheelAxes?t.scrollbarYActive&&!t.scrollbarXActive?a(e,"top",o?e.scrollTop-o*t.settings.wheelSpeed:e.scrollTop+s*t.settings.wheelSpeed):t.scrollbarXActive&&!t.scrollbarYActive&&a(e,"left",s?e.scrollLeft+s*t.settings.wheelSpeed:e.scrollLeft-o*t.settings.wheelSpeed):(a(e,"top",e.scrollTop-o*t.settings.wheelSpeed),a(e,"left",e.scrollLeft+s*t.settings.wheelSpeed)),i(e)}void 0!==window.onwheel?t.event.bind(e,"wheel",r,{passive:!0}):void 0!==window.onmousewheel&&t.event.bind(e,"mousewheel",r,{passive:!0})}(e,n.get(e))}},19539:(e,t,r)=>{"use strict";var n=r(95889),i=r(6109),a=r(86057),s=r(21459);function o(e,t){var r=null,o={top:0,left:0};function l(){r&&(clearInterval(r),r=null),n.stopScrolling(e)}var c=!1;t.event.bind(t.ownerDocument,"selectionchange",(function(){var t;e.contains(0===(t=window.getSelection?window.getSelection():document.getSelection?document.getSelection():"").toString().length?null:t.getRangeAt(0).commonAncestorContainer)?c=!0:(c=!1,l())})),t.event.bind(window,"mouseup",(function(){c&&(c=!1,l())})),t.event.bind(window,"keyup",(function(){c&&(c=!1,l())})),t.event.bind(window,"mousemove",(function(t){if(c){var u={x:t.pageX,y:t.pageY},d={left:e.offsetLeft,right:e.offsetLeft+e.offsetWidth,top:e.offsetTop,bottom:e.offsetTop+e.offsetHeight};u.x<d.left+3?(o.left=-5,n.startScrolling(e,"x")):u.x>d.right-3?(o.left=5,n.startScrolling(e,"x")):o.left=0,u.y<d.top+3?(o.top=d.top+3-u.y<5?-5:-20,n.startScrolling(e,"y")):u.y>d.bottom-3?(o.top=u.y-d.bottom+3<5?5:20,n.startScrolling(e,"y")):o.top=0,0===o.top&&0===o.left?l():r||(r=setInterval((function(){i.get(e)?(s(e,"top",e.scrollTop+o.top),s(e,"left",e.scrollLeft+o.left),a(e)):clearInterval(r)}),50))}}))}e.exports=function(e){o(e,i.get(e))}},76905:(e,t,r)=>{"use strict";var n=r(95889),i=r(6109),a=r(86057),s=r(21459);function o(e,t,r,n){function o(t,r){s(e,"top",e.scrollTop-r),s(e,"left",e.scrollLeft-t),a(e)}var l={},c=0,u={},d=null,p=!1,m=!1;function h(){p=!0}function g(){p=!1}function f(e){return e.targetTouches?e.targetTouches[0]:e}function y(e){return!(!e.targetTouches||1!==e.targetTouches.length)||!(!e.pointerType||"mouse"===e.pointerType||e.pointerType===e.MSPOINTER_TYPE_MOUSE)}function v(e){if(y(e)){m=!0;var t=f(e);l.pageX=t.pageX,l.pageY=t.pageY,c=(new Date).getTime(),null!==d&&clearInterval(d),e.stopPropagation()}}function b(r){if(!m&&t.settings.swipePropagation&&v(r),!p&&m&&y(r)){var n=f(r),i={pageX:n.pageX,pageY:n.pageY},a=i.pageX-l.pageX,s=i.pageY-l.pageY;o(a,s),l=i;var d=(new Date).getTime(),h=d-c;h>0&&(u.x=a/h,u.y=s/h,c=d),function(r,n){var i=e.scrollTop,a=e.scrollLeft,s=Math.abs(r),o=Math.abs(n);if(o>s){if(n<0&&i===t.contentHeight-t.containerHeight||n>0&&0===i)return!t.settings.swipePropagation}else if(s>o&&(r<0&&a===t.contentWidth-t.containerWidth||r>0&&0===a))return!t.settings.swipePropagation;return!0}(a,s)&&(r.stopPropagation(),r.preventDefault())}}function w(){!p&&m&&(m=!1,t.settings.swipeEasing&&(clearInterval(d),d=setInterval((function(){i.get(e)&&(u.x||u.y)?Math.abs(u.x)<.01&&Math.abs(u.y)<.01?clearInterval(d):(o(30*u.x,30*u.y),u.x*=.8,u.y*=.8):clearInterval(d)}),10)))}r?(t.event.bind(window,"touchstart",h),t.event.bind(window,"touchend",g),t.event.bind(e,"touchstart",v),t.event.bind(e,"touchmove",b),t.event.bind(e,"touchend",w)):n&&(window.PointerEvent?(t.event.bind(window,"pointerdown",h),t.event.bind(window,"pointerup",g),t.event.bind(e,"pointerdown",v),t.event.bind(e,"pointermove",b),t.event.bind(e,"pointerup",w)):window.MSPointerEvent&&(t.event.bind(window,"MSPointerDown",h),t.event.bind(window,"MSPointerUp",g),t.event.bind(e,"MSPointerDown",v),t.event.bind(e,"MSPointerMove",b),t.event.bind(e,"MSPointerUp",w)))}e.exports=function(e){(n.env.supportsTouch||n.env.supportsIePointer)&&o(e,i.get(e),n.env.supportsTouch,n.env.supportsIePointer)}},41835:(e,t,r)=>{"use strict";var n=r(6109),i=r(86057),a={"click-rail":r(3708),"drag-scrollbar":r(35672),keyboard:r(94742),wheel:r(83476),passiveWheel:r(23405),touch:r(76905),selection:r(19539)},s=r(15335);e.exports=function(e,t){e.classList.add("ps");var r=n.add(e,"object"==typeof t?t:{});e.classList.add("ps--theme_"+r.settings.theme),r.settings.handlers.forEach((function(t){a[t](e)})),s(e),i(e)}},6109:(e,t,r)=>{"use strict";var n=r(95889),i=r(48300),a=r(17123),s=r(97490),o=r(48928),l={};function c(e,t){var r,o,l=this;for(var c in l.settings=i(),t)l.settings[c]=t[c];function u(){e.classList.add("ps--focus")}function d(){e.classList.remove("ps--focus")}l.containerWidth=null,l.containerHeight=null,l.contentWidth=null,l.contentHeight=null,l.isRtl="rtl"===a.css(e,"direction"),l.isNegativeScroll=(o=e.scrollLeft,e.scrollLeft=-1,r=e.scrollLeft<0,e.scrollLeft=o,r),l.negativeScrollAdjustment=l.isNegativeScroll?e.scrollWidth-e.clientWidth:0,l.event=new s,l.ownerDocument=e.ownerDocument||document,l.scrollbarXRail=a.appendTo(a.create("div","ps__scrollbar-x-rail"),e),l.scrollbarX=a.appendTo(a.create("div","ps__scrollbar-x"),l.scrollbarXRail),l.scrollbarX.setAttribute("tabindex",0),l.event.bind(l.scrollbarX,"focus",u),l.event.bind(l.scrollbarX,"blur",d),l.scrollbarXActive=null,l.scrollbarXWidth=null,l.scrollbarXLeft=null,l.scrollbarXBottom=n.toInt(a.css(l.scrollbarXRail,"bottom")),l.isScrollbarXUsingBottom=l.scrollbarXBottom==l.scrollbarXBottom,l.scrollbarXTop=l.isScrollbarXUsingBottom?null:n.toInt(a.css(l.scrollbarXRail,"top")),l.railBorderXWidth=n.toInt(a.css(l.scrollbarXRail,"borderLeftWidth"))+n.toInt(a.css(l.scrollbarXRail,"borderRightWidth")),a.css(l.scrollbarXRail,"display","block"),l.railXMarginWidth=n.toInt(a.css(l.scrollbarXRail,"marginLeft"))+n.toInt(a.css(l.scrollbarXRail,"marginRight")),a.css(l.scrollbarXRail,"display",""),l.railXWidth=null,l.railXRatio=null,l.scrollbarYRail=a.appendTo(a.create("div","ps__scrollbar-y-rail"),e),l.scrollbarY=a.appendTo(a.create("div","ps__scrollbar-y"),l.scrollbarYRail),l.scrollbarY.setAttribute("tabindex",0),l.event.bind(l.scrollbarY,"focus",u),l.event.bind(l.scrollbarY,"blur",d),l.scrollbarYActive=null,l.scrollbarYHeight=null,l.scrollbarYTop=null,l.scrollbarYRight=n.toInt(a.css(l.scrollbarYRail,"right")),l.isScrollbarYUsingRight=l.scrollbarYRight==l.scrollbarYRight,l.scrollbarYLeft=l.isScrollbarYUsingRight?null:n.toInt(a.css(l.scrollbarYRail,"left")),l.scrollbarYOuterWidth=l.isRtl?n.outerWidth(l.scrollbarY):null,l.railBorderYWidth=n.toInt(a.css(l.scrollbarYRail,"borderTopWidth"))+n.toInt(a.css(l.scrollbarYRail,"borderBottomWidth")),a.css(l.scrollbarYRail,"display","block"),l.railYMarginHeight=n.toInt(a.css(l.scrollbarYRail,"marginTop"))+n.toInt(a.css(l.scrollbarYRail,"marginBottom")),a.css(l.scrollbarYRail,"display",""),l.railYHeight=null,l.railYRatio=null}function u(e){return e.getAttribute("data-ps-id")}t.add=function(e,t){var r=o();return function(e,t){e.setAttribute("data-ps-id",t)}(e,r),l[r]=new c(e,t),l[r]},t.remove=function(e){delete l[u(e)],function(e){e.removeAttribute("data-ps-id")}(e)},t.get=function(e){return l[u(e)]}},86057:(e,t,r)=>{"use strict";var n=r(95889),i=r(17123),a=r(6109),s=r(21459);function o(e,t){return e.settings.minScrollbarLength&&(t=Math.max(t,e.settings.minScrollbarLength)),e.settings.maxScrollbarLength&&(t=Math.min(t,e.settings.maxScrollbarLength)),t}e.exports=function(e){var t,r=a.get(e);r.containerWidth=e.clientWidth,r.containerHeight=e.clientHeight,r.contentWidth=e.scrollWidth,r.contentHeight=e.scrollHeight,e.contains(r.scrollbarXRail)||((t=i.queryChildren(e,".ps__scrollbar-x-rail")).length>0&&t.forEach((function(e){i.remove(e)})),i.appendTo(r.scrollbarXRail,e)),e.contains(r.scrollbarYRail)||((t=i.queryChildren(e,".ps__scrollbar-y-rail")).length>0&&t.forEach((function(e){i.remove(e)})),i.appendTo(r.scrollbarYRail,e)),!r.settings.suppressScrollX&&r.containerWidth+r.settings.scrollXMarginOffset<r.contentWidth?(r.scrollbarXActive=!0,r.railXWidth=r.containerWidth-r.railXMarginWidth,r.railXRatio=r.containerWidth/r.railXWidth,r.scrollbarXWidth=o(r,n.toInt(r.railXWidth*r.containerWidth/r.contentWidth)),r.scrollbarXLeft=n.toInt((r.negativeScrollAdjustment+e.scrollLeft)*(r.railXWidth-r.scrollbarXWidth)/(r.contentWidth-r.containerWidth))):r.scrollbarXActive=!1,!r.settings.suppressScrollY&&r.containerHeight+r.settings.scrollYMarginOffset<r.contentHeight?(r.scrollbarYActive=!0,r.railYHeight=r.containerHeight-r.railYMarginHeight,r.railYRatio=r.containerHeight/r.railYHeight,r.scrollbarYHeight=o(r,n.toInt(r.railYHeight*r.containerHeight/r.contentHeight)),r.scrollbarYTop=n.toInt(e.scrollTop*(r.railYHeight-r.scrollbarYHeight)/(r.contentHeight-r.containerHeight))):r.scrollbarYActive=!1,r.scrollbarXLeft>=r.railXWidth-r.scrollbarXWidth&&(r.scrollbarXLeft=r.railXWidth-r.scrollbarXWidth),r.scrollbarYTop>=r.railYHeight-r.scrollbarYHeight&&(r.scrollbarYTop=r.railYHeight-r.scrollbarYHeight),function(e,t){var r={width:t.railXWidth};t.isRtl?r.left=t.negativeScrollAdjustment+e.scrollLeft+t.containerWidth-t.contentWidth:r.left=e.scrollLeft,t.isScrollbarXUsingBottom?r.bottom=t.scrollbarXBottom-e.scrollTop:r.top=t.scrollbarXTop+e.scrollTop,i.css(t.scrollbarXRail,r);var n={top:e.scrollTop,height:t.railYHeight};t.isScrollbarYUsingRight?t.isRtl?n.right=t.contentWidth-(t.negativeScrollAdjustment+e.scrollLeft)-t.scrollbarYRight-t.scrollbarYOuterWidth:n.right=t.scrollbarYRight-e.scrollLeft:t.isRtl?n.left=t.negativeScrollAdjustment+e.scrollLeft+2*t.containerWidth-t.contentWidth-t.scrollbarYLeft-t.scrollbarYOuterWidth:n.left=t.scrollbarYLeft+e.scrollLeft,i.css(t.scrollbarYRail,n),i.css(t.scrollbarX,{left:t.scrollbarXLeft,width:t.scrollbarXWidth-t.railBorderXWidth}),i.css(t.scrollbarY,{top:t.scrollbarYTop,height:t.scrollbarYHeight-t.railBorderYWidth})}(e,r),r.scrollbarXActive?e.classList.add("ps--active-x"):(e.classList.remove("ps--active-x"),r.scrollbarXWidth=0,r.scrollbarXLeft=0,s(e,"left",0)),r.scrollbarYActive?e.classList.add("ps--active-y"):(e.classList.remove("ps--active-y"),r.scrollbarYHeight=0,r.scrollbarYTop=0,s(e,"top",0))}},21459:(e,t,r)=>{"use strict";var n=r(6109),i=function(e){var t=document.createEvent("Event");return t.initEvent(e,!0,!0),t};e.exports=function(e,t,r){if(void 0===e)throw"You must provide an element to the update-scroll function";if(void 0===t)throw"You must provide an axis to the update-scroll function";if(void 0===r)throw"You must provide a value to the update-scroll function";"top"===t&&r<=0&&(e.scrollTop=r=0,e.dispatchEvent(i("ps-y-reach-start"))),"left"===t&&r<=0&&(e.scrollLeft=r=0,e.dispatchEvent(i("ps-x-reach-start")));var a=n.get(e);"top"===t&&r>=a.contentHeight-a.containerHeight&&((r=a.contentHeight-a.containerHeight)-e.scrollTop<=2?r=e.scrollTop:e.scrollTop=r,e.dispatchEvent(i("ps-y-reach-end"))),"left"===t&&r>=a.contentWidth-a.containerWidth&&((r=a.contentWidth-a.containerWidth)-e.scrollLeft<=2?r=e.scrollLeft:e.scrollLeft=r,e.dispatchEvent(i("ps-x-reach-end"))),void 0===a.lastTop&&(a.lastTop=e.scrollTop),void 0===a.lastLeft&&(a.lastLeft=e.scrollLeft),"top"===t&&r<a.lastTop&&e.dispatchEvent(i("ps-scroll-up")),"top"===t&&r>a.lastTop&&e.dispatchEvent(i("ps-scroll-down")),"left"===t&&r<a.lastLeft&&e.dispatchEvent(i("ps-scroll-left")),"left"===t&&r>a.lastLeft&&e.dispatchEvent(i("ps-scroll-right")),"top"===t&&r!==a.lastTop&&(e.scrollTop=a.lastTop=r,e.dispatchEvent(i("ps-scroll-y"))),"left"===t&&r!==a.lastLeft&&(e.scrollLeft=a.lastLeft=r,e.dispatchEvent(i("ps-scroll-x")))}},64114:(e,t,r)=>{"use strict";var n=r(95889),i=r(17123),a=r(6109),s=r(86057),o=r(21459);e.exports=function(e){var t=a.get(e);t&&(t.negativeScrollAdjustment=t.isNegativeScroll?e.scrollWidth-e.clientWidth:0,i.css(t.scrollbarXRail,"display","block"),i.css(t.scrollbarYRail,"display","block"),t.railXMarginWidth=n.toInt(i.css(t.scrollbarXRail,"marginLeft"))+n.toInt(i.css(t.scrollbarXRail,"marginRight")),t.railYMarginHeight=n.toInt(i.css(t.scrollbarYRail,"marginTop"))+n.toInt(i.css(t.scrollbarYRail,"marginBottom")),i.css(t.scrollbarXRail,"display","none"),i.css(t.scrollbarYRail,"display","none"),s(e),o(e,"top",e.scrollTop),o(e,"left",e.scrollLeft),i.css(t.scrollbarXRail,"display",""),i.css(t.scrollbarYRail,"display",""))}},18756:(e,t,r)=>{"use strict";function n(e){return!(!e||"function"!=typeof e.equals||"function"!=typeof e.hashCode)}function i(e,t){if(e===t||e!=e&&t!=t)return!0;if(!e||!t)return!1;if("function"==typeof e.valueOf&&"function"==typeof t.valueOf){const r=e.valueOf(),n=t.valueOf();if(r===n||r!=r&&n!=n)return!0;if(!r||!n)return!1}return!(!n(e)||!e.equals(t))}r.d(t,{AC:()=>s});function a(e){if("number"==typeof e)return e&e;if("function"==typeof e.valueOf){const t=e.valueOf();if(t!==e)return a(t)}return n(e)?e.hashCode():s(String(e))}function s(e){let t=0;if(null==e||0===e.length)return t;for(let r=0;r<e.length;r++){t=(t<<5)-t+e.charCodeAt(r),t&=t}return t}class o extends Error{constructor(e){let t="";for(const r of e.slice(0,2)){let e="";e=r instanceof Error?`${r.name}(${r.message})`:`${r}`,t+=", "+e}t=t.slice(2),e.length>2&&(t+=", ..."),super(t),this.name="CompositeError",this.errorsRef=e;this.constructor=o,this.__proto__=o.prototype}errors(){return this.errorsRef.slice()}}Error;class l extends Error{constructor(e){super(e),this.name="NoSuchElementError";this.constructor=l,this.__proto__=l.prototype}}Error;class c extends Error{constructor(e){super(e),this.name="IllegalStateError";this.constructor=c,this.__proto__=c.prototype}}class u extends Error{constructor(e){super(e),this.name="IllegalArgumentError";this.constructor=u,this.__proto__=u.prototype}}class d extends Error{constructor(e){super(e),this.name="NotImplementedError";this.constructor=d,this.__proto__=d.prototype}}class p extends Error{constructor(e){super(e),this.name="TimeoutError";this.constructor=p,this.__proto__=p.prototype}}function m(e){return function(){const t=Array.prototype.slice.call(arguments);return t.push(this),e.apply(void 0,t)}}function h(e,t,r){const n=e,i=n.prototype,a="fantasy-land/",s="equals",o=a+s,l="map",c=a+l,u="ap",d=a+u,p=a+"of",h="chain",g=a+h,f="chainRec",y=a+f;i.equals?i[o]=i.equals:r&&(i[o]=m(r.equals)),i.map?i[c]=i.map:t&&(i[c]=m(t.map)),i.ap?i[d]=i.ap:t&&(i[d]=m(t.ap)),n.pure?n[p]=n.pure:t&&(n[p]=t.of),i.chain?i[g]=i.chain:t&&(i[g]=m(t.chain)),n.chainRec?n[y]=n.chainRec:t&&(n[y]=t.chainRec)}class g{constructor(e,t){this._isRight="right"===t,this.value=e}isLeft(){return!this._isRight}isRight(){return this._isRight}contains(e){return this._isRight&&i(this.value,e)}exists(e){return this._isRight&&e(this.value)}filterOrElse(e,t){return this._isRight?e(this.value)?this:y(t()):this}flatMap(e){return this._isRight?e(this.value):this}chain(e){return this.flatMap(e)}ap(e){return e.flatMap((e=>this.map(e)))}fold(e,t){return this._isRight?t(this.value):e(this.value)}forAll(e){return!this._isRight||e(this.value)}get(){if(this._isRight)return this.value;throw new l("left.get()")}getOrElse(e){return this._isRight?this.value:e}getOrElseL(e){return this._isRight?this.value:e()}map(e){return this._isRight?b(e(this.value)):this}forEach(e){this._isRight&&e(this.value)}swap(){return this._isRight?y(this.value):b(this.value)}toOption(){return this._isRight?I(this.value):k}equals(e){return null!=e&&(this._isRight===e._isRight&&i(this.value,e.value))}hashCode(){return this._isRight?a(this.value)<<2:a(this.value)<<3}static pure(e){return new v(e)}static left(e){return y(e)}static right(e){return b(e)}static map2(e,t,r){return e.isLeft()?e:t.isLeft()?t:b(r(e.value,t.value))}static map3(e,t,r,n){return e.isLeft()?e:t.isLeft()?t:r.isLeft()?r:b(n(e.value,t.value,r.value))}static map4(e,t,r,n,i){return e.isLeft()?e:t.isLeft()?t:r.isLeft()?r:n.isLeft()?n:b(i(e.value,t.value,r.value,n.value))}static map5(e,t,r,n,i,a){return e.isLeft()?e:t.isLeft()?t:r.isLeft()?r:n.isLeft()?n:i.isLeft()?i:b(a(e.value,t.value,r.value,n.value,i.value))}static map6(e,t,r,n,i,a,s){return e.isLeft()?e:t.isLeft()?t:r.isLeft()?r:n.isLeft()?n:i.isLeft()?i:a.isLeft()?a:b(s(e.value,t.value,r.value,n.value,i.value,a.value))}static tailRecM(e,t){let r=e;for(;;){const e=t(r);if(!e.isRight())return e;const n=e.value;if(n.isRight())return b(n.value);r=n.value}}}class f extends g{constructor(e){super(e,"left")}}function y(e){return new f(e)}class v extends g{constructor(e){super(e,"right")}}function b(e){return new v(e)}const w={equals:(e,t)=>e?e.equals(t):!t,map:(e,t)=>t.map(e),ap:(e,t)=>t.ap(e),of:g.pure,chain:(e,t)=>t.flatMap(e),chainRec:(e,t)=>g.tailRecM(t,(t=>e(g.left,g.right,t)))};h(g,w,w);class C{constructor(e,t){this._isEmpty=null!=t?t:null==e,this.value=e}get(){if(!this._isEmpty)return this.value;throw new l("Option.get")}getOrElse(e){return this._isEmpty?e:this.value}orNull(){return this._isEmpty?null:this.value}orUndefined(){return this._isEmpty?void 0:this.value}getOrElseL(e){return this._isEmpty?e():this.value}orElse(e){return this._isEmpty?e:this}orElseL(e){return this._isEmpty?e():this}isEmpty(){return this._isEmpty}nonEmpty(){return!this._isEmpty}map(e){return this._isEmpty?k:I(e(this.value))}flatMap(e){return this._isEmpty?k:e(this.value)}chain(e){return this.flatMap(e)}ap(e){return e.flatMap((e=>this.map(e)))}filter(e){return this._isEmpty||!e(this.value)?k:this}fold(e,t){return this._isEmpty?e():t(this.value)}contains(e){return!this._isEmpty&&i(this.value,e)}exists(e){return!this._isEmpty&&e(this.value)}forAll(e){return this._isEmpty||e(this.value)}forEach(e){this._isEmpty||e(this.value)}equals(e){return null!=e&&(this.nonEmpty()&&e.nonEmpty()?i(this.value,e.value):this.isEmpty()&&e.isEmpty())}hashCode(){return this._isEmpty?2433880:null==this.value?9735524:a(this.value)<<2}static of(e){return null!=e?I(e):k}static some(e){return new C(e,!1)}static none(){return k}static empty(){return k}static pure(e){return I(e)}static map2(e,t,r){return e.nonEmpty()&&t.nonEmpty()?I(r(e.value,t.value)):k}static map3(e,t,r,n){return e.nonEmpty()&&t.nonEmpty()&&r.nonEmpty()?I(n(e.value,t.value,r.value)):k}static map4(e,t,r,n,i){return e.nonEmpty()&&t.nonEmpty()&&r.nonEmpty()&&n.nonEmpty()?I(i(e.value,t.value,r.value,n.value)):k}static map5(e,t,r,n,i,a){return e.nonEmpty()&&t.nonEmpty()&&r.nonEmpty()&&n.nonEmpty()&&i.nonEmpty()?I(a(e.value,t.value,r.value,n.value,i.value)):k}static map6(e,t,r,n,i,a,s){return e.nonEmpty()&&t.nonEmpty()&&r.nonEmpty()&&n.nonEmpty()&&i.nonEmpty()&&a.nonEmpty()?I(s(e.value,t.value,r.value,n.value,i.value,a.value)):k}static tailRecM(e,t){let r=e;for(;;){const e=t(r);if(!e.nonEmpty())return k;{const t=e.value;if(t.isRight())return I(t.value);r=t.value}}}}class S extends C{constructor(e){super(e,!1)}}function I(e){return new S(e)}const k=new class extends C{constructor(){super(void 0,!0)}},x={equals:(e,t)=>e?e.equals(t):!t,map:(e,t)=>t.map(e),ap:(e,t)=>t.ap(e),of:C.pure,chain:(e,t)=>t.flatMap(e),chainRec:(e,t)=>C.tailRecM(t,(t=>e(g.left,g.right,t)))};h(C,x,x);class A{constructor(e,t){this._isSuccess="success"===t,this.value=e}isSuccess(){return this._isSuccess}isFailure(){return!this._isSuccess}get(){if(!this._isSuccess)throw this.value;return this.value}getOrElse(e){return this._isSuccess?this.value:e}getOrElseL(e){return this._isSuccess?this.value:e()}orNull(){return this._isSuccess?this.value:null}orUndefined(){return this._isSuccess?this.value:void 0}orElse(e){return this._isSuccess?this:e}orElseL(e){return this._isSuccess?this:e()}failed(){return this._isSuccess?L(new l("try.failed()")):T(this.value)}fold(e,t){return this._isSuccess?t(this.value):e(this.value)}filter(e){if(!this._isSuccess)return this;try{return e(this.value)?this:L(new l(`Predicate does not hold for ${this.value}`))}catch(e){return L(e)}}flatMap(e){if(!this._isSuccess)return this;try{return e(this.value)}catch(e){return L(e)}}chain(e){return this.flatMap(e)}ap(e){return e.flatMap((e=>this.map(e)))}map(e){return this._isSuccess?A.of((()=>e(this.value))):this}forEach(e){this._isSuccess&&e(this.value)}recover(e){return this._isSuccess?this:A.of((()=>e(this.value)))}recoverWith(e){try{return this._isSuccess?this:e(this.value)}catch(e){return L(e)}}toOption(){return this._isSuccess?I(this.value):k}toEither(){return this._isSuccess?b(this.value):y(this.value)}equals(e){return null!=e&&(this._isSuccess?e._isSuccess&&i(this.value,e.value):!e._isSuccess&&i(this.value,e.value))}hashCode(){return this._isSuccess,a(this.value)}static of(e){try{return T(e())}catch(e){return L(e)}}static pure(e){return A.success(e)}static unit(){return P}static success(e){return T(e)}static failure(e){return L(e)}static raise(e){return L(e)}static map2(e,t,r){if(e.isFailure())return e;if(t.isFailure())return t;try{return T(r(e.value,t.value))}catch(e){return L(e)}}static map3(e,t,r,n){if(e.isFailure())return e;if(t.isFailure())return t;if(r.isFailure())return r;try{return T(n(e.value,t.value,r.value))}catch(e){return L(e)}}static map4(e,t,r,n,i){if(e.isFailure())return e;if(t.isFailure())return t;if(r.isFailure())return r;if(n.isFailure())return n;try{return T(i(e.value,t.value,r.value,n.value))}catch(e){return L(e)}}static map5(e,t,r,n,i,a){if(e.isFailure())return e;if(t.isFailure())return t;if(r.isFailure())return r;if(n.isFailure())return n;if(i.isFailure())return i;try{return T(a(e.value,t.value,r.value,n.value,i.value))}catch(e){return L(e)}}static map6(e,t,r,n,i,a,s){if(e.isFailure())return e;if(t.isFailure())return t;if(r.isFailure())return r;if(n.isFailure())return n;if(i.isFailure())return i;if(a.isFailure())return a;try{return T(s(e.value,t.value,r.value,n.value,i.value,a.value))}catch(e){return L(e)}}static tailRecM(e,t){let r=e;for(;;)try{const e=t(r);if(e.isFailure())return e;const n=e.get();if(n.isRight())return T(n.value);r=n.value}catch(e){return L(e)}}}class E extends A{constructor(e){super(e,"success")}}function T(e){return new E(e)}class _ extends A{constructor(e){super(e,"failure")}}function L(e){return new _(e)}const R={equals:(e,t)=>e?e.equals(t):!t,map:(e,t)=>t.map(e),ap:(e,t)=>t.ap(e),of:A.pure,chain:(e,t)=>t.flatMap(e),chainRec:(e,t)=>A.tailRecM(t,(t=>e(g.left,g.right,t)))};h(A,R,R);const P=T(void 0);class O{static of(e){return new M(e)}static empty(){return N}static collection(...e){return new $(e)}static cancelAll(e){let t=null;for(const r of e)try{r.cancel()}catch(e){t?t.push(e):t=[e]}if(t)throw 1===t.length?t[0]:new o(t)}}class M extends O{constructor(e){super(),this.thunk=e}cancel(){if(null!==this.thunk){const e=this.thunk;this.thunk=null,e()}}}class F{constructor(){this._funIsDummy=!0}cancel(){}}const N=new F;class D{static of(e){return new U(e)}static empty(){return new B}static alreadyCanceled(){return j}static collection(...e){return new $(e)}}class $ extends D{constructor(e){super(),this._refs=e}isCanceled(){return!this._refs}cancel(){if(this._refs)try{O.cancelAll(this._refs)}finally{delete this._refs}}}class U extends M{isCanceled(){return null===this.thunk}}class B extends D{constructor(){super(...arguments),this.canceled=!1}isCanceled(){return this.canceled}cancel(){this.canceled=!0}}const j=new class extends F{isCanceled(){return!0}};new class extends F{isCanceled(){return!0}cancel(){}update(e){return e.cancel(),this}};class W{constructor(e){this._underlying=e,this._canceled=!1}update(e){return this._canceled?e.cancel():this._underlying=e,this}isCanceled(){return this._canceled}cancel(){this._canceled||(this._canceled=!0,this._underlying&&(this._underlying.cancel(),delete this._underlying))}collapse(){if(this._underlying&&this._underlying instanceof W){const e=this._underlying;this._underlying=e._underlying,this._canceled=e._canceled}return this}clear(){return this._canceled||(this._underlying=void 0),this}static empty(){return new W}static of(e){return new W(O.of(e))}}class H{constructor(e){this._refs=e?e.slice(0):[]}cancel(){if(this._refs)try{O.cancelAll(this._refs)}finally{delete this._refs}}isCanceled(){return!this._refs}push(e){return this._refs?this._refs.push(e):e.cancel(),this}pop(){return this._refs&&this._refs.pop()||O.empty()}static empty(){return new H}static collection(...e){return new H(e)}}class G{constructor(e){this._underlying=e||N,this._chained=!1}update(e){if(!e)throw new u("cannot update to null value");return this._underlying?this._chained?(this._underlying.update(e),this):(this._underlying=e,this):(e.cancel(),this)}cancel(){this._underlying&&(this._underlying.cancel(),this._chained=!1,delete this._underlying)}clear(){this._underlying&&(this._underlying=N,this._chained=!1)}isCanceled(){return!this._underlying||this._chained&&this._underlying.isCanceled()}chainTo(e){if(!e)throw new u("cannot chain to null value");if(e===this)return this;if(!this._underlying)return e.cancel(),this;let t=e,r=!0;for(;t&&r;)if(t._chained){const e=t._underlying;if(e===this)return this;t=e,r=!!e}else t._underlying||(t=void 0),r=!1;if(t){const e=this._underlying;this._underlying=t,this._chained=!0,e instanceof F||t.update(e)}else this.cancel();return this}static empty(){return new G}}class z{toString(){return this.label.toUpperCase()}}const Y=1e3,V=1e6,q=1e3*V,X=60*q,Z=60*X,J=24*Z,K=9007199254740992,Q=Math.trunc||function(e){return isNaN(e)?NaN:e>0?Math.floor(e):Math.ceil(e)};function ee(e,t,r){return e>r?K:e<-r?-9007199254740992:e*t}const te=new class extends z{constructor(){super(...arguments),this.ord=0,this.label="nanoseconds"}convert(e,t){return t.toNanos(e)}toNanos(e){return e}toMicros(e){return Q(e/1e3)}toMillis(e){return Q(e/(V/1))}toSeconds(e){return Q(e/(q/1))}toMinutes(e){return Q(e/(X/1))}toHours(e){return Q(e/(Z/1))}toDays(e){return Q(e/(J/1))}};const re=new class extends z{constructor(){super(...arguments),this.ord=1,this.label="microseconds"}convert(e,t){return t.toMicros(e)}toNanos(e){return ee(e,1e3,Q(K/1e3))}toMicros(e){return e}toMillis(e){return Q(e/1e3)}toSeconds(e){return Q(e/(q/Y))}toMinutes(e){return Q(e/(X/Y))}toHours(e){return Q(e/(Z/Y))}toDays(e){return Q(e/(J/Y))}};const ne=new class extends z{constructor(){super(...arguments),this.ord=2,this.label="milliseconds"}convert(e,t){return t.toMillis(e)}toNanos(e){return ee(e,V/1,Q(K/(V/1)))}toMicros(e){return ee(e,1e3,Q(K/1e3))}toMillis(e){return e}toSeconds(e){return Q(e/1e3)}toMinutes(e){return Q(e/6e4)}toHours(e){return Q(e/(Z/V))}toDays(e){return Q(e/(J/V))}};const ie=new class extends z{constructor(){super(...arguments),this.ord=3,this.label="seconds"}convert(e,t){return t.toSeconds(e)}toNanos(e){return ee(e,q/1,Q(K/(q/1)))}toMicros(e){return ee(e,q/Y,Q(K/(q/Y)))}toMillis(e){return ee(e,1e3,Q(K/1e3))}toSeconds(e){return e}toMinutes(e){return Q(e/60)}toHours(e){return Q(e/3600)}toDays(e){return Q(e/86400)}};const ae=new class extends z{constructor(){super(...arguments),this.ord=4,this.label="minutes"}convert(e,t){return t.toMinutes(e)}toNanos(e){return ee(e,X/1,Q(K/(X/1)))}toMicros(e){return ee(e,X/Y,Q(K/(X/Y)))}toMillis(e){return ee(e,6e4,Q(K/6e4))}toSeconds(e){return ee(e,60,Q(K/60))}toMinutes(e){return e}toHours(e){return Q(e/60)}toDays(e){return Q(e/1440)}};const se=new class extends z{constructor(){super(...arguments),this.ord=5,this.label="hours"}convert(e,t){return t.toHours(e)}toNanos(e){return ee(e,Z/1,Q(K/(Z/1)))}toMicros(e){return ee(e,Z/Y,Q(K/(Z/Y)))}toMillis(e){return ee(e,Z/V,Q(K/(Z/V)))}toSeconds(e){return ee(e,3600,Q(K/3600))}toMinutes(e){return ee(e,60,Q(K/60))}toHours(e){return e}toDays(e){return Q(e/24)}};const oe=new class extends z{constructor(){super(...arguments),this.ord=6,this.label="days"}convert(e,t){return t.toDays(e)}toNanos(e){return ee(e,J/1,Q(K/(J/1)))}toMicros(e){return ee(e,J/Y,Q(K/(J/Y)))}toMillis(e){return ee(e,J/V,Q(K/(J/V)))}toSeconds(e){return ee(e,86400,Q(K/86400))}toMinutes(e){return ee(e,1440,Q(K/1440))}toHours(e){return ee(e,24,Q(K/24))}toDays(e){return e}};class le{constructor(e,t){if(isNaN(e))throw new u("NaN is not supported for a Duration");this.duration=Q(e),this.unit=t}isFinite(){return isFinite(this.duration)}toNanos(){return te.convert(this.duration,this.unit)}toMicros(){return re.convert(this.duration,this.unit)}toMillis(){return ne.convert(this.duration,this.unit)}toSeconds(){return ie.convert(this.duration,this.unit)}toMinutes(){return ae.convert(this.duration,this.unit)}toHours(){return se.convert(this.duration,this.unit)}toDays(){return oe.convert(this.duration,this.unit)}convertTo(e){return new le(e.convert(this.duration,this.unit),e)}negate(){switch(this.duration){case 1/0:return le.negInf();case-1/0:return le.inf();default:return new le(-this.duration,this.unit)}}plus(e){if(!isFinite(this.duration)){if(!isFinite(e.duration)&&this.duration!==e.duration)throw new u("cannot deal with two infinities with different signs, as that would be a NaN");return this}if(0===e.duration)return this;if(0===this.duration)return e;if(!isFinite(e.duration))return e;let t=this,r=e;return r.unit.ord<t.unit.ord&&(t=e,r=this),r=r.convertTo(t.unit),new le(t.duration+r.duration,t.unit)}minus(e){return this.plus(e.negate())}equals(e){function t(e,t){return e.unit.convert(t.duration,t.unit)===e.duration}return isFinite(this.duration)?this.unit.ord<=e.unit.ord?t(this,e):t(e,this):!isFinite(e.duration)&&this.duration===e.duration}hashCode(){return this.isFinite()?this.toNanos():this.duration===1/0?7540833725118015:422082410550358}toString(){return this.isFinite()?`${this.duration} ${this.unit.label}`:this.duration>=0?"[end of time]":"[beginning of time]"}static of(e){return"number"==typeof e?le.millis(e):e}static zero(){return new le(0,oe)}static inf(){return new le(1/0,oe)}static negInf(){return new le(-1/0,oe)}static nanos(e){return new le(e,te)}static micros(e){return new le(e,re)}static millis(e){return new le(e,ne)}static seconds(e){return new le(e,ie)}static minutes(e){return new le(e,ae)}static hours(e){return new le(e,se)}static days(e){return new le(e,oe)}}class ce{constructor(e){this._previous=[],this.get=e}set(e){return this.setL((()=>e))}setL(e){this._previous.push(this.get),this.get=e}revert(){const e=this._previous.pop();e&&(this.get=e)}bind(e,t){return this.bindL((()=>e),t)}bindL(e,t){const r=this.get,n=this._previous.slice(0),i=this;try{return i.get=e,t()}finally{i.get=r,i._previous=n}}static of(e){return new ce(e)}}function ue(e){if(!e)return[];if("[object Array]"===Object.prototype.toString.call(e))return e;const t=e[Symbol.iterator](),r=[];for(;;){const e=t.next();if(e.value&&r.push(e.value),e.done)return r}}const de=Math.log(2);function pe(e){if(e<0)throw new u("nr must be positive");const t=Math.ceil(function(e){return Math.log(e)/de}(e));return 1<<(t>30?30:t&t)}class me{constructor(e){switch(this.batchIndex=0,this.executionModel=e,e.type){case"alwaysAsync":this.executeBatched=this.executeAsync;break;case"synchronous":this.executeBatched=this.trampoline;break;case"batched":const t=e.recommendedBatchSize-1;this.executeBatched=e=>{const r=this.batchIndex+1&t;return r?(this.batchIndex=r,this.trampoline(e)):this.executeAsync(e)}}}scheduleWithFixedDelay(e,t,r){const n=(e,i,a)=>i.update(e.scheduleOnce(a,(()=>{r(),n(e,i,t)}))),i=W.empty();return n(this,i,e)}scheduleAtFixedRate(e,t,r){const n=(e,t,i,a)=>t.update(e.scheduleOnce(i,(()=>{const i=e.currentTimeMillis();r();const s=e.currentTimeMillis()-i,o=Math.max(0,a-s);n(e,t,a,o)}))),i=W.empty();return n(this,i,"number"==typeof e?e:e.toMillis(),"number"==typeof t?t:t.toMillis())}}me.global=ce.of((()=>ye));class he{constructor(e,t){switch(this.type=e,e){case"synchronous":this.recommendedBatchSize=1073741824;break;case"alwaysAsync":this.recommendedBatchSize=1;break;case"batched":this.recommendedBatchSize=pe(t||128)}}equals(e){return this.type===e.type&&this.recommendedBatchSize===e.recommendedBatchSize}hashCode(){return 47*s(this.type)+this.recommendedBatchSize}static synchronous(){return new he("synchronous")}static alwaysAsync(){return new he("alwaysAsync")}static batched(e){return new he("batched",e)}}he.global=ce.of((()=>he.batched()));class ge{constructor(e){this._isActive=!1,this._queue=[],this._reporter=e}execute(e){this._isActive?this._queue.push(e):this.runLoop(e)}runLoop(e){this._isActive=!0;try{let t=e;for(;t;){try{t()}catch(e){this._reporter(e)}t=this._queue.pop()}}finally{this._isActive=!1}}}class fe extends me{constructor(e=!1,t=he.global.get(),r){super(t),r&&(this.reportFailure=r),this._trampoline=new ge(this.reportFailure),this._useSetImmediate=!!e&&"function"==typeof setImmediate,this.executeAsync=this._useSetImmediate?e=>setImmediate(ve(e,this.reportFailure)):e=>setTimeout(ve(e,this.reportFailure))}executeAsync(e){throw new d("Constructor of GlobalScheduler wasn't executed")}trampoline(e){return this._trampoline.execute(e)}reportFailure(e){console.error(e)}currentTimeMillis(){return Date.now()}scheduleOnce(e,t){const r=Math.max(0,le.of(e).toMillis()),n=setTimeout((()=>{this.batchIndex=0;try{t()}catch(e){this.reportFailure(e)}}),r);return O.of((()=>clearTimeout(n)))}withExecutionModel(e){return new fe(this._useSetImmediate,e)}}const ye=new fe(!0);function ve(e,t){return()=>{try{e()}catch(e){t(e)}}}class be{transform(e,t){return this.transformWith((t=>be.pure(e(t),this._scheduler)),(e=>be.pure(t(e),this._scheduler)))}attempt(){return this.transform(y,b)}flatMap(e){return this.transformWith(be.raise,e)}chain(e){return this.flatMap(e)}ap(e){return e.flatMap((e=>this.map(e)))}forEach(e){this.onComplete((t=>t.forEach(e)))}map(e){return this.transformWith(be.raise,(t=>be.pure(e(t),this._scheduler)))}recoverWith(e){return this.transformWith(e,be.pure)}recover(e){return this.transformWith((t=>be.pure(e(t),this._scheduler)),(e=>be.pure(e,this._scheduler)))}then(e,t){if(!e&&!t)return this;const r=this._scheduler;return this.transformWith(Ae(t,(e=>be.raise(e,r)),r),Ae(e,(e=>be.pure(e,r)),r))}toPromise(){return new Promise(((e,t)=>{this.onComplete((r=>r.fold(t,e)))}))}delayResult(e){return this.transformWith((t=>be.delayedTick(e,this._scheduler).flatMap((()=>be.raise(t,this._scheduler)))),(t=>be.delayedTick(e,this._scheduler).map((()=>t))))}timeout(e){const t=be.raise(new p(le.of(e).toString()),this._scheduler);return this.timeoutTo(e,(()=>t))}timeoutTo(e,t){const r=[this,be.delayedTick(e,this._scheduler).flatMap((()=>t()))];return be.firstCompletedOf(r,this._scheduler)}static of(e,t=me.global.get()){const r=ke.empty(t);return t.executeAsync((()=>r.tryComplete(A.of(e)))),r.future()}static pure(e,t=me.global.get()){return new we(T(e),t)}static raise(e,t=me.global.get()){return new we(L(e),t)}static create(e,t=me.global.get()){const r=ke.empty(t);try{const t=e(r.complete);return r.future(t||void 0)}catch(e){return be.raise(e,t)}}static unit(e=me.global.get()){const t=e;let r=t._funCache&&t._funCache.futureUnit;return r||(r=new we(T(void 0),e),t._funCache=t._funCache||{},t._funCache.futureUnit=r),r}static delayedTick(e,t=me.global.get()){return be.create((r=>t.scheduleOnce(e,(()=>r(T(void 0))))),t)}static tailRecM(e,t,r=me.global.get()){return t(e).flatMap((e=>e.isRight()?be.pure(e.get(),r):be.tailRecM(e.swap().get(),t,r)))}static fromPromise(e,t=me.global.get()){return e instanceof be?e.withScheduler(t):be.create((t=>{e.then((e=>t(T(e))),(e=>t(L(e))))}),t)}static fromTry(e,t=me.global.get()){return new we(e,t)}static firstCompletedOf(e,t=me.global.get()){return function(e,t){return be.create((r=>{try{const n=Te(e,t);if(0===n.length)return r(L(new u("empty list of futures")));let i=!1;for(let e=0;e<n.length;e++){const a=e;n[e].onComplete((e=>{i?e.isFailure()&&t.reportFailure(e.failed().get()):(i=!0,Ee(n,t,a),r(e))}))}return O.of((()=>Ee(n,t)))}catch(e){r(L(e))}}),t)}(e,t)}static traverse(e,t=1/0,r=me.global.get()){return n=>function(e,t,r,n){if(r<=0)throw new u("parallelism <= 0");return be.of((()=>ue(e)),n).flatMap((e=>_e(e,t,r,n,0,[])))}(e,n,t,r)}static sequence(e,t=me.global.get()){return function(e,t){return be.create((r=>{try{const n=Te(e,t);if(0===n.length)return r(T([]));const i=O.of((()=>Ee(n,t)));let a=!1,s=0,o=[];for(let e=0;e<n.length;e++){const l=e;n[e].onComplete((e=>{s+=1,e.isSuccess()?a||(o[l]=e.get(),a=s===n.length,a&&r(T(o))):a?t.reportFailure(e.failed().get()):(a=!0,i.cancel(),r(e))}))}return i}catch(e){r(L(e))}}),t)}(e,t)}static map2(e,t,r,n=me.global.get()){return be.sequence([e,t],n).map((e=>r(e[0],e[1])))}static map3(e,t,r,n,i=me.global.get()){return be.sequence([e,t,r],i).map((e=>n(e[0],e[1],e[2])))}static map4(e,t,r,n,i,a=me.global.get()){return be.sequence([e,t,r,n],a).map((e=>i(e[0],e[1],e[2],e[3])))}static map5(e,t,r,n,i,a,s=me.global.get()){return be.sequence([e,t,r,n,i],s).map((e=>a(e[0],e[1],e[2],e[3],e[4])))}static map6(e,t,r,n,i,a,s,o=me.global.get()){return be.sequence([e,t,r,n,i,a],o).map((e=>s(e[0],e[1],e[2],e[3],e[4],e[5])))}}class we extends be{constructor(e,t){super(),this._value=e,this._scheduler=t}cancel(){}value(){return I(this._value)}withScheduler(e){return this._scheduler===e?this:new we(this._value,e)}onComplete(e){this._scheduler.executeBatched((()=>e(this._value)))}transformWith(e,t){return xe(this,e,t,this._scheduler)}toPromise(){return this._value.fold((e=>Promise.reject(e)),(e=>Promise.resolve(e)))}}class Ce{constructor(){this.id=null,this.ref=null}compressedRoot(){let e=this;for(;"chained"===e.id;)e=e.ref,this.ref=e;return e}value(){switch(this.id){case null:return k;case"complete":return I(this.ref);case"chained":return this.compressedRoot().value()}}tryComplete(e,t){switch(this.id){case null:const r=this.ref;if(this.ref=e,this.id="complete",r)for(let n=0;n<r.length;n++)t.executeBatched((()=>r[n](e)));return!0;case"complete":return!1;case"chained":const n=this.ref.compressedRoot(),i=n.tryComplete(e,t);return this.id="complete",this.ref=i?e:n.value().get(),i}}chainTo(e,t){switch(this.id){case null:const r=this.ref;if(this.id="chained",this.ref=e.compressedRoot(),r&&r.length>0)for(let n=0;n<r.length;n++)e.onComplete(r[n],t);break;case"chained":this.compressedRoot().chainTo(e.compressedRoot(),t);break;case"complete":e.tryComplete(this.ref,t)}}onComplete(e,t){switch(this.id){case null:this.ref||(this.ref=[]),this.ref.push(e);break;case"complete":t.executeBatched((()=>e(this.ref)));break;case"chained":this.ref.onComplete(e,t)}}}const Se={map:(e,t)=>t.map(e),ap:(e,t)=>t.ap(e),of:be.pure,chain:(e,t)=>t.flatMap(e),chainRec:(e,t)=>be.tailRecM(t,(t=>e(g.left,g.right,t)))};h(be,Se);class Ie extends be{constructor(e,t,r){super(),this._state=e,this._scheduler=r,t&&(this._cancelable=t)}value(){return this._state.value()}onComplete(e){return this._state.onComplete(e,this._scheduler)}cancel(){if(this._cancelable)try{this._cancelable.cancel()}finally{delete this._cancelable}}withScheduler(e){return this._scheduler===e?this:new Ie(this._state,this._cancelable,e)}transformWith(e,t){return xe(this,e,t,this._scheduler,this._cancelable)}}class ke{constructor(e,t){this.tryComplete=e=>this._state.tryComplete(e,this._scheduler),this.complete=e=>{if(!this.tryComplete(e))throw new c("Cannot complete a FutureMaker twice!")},this._state=e,this._scheduler=t}trySuccess(e){return this.tryComplete(T(e))}success(e){return this.complete(T(e))}tryFailure(e){return this.tryComplete(L(e))}failure(e){return this.complete(L(e))}chainTo(e){this._state.chainTo(e._state,this._scheduler)}future(e){switch(this._state.id){case"complete":return new we(this._state.ref,this._scheduler);default:return new Ie(this._state,e,this._scheduler)}}withScheduler(e){return this._scheduler===e?this:new ke(this._state,e)}static empty(e=me.global.get()){return new ke(new Ce,e)}static completed(e,t=me.global.get()){const r=new Ce;return r.id="complete",r.ref=e,new ke(r,t)}}function xe(e,t,r,n,i){const a=ke.empty(n),s=new G(i);return e.onComplete((e=>{let i;try{i=e.fold(t,r)}catch(e){i=be.raise(e)}if(i.value().isEmpty()){const e=i._cancelable;e&&e instanceof G?e.chainTo(s):!e||e instanceof F||s.update(e)}else s.clear();i instanceof Ie?i._state.chainTo(a._state,n):i.onComplete(a.tryComplete)})),a.future(s)}function Ae(e,t,r){return n=>{if("function"!=typeof e)return t(n);const i=e(n);return i?"function"==typeof i.then?be.fromPromise(i,r):be.pure(i,r):be.pure(n,r)}}function Ee(e,t,r=-1){const n=[];for(let t=0;t<e.length;t++)if(t!==r)try{e[t].cancel()}catch(e){n.push(e)}if(n.length>0)for(const e of n)t.reportFailure(e)}function Te(e,t){if(!e)return[];if("[object Array]"===Object.prototype.toString.call(e))return e;const r=[];try{const t=e[Symbol.iterator]();for(;;){const e=t.next();if(e.value&&r.push(e.value),e.done)break}return r}catch(e){throw Ee(r,t),e}}function _e(e,t,r,n,i,a){if(i>=e.length)return be.pure(a,n);let s=[],o=0;try{for(;i<e.length&&o<r;)s.push(t(e[i++])),o+=1;const l=be.sequence(s,n).map((e=>{for(let t=0;t<e.length;t++)a.push(e[t])}));return i>=e.length?l.map((()=>a)):l.flatMap((()=>_e(e,t,r,n,i,a)))}catch(e){return Ee(s,n),be.raise(e)}}const Le={next:()=>({done:!0})};function Re(e){if(!e)return Le;if("[object Array]"!==Object.prototype.toString.call(e))return e[Symbol.iterator]();const t=e;if(0===t.length)return Le;let r=0;return{next:()=>{const e=t[r++];return{done:r>=t.length,value:e}}}}class Pe{get(){return function(e){let t=e,r=null,n=null;for(;;)switch(t._tag){case"now":const e=t,i=Be(r,n);if(!i)return e.value;r=null,t=i(e.value);break;case"always":case"once":t=new Oe(t.get());break;case"suspend":t=t.thunk();break;case"flatMap":r&&(n||(n=[]),n.push(r));const a=t;r=a.f,t=a.source}}(this)}map(e){return new $e(this,(t=>Pe.now(e(t))))}flatMap(e){return new $e(this,e)}chain(e){return this.flatMap(e)}ap(e){return e.flatMap((e=>this.map(e)))}memoize(){switch(this._tag){case"now":case"once":return this;case"always":return new Fe(this.get);default:return new Fe((()=>this.get()))}}forEachL(e){return this.map(e)}forEach(e){this.forEachL(e).get()}static of(e){return Pe.always(e)}static pure(e){return Pe.now(e)}static now(e){return new Oe(e)}static unit(){return Me}static always(e){return new Ne(e)}static once(e){return new Fe(e)}static suspend(e){return new De(e)}static defer(e){return Pe.suspend(e)}static tailRecM(e,t){return t(e).flatMap((e=>e.isRight()?Pe.now(e.get()):Pe.tailRecM(e.swap().get(),t)))}static sequence(e){return function(e){return Pe.of((()=>Re(e))).flatMap((e=>je([],e)))}(e)}static map2(e,t,r){return Pe.sequence([e,t]).map((e=>r(e[0],e[1])))}static map3(e,t,r,n){return Pe.sequence([e,t,r]).map((e=>n(e[0],e[1],e[2])))}static map4(e,t,r,n,i){return Pe.sequence([e,t,r,n]).map((e=>i(e[0],e[1],e[2],e[3])))}static map5(e,t,r,n,i,a){return Pe.sequence([e,t,r,n,i]).map((e=>a(e[0],e[1],e[2],e[3],e[4])))}static map6(e,t,r,n,i,a,s){return Pe.sequence([e,t,r,n,i,a]).map((e=>s(e[0],e[1],e[2],e[3],e[4],e[5])))}}class Oe extends Pe{constructor(e){super(),this.value=e,this._tag="now"}get(){return this.value}toString(){return`Eval.now(${JSON.stringify(this.value)})`}}const Me=new Oe(void 0);class Fe extends Pe{constructor(e){super(),this._tag="once",this._thunk=e}get(){if(this._thunk){try{this._cache=this._thunk(),this._isError=!1}catch(e){this._cache=e,this._isError=!0}delete this._thunk}if(this._isError)throw this._cache;return this._cache}toString(){return"Eval.once([thunk])"}}class Ne extends Pe{constructor(e){super(),this._tag="always",this.get=e}toString(){return"Eval.always([thunk])"}}class De extends Pe{constructor(e){super(),this.thunk=e,this._tag="suspend"}toString(){return"Eval.suspend([thunk])"}}class $e extends Pe{constructor(e,t){super(),this.source=e,this.f=t,this._tag="flatMap"}toString(){return`Eval#FlatMap(${String(this.source)}, [function])`}}const Ue={map:(e,t)=>t.map(e),ap:(e,t)=>t.ap(e),of:Pe.pure,chain:(e,t)=>t.flatMap(e),chainRec:(e,t)=>Pe.tailRecM(t,(t=>e(g.left,g.right,t)))};function Be(e,t){return e||(t&&t.length>0?t.pop():null)}function je(e,t){for(;;){const r=t.next(),n=r.done;if(r.value){return r.value.flatMap((r=>(e.push(r),n?Pe.pure(e):je(e,t))))}if(n)return Pe.pure(e)}}h(Pe,Ue);class We{run(e=me.global.get()){return function(e,t){let r=e,n=null,i=null;const a=t.executionModel.recommendedBatchSize-1;let s=t.batchIndex;for(;;)if(r instanceof A){if(r.isSuccess()){const e=et(n,i);if(!e)return t.batchIndex=s,be.pure(r.get());try{r=e(r.get())}catch(e){r=new He(A.failure(e))}}else{const e=r.failed().get(),a=tt(n,i);if(!a)return t.batchIndex=s,be.raise(e);try{r=a(e)}catch(e){r=new He(A.failure(e))}}n=null;const e=s+1&a;if(!e)return st(r,t,n,i,!0);s=e}else switch(r._tag){case"pure":r=r.value;break;case"always":r=A.of(r.thunk);break;case"once":r=r.runTry();break;case"flatMap":const e=r;n&&(i||(i=[]),i.push(n)),n=e.g?[e.f,e.g]:e.f,r=e.source;break;case"async":case"memoize":return st(r,t,n,i,!1)}}(this,e)}runOnComplete(e,t=me.global.get()){return at(this,t,null,e,null,null,null)||O.empty()}attempt(){return this.transform((e=>g.left(e)),g.right)}asyncBoundary(e){return this.flatMap((t=>We.shift(e).map((()=>t))))}chain(e){return this.flatMap(e)}delayExecution(e){return We.delayedTick(e).flatMap((()=>this))}delayResult(e){return this.transformWith((t=>We.delayedTick(e).flatMap((()=>We.raise(t)))),(t=>We.delayedTick(e).map((()=>t))))}doOnFinish(e){return this.transformWith((t=>e(I(t)).flatMap((()=>We.raise(t)))),(t=>e(k).map((()=>t))))}doOnCancel(e){return We.asyncUnsafe(((t,r)=>{const n=t.scheduler;n.trampoline((()=>{const i=t.connection;i.push(O.of((()=>e.run(n)))),We.unsafeStart(this,t,ot(n,i,r))}))}))}executeForked(e){return We.fork(this,e)}executeWithModel(e){return We.asyncUnsafe(((t,r)=>{const n=t.scheduler.withExecutionModel(e),i=new Ze(n,t.connection,t.options);n.trampoline((()=>We.unsafeStart(this,i,r)))}))}executeWithOptions(e){return We.asyncUnsafe(((t,r)=>{const n=t.scheduler,i=new Ze(n,t.connection,e);n.trampoline((()=>We.unsafeStart(this,i,r)))}))}flatMap(e){return new Ve(this,e)}ap(e){return e.flatMap((e=>this.map(e)))}followedBy(e){return this.flatMap((()=>e))}forEach(e){return this.map(e)}forEffect(e){return this.flatMap((t=>e.map((()=>t))))}map(e){return new Ve(this,(t=>We.now(e(t))))}memoize(){switch(this._tag){case"pure":return this;case"always":return new ze(this.thunk,!1);case"memoize":const e=this;return e.onlySuccess?new Xe(this,!1):e;default:return new Xe(this,!1)}}memoizeOnSuccess(){switch(this._tag){case"pure":case"once":case"memoize":return this;case"always":return new ze(this.thunk,!0);default:return new Xe(this,!0)}}recover(e){return this.recoverWith((t=>We.now(e(t))))}recoverWith(e){return this.transformWith(e,We.now)}timeout(e){const t=We.raise(new p(le.of(e).toString()));return this.timeoutTo(e,t)}timeoutTo(e,t){const r=[this,We.delayedTick(e).flatMap((()=>t))];return We.firstCompletedOf(r)}transform(e,t){return this.transformWith((t=>We.now(e(t))),(e=>We.now(t(e))))}transformWith(e,t){return new Ve(this,t,e)}static always(e){return new Ye(e)}static async(e){return We.asyncUnsafe(((t,r)=>{const n=t.scheduler,i=t.connection;n.trampoline((()=>{const t=ot(n,i,r);try{const r=e(n,t);i.push(r||O.empty())}catch(e){t(L(e))}}))}))}static asyncUnsafe(e){return new qe(e)}static defer(e){return We.unit().flatMap((()=>e()))}static deferAction(e){return We.asyncUnsafe(((t,r)=>{const n=t.scheduler;let i;try{i=e(n)}catch(e){i=We.raise(e)}n.trampoline((()=>We.unsafeStart(i,t,r)))}))}static deferFuture(e){return We.suspend((()=>We.fromFuture(e())))}static deferFutureAction(e){return We.deferAction((t=>We.fromFuture(e(t))))}static delayedTick(e){return We.asyncUnsafe(((t,r)=>{const n=t.connection,i=t.scheduler.scheduleOnce(e,(()=>{n.pop(),r(A.unit())}));n.push(i)}))}static firstCompletedOf(e){return ut(e,be.firstCompletedOf)}static fromFuture(e){return e.value().isEmpty()?We.asyncUnsafe(((t,r)=>{t.connection.push(e),e.onComplete((e=>{t.connection.pop(),r(e)}))})):We.fromTry(e.value().get())}static fromTry(e){return new He(e)}static fork(e,t){return We.shift(t).flatMap((()=>e))}static map2(e,t,r){return We.sequence([e,t]).map((e=>r(e[0],e[1])))}static map3(e,t,r,n){return We.sequence([e,t,r]).map((e=>n(e[0],e[1],e[2])))}static map4(e,t,r,n,i){return We.sequence([e,t,r,n]).map((e=>i(e[0],e[1],e[2],e[3])))}static map5(e,t,r,n,i,a){return We.sequence([e,t,r,n,i]).map((e=>a(e[0],e[1],e[2],e[3],e[4])))}static map6(e,t,r,n,i,a,s){return We.sequence([e,t,r,n,i,a]).map((e=>s(e[0],e[1],e[2],e[3],e[4],e[5])))}static now(e){return new He(T(e))}static of(e){return We.always(e)}static once(e){return new ze(e,!1)}static parMap2(e,t,r){return We.gather([e,t]).map((e=>r(e[0],e[1])))}static parMap3(e,t,r,n){return We.gather([e,t,r]).map((e=>n(e[0],e[1],e[2])))}static parMap4(e,t,r,n,i){return We.gather([e,t,r,n]).map((e=>i(e[0],e[1],e[2],e[3])))}static parMap5(e,t,r,n,i,a){return We.gather([e,t,r,n,i]).map((e=>a(e[0],e[1],e[2],e[3],e[4])))}static parMap6(e,t,r,n,i,a,s){return We.gather([e,t,r,n,i,a]).map((e=>s(e[0],e[1],e[2],e[3],e[4],e[5])))}static pure(e){return We.now(e)}static raise(e){return new He(L(e))}static sequence(e){return function(e){return We.of((()=>Re(e))).flatMap((e=>ct([],e)))}(e)}static gather(e){return ut(e,be.sequence)}static shift(e){return e?Ke(e):Qe}static suspend(e){return We.unit().flatMap((()=>e()))}static tailRecM(e,t){try{return t(e).flatMap((e=>e.isRight()?We.now(e.get()):We.tailRecM(e.swap().get(),t)))}catch(e){return We.raise(e)}}static unit(){return Ge}static unsafeStart(e,t,r){return at(e,t.scheduler,t,r,null,null,null)}}class He extends We{constructor(e){super(),this.value=e,this._tag="pure"}}const Ge=new He(A.unit());class ze extends We{constructor(e,t){super(),this._tag="once",this._thunk=e,this.onlyOnSuccess=t}memoize(){return this.onlyOnSuccess&&this._thunk?new ze(this._thunk,!1):this}runTry(){if(this._thunk){const e=A.of(this._thunk);return!e.isSuccess()&&this.onlyOnSuccess||(delete this._thunk,delete this.onlyOnSuccess,this.cache=e),e}return this.cache}}class Ye extends We{constructor(e){super(),this.thunk=e,this._tag="always"}}class Ve extends We{constructor(e,t,r){super(),this.source=e,this.f=t,this.g=r,this._tag="flatMap"}}class qe extends We{constructor(e){super(),this.register=e,this._tag="async"}}class Xe extends We{constructor(e,t){super(),this._tag="memoize",this.source=e,this.result=null,this.onlySuccess=t}}class Ze{constructor(e,t=new H,r={autoCancelableRunLoops:!1}){this.scheduler=e,this.options=r,this.connection=t,r.autoCancelableRunLoops&&(this.shouldCancel=()=>t.isCanceled())}markAsyncBoundary(){this.scheduler.batchIndex=0}shouldCancel(){return!1}}const Je={map:(e,t)=>t.map(e),ap:(e,t)=>t.ap(e),of:We.pure,chain:(e,t)=>t.flatMap(e),chainRec:(e,t)=>We.tailRecM(t,(t=>e(g.left,g.right,t)))};function Ke(e){return We.asyncUnsafe(((t,r)=>{(e||t.scheduler).executeAsync((()=>r(A.unit())))}))}h(We,Je);const Qe=Ke();function et(e,t){let r;return e?r=e:t&&t.length>0&&(r=t.pop()),r?"function"==typeof r?r:r[0]:null}function tt(e,t){let r=e;do{if(r&&"function"!=typeof r)return r[1];r=t?t.pop():null}while(r);return null}class rt{constructor(e,t){this.context=e,this.callback=t,this.canCall=!1,this.bFirst=null,this.bRest=null,this.asFunction=this.signal.bind(this)}prepare(e,t){this.bFirst=e,this.bRest=t,this.canCall=!0}signal(e){this.canCall?(this.canCall=!1,at(new He(e),this.context.scheduler,this.context,this.callback,this,this.bFirst,this.bRest)):e.isFailure()&&this.context.scheduler.reportFailure(e.failed().get())}}function nt(e,t,r,n,i,a,s){if(!t.shouldCancel()){t.scheduler.batchIndex=s;const o=n||new rt(t,r);o.prepare(i,a),e(t,o.asFunction)}}function it(e,t,r,n,i,a){t.shouldCancel()||t.scheduler.executeAsync((()=>{at(e,t.scheduler,t,r,n,i,a)}))}function at(e,t,r,n,i,a,s){let o=e,l=a,c=s;const u=t.executionModel.recommendedBatchSize-1;let d=t.batchIndex;for(;;)if(o instanceof A){if(o.isSuccess()){const e=et(l,c);if(!e)return t.batchIndex=d,n(o);try{o=e(o.get())}catch(e){o=A.failure(e)}}else{const e=tt(l,c);if(!e)return t.batchIndex=d,n(o);try{o=e(o.failed().get())}catch(e){o=A.failure(e)}}l=null;const e=d+1&u;if(!e){const e=r||new Ze(t);return it(o instanceof A?new He(o):o,e,n,i,l,c),e.connection}d=e}else switch(o._tag){case"pure":o=o.value;break;case"always":o=A.of(o.thunk);break;case"once":o=o.runTry();break;case"flatMap":const e=o;l&&(c||(c=[]),c.push(l)),l=e.g?[e.f,e.g]:e.f,o=e.source;break;case"async":const a=o,s=r||new Ze(t);return nt(a.register,s,n,i,l,c,d),s.connection;case"memoize":return lt(o,t,r,n,l,c,d)}}function st(e,t,r,n,i){return be.create((a=>{const s=new Ze(t);return i?it(e,s,a,null,r,n):at(e,t,s,a,null,r,n),s.connection}))}function ot(e,t,r){let n=!1;return i=>{n?i.isFailure()&&e.reportFailure(i.failed().get()):(n=!0,e.trampoline((()=>{t.pop(),r(i)})))}}function lt(e,t,r,n,i,a,s){let o;if(t.batchIndex=s,e.result)o=e.result;else{const r=st(e.source,t,null,null,!1);r.value().isEmpty()?(e.result=r,o=r,r.onComplete((t=>{t.isSuccess()||!e.onlySuccess?(e.result=t,delete e.source):e.result=null}))):(o=r.value().get(),!o.isSuccess()&&e.onlySuccess||(e.result=o))}at(o instanceof A?new He(o):We.fromFuture(o),t,r,n,null,i,a)}function ct(e,t){for(;;){const r=t.next(),n=r.done;if(r.value){return r.value.flatMap((r=>(e.push(r),n?We.pure(e):ct(e,t))))}if(n)return We.pure(e)}}function ut(e,t){return We.asyncUnsafe(((r,n)=>{r.scheduler.trampoline((()=>{let i=!0;try{const a=[],s=ue(e);i=!1;for(let e=0;e<s.length;e++){const t=s[e].run(r.scheduler);a.push(t)}const o=t(a,r.scheduler);r.connection.push(o),o.onComplete(ot(r.scheduler,r.connection,n))}catch(e){i?n(L(e)):r.scheduler.reportFailure(e)}}))}))}},77150:(e,t,r)=>{"use strict";r.d(t,{R:()=>s});var n=r(59312),i=r(14601),a=r(46601);function s(e){return function(t){return t.lift(new o(e))}}var o=function(){function e(e){this.closingSelector=e}return e.prototype.call=function(e,t){return t.subscribe(new l(e,this.closingSelector))},e}(),l=function(e){function t(t,r){var n=e.call(this,t)||this;return n.closingSelector=r,n.subscribing=!1,n.openBuffer(),n}return n.ZT(t,e),t.prototype._next=function(e){this.buffer.push(e)},t.prototype._complete=function(){var t=this.buffer;t&&this.destination.next(t),e.prototype._complete.call(this)},t.prototype._unsubscribe=function(){this.buffer=void 0,this.subscribing=!1},t.prototype.notifyNext=function(){this.openBuffer()},t.prototype.notifyComplete=function(){this.subscribing?this.complete():this.openBuffer()},t.prototype.openBuffer=function(){var e=this.closingSubscription;e&&(this.remove(e),e.unsubscribe());var t,r=this.buffer;this.buffer&&this.destination.next(r),this.buffer=[];try{t=(0,this.closingSelector)()}catch(e){return this.error(e)}e=new i.w,this.closingSubscription=e,this.add(e),this.subscribing=!0,e.add((0,a.ft)(t,new a.IY(this))),this.subscribing=!1},t}(a.Ds)}}]);